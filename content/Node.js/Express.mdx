---
title: "ä»é›¶åˆ° Web å¸å›½ï¼šExpress.js çš„ Node.jsé­”æ³•åˆ©å™¨ ğŸš€"
date: "2024-01-20"
description: "æ·±å…¥æ¢ç´¢Express.jsçš„æ ¸å¿ƒåŸç†ã€è®¾è®¡å“²å­¦ä¸æœ€ä½³å®è·µï¼Œå¸¦ä½ ä»é›¶æ‰“é€ é«˜æ•ˆã€å¯æ‰©å±•çš„Node.js Webåº”ç”¨ï¼Œé€‚åˆå‰ç«¯å¼€å‘è€…å¿«é€Ÿä¸Šæ‰‹å¹¶æ·±å…¥ç†è§£ã€‚"
keywords: "Express.js, Node.js, Webå¼€å‘, åç«¯æ¡†æ¶, ä¸­é—´ä»¶, RESTful API, æ€§èƒ½ä¼˜åŒ–, æœ€ä½³å®è·µ"
author: "æ™“é¾™"
image: "/images/hero/expressjs.jpg"
tags: ["Express.js", "Node.js", "Webå¼€å‘", "åç«¯å¼€å‘"]
category: "Node.js"
---

> â€œå¥½çš„æ¡†æ¶å°±åƒä¸€æŠŠç‘å£«å†›åˆ€ï¼šå°å·§ã€çµæ´»ã€åŠŸèƒ½å¼ºå¤§ï¼Œéšæ—¶åº”å¯¹å„ç§åœºæ™¯ã€‚â€  
> â€”â€” æŸåŒ¿åå¼€å‘è€…ï¼ˆå¯èƒ½æ˜¯å–äº†å¤ªå¤šå’–å•¡åè¯´çš„ï¼‰

å¦‚æœä½ æ˜¯ä¸€ä½å‰ç«¯å¼€å‘è€…ï¼Œä¹ æƒ¯äº†Reactçš„ç»„ä»¶åŒ–é­”æ³•æˆ–Vueçš„å“åº”å¼ä¼˜é›…ï¼Œçªç„¶è¢«è¦æ±‚â€œå†™ä¸ªåç«¯APIâ€ï¼Œæ˜¯ä¸æ˜¯æœ‰ç‚¹åƒè¢«æ‰”è¿›äº†ä¸€ä¸ªé™Œç”Ÿçš„é­”æ³•æ£®æ—ï¼ŸğŸŒ² åˆ«æ…Œï¼Œ**Express.js** å°±æ˜¯ä½ çš„é­”æ³•æŒ‡å—é’ˆï¼å®ƒè½»é‡ã€çµæ´»ã€å¼ºå¤§ï¼Œèƒ½è®©ä½ åœ¨Node.jsçš„æµ·æ´‹ä¸­ä¹˜é£ç ´æµªï¼Œå¿«é€Ÿæ„å»ºä»ç®€å•APIåˆ°å¤æ‚Webåº”ç”¨çš„â€œå¸å›½â€ã€‚ğŸ°

è¿™ç¯‡åšå®¢å°†å¸¦ä½ ä»Expressçš„â€œèµ·è·‘çº¿â€åˆ°â€œWebå¸å›½â€çš„å·…å³°ï¼Œæ·±å…¥åŸç†ã€å‰–æä¸­é—´ä»¶ã€åˆ†äº«æœ€ä½³å®è·µï¼Œç”šè‡³èŠèŠå®ƒçš„è®¾è®¡å“²å­¦å’Œå¼€å‘è€…çš„å¿ƒè·¯å†ç¨‹ã€‚æˆ‘ä»¬ä¼šç”¨å¹½é»˜çš„ç¬”è§¦ã€æ¸…æ™°çš„è¡¨æ ¼ã€å®ç”¨çš„ä»£ç ç¤ºä¾‹ï¼Œä»¥åŠä¸€äº›çµæ„Ÿè¿¸å‘çš„ç±»æ¯”ï¼Œè®©ä½ ä¸ä»…å­¦åˆ°æŠ€æœ¯ï¼Œè¿˜èƒ½æ„Ÿå—åˆ°ç¼–ç¨‹çš„ä¹è¶£ã€‚å‡†å¤‡å¥½äº†å—ï¼Ÿè®©æˆ‘ä»¬å¼€å§‹è¿™åœºå†’é™©å§ï¼ğŸ§™â€â™‚ï¸

## ç›®å½•

1. [Express.jsæ˜¯ä»€ä¹ˆï¼Ÿä»â€œHello Worldâ€åˆ°Webé­”æ³•](#express-jsæ˜¯ä»€ä¹ˆä»hello-worldåˆ°webé­”æ³•)
2. [Expressçš„æ ¸å¿ƒï¼šä¸­é—´ä»¶çš„é­”æ³•ä¸å“²å­¦](#expressçš„æ ¸å¿ƒä¸­é—´ä»¶çš„é­”æ³•ä¸å“²å­¦)
3. [è·¯ç”±ï¼šä½ çš„Webå¸å›½äº¤é€šæ¢çº½](#è·¯ç”±ä½ çš„webå¸å›½äº¤é€šæ¢çº½)
4. [æ„å»ºRESTful APIï¼šä»é›¶åˆ°è‹±é›„](#æ„å»ºrestful-apiä»é›¶åˆ°è‹±é›„)
5. [æ€§èƒ½ä¼˜åŒ–ï¼šè®©Expressè·‘å¾—åƒé£ä¸€æ ·å¿«](#æ€§èƒ½ä¼˜åŒ–è®©expressè·‘å¾—åƒé£ä¸€æ ·å¿«)
6. [å®‰å…¨å®è·µï¼šä¸ºä½ çš„Webå¸å›½ç­‘èµ·åŸå¢™](#å®‰å…¨å®è·µä¸ºä½ çš„webå¸å›½ç­‘èµ·åŸå¢™)
7. [æœ€ä½³å®è·µä¸ä»£ç ç»„ç»‡ï¼šä¼˜é›…åœ°ç®¡ç†ä½ çš„å¸å›½](#æœ€ä½³å®è·µä¸ä»£ç ç»„ç»‡ä¼˜é›…åœ°ç®¡ç†ä½ çš„å¸å›½)
8. [Expressçš„ç”Ÿæ€ä¸æ‰©å±•ï¼šä»å•å…µä½œæˆ˜åˆ°å†›å›¢å‡ºå‡»](#expressçš„ç”Ÿæ€ä¸æ‰©å±•ä»å•å…µä½œæˆ˜åˆ°å†›å›¢å‡ºå‡»)
9. [è®¾è®¡å“²å­¦ä¸æ„Ÿæ‚Ÿï¼šExpressæ•™ä¼šæˆ‘ä»¬çš„ç¼–ç¨‹æ™ºæ…§](#è®¾è®¡å“²å­¦ä¸æ„Ÿæ‚Ÿexpressæ•™ä¼šæˆ‘ä»¬çš„ç¼–ç¨‹æ™ºæ…§)
10. [æ€»ç»“ï¼šä»é›¶åˆ°å¸å›½çš„æ—…ç¨‹](#æ€»ç»“ä»é›¶åˆ°å¸å›½çš„æ—…ç¨‹)

---

## Express.jsæ˜¯ä»€ä¹ˆï¼Ÿä»â€œHello Worldâ€åˆ°Webé­”æ³•

Express.jsæ˜¯Node.jsç”Ÿæ€ä¸­æœ€æµè¡Œçš„Webæ¡†æ¶ï¼Œå·ç§°â€œæç®€ä¸»ä¹‰â€çš„ä»£åè¯ã€‚å®ƒçš„æ ¸å¿ƒç†å¿µå¯ä»¥ç”¨ä¸€å¥åè¨€æ¦‚æ‹¬ï¼š

> â€œLess is more.â€  
> â€”â€” å»ºç­‘å¤§å¸ˆå¯†æ–¯Â·å‡¡å¾·ç½—

Expressæ²¡æœ‰å¤æ‚çš„é…ç½®ï¼Œä¹Ÿæ²¡æœ‰è‡ƒè‚¿çš„åŠŸèƒ½ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªè½»é‡çº§çš„æ¡†æ¶ï¼Œè®©ä½ ç”¨æœ€å°‘çš„ä»£ç å®ç°å¼ºå¤§çš„åŠŸèƒ½ã€‚æ— è®ºæ˜¯æ„å»ºä¸€ä¸ªç®€å•çš„APIï¼Œè¿˜æ˜¯ä¸€ä¸ªå¤æ‚çš„Webåº”ç”¨ï¼ŒExpresséƒ½èƒ½èƒœä»»ã€‚

### å¿«é€Ÿä¸Šæ‰‹ï¼šä¸€ä¸ªâ€œHello Worldâ€ç¤ºä¾‹

è®©æˆ‘ä»¬ä»æœ€ç®€å•çš„Expressåº”ç”¨å¼€å§‹ï¼Œæ„Ÿå—å®ƒçš„é­”æ³•ï¼š

```javascript
const express = require('express');
const app = express();
const port = 3000;

app.get('/', (req, res) => {
  res.send('Hello, Web Empire! ğŸŒ');
});

app.listen(port, () => {
  console.log(`Server running at http://localhost:${port}`);
});
```

ä¿å­˜ä¸º`app.js`ï¼Œè¿è¡Œ`node app.js`ï¼Œæ‰“å¼€æµè§ˆå™¨è®¿é—®`http://localhost:3000`ï¼Œä½ ä¼šçœ‹åˆ°â€œHello, Web Empire! ğŸŒâ€ã€‚æ˜¯ä¸æ˜¯ç®€å•å¾—åƒå–æ¯å’–å•¡ï¼Ÿâ˜•

*Tips: ç¡®ä¿å·²å®‰è£…Node.jså’ŒExpressï¼ˆ`npm install express`ï¼‰ï¼Œå¦åˆ™ä½ çš„é­”æ³•æ£’ä¼šå¤±çµå“¦ï¼*

### Expressçš„æ ¸å¿ƒç‰¹æ€§

Expressçš„é­…åŠ›åœ¨äºå®ƒçš„**ç®€æ´**ä¸**çµæ´»æ€§**ã€‚ä»¥ä¸‹æ˜¯å®ƒçš„æ ¸å¿ƒç‰¹æ€§ï¼Œé…ä¸Šä¸€å¼ æ¸…æ™°çš„è¡¨æ ¼ï¼š

| ç‰¹æ€§           | æè¿°                                                                 | é€‚åˆåœºæ™¯                     |
|----------------|----------------------------------------------------------------------|------------------------------|
| **ä¸­é—´ä»¶**     | æ ¸å¿ƒæœºåˆ¶ï¼Œå…è®¸åœ¨è¯·æ±‚å’Œå“åº”ä¹‹é—´æ’å…¥è‡ªå®šä¹‰é€»è¾‘                          | æ—¥å¿—ã€è®¤è¯ã€é”™è¯¯å¤„ç†         |
| **è·¯ç”±**       | çµæ´»å®šä¹‰URLè·¯å¾„ä¸å¤„ç†å‡½æ•°çš„æ˜ å°„                                      | APIè®¾è®¡ã€é¡µé¢å¯¼èˆª            |
| **æ¨¡æ¿å¼•æ“**   | æ”¯æŒPugã€EJSç­‰ï¼Œè½»æ¾ç”ŸæˆåŠ¨æ€HTML                                    | æœåŠ¡ç«¯æ¸²æŸ“ã€ä¼ ç»ŸWebåº”ç”¨      |
| **è½»é‡é«˜æ•ˆ**   | æç®€æ ¸å¿ƒï¼Œæ€§èƒ½ä¼˜å¼‚ï¼Œé€‚åˆé«˜å¹¶å‘åœºæ™¯                                   | å¾®æœåŠ¡ã€å®æ—¶åº”ç”¨             |
| **ç”Ÿæ€ä¸°å¯Œ**   | ä¸MongoDBã€Redisã€Socket.IOç­‰æ— ç¼é›†æˆ                                | æ•°æ®åº“æ“ä½œã€å®æ—¶é€šä¿¡         |

ç±»æ¯”ä¸€ä¸‹ï¼ŒExpresså°±åƒä¸€ä¸ªâ€œä¹é«˜ç§¯æœ¨â€ï¼šæ ¸å¿ƒæ¡†æ¶æ˜¯åŸºç¡€æ¨¡å—ï¼Œä½ å¯ä»¥æ ¹æ®éœ€è¦æ‹¼æ¥å„ç§åŠŸèƒ½ï¼Œæ„å»ºä»ç®€å•åšå®¢åˆ°å®æ—¶èŠå¤©å®¤çš„ä»»ä½•åº”ç”¨ã€‚

### ä¸ºä»€ä¹ˆé€‰æ‹©Expressï¼Ÿ

1. **å­¦ä¹ æ›²çº¿å¹³æ»‘**ï¼šå¯¹äºå‰ç«¯å¼€å‘è€…ï¼ŒExpressçš„APIè®¾è®¡ç›´è§‚ï¼Œåƒå†™JavaScriptä¸€æ ·è‡ªç„¶ã€‚
2. **ç¤¾åŒºå¼ºå¤§**ï¼šnpmä¸Šæ— æ•°çš„ä¸­é—´ä»¶å’Œæ’ä»¶ï¼Œè§£å†³å‡ ä¹æ‰€æœ‰å¸¸è§é—®é¢˜ã€‚
3. **æ€§èƒ½ä¼˜å¼‚**ï¼šåŸºäºNode.jsçš„å¼‚æ­¥éé˜»å¡æ¨¡å‹ï¼Œå¤„ç†é«˜å¹¶å‘å¦‚é±¼å¾—æ°´ã€‚
4. **çµæ´»è‡ªç”±**ï¼šæ²¡æœ‰è¿‡å¤šçº¦æŸï¼Œæƒ³æ€ä¹ˆç©å°±æ€ä¹ˆç©ï¼

*Tips: å¦‚æœä½ æ˜¯Reactå¼€å‘è€…ï¼ŒExpresså¯ä»¥å®Œç¾ä½œä¸ºä½ çš„APIåç«¯ï¼Œä¸Next.jsçš„API Routesç›¸æ¯”ï¼ŒExpressæ›´é€‚åˆéœ€è¦é«˜åº¦è‡ªå®šä¹‰çš„åœºæ™¯ã€‚*

---

## Expressçš„æ ¸å¿ƒï¼šä¸­é—´ä»¶çš„é­”æ³•ä¸å“²å­¦

å¦‚æœè¯´Expressæ˜¯ä¸€åº§Webå¸å›½ï¼Œé‚£ä¹ˆ**ä¸­é—´ä»¶**å°±æ˜¯å®ƒçš„é­”æ³•å¼•æ“ã€‚ä¸­é—´ä»¶æ˜¯Expressçš„çµé­‚ï¼Œç†è§£å®ƒå°±åƒç†è§£äº†ç¼–ç¨‹ä¸­çš„â€œè´£ä»»é“¾æ¨¡å¼â€ã€‚

### ä»€ä¹ˆæ˜¯ä¸­é—´ä»¶ï¼Ÿ

ä¸­é—´ä»¶æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶`req`ï¼ˆè¯·æ±‚ï¼‰ã€`res`ï¼ˆå“åº”ï¼‰å’Œ`next`ï¼ˆä¸‹ä¸€ä¸ªä¸­é—´ä»¶ï¼‰ä¸‰ä¸ªå‚æ•°ï¼Œè´Ÿè´£åœ¨è¯·æ±‚åˆ°è¾¾æœ€ç»ˆå¤„ç†å‡½æ•°ä¹‹å‰æ‰§è¡ŒæŸäº›é€»è¾‘ã€‚å¯ä»¥ç”¨ä¸€ä¸ªç±»æ¯”ï¼šä¸­é—´ä»¶å°±åƒæœºåœºçš„å®‰æ£€æµç¨‹ï¼Œæ¯ä¸ªä¹˜å®¢ï¼ˆè¯·æ±‚ï¼‰éƒ½è¦ç»è¿‡ä¸€ç³»åˆ—æ£€æŸ¥ï¼ˆä¸­é—´ä»¶ï¼‰ï¼Œæœ€åæ‰èƒ½ç™»æœºï¼ˆå“åº”ï¼‰ã€‚

ä¸€ä¸ªç®€å•çš„ä¸­é—´ä»¶ç¤ºä¾‹ï¼š

```javascript
app.use((req, res, next) => {
  console.log(`[${new Date().toISOString()}] ${req.method} ${req.url}`);
  next();
});
```

è¿™ä¸ªä¸­é—´ä»¶ä¼šåœ¨æ¯æ¬¡è¯·æ±‚æ—¶æ‰“å°æ—¶é—´ã€æ–¹æ³•å’ŒURLï¼Œç„¶åè°ƒç”¨`next()`è®©è¯·æ±‚ç»§ç»­å‘ä¸‹ä¼ é€’ã€‚

*Tips: ä¸­é—´ä»¶é¡ºåºå¾ˆé‡è¦ï¼æ”¾åœ¨å‰é¢çš„ä¸­é—´ä»¶ä¼šå…ˆæ‰§è¡Œï¼Œåˆç†å®‰æ’é¡ºåºå¯ä»¥é¿å…é€»è¾‘å†²çªã€‚*

### ä¸­é—´ä»¶çš„ç±»å‹

| ç±»å‹           | æè¿°                                                                 | ç¤ºä¾‹åœºæ™¯                     |
|----------------|----------------------------------------------------------------------|------------------------------|
| **åº”ç”¨çº§ä¸­é—´ä»¶** | ç»‘å®šåˆ°`app`å¯¹è±¡ï¼Œå¤„ç†æ‰€æœ‰è¯·æ±‚                                        | æ—¥å¿—è®°å½•ã€è¯·æ±‚è§£æ           |
| **è·¯ç”±çº§ä¸­é—´ä»¶** | ç»‘å®šåˆ°ç‰¹å®šè·¯ç”±ï¼Œå¤„ç†ç‰¹å®šè·¯å¾„çš„è¯·æ±‚                                    | è®¤è¯ã€æƒé™æ§åˆ¶               |
| **é”™è¯¯å¤„ç†ä¸­é—´ä»¶** | å¤„ç†å¼‚å¸¸ï¼Œå‚æ•°ä¸º`(err, req, res, next)`                             | ç»Ÿä¸€é”™è¯¯å“åº”                 |
| **å†…ç½®ä¸­é—´ä»¶**   | Expressè‡ªå¸¦ï¼Œå¦‚`express.json()`                                      | JSONè§£æã€é™æ€æ–‡ä»¶æœåŠ¡       |
| **ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶** | ç¤¾åŒºæä¾›çš„ä¸­é—´ä»¶ï¼Œå¦‚`cors`ã€`helmet`                                 | è·¨åŸŸæ”¯æŒã€å®‰å…¨å¢å¼º           |

### ä¸­é—´ä»¶çš„å·¥ä½œåŸç†

Expressçš„ä¸­é—´ä»¶æœºåˆ¶åŸºäº**æ´‹è‘±æ¨¡å‹**ï¼ˆOnion Modelï¼‰ã€‚è¯·æ±‚ä»å¤–å±‚è¿›å…¥ï¼Œç»è¿‡æ¯ä¸€å±‚ä¸­é—´ä»¶å¤„ç†ï¼Œæœ€ç»ˆåˆ°è¾¾æ ¸å¿ƒå¤„ç†å‡½æ•°ï¼Œç„¶åå†ä»å†…å‘å¤–è¿”å›ã€‚å¦‚ä¸‹å›¾ï¼ˆæƒ³è±¡ä¸€ä¸ªæ´‹è‘±ï¼‰ï¼š

```
è¯·æ±‚ -> [ä¸­é—´ä»¶1] -> [ä¸­é—´ä»¶2] -> [è·¯ç”±å¤„ç†] -> [ä¸­é—´ä»¶2] -> [ä¸­é—´ä»¶1] -> å“åº”
```

è¿™è®©æˆ‘æƒ³èµ·ã€Šé»‘å®¢å¸å›½ã€‹ä¸­çš„ä¸€å¥å°è¯ï¼š

> â€œYou take the blue pill, the story ends. You take the red pill, you stay in Wonderland.â€  
> â€”â€” Morpheus

ä¸­é—´ä»¶å°±åƒçº¢è¯ä¸¸ï¼Œè®©ä½ æ·±å…¥è¯·æ±‚çš„â€œWonderlandâ€ï¼Œæ§åˆ¶æ¯ä¸€ä¸ªç»†èŠ‚ã€‚

### å®æˆ˜ï¼šè‡ªå®šä¹‰è®¤è¯ä¸­é—´ä»¶

å‡è®¾æˆ‘ä»¬è¦é™åˆ¶åªæœ‰æºå¸¦æ­£ç¡®APIå¯†é’¥çš„è¯·æ±‚æ‰èƒ½è®¿é—®æŸä¸ªè·¯ç”±ï¼š

```javascript
const apiKeyMiddleware = (req, res, next) => {
  const apiKey = req.headers['x-api-key'];
  if (apiKey && apiKey === 'my-secret-key') {
    next();
  } else {
    res.status(401).json({ error: 'Invalid API Key' });
  }
};

app.get('/protected', apiKeyMiddleware, (req, res) => {
  res.json({ message: 'Welcome to the secret club! ğŸ¤«' });
});
```

*Tips: ç”Ÿäº§ç¯å¢ƒä¸­ï¼ŒAPIå¯†é’¥åº”å­˜å‚¨åœ¨ç¯å¢ƒå˜é‡ä¸­ï¼ˆä½¿ç”¨`dotenv`ï¼‰ï¼Œé¿å…ç¡¬ç¼–ç ï¼*

### ä¸­é—´ä»¶çš„è®¾è®¡å“²å­¦

ä¸­é—´ä»¶çš„å“²å­¦æ˜¯**å•ä¸€èŒè´£**å’Œ**å¯ç»„åˆæ€§**ã€‚æ¯ä¸ªä¸­é—´ä»¶åªåšä¸€ä»¶äº‹ï¼Œä½†å¯ä»¥ç»„åˆæˆå¤æ‚çš„é€»è¾‘ã€‚è¿™è®©æˆ‘æƒ³èµ·Unixçš„è®¾è®¡å“²å­¦ï¼š

> â€œDo one thing and do it well.â€

Expressçš„ä¸­é—´ä»¶è®©ä½ åƒæ­ç§¯æœ¨ä¸€æ ·æ„å»ºåº”ç”¨ï¼Œçµæ´»åˆé«˜æ•ˆã€‚

---

## è·¯ç”±ï¼šä½ çš„Webå¸å›½äº¤é€šæ¢çº½

è·¯ç”±æ˜¯Expressçš„â€œäº¤é€šç³»ç»Ÿâ€ï¼Œå†³å®šè¯·æ±‚å¦‚ä½•åˆ°è¾¾æ­£ç¡®çš„å¤„ç†å‡½æ•°ã€‚å¥½çš„è·¯ç”±è®¾è®¡å°±åƒåŸå¸‚çš„äº¤é€šè§„åˆ’ï¼Œæ¸…æ™°ã€é«˜æ•ˆã€æ˜“ç»´æŠ¤ã€‚

### åŸºæœ¬è·¯ç”±

Expressçš„è·¯ç”±APIç®€å•ç›´è§‚ï¼š

```javascript
app.get('/about', (req, res) => {
  res.send('About Us');
});

app.post('/submit', (req, res) => {
  res.send('Form submitted!');
});
```

### è·¯ç”±å‚æ•°ä¸æŸ¥è¯¢

æƒ³è®©è·¯ç”±æ›´åŠ¨æ€ï¼ŸExpressæ”¯æŒè·¯ç”±å‚æ•°å’ŒæŸ¥è¯¢å‚æ•°ï¼š

```javascript
app.get('/users/:id', (req, res) => {
  const userId = req.params.id;
  res.json({ id: userId, name: `User ${userId}` });
});
```

è®¿é—®`/users/123`ï¼Œè¿”å›`{ "id": "123", "name": "User 123" }`ã€‚

æŸ¥è¯¢å‚æ•°ä¹Ÿå¾ˆç®€å•ï¼š

```javascript
app.get('/search', (req, res) => {
  const query = req.query.q;
  res.send(`Search for: ${query}`);
});
```

è®¿é—®`/search?q=express`ï¼Œè¿”å›`Search for: express`ã€‚

*Tips: éªŒè¯è·¯ç”±å‚æ•°å’ŒæŸ¥è¯¢å‚æ•°çš„æœ‰æ•ˆæ€§ï¼Œé¿å…SQLæ³¨å…¥æˆ–æ— æ•ˆè¾“å…¥ï¼*

### è·¯ç”±æ¨¡å—åŒ–

å½“é¡¹ç›®å˜å¤§ï¼Œè·¯ç”±ä»£ç ä¼šå˜å¾—è‡ƒè‚¿ã€‚Expressæ”¯æŒå°†è·¯ç”±æ‹†åˆ†æˆæ¨¡å—ã€‚ä¾‹å¦‚ï¼Œåˆ›å»ºä¸€ä¸ª`users.js`ï¼š

```javascript
const express = require('express');
const router = express.Router();

router.get('/', (req, res) => {
  res.json({ users: ['Alice', 'Bob'] });
});

router.get('/:id', (req, res) => {
  res.json({ id: req.params.id });
});

module.exports = router;
```

åœ¨ä¸»æ–‡ä»¶ä¸­å¼•å…¥ï¼š

```javascript
const userRoutes = require('./users');
app.use('/users', userRoutes);
```

ç°åœ¨ï¼Œè®¿é—®`/users`æˆ–`/users/123`éƒ½ä¼šèµ°`users.js`çš„é€»è¾‘ã€‚

*Tips: è·¯ç”±æ¨¡å—åŒ–æ˜¯å¤§å‹é¡¹ç›®çš„æ ‡é…ï¼Œä¿æŒæ¯ä¸ªè·¯ç”±æ–‡ä»¶ä¸“æ³¨ä¸€ä¸ªåŠŸèƒ½æ¨¡å—ï¼*

### è·¯ç”±è®¾è®¡çš„è‰ºæœ¯

å¥½çš„è·¯ç”±è®¾è®¡å°±åƒå†™ä¸€é¦–è¯—ï¼Œç®€æ´è€Œæœ‰èŠ‚å¥ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å»ºè®®ï¼š

1. **è¯­ä¹‰åŒ–**ï¼šè·¯ç”±è·¯å¾„åº”æ¸…æ™°è¡¨è¾¾æ„å›¾ï¼Œå¦‚`/api/users`è€Œä¸æ˜¯`/getStuff`ã€‚
2. **ç‰ˆæœ¬åŒ–**ï¼šä¸ºAPIæ·»åŠ ç‰ˆæœ¬å‰ç¼€ï¼Œå¦‚`/api/v1/users`ï¼Œæ–¹ä¾¿æœªæ¥å‡çº§ã€‚
3. **ä¸€è‡´æ€§**ï¼šéµå¾ªRESTfulè§„èŒƒï¼ŒGETè·å–èµ„æºï¼ŒPOSTåˆ›å»ºï¼ŒPUTæ›´æ–°ï¼ŒDELETEåˆ é™¤ã€‚

*Tips: ä½¿ç”¨å·¥å…·å¦‚Postmanæµ‹è¯•è·¯ç”±ï¼Œç¡®ä¿æ¯ä¸ªç«¯ç‚¹è¡Œä¸ºç¬¦åˆé¢„æœŸï¼*

---

## æ„å»ºRESTful APIï¼šä»é›¶åˆ°è‹±é›„

RESTful APIæ˜¯ç°ä»£Webå¼€å‘çš„åŸºçŸ³ï¼ŒExpressæ˜¯æ„å»ºå®ƒçš„æœ€ä½³å·¥å…·ä¹‹ä¸€ã€‚è®©æˆ‘ä»¬ä»é›¶å¼€å§‹ï¼Œæ‰“é€ ä¸€ä¸ªç®€å•çš„ç”¨æˆ·ç®¡ç†APIã€‚

### é¡¹ç›®ç»“æ„

ä¸€ä¸ªæ¸…æ™°çš„é¡¹ç›®ç»“æ„æ˜¯æˆåŠŸçš„ç¬¬ä¸€æ­¥ï¼š

```
project/
â”œâ”€â”€ routes/
â”‚   â””â”€â”€ users.js
â”œâ”€â”€ controllers/
â”‚   â””â”€â”€ userController.js
â”œâ”€â”€ models/
â”‚   â””â”€â”€ user.js
â”œâ”€â”€ middleware/
â”‚   â””â”€â”€ auth.js
â”œâ”€â”€ app.js
â””â”€â”€ package.json
```

### å®ç°ç”¨æˆ·API

1. **æ¨¡å‹**ï¼ˆ`models/user.js`ï¼‰ï¼š

```javascript
const users = [
  { id: 1, name: 'Alice', email: 'alice@example.com' },
  { id: 2, name: 'Bob', email: 'bob@example.com' },
];

module.exports = {
  findAll: () => users,
  findById: (id) => users.find((u) => u.id === parseInt(id)),
  create: (user) => {
    const newUser = { id: users.length + 1, ...user };
    users.push(newUser);
    return newUser;
  },
};
```

2. **æ§åˆ¶å™¨**ï¼ˆ`controllers/userController.js`ï¼‰ï¼š

```javascript
const User = require('../models/user');

exports.getUsers = (req, res) => {
  res.json(User.findAll());
};

exports.getUserById = (req, res) => {
  const user = User.findById(req.params.id);
  if (user) {
    res.json(user);
  } else {
    res.status(404).json({ error: 'User not found' });
  }
};

exports.createUser = (req, res) => {
  const user = User.create(req.body);
  res.status(201).json(user);
};
```

3. **è·¯ç”±**ï¼ˆ`routes/users.js`ï¼‰ï¼š

```javascript
const express = require('express');
const router = express.Router();
const userController = require('../controllers/userController');

router.get('/', userController.getUsers);
router.get('/:id', userController.getUserById);
router.post('/', userController.createUser);

module.exports = router;
```

4. **ä¸»æ–‡ä»¶**ï¼ˆ`app.js`ï¼‰ï¼š

```javascript
const express = require('express');
const app = express();
const userRoutes = require('./routes/users');

app.use(express.json());
app.use('/api/users', userRoutes);

app.listen(3000, () => {
  console.log('Server running at http://localhost:3000');
});
```

è¿è¡Œåï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹ç«¯ç‚¹æµ‹è¯•ï¼š

- `GET /api/users`ï¼šè·å–æ‰€æœ‰ç”¨æˆ·
- `GET /api/users/1`ï¼šè·å–IDä¸º1çš„ç”¨æˆ·
- `POST /api/users`ï¼šåˆ›å»ºæ–°ç”¨æˆ·ï¼ˆéœ€è¦JSON bodyï¼‰

*Tips: ä½¿ç”¨`express-validator`éªŒè¯è¯·æ±‚ä½“ï¼Œç¡®ä¿è¾“å…¥æ•°æ®åˆæ³•ï¼*

### RESTful APIè®¾è®¡è§„èŒƒ

| æ–¹æ³•   | è·¯å¾„            | åŠŸèƒ½               | çŠ¶æ€ç          |
|--------|-----------------|--------------------|----------------|
| GET    | /api/users      | è·å–æ‰€æœ‰ç”¨æˆ·       | 200 OK         |
| GET    | /api/users/:id  | è·å–æŒ‡å®šç”¨æˆ·       | 200 OK / 404   |
| POST   | /api/users      | åˆ›å»ºæ–°ç”¨æˆ·         | 201 Created    |
| PUT    | /api/users/:id  | æ›´æ–°æŒ‡å®šç”¨æˆ·       | 200 OK         |
| DELETE | /api/users/:id  | åˆ é™¤æŒ‡å®šç”¨æˆ·       | 204 No Content |

*Tips: å§‹ç»ˆè¿”å›æ­£ç¡®çš„HTTPçŠ¶æ€ç ï¼Œå®¢æˆ·ç«¯ä¾èµ–å®ƒä»¬åˆ¤æ–­è¯·æ±‚ç»“æœï¼*

---

## æ€§èƒ½ä¼˜åŒ–ï¼šè®©Expressè·‘å¾—åƒé£ä¸€æ ·å¿«

Expressè™½è½»é‡ï¼Œä½†ä¸ä¼˜åŒ–å¯èƒ½è®©ä½ çš„åº”ç”¨åƒä¹Œé¾Ÿä¸€æ ·æ…¢ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›æ€§èƒ½ä¼˜åŒ–çš„æŠ€å·§ã€‚

### 1. ä½¿ç”¨å‹ç¼©ä¸­é—´ä»¶

`compression`ä¸­é—´ä»¶å¯ä»¥å‹ç¼©å“åº”ï¼Œå‡å°‘ä¼ è¾“æ—¶é—´ï¼š

```javascript
const compression = require('compression');
app.use(compression());
```

*Tips: å¯¹äºé™æ€èµ„æºï¼Œä¼˜å…ˆä½¿ç”¨CDNï¼Œå‡å°‘æœåŠ¡å™¨å‹åŠ›ï¼*

### 2. å¯ç”¨ç¼“å­˜

ä½¿ç”¨`ETag`æˆ–`Cache-Control`å¤´ï¼Œå‡å°‘é‡å¤è¯·æ±‚ï¼š

```javascript
app.set('etag', 'strong');
app.use((req, res, next) => {
  res.set('Cache-Control', 'public, max-age=3600');
  next();
});
```

*Tips: åŠ¨æ€å†…å®¹è°¨æ…ä½¿ç”¨ç¼“å­˜ï¼Œç¡®ä¿æ•°æ®ä¸€è‡´æ€§ï¼*

### 3. å¼‚æ­¥å¤„ç†

Node.jsçš„å¼‚æ­¥æ¨¡å‹æ˜¯Expressçš„æ€æ‰‹é”ï¼Œé¿å…åŒæ­¥é˜»å¡ä»£ç ï¼š

```javascript
app.get('/data', async (req, res) => {
  const data = await fetchDataFromDB(); // å‡è®¾è¿™æ˜¯å¼‚æ­¥æŸ¥è¯¢
  res.json(data);
});
```

*Tips: ä½¿ç”¨`async/await`æˆ–Promiseï¼Œé¿å…å›è°ƒåœ°ç‹±ï¼*

### 4. è´Ÿè½½å‡è¡¡ä¸é›†ç¾¤

Node.jsæ˜¯å•çº¿ç¨‹çš„ï¼Œåˆ©ç”¨`cluster`æ¨¡å—æˆ–PM2å®ç°å¤šè¿›ç¨‹ï¼š

```javascript
const cluster = require('cluster');
const numCPUs = require('os').cpus().length;

if (cluster.isMaster) {
  for (let i = 0; i < numCPUs; i++) {
    cluster.fork();
  }
} else {
  const app = require('./app');
  app.listen(3000);
}
```

*Tips: ç”Ÿäº§ç¯å¢ƒæ¨èä½¿ç”¨PM2ç®¡ç†è¿›ç¨‹ï¼Œè‡ªåŠ¨é‡å¯æ›´çœå¿ƒï¼*

---

## å®‰å…¨å®è·µï¼šä¸ºä½ çš„Webå¸å›½ç­‘èµ·åŸå¢™

å®‰å…¨æ˜¯Webåº”ç”¨çš„ç”Ÿå‘½çº¿ï¼ŒExpressåº”ç”¨ä¹Ÿä¸ä¾‹å¤–ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å…³é”®çš„å®‰å…¨å®è·µã€‚

### 1. ä½¿ç”¨Helmetå¢å¼ºå®‰å…¨æ€§

`helmet`ä¸­é—´ä»¶è®¾ç½®å®‰å…¨ç›¸å…³çš„HTTPå¤´ï¼š

```javascript
const helmet = require('helmet');
app.use(helmet());
```

*Tips: å®šæœŸæ£€æŸ¥`helmet`çš„é»˜è®¤é…ç½®ï¼Œç¡®ä¿ç¬¦åˆä½ çš„éœ€æ±‚ï¼*

### 2. é˜²æ­¢XSSå’ŒSQLæ³¨å…¥

ä½¿ç”¨`express-validator`éªŒè¯å’Œæ¸…ç†è¾“å…¥ï¼š

```javascript
const { body, validationResult } = require('express-validator');

app.post(
  '/user',
  [
    body('email').isEmail().normalizeEmail(),
    body('name').trim().escape(),
  ],
  (req, res) => {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({ errors: errors.array() });
    }
    res.json({ message: 'User created' });
  }
);
```

*Tips: æ°¸è¿œä¸è¦ä¿¡ä»»ç”¨æˆ·è¾“å…¥ï¼ŒéªŒè¯æ˜¯ç¬¬ä¸€é“é˜²çº¿ï¼*

### 3. è·¨åŸŸèµ„æºå…±äº«ï¼ˆCORSï¼‰

ä½¿ç”¨`cors`ä¸­é—´ä»¶æ§åˆ¶è·¨åŸŸè®¿é—®ï¼š

```javascript
const cors = require('cors');
app.use(cors({ origin: 'https://your-frontend.com' }));
```

*Tips: é™åˆ¶`origin`åˆ°å¯ä¿¡åŸŸåï¼Œé¿å…ä¸å¿…è¦çš„å¼€æ”¾ï¼*

---

## æœ€ä½³å®è·µä¸ä»£ç ç»„ç»‡ï¼šä¼˜é›…åœ°ç®¡ç†ä½ çš„å¸å›½

å¥½çš„ä»£ç ç»„ç»‡è®©ä½ çš„é¡¹ç›®åƒä¸€æœ¬å¥½ä¹¦ï¼Œé€»è¾‘æ¸…æ™°ã€æ˜“äºç»´æŠ¤ã€‚

### 1. MVCæ¶æ„

å°†ä»£ç åˆ†ä¸ºæ¨¡å‹ï¼ˆModelï¼‰ã€è§†å›¾ï¼ˆViewï¼‰ã€æ§åˆ¶å™¨ï¼ˆControllerï¼‰ï¼Œå¦‚å‰é¢çš„ç”¨æˆ·APIç¤ºä¾‹ã€‚

### 2. ç¯å¢ƒå˜é‡

ä½¿ç”¨`dotenv`ç®¡ç†é…ç½®ï¼š

```javascript
require('dotenv').config();
const port = process.env.PORT || 3000;
```

*Tips: å°†`.env`åŠ å…¥`.gitignore`ï¼Œä¿æŠ¤æ•æ„Ÿä¿¡æ¯ï¼*

### 3. é”™è¯¯å¤„ç†

ç»Ÿä¸€é”™è¯¯å¤„ç†ä¸­é—´ä»¶ï¼š

```javascript
app.use((err, req, res, next) => {
  console.error(err.stack);
  res.status(500).json({ error: 'Something went wrong!' });
});
```

*Tips: ç”Ÿäº§ç¯å¢ƒéšè—è¯¦ç»†é”™è¯¯ä¿¡æ¯ï¼Œé˜²æ­¢æ³„éœ²æ•æ„Ÿæ•°æ®ï¼*

---

## Expressçš„ç”Ÿæ€ä¸æ‰©å±•ï¼šä»å•å…µä½œæˆ˜åˆ°å†›å›¢å‡ºå‡»

Expressçš„ç”Ÿæ€å°±åƒä¸€ä¸ªä¸°å¯Œçš„å·¥å…·ç®±ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„æ‰©å±•ï¼š

| å·¥å…·           | åŠŸèƒ½                              | ä½¿ç”¨åœºæ™¯                     |
|----------------|-----------------------------------|------------------------------|
| **Mongoose**   | MongoDBçš„ODM                      | æ•°æ®åº“æ“ä½œ                   |
| **Socket.IO**  | å®æ—¶é€šä¿¡                          | èŠå¤©åº”ç”¨ã€å®æ—¶é€šçŸ¥           |
| **Morgan**     | HTTPè¯·æ±‚æ—¥å¿—                      | è°ƒè¯•ã€ç›‘æ§                   |
| **Passport**   | è®¤è¯æ¡†æ¶                          | ç™»å½•ã€OAuth                  |

ç¤ºä¾‹ï¼šä½¿ç”¨Mongooseè¿æ¥MongoDBï¼š

```javascript
const mongoose = require('mongoose');
mongoose.connect('mongodb://localhost/myapp', { useNewUrlParser: true });

const UserSchema = new mongoose.Schema({
  name: String,
  email: String,
});

const User = mongoose.model('User', UserSchema);
```

*Tips: ç¡®ä¿MongoDBæœåŠ¡å·²å¯åŠ¨ï¼Œå¦åˆ™è¿æ¥ä¼šå¤±è´¥ï¼*

---

## è®¾è®¡å“²å­¦ä¸æ„Ÿæ‚Ÿï¼šExpressæ•™ä¼šæˆ‘ä»¬çš„ç¼–ç¨‹æ™ºæ…§

Expressçš„è®¾è®¡å“²å­¦å¯ä»¥ç”¨ä¸€å¥è¯æ€»ç»“ï¼š

> â€œSimplicity is the ultimate sophistication.â€  
> â€”â€” Leonardo da Vinci

å®ƒçš„æç®€ä¸»ä¹‰è®©æˆ‘æƒ³èµ·ã€Šç¦…ä¸æ‘©æ‰˜è½¦ç»´ä¿®è‰ºæœ¯ã€‹ä¸­çš„æ™ºæ…§ï¼šçœŸæ­£çš„ä¼˜é›…ä¸åœ¨äºå¤æ‚ï¼Œè€Œåœ¨äºä»¥æœ€ç®€å•çš„æ–¹å¼è§£å†³é—®é¢˜ã€‚Expressæ•™ä¼šæˆ‘ä»¬çš„ä¸ä»…æ˜¯æŠ€æœ¯ï¼Œè¿˜æœ‰ä»¥ä¸‹æ€ç»´ï¼š

1. **æ¨¡å—åŒ–æ€ç»´**ï¼šå°†å¤æ‚é—®é¢˜æ‹†åˆ†æˆå°å—ï¼Œåƒä¸­é—´ä»¶ä¸€æ ·ç»„åˆã€‚
2. **ä¸“æ³¨æ ¸å¿ƒ**ï¼šåªåšæ“…é•¿çš„äº‹ï¼Œäº¤ç»™ç”Ÿæ€è§£å†³å…¶ä»–é—®é¢˜ã€‚
3. **æ‹¥æŠ±å˜åŒ–**ï¼šçµæ´»çš„APIè®¾è®¡é€‚åº”ä¸æ–­å˜åŒ–çš„éœ€æ±‚ã€‚

ç¼–ç¨‹ä¸ä»…æ˜¯å†™ä»£ç ï¼Œæ›´æ˜¯ä¸€ç§åˆ›é€ ã€‚Expresså°±åƒä¸€ä½è‰¯å¸ˆç›Šå‹ï¼Œæ•™ä½ åœ¨æŠ€æœ¯çš„æµ·æ´‹ä¸­æ‰¾åˆ°è‡ªå·±çš„èŠ‚å¥ã€‚

---

## æ€»ç»“ï¼šä»é›¶åˆ°å¸å›½çš„æ—…ç¨‹

ä»ç®€å•çš„â€œHello Worldâ€åˆ°å¤æ‚çš„RESTful APIï¼ŒExpressç”¨å®ƒçš„è½»é‡ä¸çµæ´»ï¼Œå¸¦æˆ‘ä»¬èµ°è¿‡äº†ä¸€åœºä»é›¶åˆ°Webå¸å›½çš„æ—…ç¨‹ã€‚å®ƒçš„ä¸­é—´ä»¶ã€è·¯ç”±ã€ç”Ÿæ€ç³»ç»Ÿå’Œè®¾è®¡å“²å­¦ï¼Œä¸ä»…æ˜¯æŠ€æœ¯å·¥å…·ï¼Œæ›´æ˜¯ä¸€ç§ç¼–ç¨‹æ™ºæ…§çš„ä½“ç°ã€‚

æ— è®ºä½ æ˜¯å‰ç«¯å¼€å‘è€…è¿˜æ˜¯å…¨æ ˆæ–°æ‰‹ï¼ŒExpresséƒ½æ˜¯ä½ è¿›å…¥Node.jsä¸–ç•Œçš„ç»ä½³èµ·ç‚¹ã€‚å¸Œæœ›è¿™ç¯‡åšå®¢èƒ½è®©ä½ å¯¹Expresså……æ»¡çƒ­æƒ…ï¼Œæ‹¿èµ·ä»£ç ï¼Œæ„å»ºå±äºä½ çš„Webå¸å›½ï¼ğŸš€

> â€œThe best way to predict the future is to create it.â€  
> â€”â€” Peter Drucker

ç°åœ¨ï¼Œæ‰“å¼€ä½ çš„ç¼–è¾‘å™¨ï¼Œå†™ä¸‹ç¬¬ä¸€è¡ŒExpressä»£ç ï¼Œæœªæ¥çš„Webå¸å›½åœ¨ç­‰ä½ ï¼ğŸŒŸ

---