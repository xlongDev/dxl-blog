---
title: "Nuxtçš„æ¥å£è®¾è®¡å’Œæ¥å£å¼€å‘ï¼šä»åŸç†åˆ°å®è·µçš„æ·±åº¦æŒ‡å—"
date: "2023-10-15"
description: "æ·±å…¥æ¢ç´¢ Nuxt çš„æ¥å£è®¾è®¡ä¸å¼€å‘ï¼Œæ¶µç›–åŸç†ã€å®ç°ã€ä¼˜åŒ–å’Œæœ€ä½³å®è·µï¼ŒåŠ©åŠ›å‰ç«¯å¼€å‘è€…æ„å»ºé«˜æ•ˆã€ä¼˜é›…çš„ Web åº”ç”¨ã€‚"
keywords: "Nuxt, æ¥å£è®¾è®¡, æ¥å£å¼€å‘, Vue, æœåŠ¡ç«¯æ¸²æŸ“, SSR, API é›†æˆ, æ•°æ®è·å–, å‰ç«¯å¼€å‘"
author: "æ™“é¾™"
image: "/images/hero/nuxt-api-design.jpg"
tags: ["Nuxt", "Vue", "å‰ç«¯å¼€å‘", "æ¥å£å¼€å‘"]
category: "Nuxt.js"
---

åœ¨ç°ä»£ Web å¼€å‘ä¸­ï¼Œæ¥å£è®¾è®¡å’Œå¼€å‘æ˜¯å‰ç«¯ä¸åç«¯åä½œçš„æ¡¥æ¢ï¼Œå†³å®šäº†åº”ç”¨çš„æ€§èƒ½ã€ç”¨æˆ·ä½“éªŒå’Œå¼€å‘æ•ˆç‡ã€‚ä½œä¸º Vue ç”Ÿæ€ä¸­æœ€å¼ºå¤§çš„æ¡†æ¶ä¹‹ä¸€ï¼ŒNuxt æä¾›äº†ä¼˜é›…è€Œçµæ´»çš„æ–¹å¼æ¥å¤„ç†æ¥å£ç›¸å…³çš„å·¥ä½œã€‚æ— è®ºæ˜¯æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰ã€é™æ€ç«™ç‚¹ç”Ÿæˆï¼ˆSSGï¼‰ï¼Œè¿˜æ˜¯ä¸å¤æ‚åç«¯ API çš„é›†æˆï¼ŒNuxt çš„æ¥å£è®¾è®¡å’Œå¼€å‘èƒ½åŠ›éƒ½å ªç§°ä¸€ç»ã€‚

ä½† Nuxt çš„æ¥å£å¼€å‘å¹¶ä¸åªæ˜¯ç®€å•åœ°è°ƒç”¨ `fetch` æˆ– `axios`ã€‚å®ƒæ¶‰åŠåˆ°æ¡†æ¶çš„æ ¸å¿ƒæœºåˆ¶ã€æ•°æ®è·å–ç­–ç•¥ã€é”™è¯¯å¤„ç†ã€æ€§èƒ½ä¼˜åŒ–ï¼Œç”šè‡³æ˜¯å›¢é˜Ÿåä½œçš„å“²å­¦ã€‚ğŸš€ æœ¬æ–‡å°†å¸¦ä½ æ·±å…¥ Nuxt çš„æ¥å£è®¾è®¡ä¸å¼€å‘ä¸–ç•Œï¼Œä»åŸç†åˆ°å®è·µï¼Œé…ä»¥æ¸…æ™°çš„ç¤ºä¾‹ã€è¡¨æ ¼ã€æœ€ä½³å®è·µå’Œä¸€äº›â€œé«˜çº§å¹½é»˜æ„Ÿâ€ï¼Œè®©ä½ ä¸ä»…èƒ½ç”¨å¥½ Nuxtï¼Œè¿˜èƒ½ç”¨å¾— *ä¼˜é›…*ã€‚

> **ç±»æ¯”æ—¶é—´**ï¼šå¦‚æœæŠŠ Nuxt æ¯”ä½œä¸€è‰˜æ˜Ÿé™…é£èˆ¹ï¼Œé‚£ä¹ˆæ¥å£è®¾è®¡å°±æ˜¯å®ƒçš„å¯¼èˆªç³»ç»Ÿï¼Œè€Œæ¥å£å¼€å‘åˆ™æ˜¯ç‡ƒæ–™èˆ±ã€‚å¯¼èˆªç²¾å‡†ï¼Œç‡ƒæ–™é«˜æ•ˆï¼Œé£èˆ¹æ‰èƒ½é¨æ¸¸å®‡å®™ã€‚ğŸŒŒ

## æ–‡ç« ç»“æ„ï¼šæ€ç»´é“¾å¯¼èˆª

ä¸ºäº†è®©è¿™ç¯‡é•¿æ–‡æ¸…æ™°æ˜“è¯»ï¼Œæˆ‘ä»¬å°†æŒ‰ç…§ä»¥ä¸‹ç»“æ„å±•å¼€ï¼š

1. **Nuxt æ¥å£å¼€å‘çš„åŸºçŸ³**ï¼šç†è§£ Nuxt çš„æ•°æ®è·å–æœºåˆ¶å’Œä¸Šä¸‹æ–‡ã€‚
2. **æ¥å£è®¾è®¡çš„æ ¸å¿ƒåŸåˆ™**ï¼šå¦‚ä½•è®¾è®¡é«˜æ•ˆã€å¯ç»´æŠ¤çš„æ¥å£ã€‚
3. **Nuxt ä¸­çš„æ¥å£å¼€å‘å®è·µ**ï¼šä» `asyncData` åˆ° `useFetch`ï¼Œå…¨é¢è§£æå®ç°æ–¹å¼ã€‚
4. **æ€§èƒ½ä¼˜åŒ–ä¸é”™è¯¯å¤„ç†**ï¼šè®©æ¥å£è°ƒç”¨å¿«å¦‚é—ªç”µï¼Œç¨³å¦‚ç£çŸ³ã€‚
5. **æœ€ä½³å®è·µä¸å›¢é˜Ÿåä½œ**ï¼šä»ä»£ç åˆ°æµç¨‹ï¼Œæ‰“é€ ä¼˜é›…çš„å¼€å‘ä½“éªŒã€‚
6. **è¿›é˜¶è¯é¢˜**ï¼šNuxt 3 çš„æ–°ç‰¹æ€§ã€æ¨¡å—åŒ–æ¥å£è®¾è®¡ä¸å¾®æœåŠ¡é›†æˆã€‚
7. **æ€»ç»“ä¸å±•æœ›**ï¼šNuxt æ¥å£å¼€å‘çš„æœªæ¥è¶‹åŠ¿ã€‚

å‡†å¤‡å¥½äº†å—ï¼Ÿç³»å¥½å®‰å…¨å¸¦ï¼Œæˆ‘ä»¬è¦èµ·é£äº†ï¼ğŸš€

---

## 1. Nuxt æ¥å£å¼€å‘çš„åŸºçŸ³

åœ¨æ·±å…¥æ¥å£è®¾è®¡ä¸å¼€å‘ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ç†è§£ Nuxt çš„æ ¸å¿ƒæœºåˆ¶ã€‚è¿™äº›æœºåˆ¶å†³å®šäº†å¦‚ä½•é«˜æ•ˆåœ°ä¸åç«¯ API äº¤äº’ã€‚

### 1.1 Nuxt çš„è¿è¡Œæ—¶ä¸Šä¸‹æ–‡

Nuxt çš„å¼ºå¤§ä¹‹å¤„åœ¨äºå…¶è¿è¡Œæ—¶ä¸Šä¸‹æ–‡ï¼ˆcontextï¼‰ã€‚æ— è®ºæ˜¯æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰è¿˜æ˜¯å®¢æˆ·ç«¯æ¸²æŸ“ï¼ˆCSRï¼‰ï¼ŒNuxt éƒ½æä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„ä¸Šä¸‹æ–‡å¯¹è±¡ï¼ŒåŒ…å«äº†è·¯ç”±ä¿¡æ¯ã€è¯·æ±‚å¤´ã€ç¯å¢ƒå˜é‡ç­‰ã€‚

```javascript
export default defineNuxtRouteMiddleware((to, from) => {
  const { $config } = useNuxtApp();
  console.log($config.public.apiBase); // è®¿é—®ç¯å¢ƒå˜é‡
});
```

ä¸Šä¸‹æ–‡ä¸­æœ€å¸¸ç”¨çš„éƒ¨åˆ†æ˜¯ `useNuxtApp()`ï¼Œå®ƒæä¾›äº†å¯¹è¿è¡Œæ—¶é…ç½®ã€æ’ä»¶å’Œé’©å­çš„è®¿é—®ã€‚æ¥å£å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¼šé¢‘ç¹ä½¿ç”¨ä¸Šä¸‹æ–‡æ¥è·å– API åŸºç¡€åœ°å€æˆ–è®¤è¯ä¿¡æ¯ã€‚

> **å°å¹½é»˜**ï¼šNuxt çš„ä¸Šä¸‹æ–‡å°±åƒä¸€ä¸ªè¶…çº§ç®¡å®¶ï¼Œéšæ—¶ä¸ºä½ é€’ä¸ŠèŒ¶æ°´ï¼ˆæ•°æ®ï¼‰ã€åœ°å›¾ï¼ˆè·¯ç”±ï¼‰å’Œé’¥åŒ™ï¼ˆé…ç½®ï¼‰ã€‚åªæ˜¯åˆ«é—®å®ƒèƒ½ä¸èƒ½å¸®ä½ æ´—è¡£æœï¼ğŸ˜œ
>
> *Tipï¼šå§‹ç»ˆé€šè¿‡ `useRuntimeConfig()` è·å–ç¯å¢ƒå˜é‡ï¼Œè€Œä¸æ˜¯ç¡¬ç¼–ç  API åœ°å€ã€‚è¿™æ ·å¯ä»¥è½»æ¾åˆ‡æ¢å¼€å‘ã€ç”Ÿäº§ç¯å¢ƒã€‚*

### 1.2 æ•°æ®è·å–çš„ç”Ÿå‘½å‘¨æœŸ

Nuxt æä¾›äº†å¤šç§æ•°æ®è·å–æ–¹å¼ï¼Œæ¯ç§æ–¹å¼éƒ½åœ¨ç”Ÿå‘½å‘¨æœŸä¸­æ‰®æ¼”ä¸åŒè§’è‰²ï¼š

| æ•°æ®è·å–æ–¹å¼        | é€‚ç”¨åœºæ™¯                     | æ‰§è¡Œæ—¶æœº                     | SSR æ”¯æŒ |
|---------------------|-----------------------------|-----------------------------|----------|
| `asyncData`         | é¡µé¢çº§æ•°æ®è·å–               | æœåŠ¡ç«¯æˆ–å®¢æˆ·ç«¯ï¼Œé¡µé¢æ¸²æŸ“å‰   | âœ…        |
| `fetch` (æ—§ç‰ˆ)      | ç»„ä»¶çº§æ•°æ®è·å–               | æœåŠ¡ç«¯æˆ–å®¢æˆ·ç«¯ï¼Œç»„ä»¶æ¸²æŸ“å‰   | âœ…        |
| `useFetch`          | é€šç”¨æ•°æ®è·å–ï¼ˆNuxt 3ï¼‰       | ä»»æ„æ—¶æœºï¼Œçµæ´»æ€§æœ€é«˜         | âœ…        |
| `useAsyncData`      | é¡µé¢æˆ–ç»„ä»¶çº§å¼‚æ­¥æ•°æ®         | ä¾èµ–é”®ç®¡ç†ï¼Œé€‚åˆåŠ¨æ€æ•°æ®     | âœ…        |
| `useLazyFetch`      | å»¶è¿ŸåŠ è½½æ•°æ®                 | å®¢æˆ·ç«¯æ¸²æŸ“ï¼Œé€‚åˆéå…³é”®æ•°æ®   | âŒ        |

è¿™äº›æ–¹æ³•å…±åŒæ„æˆäº† Nuxt çš„æ•°æ®è·å–ä½“ç³»ã€‚ç†è§£å®ƒä»¬çš„åŒºåˆ«æ˜¯æ¥å£å¼€å‘çš„ç¬¬ä¸€æ­¥ã€‚

> **ç±»æ¯”**ï¼šå¦‚æœæŠŠé¡µé¢æ¸²æŸ“æ¯”ä½œçƒ¹é¥ªï¼Œ`asyncData` æ˜¯ä¸»èœï¼Œ`useFetch` æ˜¯è°ƒæ–™ï¼Œè€Œ `useLazyFetch` åˆ™æ˜¯é¥­åç”œç‚¹â€”â€”å¯ä»¥æ™šç‚¹ä¸Šæ¡Œï¼Œä½†ä¸èƒ½å°‘ï¼ğŸ½ï¸
>
> *Tipï¼šä¼˜å…ˆä½¿ç”¨ `useFetch` æˆ– `useAsyncData`ï¼Œå®ƒä»¬åœ¨ Nuxt 3 ä¸­æ›´ç°ä»£åŒ–ï¼Œä¸”æ”¯æŒæ›´å¥½çš„ç±»å‹æ¨å¯¼å’Œé”™è¯¯å¤„ç†ã€‚*

---

## 2. æ¥å£è®¾è®¡çš„æ ¸å¿ƒåŸåˆ™

å¥½çš„æ¥å£è®¾è®¡ä¸ä»…æ˜¯åç«¯çš„è´£ä»»ï¼Œå‰ç«¯å¼€å‘è€…ä¹Ÿéœ€è¦å‚ä¸å…¶ä¸­ã€‚Nuxt å¼€å‘è€…å°¤å…¶éœ€è¦ç†è§£å¦‚ä½•è®¾è®¡é«˜æ•ˆã€å¯ç»´æŠ¤çš„æ¥å£ã€‚

### 2.1 REST vs. GraphQLï¼šé€‰æ‹©é€‚åˆ Nuxt çš„é£æ ¼

åœ¨ Nuxt é¡¹ç›®ä¸­ï¼Œå¸¸è§çš„æ¥å£é£æ ¼æœ‰ REST å’Œ GraphQLã€‚ä»¥ä¸‹æ˜¯å®ƒä»¬çš„å¯¹æ¯”ï¼š

| ç‰¹æ€§                | REST                              | GraphQL                          |
|---------------------|-----------------------------------|----------------------------------|
| æ•°æ®è·å–æ–¹å¼        | å¤šä¸ªç«¯ç‚¹ï¼Œå›ºå®šç»“æ„                | å•ä¸€ç«¯ç‚¹ï¼Œçµæ´»æŸ¥è¯¢               |
| æ€§èƒ½                | å¯èƒ½å¯¼è‡´è¿‡é‡æˆ–ä¸è¶³æ•°æ®            | æŒ‰éœ€è·å–ï¼Œå‡å°‘å†—ä½™               |
| Nuxt é›†æˆ           | ç®€å•ï¼Œé€‚åˆ `useFetch`              | éœ€è¦é¢å¤–åº“ï¼ˆå¦‚ `@urql/vue`ï¼‰     |
| å­¦ä¹ æ›²çº¿            | è¾ƒä½                              | è¾ƒé«˜                             |
| é€‚ç”¨åœºæ™¯            | ç®€å• CRUD æ“ä½œ                    | å¤æ‚æ•°æ®å…³ç³»ï¼ŒåŠ¨æ€æŸ¥è¯¢           |

**ç¤ºä¾‹ï¼šREST æ¥å£è°ƒç”¨**

```javascript
const { data, error } = await useFetch('/api/users', {
  baseURL: useRuntimeConfig().public.apiBase,
  headers: {
    Authorization: `Bearer ${token}`,
  },
});
```

**ç¤ºä¾‹ï¼šGraphQL æŸ¥è¯¢**

```javascript
import { useQuery } from '@urql/vue';

const { data, fetching, error } = useQuery({
  query: `
    query GetUsers($id: ID!) {
      user(id: $id) {
        name
        email
      }
    }
  `,
  variables: { id: '1' },
});
```

> **å¹½é»˜æ’æ›²**ï¼šREST å°±åƒå»é¤å…ç‚¹å¥—é¤ï¼Œèœå•å›ºå®šï¼Œçœå¿ƒä½†ä¸ä¸€å®šå®Œç¾ï¼›GraphQL åˆ™æ˜¯è‡ªåŠ©é¤ï¼Œæƒ³åƒå•¥æ‹¿å•¥ï¼Œä½†å¾—è‡ªå·±åŠ¨æ‰‹è®¾è®¡ç›˜å­ï¼ğŸ´
>
> *Tipï¼šå¦‚æœé¡¹ç›®æ•°æ®ç»“æ„å¤æ‚ä¸”é¢‘ç¹å˜æ›´ï¼Œä¼˜å…ˆè€ƒè™‘ GraphQLï¼›å¦åˆ™ï¼ŒREST çš„ç®€å•æ€§æ›´é€‚åˆå¿«é€Ÿå¼€å‘ã€‚*

### 2.2 è®¾è®¡å¯æ‰©å±•çš„æ¥å£

ä¸€ä¸ªå¥½çš„æ¥å£åº”è¯¥æ˜“äºæ‰©å±•ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›è®¾è®¡åŸåˆ™ï¼š

- **ç‰ˆæœ¬åŒ–**ï¼šåœ¨ URL ä¸­åŠ å…¥ç‰ˆæœ¬å·ï¼ˆå¦‚ `/api/v1/users`ï¼‰ï¼Œä»¥ä¾¿æœªæ¥å‡çº§ã€‚
- **ä¸€è‡´æ€§**ï¼šå­—æ®µå‘½åéµå¾ªç»Ÿä¸€è§„èŒƒï¼ˆå¦‚ camelCase æˆ– snake_caseï¼‰ã€‚
- **åˆ†é¡µä¸è¿‡æ»¤**ï¼šæ”¯æŒ `limit`ã€`offset` å’ŒæŸ¥è¯¢å‚æ•°ï¼ˆå¦‚ `/api/users?role=admin`ï¼‰ã€‚
- **é”™è¯¯æ ‡å‡†åŒ–**ï¼šè¿”å›ä¸€è‡´çš„é”™è¯¯æ ¼å¼ï¼Œå¦‚ `{ "error": { "code": 400, "message": "Invalid input" } }`ã€‚

**ç¤ºä¾‹ï¼šåˆ†é¡µæ¥å£è°ƒç”¨**

```javascript
const { data } = await useFetch('/api/users', {
  query: { page: 1, limit: 10, role: 'admin' },
});
```

> **ç±»æ¯”**ï¼šæ¥å£è®¾è®¡å°±åƒå»ºæˆ¿å­ï¼Œåœ°åŸºï¼ˆç‰ˆæœ¬åŒ–ï¼‰è¦ç¨³ï¼Œæˆ¿é—´ï¼ˆæ•°æ®ç»“æ„ï¼‰è¦æ•´é½ï¼Œé—¨çª—ï¼ˆæŸ¥è¯¢å‚æ•°ï¼‰è¦çµæ´»ã€‚ğŸ¡
>
> *Tipï¼šä¸åç«¯çº¦å®šå¥½æ¥å£è§„èŒƒåï¼Œç”Ÿæˆ TypeScript ç±»å‹æˆ– OpenAPI æ–‡æ¡£ï¼Œå‡å°‘æ²Ÿé€šæˆæœ¬ã€‚*

---

## 3. Nuxt ä¸­çš„æ¥å£å¼€å‘å®è·µ

ç°åœ¨ï¼Œæˆ‘ä»¬è¿›å…¥å®æˆ˜ç¯èŠ‚ï¼ä»¥ä¸‹æ˜¯ Nuxt ä¸­å¸¸è§çš„æ¥å£å¼€å‘åœºæ™¯å’Œå®ç°æ–¹å¼ã€‚

### 3.1 ä½¿ç”¨ `useFetch` è¿›è¡Œé€šç”¨æ¥å£è°ƒç”¨

`useFetch` æ˜¯ Nuxt 3 ä¸­æ¨èçš„æ•°æ®è·å–æ–¹å¼ï¼Œç®€å•è€Œå¼ºå¤§ã€‚

**ç¤ºä¾‹ï¼šè·å–ç”¨æˆ·åˆ—è¡¨**

```javascript
<script setup>
const config = useRuntimeConfig();
const { data: users, pending, error } = await useFetch('/api/users', {
  baseURL: config.public.apiBase,
  headers: {
    'Content-Type': 'application/json',
  },
});
</script>

<template>
  <div>
    <div v-if="pending">åŠ è½½ä¸­...</div>
    <div v-else-if="error">é”™è¯¯ï¼š{{ error.message }}</div>
    <ul v-else>
      <li v-for="user in users" :key="user.id">{{ user.name }}</li>
    </ul>
  </div>
</template>
```

> **å¹½é»˜æ—¶åˆ»**ï¼š`useFetch` å°±åƒä½ çš„å¤–å–å°å“¥ï¼Œå‡†æ—¶é€è¾¾ï¼ˆæ•°æ®ï¼‰ï¼Œå¶å°”è¿Ÿåˆ°ï¼ˆç½‘ç»œé—®é¢˜ï¼‰ï¼Œä½†ä»ä¸è®©ä½ é¥¿è‚šå­ï¼ğŸš´
>
> *Tipï¼šå§‹ç»ˆæ£€æŸ¥ `pending` å’Œ `error` çŠ¶æ€ï¼Œç¡®ä¿ç”¨æˆ·ä½“éªŒå‹å¥½ã€‚*

### 3.2 æœåŠ¡ç«¯æ¸²æŸ“ä¸­çš„ `asyncData`

å¯¹äºéœ€è¦ SEO çš„é¡µé¢ï¼Œ`asyncData` æ˜¯ç†æƒ³é€‰æ‹©ï¼Œå› ä¸ºå®ƒåœ¨æœåŠ¡ç«¯æ¸²æŸ“å‰è·å–æ•°æ®ã€‚

**ç¤ºä¾‹ï¼šåšå®¢è¯¦æƒ…é¡µ**

```javascript
<script>
export default defineNuxtPage({
  async asyncData({ $axios, params }) {
    const post = await $axios.$get(`/api/posts/${params.id}`);
    return { post };
  },
});
</script>

<template>
  <article>
    <h1>{{ post.title }}</h1>
    <p>{{ post.content }}</p>
  </article>
</template>
```

> **ç±»æ¯”**ï¼š`asyncData` å°±åƒæå‰å‡†å¤‡å¥½çš„æ¼”è®²ç¨¿ï¼Œè§‚ä¼—ï¼ˆæœç´¢å¼•æ“ï¼‰åˆ°åœºæ—¶ï¼Œä¸€åˆ‡å·²ç»å°±ç»ªã€‚ğŸ¤
>
> *Tipï¼šé¿å…åœ¨ `asyncData` ä¸­æ‰§è¡Œè¿‡å¤šè¯·æ±‚ï¼Œå°½é‡åˆå¹¶ API è°ƒç”¨ä»¥å‡å°‘å»¶è¿Ÿã€‚*

### 3.3 åŠ¨æ€è·¯ç”±ä¸å‚æ•°åŒ–æ¥å£

Nuxt çš„åŠ¨æ€è·¯ç”±ä¸æ¥å£å¼€å‘é…åˆå¾—å¤©è¡£æ— ç¼ã€‚

**ç¤ºä¾‹ï¼šåŠ¨æ€ç”¨æˆ·é¡µé¢**

```javascript
<script setup>
const route = useRoute();
const { data: user } = await useFetch(`/api/users/${route.params.id}`);
</script>

<template>
  <div>
    <h1>{{ user.name }}</h1>
    <p>Email: {{ user.email }}</p>
  </div>
</template>
```

> **å¹½é»˜æ’æ›²**ï¼šåŠ¨æ€è·¯ç”±å°±åƒç‚¹åå†Œï¼ŒNuxt æ¯æ¬¡éƒ½èƒ½ç²¾å‡†æ‰¾åˆ°â€œå¼ ä¼Ÿâ€è¿˜æ˜¯â€œæä¼Ÿâ€ï¼ğŸ“‹
>
> *Tipï¼šå¯¹åŠ¨æ€å‚æ•°è¿›è¡Œæ ¡éªŒï¼ˆå¦‚ `if (!route.params.id) throw new Error('Missing ID')`ï¼‰ï¼Œé˜²æ­¢æ— æ•ˆè¯·æ±‚ã€‚*

---

## 4. æ€§èƒ½ä¼˜åŒ–ä¸é”™è¯¯å¤„ç†

æ¥å£å¼€å‘ä¸ä»…è¦â€œèƒ½ç”¨â€ï¼Œè¿˜è¦â€œå¿«â€å’Œâ€œç¨³â€ã€‚

### 4.1 æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

ä»¥ä¸‹æ˜¯ä¸€äº›å®ç”¨çš„ä¼˜åŒ–æŠ€å·§ï¼š

| ä¼˜åŒ–ç­–ç•¥            | å®ç°æ–¹å¼                                   | æ•ˆæœ                     |
|---------------------|-------------------------------------------|--------------------------|
| è¯·æ±‚ç¼“å­˜            | ä½¿ç”¨ `useFetch` çš„ `key` å’Œ `cache` é€‰é¡¹   | å‡å°‘é‡å¤è¯·æ±‚             |
| æ‰¹é‡è¯·æ±‚            | åˆå¹¶å¤šä¸ª API è°ƒç”¨ä¸ºå•ä¸ªè¯·æ±‚                | é™ä½ç½‘ç»œå¼€é”€             |
| å»¶è¿ŸåŠ è½½            | ä½¿ç”¨ `useLazyFetch`                        | æå‡é¦–å±æ¸²æŸ“é€Ÿåº¦         |
| æœåŠ¡ç«¯é¢„å–          | åœ¨ `asyncData` ä¸­é¢„å–æ•°æ®                  | åŠ é€Ÿ SSR é¡µé¢åŠ è½½        |

**ç¤ºä¾‹ï¼šç¼“å­˜è¯·æ±‚**

```javascript
const { data } = await useFetch('/api/settings', {
  key: 'global-settings',
  cache: 'force-cache',
});
```

> **ç±»æ¯”**ï¼šç¼“å­˜å°±åƒä½ å®¶é‡Œçš„å†°ç®±ï¼Œå¸¸ç”¨é£Ÿæï¼ˆæ•°æ®ï¼‰éšæ—¶å–ç”¨ï¼Œä¸ç”¨æ¯æ¬¡éƒ½è·‘è¶…å¸‚ï¼ˆæœåŠ¡å™¨ï¼‰ã€‚ğŸ§Š
>
> *Tipï¼šä¸ºæ¯ä¸ª `useFetch` è®¾ç½®å”¯ä¸€çš„ `key`ï¼Œé¿å…ç¼“å­˜å†²çªã€‚*

### 4.2 é”™è¯¯å¤„ç†

å¥å£®çš„é”™è¯¯å¤„ç†æ˜¯æ¥å£å¼€å‘çš„å¿…å¤‡æŠ€èƒ½ã€‚

**ç¤ºä¾‹ï¼šå…¨å±€é”™è¯¯å¤„ç†**

```javascript
// plugins/errorHandler.js
export default defineNuxtPlugin((nuxtApp) => {
  nuxtApp.hook('vue:error', (error) => {
    console.error('Vue é”™è¯¯:', error);
    // è·³è½¬åˆ°é”™è¯¯é¡µé¢æˆ–æ˜¾ç¤ºæç¤º
  });
});

// ç»„ä»¶ä¸­çš„é”™è¯¯å¤„ç†
<script setup>
const { data, error } = await useFetch('/api/users');
if (error.value) {
  throw createError({
    statusCode: 500,
    message: 'æ— æ³•åŠ è½½ç”¨æˆ·æ•°æ®',
  });
}
</script>
```

> **å¹½é»˜æ—¶åˆ»**ï¼šé”™è¯¯å¤„ç†å°±åƒç»™é£èˆ¹è£…ä¸Šé™è½ä¼ï¼Œå è½æ—¶ä¸è‡³äºæ‘”å¾—ç¨€å·´çƒ‚ï¼ğŸª‚
>
> *Tipï¼šä½¿ç”¨ Nuxt çš„ `createError` åˆ›å»ºè‡ªå®šä¹‰é”™è¯¯ï¼Œå¹¶ç»“åˆ `error.vue` é¡µé¢æä¾›å‹å¥½çš„é”™è¯¯æç¤ºã€‚*

---

## 5. æœ€ä½³å®è·µä¸å›¢é˜Ÿåä½œ

æ¥å£å¼€å‘ä¸ä»…æ˜¯æŠ€æœ¯é—®é¢˜ï¼Œä¹Ÿæ˜¯å›¢é˜Ÿåä½œçš„è‰ºæœ¯ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›æœ€ä½³å®è·µï¼š

### 5.1 æ¨¡å—åŒ–æ¥å£ç®¡ç†

å°†æ¥å£è°ƒç”¨å°è£…ä¸ºå¯å¤ç”¨çš„æ¨¡å—ï¼Œæé«˜ä»£ç å¯ç»´æŠ¤æ€§ã€‚

**ç¤ºä¾‹ï¼šAPI æ¨¡å—**

```javascript
// composables/api.js
export const useApi = () => {
  const config = useRuntimeConfig();
  const baseURL = config.public.apiBase;

  const getUsers = async (params) => {
    return useFetch('/api/users', { baseURL, query: params });
  };

  const getUserById = async (id) => {
    return useFetch(`/api/users/${id}`, { baseURL });
  };

  return { getUsers, getUserById };
};

// ä½¿ç”¨
<script setup>
const { getUsers } = useApi();
const { data: users } = await getUsers({ page: 1, limit: 10 });
</script>
```

> **ç±»æ¯”**ï¼šæ¨¡å—åŒ–æ¥å£å°±åƒä¹é«˜ç§¯æœ¨ï¼Œæ‹¼è£…æ–¹ä¾¿ï¼Œæ‹†å¸ä¹Ÿä¸è´¹åŠ²ã€‚ğŸ§±
>
> *Tipï¼šä¸ºæ¯ä¸ªæ¨¡å—å®šä¹‰ TypeScript æ¥å£ï¼Œç¡®ä¿ç±»å‹å®‰å…¨ã€‚*

### 5.2 æ–‡æ¡£åŒ–ä¸ Mock æ•°æ®

ä¸åç«¯åä½œæ—¶ï¼Œæ¸…æ™°çš„æ¥å£æ–‡æ¡£å’Œ Mock æ•°æ®è‡³å…³é‡è¦ã€‚

- **å·¥å…·æ¨è**ï¼šä½¿ç”¨ Swagger æˆ– Postman ç¼–å†™æ¥å£æ–‡æ¡£ã€‚
- **Mock æ•°æ®**ï¼šä½¿ç”¨ Nuxt çš„ `server` ç›®å½•åˆ›å»ºæ¨¡æ‹Ÿ APIã€‚

**ç¤ºä¾‹ï¼šMock API**

```javascript
// server/api/users.get.js
export default defineEventHandler(() => {
  return [
    { id: 1, name: 'Alice' },
    { id: 2, name: 'Bob' },
  ];
});
```

> **å¹½é»˜æ’æ›²**ï¼šMock æ•°æ®å°±åƒæ‹ç”µå½±æ—¶çš„æ›¿èº«æ¼”å‘˜ï¼Œæ­£å¼æ¼”å‘˜ï¼ˆåç«¯ï¼‰è¿˜æ²¡åˆ°ä½æ—¶ï¼Œå®ƒå…ˆé¡¶ä¸Šï¼ğŸ¬
>
> *Tipï¼šä½¿ç”¨ `msw` æˆ– `json-server` æ¨¡æ‹Ÿå¤æ‚æ¥å£ï¼Œæå‡å¼€å‘æ•ˆç‡ã€‚*

---

## 6. è¿›é˜¶è¯é¢˜

### 6.1 Nuxt 3 çš„æ–°ç‰¹æ€§

Nuxt 3 å¼•å…¥äº† Nitro å¼•æ“å’Œç»„åˆå¼ APIï¼Œä¸ºæ¥å£å¼€å‘å¸¦æ¥äº†æ–°å¯èƒ½ï¼š

- **Nitro å¼•æ“**ï¼šæ”¯æŒæœåŠ¡å™¨ç«¯ API è·¯ç”±ï¼Œç®€åŒ–åç«¯å¼€å‘ã€‚
- **ç»„åˆå¼ API**ï¼š`useFetch` å’Œ `useAsyncData` æä¾›æ›´çµæ´»çš„æ•°æ®è·å–æ–¹å¼ã€‚

**ç¤ºä¾‹ï¼šNitro API è·¯ç”±**

```javascript
// server/api/hello.get.js
export default defineEventHandler(() => {
  return { message: 'Hello from Nitro!' };
});
```

> **ç±»æ¯”**ï¼šNitro å°±åƒ Nuxt çš„â€œæ¶¡è½®å¢å‹å™¨â€ï¼Œè®©æ¥å£å¼€å‘é€Ÿåº¦é£™å‡ï¼ğŸï¸
>
> *Tipï¼šå°† Nitro è·¯ç”±ä¸ `useFetch` ç»“åˆï¼Œè½»æ¾å®ç°å…¨æ ˆå¼€å‘ã€‚*

### 6.2 å¾®æœåŠ¡é›†æˆ

åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼ŒNuxt éœ€è¦ä¸å¤šä¸ªåç«¯æœåŠ¡äº¤äº’ã€‚æ¨èä½¿ç”¨ API ç½‘å…³æˆ– BFFï¼ˆBackend for Frontendï¼‰æ¨¡å¼ã€‚

**ç¤ºä¾‹ï¼šBFF è°ƒç”¨**

```javascript
const { data } = await useFetch('/bff/users', {
  baseURL: config.public.bffBase,
});
```

> **å¹½é»˜æ—¶åˆ»**ï¼šå¾®æœåŠ¡å°±åƒä¸€ç¾¤æ€§æ ¼è¿¥å¼‚çš„å¨å¸ˆï¼ŒBFF æ˜¯é‚£ä¸ªå¸®ä½ åè°ƒèœå•çš„å¤§å¨ï¼ğŸ‘¨â€ğŸ³
>
> *Tipï¼šä½¿ç”¨ç¯å¢ƒå˜é‡åŒºåˆ†ä¸åŒå¾®æœåŠ¡çš„åœ°å€ï¼Œé¿å…ç¡¬ç¼–ç ã€‚*

---

## 7. æ€»ç»“ä¸å±•æœ›

Nuxt çš„æ¥å£è®¾è®¡ä¸å¼€å‘æ˜¯ä¸€ä¸ªå…¼å…·æŠ€æœ¯ä¸è‰ºæœ¯çš„è¿‡ç¨‹ã€‚ä»ç†è§£æ¡†æ¶çš„è¿è¡Œæ—¶ä¸Šä¸‹æ–‡ï¼Œåˆ°è®¾è®¡é«˜æ•ˆçš„æ¥å£ï¼Œå†åˆ°å®ç°ä¼˜é›…çš„ä»£ç å’Œä¼˜åŒ–æ€§èƒ½ï¼Œæ¯ä¸€æ­¥éƒ½éœ€è¦æ·±æ€ç†Ÿè™‘ã€‚é€šè¿‡æœ¬æ–‡çš„è®²è§£ï¼Œå¸Œæœ›ä½ èƒ½æŒæ¡ Nuxt æ¥å£å¼€å‘çš„ç²¾é«“ï¼Œå¹¶åœ¨å®é™…é¡¹ç›®ä¸­æ¸¸åˆƒæœ‰ä½™ã€‚

æœªæ¥ï¼Œéšç€ Nuxt å’Œ Vue ç”Ÿæ€çš„ä¸æ–­æ¼”è¿›ï¼Œæˆ‘ä»¬å¯ä»¥æœŸå¾…æ›´æ™ºèƒ½çš„å·¥å…·ï¼ˆå¦‚ AI é©±åŠ¨çš„æ¥å£ç”Ÿæˆï¼‰ã€æ›´å¼ºå¤§çš„æ€§èƒ½ä¼˜åŒ–ï¼ˆå¦‚ WebAssembly é›†æˆï¼‰ï¼Œä»¥åŠæ›´æ— ç¼çš„å…¨æ ˆå¼€å‘ä½“éªŒã€‚ğŸŒŸ

> **æœ€åä¸€å¥**ï¼šæ¥å£å¼€å‘å°±åƒè°ˆæ‹çˆ±ï¼Œæ²Ÿé€šï¼ˆè®¾è®¡ï¼‰è¦æ¸…æ™°ï¼Œæ‰§è¡Œï¼ˆå¼€å‘ï¼‰è¦é«˜æ•ˆï¼Œä¼˜åŒ–ï¼ˆä½“éªŒï¼‰è¦ç”¨å¿ƒã€‚æ„¿ä½ çš„ Nuxt é¡¹ç›®å¦‚æ‹çˆ±èˆ¬ç”œèœœï¼ğŸ’–
>
> *Tipï¼šæŒç»­å…³æ³¨ Nuxt å®˜æ–¹æ–‡æ¡£å’Œç¤¾åŒºåŠ¨æ€ï¼Œä¿æŒæŠ€æœ¯æ ˆçš„é¢†å…ˆæ€§ã€‚*

---