---

type: "Post"
title: "ESLint + Prettier é¡¹ç›®å®è·µæŒ‡å—"
date: "2023-01-10"
description: "ä»é›¶åˆ°ä¸€æ‰“é€ ä¼˜é›…ä»£ç è§„èŒƒåˆ©å™¨ï¼Œæ·±å…¥å‰–æ ESLint ä¸ Prettier çš„åŸç†ã€é…ç½®ä¸æœ€ä½³å®è·µï¼Œé™„å¸¦å¹½é»˜åæ§½ä¸å®ç”¨æ¡ˆä¾‹ã€‚"
keywords: "ESLint, Prettier, ä»£ç è§„èŒƒ, å‰ç«¯å¼€å‘, JavaScript, TypeScript, å›¢é˜Ÿåä½œ, è‡ªåŠ¨åŒ–å·¥å…·"
author: "æ™“é¾™"
image: "/images/hero/eslint-prettier-guide.jpg"
tags: ["ESLint", "Prettier", "å‰ç«¯å¼€å‘", "ä»£ç è´¨é‡"]
category: "å‰ç«¯å·¥ç¨‹åŒ–"

---

ä½œä¸ºä¸€åå‰ç«¯å¼€å‘è€…ï¼Œä½ æ˜¯å¦æ›¾è¢«å›¢é˜Ÿä»£ç é£æ ¼çš„æ··ä¹±æå¾—æŠ“ç‹‚ï¼Ÿä¸€ä¸ªæ–‡ä»¶ç”¨å•å¼•å·ï¼Œå¦ä¸€ä¸ªæ–‡ä»¶ç”¨åŒå¼•å·ï¼›æœ‰äººå–œæ¬¢åˆ†å·ï¼Œæœ‰äººè§†åˆ†å·å¦‚ä»‡æ•Œï¼›ç¼©è¿›æ˜¯ 2 ä¸ªç©ºæ ¼è¿˜æ˜¯ 4 ä¸ªç©ºæ ¼ï¼Œç®€ç›´èƒ½å¼•å‘ä¸€åœºåŠå…¬å®¤å“²å­¦è¾©è®ºã€‚åˆ«æ…Œï¼Œä»Šå¤©æˆ‘ä»¬èŠèŠå¦‚ä½•ç”¨ **ESLint** å’Œ **Prettier** è¿™å¯¹é»„é‡‘æ­æ¡£ï¼ŒæŠŠä½ çš„é¡¹ç›®ä»â€œä»£ç åœ°ç‹±â€æ‹¯æ•‘åˆ°â€œè§„èŒƒå¤©å ‚â€ã€‚è¿™ä¸æ˜¯ä¸€ç¯‡æ¯ç‡¥çš„é…ç½®æ•™ç¨‹ï¼Œè€Œæ˜¯ä¸€åœºæ·±å…¥åŸç†ã€ç»“åˆå®è·µã€å¸¦ç‚¹é«˜çº§å¹½é»˜çš„å†’é™©ã€‚å‡†å¤‡å¥½äº†å—ï¼Ÿè®©æˆ‘ä»¬å¼€å§‹å§ï¼ğŸš€

## ä¸ºä»€ä¹ˆéœ€è¦ ESLint å’Œ Prettierï¼Ÿ

æƒ³è±¡ä¸€ä¸‹ï¼Œä»£ç è§„èŒƒå°±åƒæ˜¯å¨æˆ¿é‡Œçš„çƒ¹é¥ªè§„åˆ™ã€‚æ²¡æœ‰è§„åˆ™ï¼Œä½ çš„é˜Ÿå‹å¯èƒ½ä¼šæŠŠç›å½“æˆç³–ï¼ŒæŠŠä»£ç å†™å¾—åƒæŠ½è±¡æ´¾ç”»ä½œã€‚ESLint æ˜¯ä½ çš„â€œä»£ç è­¦å¯Ÿâ€ï¼Œè´Ÿè´£æ£€æŸ¥è¯­æ³•é”™è¯¯å’Œæ½œåœ¨ Bugï¼›è€Œ Prettier æ˜¯â€œè‡ªåŠ¨ç¾å·¥â€ï¼Œä¸€é”®æŠŠä»£ç æ ¼å¼åŒ–å¾—æ¼‚æ¼‚äº®äº®ã€‚ä¸¤è€…çš„ç»“åˆï¼Œå°±åƒç»™ä½ çš„é¡¹ç›®è¯·äº†ä¸ªç§äººç®¡å®¶ï¼Œæ—¢ç®¡çºªå¾‹ï¼Œåˆç®¡é¢œå€¼ã€‚

- **ESLint**ï¼šé™æ€åˆ†æå·¥å…·ï¼ŒåŸºäº ASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰æ£€æµ‹ä»£ç é—®é¢˜ï¼Œæ”¯æŒè‡ªå®šä¹‰è§„åˆ™ã€‚
- **Prettier**ï¼šæ ¼å¼åŒ–å·¥å…·ï¼Œä¸“æ³¨äºä»£ç å¤–è§‚ï¼Œæ— è§†ä½ çš„ä¸ªäººåå¥½ï¼Œç›´æ¥ç»Ÿä¸€é£æ ¼ã€‚

å®ƒä»¬ä¸æ˜¯ç«äº‰å…³ç³»ï¼Œè€Œæ˜¯äº’è¡¥çš„CPï¼ˆCouple Pairï¼‰ã€‚ESLint ç®¡é€»è¾‘ï¼ŒPrettier ç®¡ç¾æ„Ÿï¼Œå¼ºå¼ºè”æ‰‹ï¼Œç¼ºä¸€ä¸å¯ã€‚

**å° Tips**ï¼šåˆ«æŠŠ ESLint å’Œ Prettier å½“æˆâ€œéº»çƒ¦åˆ¶é€ è€…â€ï¼Œå®ƒä»¬æ˜¯è§£æ”¾ç”Ÿäº§åŠ›çš„ç¥å™¨ã€‚é…ç½®ä¸€æ¬¡ï¼Œå—ç›Šç»ˆç”Ÿã€‚

---

## ç¬¬ä¸€æ­¥ï¼šå®‰è£…ä¸åŸºæœ¬é…ç½®

### å®‰è£… ESLint

åœ¨é¡¹ç›®æ ¹ç›®å½•è·‘ä¸€å¥ï¼š

```bash
npm install eslint --save-dev
```

ç„¶ååˆå§‹åŒ–é…ç½®ï¼š

```bash
npx eslint --init
```

è¿™ä¼šå¼¹å‡ºä¸€å †é—®é¢˜ï¼Œæ¯”å¦‚â€œä½ ç”¨ä»€ä¹ˆæ¡†æ¶ï¼Ÿâ€ã€â€œç”¨ä¸ç”¨ TypeScriptï¼Ÿâ€ã€‚é€‰å®Œåï¼Œå®ƒä¼šç”Ÿæˆä¸€ä¸ª `.eslintrc.js` æ–‡ä»¶ã€‚åˆ«è¢«è¿™äº›é—®é¢˜å“åˆ°ï¼Œå›ç­”å®ƒä»¬å°±åƒå¡«ä¸ªæ€§æ ¼æµ‹è¯•ï¼Œç»“æœç›´æ¥å½±å“ä½ çš„ä»£ç äººç”Ÿã€‚

### å®‰è£… Prettier

æ¥ç€è£… Prettierï¼š

```bash
npm install prettier --save-dev
```

åˆ›å»ºä¸€ä¸ª `.prettierrc` æ–‡ä»¶ï¼Œå¡«å…¥åŸºæœ¬é…ç½®ï¼š

```json
{
  "singleQuote": true,
  "trailingComma": "es5",
  "semi": true,
  "tabWidth": 2
}
```

### è®©å®ƒä»¬å’Œå¹³å…±å¤„

é»˜è®¤æƒ…å†µä¸‹ï¼ŒESLint å’Œ Prettier å¯èƒ½ä¼šæ‰“æ¶ï¼ˆæ¯”å¦‚ ESLint è¦æ±‚åˆ†å·ï¼ŒPrettier å´åˆ æ‰ï¼‰ã€‚è§£å†³åŠæ³•æ˜¯å®‰è£…ä¸€ä¸ªâ€œå’Œäº‹ä½¬â€æ’ä»¶ï¼š

```bash
npm install eslint-config-prettier eslint-plugin-prettier --save-dev
```

ç„¶ååœ¨ `.eslintrc.js` ä¸­é…ç½®ï¼š

```javascript
module.exports = {
  env: {
    browser: true,
    es2021: true,
  },
  extends: [
    'eslint:recommended',
    'plugin:prettier/recommended' // Prettier å’Œ ESLint çš„æ¡¥æ¢
  ],
  parserOptions: {
    ecmaVersion: 12,
    sourceType: 'module',
  },
  rules: {
    'prettier/prettier': 'error' // è¿å Prettier è§„åˆ™æ—¶æŠ¥é”™
  },
};
```

**å° Tips**ï¼šåˆ«å¿˜äº†åœ¨ `package.json` åŠ ä¸ªè„šæœ¬ `"lint": "eslint . --ext .js,.jsx,.ts,.tsx"`ï¼Œä¸€é”®æ£€æŸ¥æ‰€æœ‰ä»£ç ã€‚

---

## æ·±å…¥åŸç†ï¼šå®ƒä»¬æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ

### ESLint çš„é­”æ³•ï¼šAST çš„ç§˜å¯†

ESLint ä¸æ˜¯éšä¾¿æ‰«ä¸€çœ¼ä½ çš„ä»£ç å°±å®Œäº‹ï¼Œå®ƒä¼šæŠŠä»£ç è§£ææˆ **ASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰**ï¼Œç„¶åæ ¹æ®è§„åˆ™éå†è¿™æ£µæ ‘ã€‚æ¯”å¦‚ä½ å†™äº†ä¸ª `console.log`ï¼ŒESLint ä¼šæ£€æŸ¥å®ƒæ˜¯å¦è¢«ç¦ç”¨ã€‚å¦‚æœä½ ç”¨çš„æ˜¯ TypeScriptï¼Œè¿˜å¾—è£…ä¸ª `@typescript-eslint/parser`ï¼Œè®©å®ƒèƒ½è¯»æ‡‚ TS çš„è¯­æ³•ã€‚

ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾ä½ æœ‰è¿™ä¹ˆä¸€æ®µä»£ç ï¼š

```javascript
var x = 1
console.log(x)
```

ESLint ä¼šæŠŠè¿™è§£ææˆï¼š

```
Program
  VariableDeclaration
    VariableDeclarator
      Identifier (x)
      Literal (1)
  ExpressionStatement
    CallExpression
      Identifier (console)
      Identifier (log)
      Identifier (x)
```

ç„¶åè§„åˆ™ä¼šé€ä¸€æ£€æŸ¥ï¼Œæ¯”å¦‚ `no-var` è§„åˆ™ä¼šæç¤ºä½ æŠŠ `var` æ¢æˆ `let` æˆ– `const`ã€‚

**å° Tips**ï¼šæƒ³æ·±å…¥äº†è§£ ASTï¼Ÿè¯•è¯• [AST Explorer](https://astexplorer.net/)ï¼ŒæŠŠä½ çš„ä»£ç ä¸¢è¿›å»ï¼Œçœ‹çœ‹å®ƒé•¿å•¥æ ·ã€‚

### Prettier çš„éœ¸é“ï¼šæ ¼å¼åŒ–çš„é“è…•

Prettier ä¸è·Ÿä½ è®²é“ç†ï¼Œå®ƒä¼šç›´æ¥æŠŠä»£ç é‡æ–°æ’ç‰ˆã€‚å®ƒçš„æ ¸å¿ƒæ˜¯ä¸ªå« **Printer** çš„æ¨¡å—ï¼Œå…ˆæŠŠä»£ç è§£ææˆ ASTï¼Œç„¶åæ ¹æ®é…ç½®é‡æ–°ç”Ÿæˆæ ¼å¼åŒ–åçš„ä»£ç ã€‚æ¯”å¦‚ï¼š

è¾“å…¥ï¼š

```javascript
function hello(name) {console.log('Hello ' + name)}
```

è¾“å‡ºï¼š

```javascript
function hello(name) {
  console.log('Hello ' + name);
}
```

Prettier çš„å“²å­¦æ˜¯â€œæ„è§ç»Ÿä¸€æ¯”æ„è§æ­£ç¡®æ›´é‡è¦â€ï¼Œæ‰€ä»¥åˆ«è·Ÿå®ƒäº‰ç¼©è¿›æ˜¯ 2 æ ¼è¿˜æ˜¯ 4 æ ¼ï¼Œå®ƒè¯´äº†ç®—ã€‚

**å° Tips**ï¼šå¦‚æœä½ å¯¹ Prettier çš„é»˜è®¤é£æ ¼ä¸çˆ½ï¼Œå¯ä»¥ç”¨ `.prettierrc` å¾®è°ƒï¼Œä½†åˆ«è°ƒå¤ªå¤šï¼Œä¸ç„¶å°±å¤±å»äº†å®ƒçš„æ„ä¹‰ã€‚

---

## æœ€ä½³å®è·µï¼šè®©ä»£ç è§„èŒƒé£èµ·æ¥

### 1. é›†æˆåˆ° Git Hooks

æ‰‹åŠ¨è·‘ `eslint` å’Œ `prettier`ï¼Ÿå¤ª low äº†ï¼ç”¨ **Husky** å’Œ **lint-staged** è‡ªåŠ¨æ£€æŸ¥ï¼š

```bash
npm install husky lint-staged --save-dev
npx husky init
```

åœ¨ `.husky/pre-commit` ä¸­åŠ ï¼š

```bash
#!/bin/sh
. "$(dirname "$0")/_/husky.sh"
npx lint-staged
```

ç„¶ååœ¨ `package.json` é…ç½®ï¼š

```json
{
  "lint-staged": {
    "*.{js,jsx,ts,tsx}": [
      "eslint --fix",
      "prettier --write"
    ]
  }
}
```

ç°åœ¨æ¯æ¬¡æäº¤ä»£ç ï¼ŒESLint å’Œ Prettier ä¼šè‡ªåŠ¨ä¿®å¤é—®é¢˜ã€‚æäº¤å¤±è´¥ï¼Ÿè¯´æ˜ä½ çš„ä»£ç è¿˜ä¸å¤Ÿä¼˜é›…ï¼Œå›å»æ”¹å§ï¼

**å° Tips**ï¼šåˆ«å¿˜äº†åŠ  `--fix`ï¼Œä¸ç„¶åªæ˜¯æ£€æŸ¥ä¸ä¿®å¤ï¼Œå°±åƒåŒ»ç”Ÿåªè¯Šæ–­ä¸å¼€è¯ã€‚

### 2. å›¢é˜Ÿåä½œï¼šå…±äº«é…ç½®

å›¢é˜Ÿé¡¹ç›®é‡Œï¼Œæ¯ä¸ªäººéƒ½è‡ªå·±é…ä¸€å¥— ESLintï¼Ÿé‚£è¿˜ä¸å¦‚ç›´æ¥æ•£ä¼™ã€‚åˆ›å»ºä¸€ä¸ªå…±äº«çš„ ESLint é…ç½®åŒ…ï¼š

```bash
mkdir eslint-config-my-team && cd eslint-config-my-team
npm init -y
```

ç¼–è¾‘ `index.js`ï¼š

```javascript
module.exports = {
  extends: ['eslint:recommended', 'plugin:prettier/recommended'],
  rules: {
    'no-console': 'warn',
    'prettier/prettier': 'error',
  },
};
```

å‘å¸ƒåˆ° npmï¼Œç„¶ååœ¨é¡¹ç›®é‡Œç”¨ï¼š

```bash
npm install eslint-config-my-team --save-dev
```

åœ¨ `.eslintrc.js` ä¸­å¼•ç”¨ï¼š

```javascript
module.exports = {
  extends: 'my-team',
};
```

**å° Tips**ï¼šç‰ˆæœ¬æ§åˆ¶å¾ˆé‡è¦ï¼Œåˆ«è®©å›¢é˜Ÿç”¨ç€ä¸åŒç‰ˆæœ¬çš„é…ç½®ï¼Œé‚£å°±åƒä¸€ä¸ªä¹é˜Ÿç”¨ä¸åŒè°ƒçš„ odrder of precedence

**å° Tips**ï¼šåŠ ä¸ª `README.md` è¯´æ˜é…ç½®çš„ç”¨æ³•ï¼Œåˆ«è®©æ–°äººä¸€è„¸æ‡µé€¼ã€‚

### 3. TypeScript é¡¹ç›®çš„æœ€ä½³æ‹æ¡£

ç”¨ TypeScriptï¼Ÿåˆ«å¿˜äº†åŠ è¿™äº›æ’ä»¶ï¼š

```bash
npm install @typescript-eslint/eslint-plugin @typescript-eslint/parser --save-dev
```

é…ç½®ï¼š

```javascript
module.exports = {
  parser: '@typescript-eslint/parser',
  plugins: ['@typescript-eslint'],
  extends: [
    'plugin:@typescript-eslint/recommended',
    'plugin:prettier/recommended',
  ],
};
```

**å° Tips**ï¼šç¦ç”¨ä¸€äº› JS è§„åˆ™ï¼Œæ¯”å¦‚ `no-undef`ï¼Œå› ä¸º TS å·²ç»å¸®ä½ æ£€æŸ¥äº†ã€‚

### 4. VS Code é›†æˆ

åœ¨ VS Code è£…ä¸Š ESLint å’Œ Prettier æ’ä»¶ï¼Œç„¶ååœ¨ `settings.json` åŠ ï¼š

```json
{
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true
  },
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "editor.formatOnSave": true
}
```

ä¿å­˜æ—¶è‡ªåŠ¨ä¿®å¤ï¼Œæ•ˆç‡èµ·é£ï¼

**å° Tips**ï¼šåˆ«å¿˜äº†é‡å¯ VS Codeï¼Œä¸ç„¶é…ç½®ä¸ç”Ÿæ•ˆï¼Œå°±åƒä¹°äº†æ–°æ‰‹æœºä¸æ’ SIM å¡ã€‚

---

## é«˜çº§ç©æ³•ï¼šè‡ªå®šä¹‰è§„åˆ™ä¸æ’ä»¶

### å†™ä¸ª ESLint æ’ä»¶

è§‰å¾—ç°æœ‰è§„åˆ™ä¸å¤Ÿç”¨ï¼Ÿè‡ªå·±å†™ä¸€ä¸ªï¼æ¯”å¦‚ç¦æ­¢åœ¨ React é¡¹ç›®é‡Œç”¨ `var`ï¼š

```javascript
module.exports = {
  rules: {
    'no-var-in-react': {
      create(context) {
        return {
          VariableDeclaration(node) {
            if (node.kind === 'var') {
              context.report({
                node,
                message: 'åˆ«ç”¨ var å•¦ï¼ŒReact éƒ½ 2025 å¹´äº†ï¼',
              });
            }
          },
        };
      },
    },
  },
};
```

**å° Tips**ï¼šæµ‹è¯•è§„åˆ™æ—¶ç”¨ `eslint --print-config` æŸ¥çœ‹æœ€ç»ˆé…ç½®ï¼Œåˆ«è®© bug æ½œä¼ã€‚

### Prettier æ’ä»¶

Prettier ä¹Ÿæ”¯æŒæ’ä»¶ï¼Œæ¯”å¦‚æ ¼å¼åŒ– GraphQLï¼š

```bash
npm install prettier-plugin-graphql --save-dev
```

ç„¶å `.prettierrc` åŠ ï¼š

```json
{
  "plugins": ["prettier-plugin-graphql"]
}
```

**å° Tips**ï¼šæ’ä»¶ç”¨å¤šäº†ä¼šå˜æ…¢ï¼ŒæŒ‘å‡ ä¸ªæœ€å¸¸ç”¨çš„å°±è¡Œã€‚

---

## å¸¸è§å‘ä¸è§£å†³åŠæ³•

1. **ESLint å’Œ Prettier å†²çª**  
   ç°è±¡ï¼šESLint æŠ¥é”™ï¼ŒPrettier åˆæ”¹å›å»ã€‚  
   è§£å†³ï¼šç”¨ `eslint-config-prettier` å…³é—­å†²çªè§„åˆ™ã€‚

2. **æ€§èƒ½é—®é¢˜**  
   ç°è±¡ï¼šå¤§é¡¹ç›®è·‘ ESLint å¡æ­»ã€‚  
   è§£å†³ï¼šåŠ  `--max-warnings 0` ä¸¥æ ¼è¦æ±‚ï¼Œæˆ–è€…ç”¨ `--cache` ç¼“å­˜ç»“æœã€‚

3. **å›¢é˜Ÿä¸éµå®ˆè§„èŒƒ**  
   ç°è±¡ï¼šæœ‰äººå·å·å…³æ‰æ ¼å¼åŒ–ã€‚  
   è§£å†³ï¼šç”¨ Git Hooks å¼ºåˆ¶æ‰§è¡Œï¼Œæˆ–è€…ç›´æ¥å¼€ä¼šâ€œçµé­‚æ‹·é—®â€ã€‚

**å° Tips**ï¼šé‡åˆ°é—®é¢˜åˆ«æ…Œï¼Œå…ˆ Googleï¼Œå†ç¿»å®˜æ–¹æ–‡æ¡£ï¼Œæœ€åé—® ChatGPTï¼ˆå¼€ç©ç¬‘ï¼Œæœ€åé—®æˆ‘ï¼‰ã€‚

---

## ç»“è¯­ï¼šä»£ç è§„èŒƒçš„è‰ºæœ¯

ESLint å’Œ Prettier ä¸æ˜¯è®©ä½ å˜æˆâ€œæ ¼å¼åŒ–å¥´éš¶â€ï¼Œè€Œæ˜¯å¸®ä½ æŠŠç²¾åŠ›é›†ä¸­åœ¨æ›´æœ‰åˆ›æ„çš„äº‹æƒ…ä¸Šã€‚é…ç½®å¥½äº†ï¼Œå®ƒä»¬å°±åƒéšå½¢çš„ä»£ç å®ˆæŠ¤ç¥ï¼Œè®©ä½ çš„é¡¹ç›®æ—¢ä¼˜é›…åˆå¥å£®ã€‚å¸Œæœ›è¿™ç¯‡æŒ‡å—èƒ½è®©ä½ ä»â€œä»£ç æ··æˆ˜â€ä¸­è§£è„±å‡ºæ¥ï¼Œå†™å‡ºå€¼å¾—éª„å‚²çš„ä½œå“ã€‚

æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿæ¬¢è¿ç•™è¨€åæ§½ï¼Œæ¯•ç«Ÿï¼Œä»£ç è§„èŒƒè¿™ä»¶äº‹ï¼Œæ¯”å†™ä»£ç è¿˜å€¼å¾—è¾ƒçœŸï¼ğŸ˜

--- 