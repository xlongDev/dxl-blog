---

title: "Vite + Vue3 + TS ä»é›¶æ­å»ºä¼ä¸šçº§é¡¹ç›®è„šæ‰‹æ¶"
date: "2024-05-04"
description: "æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ Viteã€Vue3 å’Œ TypeScript ä»é›¶æ­å»ºä¸€ä¸ªä¼ä¸šçº§é¡¹ç›®è„šæ‰‹æ¶ï¼Œæ·±å…¥åŸç†ï¼Œé™„å¸¦æœ€ä½³å®è·µå’Œå¹½é»˜åæ§½ï¼Œé€‚åˆä¸­é«˜çº§å‰ç«¯å¼€å‘è€…ã€‚"
keywords: "Vite, Vue3, TypeScript, ä¼ä¸šçº§é¡¹ç›®, è„šæ‰‹æ¶, å‰ç«¯å¼€å‘, æ„å»ºå·¥å…·, æœ€ä½³å®è·µ"
author: "æ™“é¾™"
image: "/images/hero/vite-vue3-ts.jpg"
tags: ["Vue3", "Vite", "TypeScript", "å‰ç«¯å·¥ç¨‹åŒ–"]
category: "å‰ç«¯å·¥ç¨‹åŒ–"

---

å—¨ï¼Œå„ä½å‰ç«¯è€é“ä»¬ï¼ä»Šå¤©æˆ‘ä»¬æ¥èŠç‚¹ç¡¬æ ¸çš„ï¼šå¦‚ä½•ç”¨ **Vite + Vue3 + TypeScript** ä»é›¶æ‰“é€ ä¸€ä¸ªä¼ä¸šçº§é¡¹ç›®è„šæ‰‹æ¶ã€‚ä¸æ˜¯é‚£ç§â€œnpm create vue ç„¶åå®Œäº‹â€çš„æ•·è¡æ•™ç¨‹ï¼Œè€Œæ˜¯æ·±å…¥åŸç†ã€å¸¦ç‚¹ä¸ªäººé£æ ¼ã€è¿˜èƒ½è®©ä½ è¾¹å­¦è¾¹ç¬‘çš„é‚£ç§ã€‚ç›®æ ‡æ˜¯æ‰“é€ ä¸€ä¸ªæ—¢é«˜æ•ˆåˆä¼˜é›…çš„å¼€å‘ç¯å¢ƒï¼Œé€‚åˆä¸­å¤§å‹é¡¹ç›®ï¼Œåº”å¯¹å„ç§â€œäº§å“ç»ç†çš„å¥‡æ€å¦™æƒ³â€ã€‚

è¿™ç¯‡æ–‡ç« ä¼šå¾ˆé•¿ï¼ˆæ¯•ç«Ÿè¦æ¦¨å¹²æˆ‘çš„ tokenï¼‰ï¼Œæˆ‘ä¼šå°½é‡æŠŠæ¯ä¸ªç¯èŠ‚è®²é€ï¼Œé…ä¸Šä»£ç ç¤ºä¾‹ã€æœ€ä½³å®è·µï¼Œç”šè‡³è¿˜æœ‰ç‚¹ç±»æ¯”å’Œ emoji âœ¨ã€‚å‡†å¤‡å¥½äº†å—ï¼Ÿè®©æˆ‘ä»¬å¼€å§‹è¿™åœºâ€œåŸºå»ºä¹‹æ—…â€å§ï¼

## ä¸ºä»€ä¹ˆé€‰æ‹© Vite + Vue3 + TSï¼Ÿ

åœ¨åŠ¨æ‰‹ä¹‹å‰ï¼Œå…ˆèŠèŠä¸ºå•¥é€‰è¿™ä¸‰å‰‘å®¢ï¼š

- **Vite**ï¼šæ–°ä¸€ä»£æ„å»ºå·¥å…·ï¼ŒåŸºäº ES Modulesï¼Œå¯åŠ¨å¿«å¾—åƒåƒäº†ç«ç®­ç‡ƒæ–™ ğŸš€ï¼Œçƒ­æ›´æ–°ç§’çº§å“åº”ï¼Œæ¯” Webpack çˆ½å¤ªå¤šã€‚
- **Vue3**ï¼šComposition API å¸¦æ¥çš„çµæ´»æ€§ + æ€§èƒ½ä¼˜åŒ–ï¼Œç®€ç›´æ˜¯â€œç»„ä»¶åŒ–å¼€å‘â€çš„æ–°æ ‡æ†ã€‚
- **TypeScript**ï¼šç±»å‹å®‰å…¨æ˜¯ä¼ä¸šé¡¹ç›®çš„å‘½æ ¹å­ï¼Œå°‘è¸©å‘ï¼Œå¤šå®‰å¿ƒã€‚

ç±»æ¯”ä¸€ä¸‹ï¼šVite æ˜¯è·‘è½¦å¼•æ“ï¼ŒVue3 æ˜¯æµçº¿å‹è½¦èº«ï¼ŒTS æ˜¯å®‰å…¨å¸¦ï¼Œä¸‰è€…åˆä¸€ï¼Œè·‘å¾—å¿«è¿˜ä¸ç¿»è½¦ã€‚å¥½äº†ï¼ŒåºŸè¯ä¸å¤šè¯´ï¼Œè¿›å…¥æ­£é¢˜ï¼

## ç¬¬ä¸€æ­¥ï¼šåˆå§‹åŒ–é¡¹ç›®

æˆ‘ä»¬ä»ä¸€ä¸ªå¹²å‡€çš„æ–‡ä»¶å¤¹å¼€å§‹ï¼Œå‡è®¾ä½ å·²ç»è£…å¥½äº† Node.jsï¼ˆå»ºè®®ç”¨ LTS ç‰ˆæœ¬ï¼Œæ¯”å¦‚ 20.xï¼‰ã€‚

```bash
mkdir vite-vue3-ts-scaffold && cd vite-vue3-ts-scaffold
npm init -y
```

ç„¶åå®‰è£… Vite å’Œ Vueï¼š

```bash
npm install vite vue @vitejs/plugin-vue -D
```

### é…ç½® Vite

æ–°å»º `vite.config.ts`ï¼Œè¿™æ˜¯ Vite çš„å¿ƒè„ï¼š

```typescript
import { defineConfig } from 'vite';
import vue from '@vitejs/plugin-vue';

export default defineConfig({
  plugins: [vue()],
  resolve: {
    alias: {
      '@': '/src', // è·¯å¾„åˆ«åï¼Œçœå¾—å†™ä¸€å † ../../
    },
  },
});
```

**Tips**: åˆ«å¿˜äº†åŠ  `@` åˆ«åï¼Œå¼€å‘æ—¶å°‘æ•²å‡ ä¸‹é”®ç›˜ï¼Œæ‰‹è…•ä¼šæ„Ÿè°¢ä½  ğŸ™Œã€‚

### åˆ›å»ºå…¥å£æ–‡ä»¶

æ–°å»º `index.html`ï¼š

```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>Vite + Vue3 + TS</title>
</head>
<body>
  <div id="app"></div>
  <script type="module" src="/src/main.ts"></script>
</body>
</html>
```

ç„¶åæ˜¯ `src/main.ts`ï¼š

```typescript
import { createApp } from 'vue';
import App from './App.vue';

createApp(App).mount('#app');
```

å†æ¥ä¸ª `src/App.vue`ï¼š

```vue
<template>
  <h1>Hello, Vite + Vue3 + TS!</h1>
</template>

<script lang="ts">
import { defineComponent } from 'vue';

export default defineComponent({
  name: 'App',
});
</script>
```

è·‘èµ·æ¥è¯•è¯•ï¼š

```bash
npx vite
```

æµè§ˆå™¨æ‰“å¼€ `http://localhost:5173`ï¼Œçœ‹åˆ°æ ‡é¢˜å°±è¯´æ˜æˆåŠŸäº†ï¼ğŸ‰

## ç¬¬äºŒæ­¥ï¼šå¼•å…¥ TypeScript

Vite é»˜è®¤æ”¯æŒ TSï¼Œä½†æˆ‘ä»¬å¾—æ‰‹åŠ¨è°ƒæ•´å‡ å¤„ã€‚æŠŠ `src/main.ts` æ”¹æˆè¿™æ ·ï¼š

```typescript
import { createApp } from 'vue';
import App from './App.vue';

const app = createApp(App);
app.mount('#app');
```

ç„¶åç»™ `App.vue` åŠ ç‚¹ TS å‘³å„¿ï¼š

```vue
<template>
  <h1>{{ message }}</h1>
</template>

<script lang="ts">
import { defineComponent } from 'vue';

export default defineComponent({
  name: 'App',
  data: () => ({
    message: 'Hello, TypeScript!' as string,
  }),
});
</script>
```

æ–°å»º `tsconfig.json`ï¼š

```json
{
  "compilerOptions": {
    "target": "ESNext",
    "module": "ESNext",
    "strict": true,
    "jsx": "preserve",
    "moduleResolution": "node",
    "esModuleInterop": true,
    "skipLibCheck": true,
    "baseUrl": ".",
    "paths": {
      "@/*": ["src/*"]
    }
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules"]
}
```

**Tips**: `"strict": true` æ˜¯ç¡¬æ ¸ç©å®¶çš„é€‰æ‹©ï¼Œèƒ½æªå‡ºæ½œåœ¨ bugï¼Œä½†æ–°æ‰‹å¯èƒ½ä¼šè¢«ç±»å‹æŠ¥é”™æå¾—å¤´ç§ƒï¼Œé…Œæƒ…å…³é—­éƒ¨åˆ†é€‰é¡¹ã€‚

## ç¬¬ä¸‰æ­¥ï¼šä¼ä¸šçº§é…ç½®

å…‰è·‘èµ·æ¥å¯ä¸è¡Œï¼Œä¼ä¸šé¡¹ç›®å¾—æœ‰â€œæ’é¢â€ã€‚æˆ‘ä»¬æ¥åŠ ç‚¹æ–™ï¼šè·¯ç”±ã€çŠ¶æ€ç®¡ç†ã€ä»£ç è§„èŒƒã€ç¯å¢ƒå˜é‡ç­‰ã€‚

### 1. é›†æˆ Vue Router

å®‰è£…ï¼š

```bash
npm install vue-router@4
```

æ–°å»º `src/router/index.ts`ï¼š

```typescript
import { createRouter, createWebHistory, RouteRecordRaw } from 'vue-router';

const routes: RouteRecordRaw[] = [
  {
    path: '/',
    name: 'Home',
    component: () => import('../views/Home.vue'),
  },
  {
    path: '/about',
    name: 'About',
    component: () => import('../views/About.vue'),
  },
];

const router = createRouter({
  history: createWebHistory(),
  routes,
});

export default router;
```

æ›´æ–° `main.ts`ï¼š

```typescript
import { createApp } from 'vue';
import App from './App.vue';
import router from './router';

const app = createApp(App);
app.use(router);
app.mount('#app');
```

æ–°å»º `src/views/Home.vue` å’Œ `About.vue`ï¼Œéšä¾¿å†™ç‚¹å†…å®¹æµ‹è¯•ã€‚è·¯ç”±æ‡’åŠ è½½ç”¨ `import()`ï¼Œèƒ½æ˜¾è‘—æå‡é¦–å±é€Ÿåº¦ã€‚

**Tips**: è·¯ç”±æ‡’åŠ è½½æ˜¯æ€§èƒ½ä¼˜åŒ–çš„â€œä½æŒ‚æœå®â€ï¼Œåˆ«å¿˜äº†ç”¨ï¼Œä¸ç„¶è€æ¿é—®ä½ ä¸ºå•¥é¦–å±æ…¢ï¼Œä½ åªèƒ½æ‘¸å¤´å‚»ç¬‘ ğŸ˜…ã€‚

### 2. çŠ¶æ€ç®¡ç†ï¼šPinia

Pinia æ˜¯ Vue3 çš„å®˜æ–¹æ¨èï¼Œå®‰è£…ï¼š

```bash
npm install pinia
```

æ–°å»º `src/store/index.ts`ï¼š

```typescript
import { defineStore } from 'pinia';

export const useMainStore = defineStore('main', {
  state: () => ({
    count: 0,
  }),
  actions: {
    increment() {
      this.count++;
    },
  },
});
```

åœ¨ `main.ts` å¼•å…¥ï¼š

```typescript
import { createApp } from 'vue';
import { createPinia } from 'pinia';
import App from './App.vue';
import router from './router';

const app = createApp(App);
app.use(createPinia());
app.use(router);
app.mount('#app');
```

åœ¨ç»„ä»¶é‡Œç”¨ï¼š

```vue
<template>
  <h1>Count: {{ store.count }}</h1>
  <button @click="store.increment">åŠ ä¸€</button>
</template>

<script lang="ts">
import { defineComponent } from 'vue';
import { useMainStore } from '@/store';

export default defineComponent({
  setup() {
    const store = useMainStore();
    return { store };
  },
});
</script>
```

**Tips**: Pinia çš„ `setup` è¯­æ³•æ¯” Vuex ç®€æ´å¤šäº†ï¼Œå°‘å†™ä¸€å † `mapState`ï¼Œå¹¸ç¦æ„Ÿç›´æ¥æ‹‰æ»¡ã€‚

### 3. ESLint + Prettier ä»£ç è§„èŒƒ

ä»£ç ä¹±äº†ï¼Œå›¢é˜Ÿå¼€å‘å°±æ˜¯ç¾éš¾ã€‚å®‰è£…ï¼š

```bash
npm install eslint prettier eslint-plugin-vue eslint-config-prettier -D
```

æ–°å»º `.eslintrc.js`ï¼š

```javascript
module.exports = {
  env: {
    browser: true,
    es2021: true,
    node: true,
  },
  extends: [
    'eslint:recommended',
    'plugin:vue/vue3-recommended',
    'prettier',
  ],
  parserOptions: {
    ecmaVersion: 12,
    sourceType: 'module',
  },
  plugins: ['vue'],
  rules: {
    'vue/multi-word-component-names': 'off', // ç»„ä»¶åå¯ä»¥å•è¯
  },
};
```

`.prettierrc`ï¼š

```json
{
  "semi": false,
  "singleQuote": true,
  "trailingComma": "es5"
}
```

**Tips**: å›¢é˜Ÿé‡Œæ€»æœ‰äººä¸çˆ±æ ¼å¼åŒ–ä»£ç ï¼Œé…ä¸ª `husky` + `lint-staged`ï¼Œæäº¤æ—¶è‡ªåŠ¨æ ¼å¼åŒ–ï¼Œçœå¾—åµæ¶ã€‚

### 4. ç¯å¢ƒå˜é‡

æ–°å»º `.env.development` å’Œ `.env.production`ï¼š

```
# .env.development
VITE_API_URL = "http://dev.api.com"
```

```
# .env.production
VITE_API_URL = "http://prod.api.com"
```

åœ¨ `vite.config.ts` ä¸­å¯ç”¨ï¼š

```typescript
import { defineConfig, loadEnv } from 'vite';
import vue from '@vitejs/plugin-vue';

export default defineConfig(({ mode }) => {
  const env = loadEnv(mode, process.cwd(), '');
  return {
    plugins: [vue()],
    resolve: {
      alias: {
        '@': '/src',
      },
    },
    define: {
      'process.env': env,
    },
  };
});
```

ä½¿ç”¨æ—¶ï¼š

```typescript
console.log(process.env.VITE_API_URL);
```

**Tips**: ç¯å¢ƒå˜é‡åå‰åŠ  `VITE_` æ˜¯ Vite çš„çº¦å®šï¼Œä¸ç„¶è®¿é—®ä¸åˆ°ï¼Œè¸©å‘ä¸€æ¬¡å°±è®°ä½äº†ã€‚

## ç¬¬å››æ­¥ï¼šä¼˜åŒ–ä¸æ‰©å±•

### 1. CSS æ–¹æ¡ˆï¼šTailwind CSS

å®‰è£…ï¼š

```bash
npm install tailwindcss postcss autoprefixer -D
npx tailwindcss init -p
```

`tailwind.config.js`ï¼š

```javascript
module.exports = {
  content: ['./index.html', './src/**/*.{vue,js,ts}'],
  theme: {
    extend: {},
  },
  plugins: [],
};
```

æ–°å»º `src/style.css`ï¼š

```css
@tailwind base;
@tailwind components;
@tailwind utilities;
```

åœ¨ `main.ts` å¼•å…¥ï¼š

```typescript
import './style.css';
```

**Tips**: Tailwind æ˜¯â€œåŸå­åŒ– CSSâ€çš„ä»£è¡¨ï¼Œå†™å¤šäº†ä¼šæœ‰â€œclass åçˆ†ç‚¸â€çš„æ„Ÿè§‰ï¼Œä½†ç†Ÿç»ƒåæ•ˆç‡é£èµ·ã€‚

### 2. è‡ªåŠ¨å¯¼å…¥

è£…ä¸ªæ’ä»¶çœå¿ƒï¼š

```bash
npm install unplugin-auto-import unplugin-vue-components -D
```

æ›´æ–° `vite.config.ts`ï¼š

```typescript
import AutoImport from 'unplugin-auto-import/vite';
import Components from 'unplugin-vue-components/vite';

export default defineConfig({
  plugins: [
    vue(),
    AutoImport({
      imports: ['vue', 'vue-router'],
      dts: 'src/auto-imports.d.ts',
    }),
    Components({
      dts: 'src/components.d.ts',
    }),
  ],
});
```

ç°åœ¨ `ref`ã€`reactive` éƒ½ä¸ç”¨æ‰‹åŠ¨å¯¼å…¥äº†ï¼Œçˆ½ï¼

### 3. æ‰“åŒ…ä¼˜åŒ–

Vite é»˜è®¤æ‰“åŒ…å·²ç»å¾ˆå¼ºï¼Œä½†ä¼ä¸šé¡¹ç›®å¯ä»¥åŠ ç‚¹æ–™ï¼š

```typescript
export default defineConfig({
  build: {
    rollupOptions: {
      output: {
        manualChunks: {
          vendor: ['vue', 'vue-router', 'pinia'],
        },
      },
    },
    minify: 'esbuild',
    sourcemap: true, // è°ƒè¯•ç”¨
  },
});
```

**Tips**: `manualChunks` åˆ†åŒ…èƒ½è®©é¦–å±æ›´å¿«ï¼Œ`sourcemap` åœ¨ç”Ÿäº§å…³æ‰ï¼Œå…å¾—æ³„éœ²æºç ã€‚

## ç¬¬äº”æ­¥ï¼šæ·±å…¥åŸç†

### Vite çš„å¿«ä»ä½•æ¥ï¼Ÿ

Vite åˆ©ç”¨æµè§ˆå™¨åŸç”Ÿ ES Modulesï¼Œå¼€å‘æ—¶ä¸æ‰“åŒ…ï¼Œç›´æ¥äº¤ç»™æµè§ˆå™¨è§£æã€‚ç”Ÿäº§æ—¶ç”¨ Rollup æ‰“åŒ…ï¼Œæ•ˆç‡é«˜åˆ°ç¦»è°±ã€‚Webpack åˆ™æ˜¯â€œå…¨å®¶æ¡¶å¼â€æ‰“åŒ…ï¼Œå¯åŠ¨æ…¢å¾—åƒè€ç‰›æ‹‰è½¦ã€‚

### Vue3 çš„ Composition API

ç›¸æ¯” Options APIï¼ŒComposition API æ›´çµæ´»ï¼Œé€»è¾‘å¤ç”¨é  `setup` å’Œè‡ªå®šä¹‰ hooksã€‚æ¯”å¦‚ï¼š

```typescript
// src/hooks/useCounter.ts
import { ref } from 'vue';

export function useCounter() {
  const count = ref(0);
  const increment = () => count.value++;
  return { count, increment };
}
```

ä½¿ç”¨ï¼š

```vue
<script lang="ts">
import { useCounter } from '@/hooks/useCounter';

export default {
  setup() {
    const { count, increment } = useCounter();
    return { count, increment };
  },
};
</script>
```

**Tips**: è‡ªå®šä¹‰ hooks æ˜¯â€œé€»è¾‘å¤ç”¨â€çš„ç¥å™¨ï¼Œæ¯” mixin ä¼˜é›…å¤ªå¤šã€‚

## æ€»ç»“ä¸å½©è›‹

åˆ°è¿™å„¿ï¼Œä¸€ä¸ªä¼ä¸šçº§è„šæ‰‹æ¶å°±æˆå‹äº†ï¼ä»åˆå§‹åŒ–åˆ°ä¼˜åŒ–ï¼Œæˆ‘ä»¬è¦†ç›–äº†è·¯ç”±ã€çŠ¶æ€ç®¡ç†ã€ä»£ç è§„èŒƒã€ç¯å¢ƒå˜é‡ã€CSS æ–¹æ¡ˆç­‰æ–¹æ–¹é¢é¢ã€‚å®é™…é¡¹ç›®ä¸­ï¼Œä½ å¯èƒ½è¿˜å¾—åŠ è¯·æ±‚åº“ï¼ˆaxiosï¼‰ã€UI æ¡†æ¶ï¼ˆElement Plusï¼‰ã€å•å…ƒæµ‹è¯•ï¼ˆVitestï¼‰ç­‰ï¼Œä½†è¿™å¥—åŸºç¡€å·²ç»å¤Ÿæ‰å®äº†ã€‚

å½©è›‹æ—¶é—´ï¼šå¦‚æœä½ è§‰å¾—é…ç½®éº»çƒ¦ï¼Œæˆ‘å·å·å†™äº†ä¸ª CLI å·¥å…·ï¼Œè·‘ä¸€å¥ `npx create-vite-ts-scaffold` å°±èƒ½ç”Ÿæˆè¿™å¥—æ¨¡æ¿ï¼ˆå¼€ç©ç¬‘å•¦ï¼Œæˆ‘æ²¡å†™ï¼Œä½†ä½ è¦æ˜¯æ„Ÿå…´è¶£å¯ä»¥è‡ªå·±æä¸€ä¸ªï¼‰ã€‚

æœ‰ä»€ä¹ˆé—®é¢˜æ¬¢è¿ç•™è¨€ï¼Œå’±ä»¬ä¸€èµ·æ¢è®¨ï¼å‰ç«¯è·¯æ¼«æ¼«ï¼Œæ„¿ä½ æˆ‘éƒ½èƒ½å†™å‡ºä¼˜é›…çš„ä»£ç ï¼Œå°‘åŠ ç‚¹ç­ ğŸ˜œã€‚

--- 