---
type: "Post"

title: "å‰ç«¯å·¥ç¨‹åŒ–å®æˆ˜ - è‡ªå®šä¹‰ React è„šæ‰‹æ¶"
date: "2023-05-14"
description: "ä»é›¶æ‰“é€ ä¸€ä¸ªè‡ªå®šä¹‰ React è„šæ‰‹æ¶ï¼Œæ·±å…¥å‰–æå·¥ç¨‹åŒ–åŸç†ï¼Œå¸¦ä½ ç©è½¬é…ç½®ã€ä¼˜åŒ–ä¸æ‰©å±•ï¼Œé€‚åˆæƒ³è¿›é˜¶çš„å‰ç«¯å¼€å‘è€…ã€‚"
keywords: "React, è„šæ‰‹æ¶, å‰ç«¯å·¥ç¨‹åŒ–, Webpack, Vite, ESLint, TypeScript, è‡ªåŠ¨åŒ–æ„å»º, æœ€ä½³å®è·µ"
author: "æ™“é¾™"
image: "/images/hero/react-scaffold.jpg"
tags: ["React", "å‰ç«¯å·¥ç¨‹åŒ–", "å·¥å…·é“¾"]
category: "å‰ç«¯å·¥ç¨‹åŒ–"

---

å˜¿ï¼Œå‰ç«¯å°ä¼™ä¼´ä»¬ï¼âœ¨ ä½ æ˜¯ä¸æ˜¯ä¹Ÿæ›¾è¢« `create-react-app`ï¼ˆCRAï¼‰çš„â€œé»‘ç›’â€æå¾—æŠ“ç‹‚ï¼Ÿæƒ³åŠ ä¸ªæ–°åŠŸèƒ½å´æ— ä»ä¸‹æ‰‹ï¼Œé…ç½®æ–‡ä»¶è—å¾—æ¯”æˆ‘å®¶çŒ«è¿˜æ·±ï¼Ÿæˆ–è€…ä½ ç”¨è¿‡ Viteï¼Œä½†æ€»è§‰å¾—å°‘äº†ç‚¹â€œçµé­‚è‡ªå®šä¹‰â€çš„å‘³é“ï¼Ÿä»Šå¤©ï¼Œå’±ä»¬å°±ä¸€èµ·åŠ¨æ‰‹æ‰“é€ ä¸€ä¸ªå±äºè‡ªå·±çš„ React è„šæ‰‹æ¶ï¼Œä»éœ€æ±‚åˆ†æåˆ°è½åœ°å®ç°ï¼Œå†åˆ°ä¼˜åŒ–æ‰©å±•ï¼Œå¸¦ä½ ä»â€œå·¥å…·ä½¿ç”¨è€…â€è¿›åŒ–æˆâ€œå·¥å…·åˆ›é€ è€…â€ã€‚è¿™ç¯‡æ–‡ç« ä¸ä»…æœ‰å¹²è´§ï¼Œè¿˜ä¼šå¤¹æ‚ç‚¹å°å¹½é»˜ï¼ˆä¿è¯ä¸è€å¥—ï¼‰ï¼Œè®©ä½ ä¸€è¾¹å­¦ä¸€è¾¹ç¬‘ã€‚å‡†å¤‡å¥½äº†å—ï¼ŸLetâ€™s dive in! ğŸš€

## ä¸ºä»€ä¹ˆéœ€è¦è‡ªå®šä¹‰è„šæ‰‹æ¶ï¼Ÿ

å…ˆé—®ä¸ªçµé­‚é—®é¢˜ï¼šä¸ºå•¥ä¸ç›´æ¥ç”¨ç°æˆçš„ CRA æˆ–è€… Viteï¼Ÿç­”æ¡ˆå¾ˆç®€å•â€”â€”**è‡ªç”±åº¦**å’Œ**æŒæ§æ„Ÿ**ã€‚CRA è™½ç„¶å¼€ç®±å³ç”¨ï¼Œä½†å®ƒå°±åƒä¸ªâ€œè¿‡äºè´´å¿ƒçš„ä¿å§†â€ï¼Œå•¥éƒ½ç»™ä½ å®‰æ’å¥½äº†ï¼Œæƒ³æ”¹ä¸ª Webpack é…ç½®ï¼Ÿå¯¹ä¸èµ·ï¼Œeject å§ï¼Œç„¶åè¿æ¥ä¸€å †ä»£ç çš„â€œç‹‚è½°æ»¥ç‚¸â€ã€‚Vite å‘¢ï¼Ÿé€Ÿåº¦å¿«å¾—é£èµ·ï¼Œä½†é»˜è®¤é…ç½®å¯èƒ½ä¸å®Œå…¨è´´åˆä½ çš„å›¢é˜Ÿéœ€æ±‚ï¼Œæ¯”å¦‚ä½ æƒ³åŠ ä¸ªç‰¹æ®Šçš„ lint è§„åˆ™æˆ–è€…è‡ªå®šä¹‰æ„å»ºæ’ä»¶ï¼Œå’‹æ•´ï¼Ÿ

è‡ªå®šä¹‰è„šæ‰‹æ¶çš„å¥½å¤„åœ¨äºï¼š
1. **å®Œå…¨æŒæ§**ï¼šä»æ„å»ºå·¥å…·åˆ°ä»£ç è§„èŒƒï¼Œæƒ³å’‹ç©å°±å’‹ç©ã€‚
2. **å›¢é˜Ÿå®šåˆ¶**ï¼šæ ¹æ®é¡¹ç›®éœ€æ±‚é‡èº«æ‰“é€ ï¼Œå‡å°‘é‡å¤é…ç½®çš„ç—›è‹¦ã€‚
3. **å­¦ä¹ æœºä¼š**ï¼šæ·±å…¥å·¥ç¨‹åŒ–åŸç†ï¼ŒæŠ€æœ¯æˆé•¿çš„â€œåŠ é€Ÿå™¨â€ã€‚

ç±»æ¯”ä¸€ä¸‹ï¼šCRA æ˜¯è‚¯å¾·åŸºå¥—é¤ï¼Œåƒç€çœå¿ƒä½†æ²¡æƒŠå–œï¼›è‡ªå®šä¹‰è„šæ‰‹æ¶åˆ™æ˜¯è‡ªå·±ä¸‹å¨ï¼Œæƒ³åƒå·èœè¿˜æ˜¯ç²¤èœï¼Œå…¨å‡­å¿ƒæƒ…ã€‚ğŸ³

---

## éœ€æ±‚åˆ†æï¼šæˆ‘ä»¬è¦å•¥æ ·çš„è„šæ‰‹æ¶ï¼Ÿ

åœ¨åŠ¨æ‰‹ä¹‹å‰ï¼Œå…ˆæƒ³æƒ³æˆ‘ä»¬æƒ³è¦å•¥ã€‚å‡è®¾æˆ‘ä»¬å›¢é˜Ÿéœ€è¦ä¸€ä¸ª React è„šæ‰‹æ¶ï¼Œæ”¯æŒä»¥ä¸‹åŠŸèƒ½ï¼š
- **åŸºç¡€åŠŸèƒ½**ï¼šReact + TypeScriptï¼ˆç±»å‹å®‰å…¨æ˜¯ä¿¡ä»°ï¼ï¼‰ã€‚
- **æ„å»ºå·¥å…·**ï¼šå¯é€‰ Webpack æˆ– Viteï¼ˆæ€§èƒ½å’Œçµæ´»æ€§å…¼å¾—ï¼‰ã€‚
- **ä»£ç è§„èŒƒ**ï¼šESLint + Prettierï¼ˆåˆ«è®©ä»£ç é£æ ¼æ’•è£‚å›¢é˜Ÿï¼‰ã€‚
- **CSS æ–¹æ¡ˆ**ï¼šæ”¯æŒ CSS Modules å’Œ Tailwind CSSï¼ˆæ ·å¼ä¹Ÿè¦ç°ä»£åŒ–ï¼‰ã€‚
- **è‡ªåŠ¨åŒ–**ï¼šGit é’©å­ + è‡ªåŠ¨æ ¼å¼åŒ–ï¼ˆæäº¤ä»£ç å‰è‡ªåŠ¨â€œæ´—è„¸â€ï¼‰ã€‚
- **æ‰©å±•æ€§**ï¼šæ”¯æŒè‡ªå®šä¹‰æ’ä»¶å’Œé…ç½®ï¼ˆæœªæ¥éœ€æ±‚éšä¾¿åŠ ï¼‰ã€‚

å¬èµ·æ¥æ˜¯ä¸æ˜¯æœ‰ç‚¹é‡å¿ƒå‹ƒå‹ƒï¼Ÿåˆ«æ…Œï¼Œå’±ä»¬ä¸€æ­¥æ­¥æ¥ï¼ŒæŠŠå®ƒæ‹†è§£æˆå¯æ“ä½œçš„æ¨¡å—ã€‚

---

## åŠ¨æ‰‹å®ç°ï¼šä»é›¶åˆ°ä¸€

### 1. é¡¹ç›®åˆå§‹åŒ–

é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªæ–°ç›®å½•ï¼Œè·‘ä¸ª `npm init -y` åˆå§‹åŒ– `package.json`ã€‚ç„¶åè£…ä¸Šæ ¸å¿ƒä¾èµ–ï¼š

```bash
npm i react react-dom typescript @types/react @types/react-dom -S
npm i webpack webpack-cli webpack-dev-server vite @vitejs/plugin-react -D
```

ä¸ºå•¥åŒæ—¶è£… Webpack å’Œ Viteï¼Ÿå› ä¸ºæˆ‘ä»¬è¦åšä¸ªâ€œåŒæ¨¡â€è„šæ‰‹æ¶ï¼Œç”¨æˆ·å¯ä»¥è‡ªç”±åˆ‡æ¢æ„å»ºå·¥å…·ã€‚å°±åƒæ‰‹æœºçš„åŒå¡åŒå¾…ï¼Œæƒ³ç”¨å“ªä¸ªå°±ç”¨å“ªä¸ªã€‚ğŸ“±

**Tips**: ç”¨ `-S` å’Œ `-D` æ›¿ä»£ `--save` å’Œ `--save-dev`ï¼Œæ›´ç®€æ´ï¼Œç°ä»£ npm é»˜è®¤ä¼šä¿å­˜ä¾èµ–ã€‚

---

### 2. é…ç½® TypeScript

æ–°å»º `tsconfig.json`ï¼ŒåŸºç¡€é…ç½®å¦‚ä¸‹ï¼š

```json
{
  "compilerOptions": {
    "target": "ESNext",
    "module": "ESNext",
    "jsx": "react-jsx",
    "strict": true,
    "moduleResolution": "node",
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true
  },
  "include": ["src/**/*"]
}
```

è¿™é‡Œç”¨ `react-jsx` ä½œä¸º `jsx` çš„ç¼–è¯‘æ–¹å¼ï¼Œé¿å…æ‰‹åŠ¨å¼•å…¥ `React`ï¼Œè¿™æ˜¯ React 17+ çš„æ–°ç‰¹æ€§ï¼Œçœå¿ƒåˆä¼˜é›…ã€‚

**Tips**: å¦‚æœå›¢é˜Ÿé‡Œæœ‰â€œç±»å‹ææƒ§ç—‡â€æ‚£è€…ï¼Œå¯ä»¥æŠŠ `strict` è®¾ä¸º `false`ï¼Œé€æ­¥è¿‡æ¸¡åˆ°ä¸¥æ ¼æ¨¡å¼ã€‚

---

### 3. æ„å»ºå·¥å…·ï¼šWebpack vs Vite

#### Webpack é…ç½®

æ–°å»º `webpack.config.js`ï¼š

```javascript
const path = require("path");
const HtmlWebpackPlugin = require("html-webpack-plugin");

module.exports = {
  mode: "development",
  entry: "./src/index.tsx",
  output: {
    path: path.resolve(__dirname, "dist"),
    filename: "bundle.[contenthash].js",
    clean: true,
  },
  resolve: {
    extensions: [".ts", ".tsx", ".js", ".jsx"],
  },
  module: {
    rules: [
      {
        test: /\.(ts|tsx)$/,
        use: "ts-loader",
        exclude: /node_modules/,
      },
      {
        test: /\.css$/,
        use: ["style-loader", "css-loader"],
      },
    ],
  },
  plugins: [
    new HtmlWebpackPlugin({
      template: "./public/index.html",
    }),
  ],
  devServer: {
    port: 3000,
    hot: true,
  },
};
```

Webpack çš„ä¼˜åŠ¿åœ¨äºç”Ÿæ€æˆç†Ÿï¼Œæ’ä»¶ä¸°å¯Œï¼Œä½†é…ç½®èµ·æ¥å°±åƒâ€œæ‹¼ä¹é«˜â€ï¼Œå¾—æœ‰è€å¿ƒã€‚

#### Vite é…ç½®

æ–°å»º `vite.config.ts`ï¼š

```typescript
import { defineConfig } from "vite";
import react from "@vitejs/plugin-react";

export default defineConfig({
  plugins: [react()],
  server: {
    port: 3000,
  },
  css: {
    modules: {
      localsConvention: "camelCase",
    },
  },
});
```

Vite ç”¨ ES Modules åŸç”Ÿæ”¯æŒï¼Œå¯åŠ¨é€Ÿåº¦å¿«å¾—åƒåƒäº†ç«ç®­ç‡ƒæ–™ï¼Œé€‚åˆä¸­å°å‹é¡¹ç›®ã€‚

**Tips**: å¦‚æœé¡¹ç›®æ¨¡å—è¶…è¿‡ 500 ä¸ªï¼ŒWebpack çš„æ„å»ºç¨³å®šæ€§å¯èƒ½æ›´æœ‰ä¼˜åŠ¿ï¼›å°äº 200 ä¸ªï¼ŒVite æ˜¯ä½ çš„æœ€ä½³é€‰æ‹©ã€‚

---

### 4. ä»£ç è§„èŒƒï¼šESLint + Prettier

å®‰è£…ä¾èµ–ï¼š

```bash
npm i eslint prettier eslint-config-prettier eslint-plugin-prettier eslint-plugin-react eslint-plugin-react-hooks @typescript-eslint/parser @typescript-eslint/eslint-plugin -D
```

æ–°å»º `.eslintrc.js`ï¼š

```javascript
module.exports = {
  parser: "@typescript-eslint/parser",
  plugins: ["react", "react-hooks", "@typescript-eslint", "prettier"],
  extends: [
    "plugin:react/recommended",
    "plugin:react-hooks/recommended",
    "plugin:@typescript-eslint/recommended",
    "plugin:prettier/recommended",
  ],
  rules: {
    "prettier/prettier": "error",
    "react/prop-types": "off",
    "@typescript-eslint/no-unused-vars": ["error"],
  },
  settings: {
    react: { version: "detect" },
  },
};
```

å†åŠ ä¸ª `.prettierrc`ï¼š

```json
{
  "semi": true,
  "singleQuote": true,
  "trailingComma": "es5"
}
```

è¿™å¥—ç»„åˆæ‹³èƒ½è®©ä»£ç é£æ ¼ç»Ÿä¸€åˆ°â€œä¸€ä¸ªå¦ˆç”Ÿçš„â€ç¨‹åº¦ï¼Œå†ä¹Ÿä¸ç”¨ä¸ºåˆ†å·è¿˜æ˜¯å•å¼•å·åµæ¶äº†ã€‚ğŸ˜‚

**Tips**: åœ¨ VSCode é‡Œè£…ä¸Š ESLint å’Œ Prettier æ’ä»¶ï¼Œé…åˆ `editor.formatOnSave` è®¾ç½®ï¼Œä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–ï¼Œæ•ˆç‡ç¿»å€ã€‚

---

### 5. CSS æ–¹æ¡ˆï¼šæ¨¡å—åŒ–ä¸ Tailwind

#### CSS Modules

åœ¨ Webpack å’Œ Vite é‡Œéƒ½æ”¯æŒ CSS Modulesï¼Œæ–‡ä»¶åç”¨ `[name].module.css`ï¼Œæ¯”å¦‚ `styles.module.css`ï¼š

```css
.button {
  background: #007bff;
  color: white;
  padding: 10px 20px;
}
```

ä½¿ç”¨æ—¶ï¼š

```tsx
import styles from "./styles.module.css";

function Button() {
  return <button className={styles.button}>Click me</button>;
}
```

#### Tailwind CSS

å®‰è£…ï¼š

```bash
npm i tailwindcss postcss autoprefixer -D
npx tailwindcss init
```

`tailwind.config.js`ï¼š

```javascript
module.exports = {
  content: ["./src/**/*.{ts,tsx}"],
  theme: {
    extend: {},
  },
  plugins: [],
};
```

æ–°å»º `postcss.config.js`ï¼š

```javascript
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
};
```

ç„¶ååœ¨ `src/index.css` é‡Œå¼•å…¥ï¼š

```css
@tailwind base;
@tailwind components;
@tailwind utilities;
```

Tailwind å°±åƒ CSS çš„â€œä¹é«˜ç§¯æœ¨â€ï¼Œæ‹¼èµ·æ¥åˆå¿«åˆçˆ½ï¼Œé€‚åˆå¿«é€Ÿè¿­ä»£ã€‚

**Tips**: CSS Modules é€‚åˆç»„ä»¶çº§æ ·å¼éš”ç¦»ï¼ŒTailwind é€‚åˆå…¨å±€æ ·å¼å¤ç”¨ï¼ŒäºŒè€…å¯ä»¥æ··ç”¨ï¼Œå–é•¿è¡¥çŸ­ã€‚

---

### 6. è‡ªåŠ¨åŒ–ï¼šGit é’©å­

ç”¨ `husky` å’Œ `lint-staged` å®ç°æäº¤å‰è‡ªåŠ¨æ£€æŸ¥ï¼š

```bash
npm i husky lint-staged -D
npx husky init
echo "npx lint-staged" > .husky/pre-commit
```

`package.json` é‡ŒåŠ ï¼š

```json
{
  "lint-staged": {
    "*.{ts,tsx}": ["eslint --fix", "prettier --write"]
  }
}
```

æ¯æ¬¡ `git commit`ï¼Œä»£ç éƒ½ä¼šè‡ªåŠ¨â€œæ´—ä¸ªæ¾¡â€ï¼Œå¹²å¹²å‡€å‡€åœ°æäº¤ã€‚

**Tips**: å¦‚æœå›¢é˜Ÿæœ‰äººå«Œçƒ¦ï¼Œå¯ä»¥åŠ ä¸ª `--no-verify` è·³è¿‡é’©å­ï¼Œä½†åˆ«æ»¥ç”¨å“¦ã€‚

---

## ä¼˜åŒ–ä¸æ‰©å±•

### 1. æ€§èƒ½ä¼˜åŒ–

- **Tree Shaking**ï¼šWebpack å’Œ Vite é»˜è®¤æ”¯æŒï¼Œç¡®ä¿æ¨¡å—æŒ‰éœ€åŠ è½½ã€‚
- **ä»£ç åˆ†å‰²**ï¼šç”¨ `React.lazy` å’Œ `Suspense` å®ç°åŠ¨æ€å¯¼å…¥ã€‚
- **æ„å»ºç¼“å­˜**ï¼šVite è‡ªå¸¦ç¼“å­˜ï¼ŒWebpack å¯ä»¥ç”¨ `cache.type: 'filesystem'`ã€‚

### 2. è‡ªå®šä¹‰æ’ä»¶

å†™ä¸ªç®€å•çš„ Vite æ’ä»¶ï¼Œè‡ªåŠ¨ç”Ÿæˆç»„ä»¶æ¨¡æ¿ï¼š

```typescript
import { Plugin } from "vite";

function autoGenerateComponent(): Plugin {
  return {
    name: "auto-generate-component",
    enforce: "pre",
    transform(code, id) {
      if (id.endsWith(".tsx") && code.includes("AutoComponent")) {
        return code.replace(
          "AutoComponent",
          "function AutoComponent() { return <div>Generated!</div>; }"
        );
      }
    },
  };
}
```

åœ¨ `vite.config.ts` é‡Œå¼•å…¥ï¼š

```typescript
export default defineConfig({
  plugins: [react(), autoGenerateComponent()],
});
```

è¿™åªæ˜¯ä¸ªç©å…·ä¾‹å­ï¼Œä½†å±•ç¤ºäº†æ’ä»¶çš„æ— é™å¯èƒ½ã€‚

---

## æœ€ä½³å®è·µ

1. **æ¨¡å—åŒ–é…ç½®**  
   æŠŠ Webpack/Vite é…ç½®æ‹†æˆ `base`ã€`dev`ã€`prod` ä¸‰ä»½ï¼Œç”¨ `webpack-merge` æˆ–å¯¹è±¡æ‰©å±•åˆå¹¶ï¼Œç»´æŠ¤èµ·æ¥æ›´è½»æ¾ã€‚  
   **Tips**: ç”¨ç¯å¢ƒå˜é‡ `process.env.NODE_ENV` åˆ¤æ–­æ¨¡å¼ï¼Œåˆ«æ‰‹å†™æ­»ã€‚

2. **ç‰ˆæœ¬ç®¡ç†**  
   è„šæ‰‹æ¶ä»£ç æ”¾è¿› Gitï¼Œå†™å¥½ `README` å’Œ `CHANGELOG`ï¼Œå›¢é˜Ÿç”¨èµ·æ¥æ‰ä¸æ‡µã€‚  
   **Tips**: åŠ ä¸ª `scripts/setup.sh` è„šæœ¬ï¼Œåˆå§‹åŒ–æ—¶ä¸€é”®é…ç½®ã€‚

3. **æµ‹è¯•å…ˆè¡Œ**  
   åŠ ä¸ª Jest æˆ– Vitestï¼Œå†™ç‚¹å•å…ƒæµ‹è¯•ï¼Œåˆ«è®©è„šæ‰‹æ¶æˆäº†â€œè£¸å¥”â€çŠ¶æ€ã€‚  
   **Tips**: æµ‹è¯•è¦†ç›–ç‡è®¾ä¸ª 80% ç›®æ ‡ï¼Œå¤Ÿç”¨åˆä¸ç´¯ã€‚

---

## ç»“å°¾ï¼šä»â€œç”¨â€åˆ°â€œé€ â€çš„èœ•å˜

æ‰“é€ ä¸€ä¸ªè‡ªå®šä¹‰ React è„šæ‰‹æ¶ï¼Œä¸åªæ˜¯å †ç Œå·¥å…·ï¼Œæ›´æ˜¯å¯¹å‰ç«¯å·¥ç¨‹åŒ–çš„æ·±åº¦ç†è§£ã€‚ä» TypeScript çš„ç±»å‹çº¦æŸï¼Œåˆ°æ„å»ºå·¥å…·çš„æ€§èƒ½æƒè¡¡ï¼Œå†åˆ°ä»£ç è§„èŒƒçš„å›¢é˜Ÿåä½œï¼Œæ¯ä¸€æ­¥éƒ½åœ¨è®©ä½ æ›´æ¥è¿‘â€œæŒæ§å…¨å±€â€çš„æ„Ÿè§‰ã€‚å°±åƒä»â€œåƒå¤–å–â€åˆ°â€œè‡ªå·±å¼€ç«â€ï¼Œè¿‡ç¨‹å¯èƒ½æœ‰ç‚¹æŠ˜è…¾ï¼Œä½†åƒåˆ°å˜´é‡Œé‚£å£â€œè‡ªå®šä¹‰çš„å‘³é“â€ï¼Œå€¼äº†ï¼ğŸ˜‹

ä½ å‡†å¤‡å¥½åŠ¨æ‰‹äº†å—ï¼Ÿè¯•è¯•è¿™ä¸ªè„šæ‰‹æ¶ï¼Œç„¶ååœ¨è¯„è®ºåŒºå‘Šè¯‰æˆ‘ä½ çš„ä¼˜åŒ–æ€è·¯å§ï¼å¦‚æœæœ‰é—®é¢˜ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æ‰¾æˆ‘ï¼Œå’±ä»¬ä¸€èµ· debugï¼Œç»ä¸è®©ä½ â€œå­¤å†›å¥‹æˆ˜â€ã€‚ğŸ”§

---