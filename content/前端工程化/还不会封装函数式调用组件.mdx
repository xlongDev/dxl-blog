---
type: "Post"
title: "è¿˜ä¸ä¼šå°è£…å‡½æ•°å¼è°ƒç”¨ç»„ä»¶ï¼ŸğŸ˜… è§£é”å‰ç«¯å¼€å‘çš„ä¼˜é›…ä¹‹é“"
date: "2023-09-09"
description: "æ·±å…¥æ¢è®¨å¦‚ä½•å°è£…å‡½æ•°å¼è°ƒç”¨ç»„ä»¶ï¼Œå¸¦ä½ ä»åŸç†åˆ°å®è·µï¼Œç»“åˆ Reactã€TypeScript ç­‰æŠ€æœ¯ï¼Œè§£é”ä¼˜é›…çš„å‰ç«¯å¼€å‘æ–¹å¼ï¼Œé™„å¸¦æœ€ä½³å®è·µå’Œå¹½é»˜æ€è€ƒã€‚"
keywords: "å‡½æ•°å¼è°ƒç”¨ç»„ä»¶, React, TypeScript, å‰ç«¯å¼€å‘, é«˜é˜¶ç»„ä»¶, ç»„ä»¶å°è£…, è®¾è®¡æ¨¡å¼, ä»£ç å¤ç”¨, æœ€ä½³å®è·µ"
author: "æ™“é¾™"
image: "/images/hero/functional-component.jpg"
tags: ["React", "JavaScript", "TypeScript", "å‰ç«¯å¼€å‘", "ç»„ä»¶å°è£…"]
category: "å‰ç«¯å·¥ç¨‹åŒ–"
---

åœ¨å‰ç«¯å¼€å‘çš„ä¸–ç•Œé‡Œï¼Œç»„ä»¶æ˜¯æˆ‘ä»¬çš„ç –ç“¦ï¼Œè€Œå¦‚ä½•ä¼˜é›…åœ°å †ç Œè¿™äº›ç –ç“¦ï¼Œå†³å®šäº†æˆ‘ä»¬ä»£ç çš„åŸå ¡æ˜¯å·å³¨å£®è§‚è¿˜æ˜¯æ‘‡æ‘‡æ¬²å ã€‚å‡½æ•°å¼è°ƒç”¨ç»„ä»¶ï¼ˆFunctional Call Componentsï¼‰ï¼Œå¬èµ·æ¥æ˜¯ä¸æ˜¯æœ‰ç‚¹åƒâ€œé¢å‘é­”æ³•ç¼–ç¨‹â€ï¼Ÿâœ¨ åˆ«æ…Œï¼Œå®ƒå…¶å®æ˜¯ React ç”Ÿæ€ä¸­ä¸€ç§å¼ºå¤§çš„æ¨¡å¼ï¼Œèƒ½è®©ä½ çš„ä»£ç æ›´æ¨¡å—åŒ–ã€å¯å¤ç”¨ï¼ŒåŒæ—¶è¿˜èƒ½åœ¨å›¢é˜Ÿåä½œä¸­å‡å°‘â€œä»£ç åŸåœºâ€çš„å‡ºç°ã€‚

è¿™ç¯‡æ–‡ç« å°†å¸¦ä½ ä»é›¶åˆ°ä¸€ï¼Œæ·±å…¥æ¢è®¨å‡½æ•°å¼è°ƒç”¨ç»„ä»¶çš„å°è£…è‰ºæœ¯ã€‚æˆ‘ä»¬ä¼šä»**åŸç†**è®²åˆ°**å®è·µ**ï¼Œä»**ç®€å•ä¾‹å­**åˆ°**å¤æ‚åœºæ™¯**ï¼Œç”šè‡³è¿˜ä¼šå¤¹æ‚ç‚¹é«˜çº§å¹½é»˜ï¼ˆæ¯•ç«Ÿï¼Œå†™ä»£ç ä¸å¸¦ç‚¹ä¹è¶£æ€ä¹ˆè¡Œï¼ŸğŸ˜œï¼‰ã€‚æ— è®ºä½ æ˜¯åˆšå…¥è¡Œçš„å°ç™½ï¼Œè¿˜æ˜¯èº«ç»ç™¾æˆ˜çš„è€å…µï¼Œè¿™é‡Œéƒ½æœ‰å¹²è´§ç­‰ä½ æŒ–æ˜ã€‚å‡†å¤‡å¥½äº†å—ï¼Ÿè®©æˆ‘ä»¬å¼€å§‹è¿™æ®µâ€œå‡½æ•°å¼å†’é™©â€å§ï¼

## ä»€ä¹ˆæ˜¯å‡½æ•°å¼è°ƒç”¨ç»„ä»¶ï¼ŸğŸ¤”

ç®€å•æ¥è¯´ï¼Œå‡½æ•°å¼è°ƒç”¨ç»„ä»¶æ˜¯ä¸€ç§ä»¥**å‡½æ•°è°ƒç”¨**çš„æ–¹å¼æ¥ç»„ç»‡å’Œå°è£…ç»„ä»¶é€»è¾‘çš„æ¨¡å¼ã€‚ä¸åŒäºä¼ ç»Ÿçš„ JSX ç»„ä»¶ï¼ˆ`<MyComponent />`ï¼‰ï¼Œå®ƒæ›´åƒæ˜¯ä¸€ä¸ªæ™®é€šçš„å‡½æ•°è°ƒç”¨ï¼ˆ`myComponent(props)`ï¼‰ï¼Œä½†å†…éƒ¨ä¾ç„¶è¿”å› React å…ƒç´ æˆ–é€»è¾‘ã€‚è¿™ç§æ¨¡å¼çš„æ ¸å¿ƒåœ¨äº**é€»è¾‘å¤ç”¨**å’Œ**èŒè´£åˆ†ç¦»**ï¼Œå®ƒè®©ç»„ä»¶çš„è°ƒç”¨æ–¹å¼æ›´çµæ´»ï¼ŒåŒæ—¶ä¿æŒ React çš„å£°æ˜å¼æœ¬è´¨ã€‚

ç±»æ¯”ä¸€ä¸‹ï¼šä¼ ç»Ÿ JSX ç»„ä»¶åƒæ˜¯ä¸€å®¶è£…ä¿®ç²¾ç¾çš„é¤å…ï¼Œä½ å¾—ç‚¹å•ã€ä¸Šèœã€åƒå®Œå†èµ°ï¼›è€Œå‡½æ•°å¼è°ƒç”¨ç»„ä»¶æ›´åƒæ˜¯ä¸€ä¸ªé«˜æ•ˆçš„å¤–å–æœåŠ¡ï¼Œä½ ä¸‹å•åç›´æ¥æ‹¿åˆ°é¥­èœï¼Œçœå»ç¹æ–‡ç¼›èŠ‚ï¼Œç›´å¥”ä¸»é¢˜ã€‚ğŸ”

### ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ

åœ¨ React å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°ä»¥ä¸‹åœºæ™¯ï¼š
- **é€»è¾‘é‡å¤**ï¼šå¤šä¸ªç»„ä»¶éœ€è¦å…±äº«åŒä¸€å¥—é€»è¾‘ï¼Œæ¯”å¦‚æ•°æ®è·å–ã€çŠ¶æ€ç®¡ç†ã€‚
- **å¤æ‚ç»„ä»¶**ï¼šä¸€ä¸ªç»„ä»¶å¡æ»¡äº† UI å’Œé€»è¾‘ï¼Œç»´æŠ¤èµ·æ¥åƒåœ¨è§£â€œä¿„ç½—æ–¯æ–¹å—â€ã€‚
- **åŠ¨æ€ç»„åˆ**ï¼šéœ€è¦æ ¹æ®æ¡ä»¶åŠ¨æ€ç»„åˆç»„ä»¶è¡Œä¸ºï¼Œä½†åˆä¸æƒ³å†™ä¸€å † `if-else`ã€‚

å‡½æ•°å¼è°ƒç”¨ç»„ä»¶é€šè¿‡**é«˜é˜¶æŠ½è±¡**å’Œ**å‡½æ•°ç»„åˆ**ï¼Œè®©è¿™äº›é—®é¢˜è¿åˆƒè€Œè§£ã€‚å®ƒä¸ä»…èƒ½æé«˜ä»£ç çš„å¤ç”¨æ€§ï¼Œè¿˜èƒ½è®©ä½ çš„ç»„ä»¶åº“æ›´å…·â€œè‰ºæœ¯æ„Ÿâ€ã€‚ğŸ¨

*ğŸ’¡ å° tipsï¼šå‡½æ•°å¼è°ƒç”¨ç»„ä»¶å¹¶ä¸æ˜¯ä¸‡é‡‘æ²¹ï¼Œç”¨å®ƒä¹‹å‰å…ˆé—®è‡ªå·±ï¼šè¿™ä¸ªé€»è¾‘æ˜¯å¦çœŸçš„éœ€è¦è·¨ç»„ä»¶å¤ç”¨ï¼Ÿè¿‡æ—©æŠ½è±¡å¯èƒ½ä¼šè®©ä»£ç æ›´å¤æ‚ã€‚*

## æ·±å…¥åŸç†ï¼šå‡½æ•°å¼è°ƒç”¨ç»„ä»¶çš„å†…æ ¸ âš™ï¸

è¦çœŸæ­£æŒæ¡å‡½æ•°å¼è°ƒç”¨ç»„ä»¶ï¼Œæˆ‘ä»¬å¾—å…ˆææ¸…æ¥šå®ƒçš„åº•å±‚é€»è¾‘ã€‚React çš„æ ¸å¿ƒæ˜¯**å‡½æ•°å¼ç¼–ç¨‹**ï¼Œè€Œå‡½æ•°å¼è°ƒç”¨ç»„ä»¶æ­£æ˜¯è¿™ä¸€å“²å­¦çš„å»¶ä¼¸ã€‚å®ƒçš„æœ¬è´¨æ˜¯åˆ©ç”¨ React çš„**ç»„åˆæ€§**å’Œ**é—­åŒ…**ï¼Œå°†é€»è¾‘å°è£…æˆä¸€ä¸ªå¯å¤ç”¨çš„å‡½æ•°ã€‚

### æ ¸å¿ƒç»„æˆ

ä¸€ä¸ªå…¸å‹çš„å‡½æ•°å¼è°ƒç”¨ç»„ä»¶åŒ…å«ä»¥ä¸‹éƒ¨åˆ†ï¼š
1. **è¾“å…¥**ï¼šæ¥æ”¶ props æˆ–å…¶ä»–å‚æ•°ï¼Œå®šä¹‰ç»„ä»¶çš„è¡Œä¸ºã€‚
2. **é€»è¾‘**ï¼šå¤„ç†çŠ¶æ€ã€å‰¯ä½œç”¨ï¼ˆå¦‚ `useEffect`ã€`useState`ï¼‰æˆ–å…¶ä»–ä¸šåŠ¡é€»è¾‘ã€‚
3. **è¾“å‡º**ï¼šè¿”å› React å…ƒç´ ã€æ•°æ®ï¼Œæˆ–å…¶ä»–å‡½æ•°ï¼ˆé«˜é˜¶ç”¨æ³•ï¼‰ã€‚

æ¥çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š

```tsx
import { useState } from 'react';

function useCounter(initialValue: number) {
  const [count, setCount] = useState(initialValue);

  const increment = () => setCount(count + 1);
  const decrement = () => setCount(count - 1);

  return { count, increment, decrement };
}

// è°ƒç”¨æ–¹å¼
function CounterDemo() {
  const { count, increment, decrement } = useCounter(0);

  return (
    <div>
      <p>å½“å‰è®¡æ•°: {count}</p>
      <button onClick={increment}>åŠ ä¸€</button>
      <button onClick={decrement}>å‡ä¸€</button>
    </div>
  );
}
```

è¿™ä¸ª `useCounter` å°±æ˜¯ä¸€ä¸ªå‡½æ•°å¼è°ƒç”¨ç»„ä»¶çš„é›å½¢ã€‚å®ƒå°è£…äº†è®¡æ•°é€»è¾‘ï¼Œè°ƒç”¨è€…åªéœ€è¦å…³å¿ƒå¦‚ä½•æ¸²æŸ“ï¼Œè€Œä¸ç”¨æ“å¿ƒçŠ¶æ€ç®¡ç†ã€‚

### å¯¹æ¯”ä¼ ç»Ÿç»„ä»¶

ä¼ ç»Ÿçš„ JSX ç»„ä»¶é€šå¸¸æ˜¯è¿™æ ·çš„ï¼š

```tsx
function Counter({ initialValue }: { initialValue: number }) {
  const [count, setCount] = useState(initialValue);

  return (
    <div>
      <p>å½“å‰è®¡æ•°: {count}</p>
      <button onClick={() => setCount(count + 1)}>åŠ ä¸€</button>
      <button onClick={() => setCount(count - 1)}>å‡ä¸€</button>
    </div>
  );
}
```

ä¹çœ‹ä¹‹ä¸‹ï¼Œä¸¤ç§æ–¹å¼å·®åˆ«ä¸å¤§ï¼Œä½†å‡½æ•°å¼è°ƒç”¨ç»„ä»¶çš„çµæ´»æ€§åœ¨äºï¼š
- **é€»è¾‘è§£è€¦**ï¼š`useCounter` å¯ä»¥è¢«å¤šä¸ªç»„ä»¶å¤ç”¨ï¼Œè€Œä¼ ç»Ÿç»„ä»¶å¾—æŠŠé€»è¾‘å¤åˆ¶ç²˜è´´ã€‚
- **ç»„åˆæ€§**ï¼šä½ å¯ä»¥è½»æ¾ç»„åˆå¤šä¸ªå‡½æ•°å¼è°ƒç”¨ç»„ä»¶ï¼Œæ¯”å¦‚ `useCounter` + `useLogger`ã€‚
- **æµ‹è¯•å‹å¥½**ï¼šå‡½æ•°å¼è°ƒç”¨ç»„ä»¶æœ¬è´¨æ˜¯çº¯é€»è¾‘ï¼Œæµ‹è¯•èµ·æ¥æ›´ç®€å•ã€‚

*ğŸ’¡ å° tipsï¼šå°è£…å‡½æ•°å¼è°ƒç”¨ç»„ä»¶æ—¶ï¼Œå°½é‡è®©å‡½æ•°çš„è¾“å…¥è¾“å‡ºæ˜ç¡®ï¼Œé¿å…â€œé­”æ³•â€é€»è¾‘ã€‚æ¸…æ™°çš„æ¥å£è®¾è®¡èƒ½å‡å°‘ç»´æŠ¤æˆæœ¬ã€‚*

## å®æˆ˜æ¡ˆä¾‹ï¼šä»ç®€å•åˆ°å¤æ‚ ğŸš€

ç†è®ºè®²äº†ä¸€å †ï¼Œæ˜¯æ—¶å€™ä¸Šæ‰‹å¹²æ´»äº†ï¼ä¸‹é¢æˆ‘ä»¬é€šè¿‡å‡ ä¸ªæ¡ˆä¾‹ï¼Œä»ç®€å•åˆ°å¤æ‚ï¼Œå¸¦ä½ æ„Ÿå—å‡½æ•°å¼è°ƒç”¨ç»„ä»¶çš„é­…åŠ›ã€‚

### æ¡ˆä¾‹ 1ï¼šå°è£…è¡¨å•è¾“å…¥é€»è¾‘

è¡¨å•æ˜¯å‰ç«¯å¼€å‘çš„â€œè€å¤§éš¾â€ï¼Œæ¯ä¸ªè¾“å…¥æ¡†éƒ½éœ€è¦å¤„ç†å€¼ã€æ ¡éªŒã€é”™è¯¯æç¤ºã€‚å‡è®¾æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¯å¤ç”¨çš„è¾“å…¥æ¡†é€»è¾‘ï¼š

```tsx
import { useState } from 'react';

function useInput(initialValue: string, validator?: (value: string) => string | null) {
  const [value, setValue] = useState(initialValue);
  const [error, setError] = useState<string | null>(null);

  const onChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const newValue = e.target.value;
    setValue(newValue);

    if (validator) {
      const errorMsg = validator(newValue);
      setError(errorMsg);
    }
  };

  return { value, error, onChange };
}

// ä½¿ç”¨
function LoginForm() {
  const emailValidator = (value: string) =>
    /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value) ? null : 'è¯·è¾“å…¥æœ‰æ•ˆé‚®ç®±';

  const username = useInput('');
  const email = useInput('', emailValidator);

  return (
    <div>
      <div>
        <label>ç”¨æˆ·å</label>
        <input value={username.value} onChange={username.onChange} />
      </div>
      <div>
        <label>é‚®ç®±</label>
        <input value={email.value} onChange={email.onChange} />
        {email.error && <span style={{ color: 'red' }}>{email.error}</span>}
      </div>
    </div>
  );
}
```

è¿™ä¸ª `useInput` å°è£…äº†è¾“å…¥æ¡†çš„æ ¸å¿ƒé€»è¾‘ï¼šå€¼ç®¡ç†ã€äº‹ä»¶å¤„ç†ã€æ ¡éªŒã€‚è°ƒç”¨è€…åªéœ€è¦å…³å¿ƒ UI å±‚ï¼Œé€»è¾‘å®Œå…¨å¤ç”¨ã€‚

**å¹½é»˜å°æ’æ›²**ï¼šå†™è¡¨å•çš„æ—¶å€™ï¼Œæ˜¯ä¸æ˜¯æ€»è§‰å¾—è‡ªå·±åƒåœ¨è·Ÿç”¨æˆ·ç©â€œçŒœè°œæ¸¸æˆâ€ï¼Ÿç”¨æˆ·è¾“å…¥å•¥ï¼Œä½ å¾—çŒœå¯¹æ ¡éªŒé€»è¾‘ï¼Œè¿˜è¦ä¼˜é›…åœ°æŠ¥é”™ã€‚ğŸ˜‚ ç”¨ `useInput` åï¼Œèµ·ç ä½ èƒ½æŠŠâ€œçŒœè°œâ€çš„éƒ¨åˆ†å¤–åŒ…å‡ºå»ï¼

*ğŸ’¡ å° tipsï¼šè¡¨å•é€»è¾‘å°è£…æ—¶ï¼Œå°½é‡æ”¯æŒåŠ¨æ€æ ¡éªŒå‡½æ•°ï¼Œæ–¹ä¾¿ä¸åŒåœºæ™¯å¤ç”¨ã€‚*

### æ¡ˆä¾‹ 2ï¼šæ•°æ®è·å–ä¸åŠ è½½çŠ¶æ€

æ•°æ®è·å–æ˜¯å¦ä¸€ä¸ªå¸¸è§åœºæ™¯ï¼Œæ¶‰åŠåŠ è½½çŠ¶æ€ã€é”™è¯¯å¤„ç†ã€é‡è¯•é€»è¾‘ã€‚æˆ‘ä»¬æ¥å°è£…ä¸€ä¸ªé€šç”¨çš„ `useFetch`ï¼š

```tsx
import { useState, useEffect } from 'react';

interface FetchResult<T> {
  data: T | null;
  loading: boolean;
  error: string | null;
  refetch: () => void;
}

function useFetch<T>(url: string): FetchResult<T> {
  const [data, setData] = useState<T | null>(null);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  const fetchData = async () => {
    setLoading Aussie);
    setError(null);

    try {
      const response = await fetch(url);
      if (!response.ok) throw new Error('ç½‘ç»œé”™è¯¯');
      const result = await response.json();
      setData(result);
    } catch (err) {
      setError(err.message);
    } finally {
      setLoading(false);
    }
  };

  useEffect(() => {
    fetchData();
  }, [url]);

  return { data, loading, error, refetch: fetchData };
}

// ä½¿ç”¨
function UserProfile() {
  const { data, loading, error, refetch } = useFetch<{ name: string; age: number }>(
    'https://api.example.com/user'
  );

  if (loading) return <div>åŠ è½½ä¸­...</div>;
  if (error) return <div>é”™è¯¯: {error} <button onClick={refetch}>é‡è¯•</button></div>;

  return (
    <div>
      <h2>{data?.name}</h2>
      <p>å¹´é¾„: {data?.age}</p>
    </div>
  );
}
```

è¿™ä¸ª `useFetch` å°è£…äº†æ•°æ®è·å–çš„é€šç”¨é€»è¾‘ï¼Œè°ƒç”¨è€…åªéœ€è¦å…³å¿ƒæ¸²æŸ“éƒ¨åˆ†ã€‚å®ƒçš„å¼ºå¤§ä¹‹å¤„åœ¨äºï¼š
- **é€šç”¨æ€§**ï¼šæ”¯æŒä»»æ„ API æ¥å£ã€‚
- **å¯æ‰©å±•**ï¼šå¯ä»¥è½»æ¾æ·»åŠ ç¼“å­˜ã€é‡è¯•ã€è½®è¯¢ç­‰åŠŸèƒ½ã€‚
- **ç±»å‹å®‰å…¨**ï¼šç»“åˆ TypeScriptï¼Œæ¥å£æ¸…æ™°ã€‚

*ğŸ’¡ å° tipsï¼šæ•°æ®è·å–é€»è¾‘å°è£…æ—¶ï¼Œè®°å¾—æš´éœ² `refetch` å‡½æ•°ï¼Œæ–¹ä¾¿æ‰‹åŠ¨è§¦å‘é‡è¯•æˆ–åˆ·æ–°ã€‚*

### æ¡ˆä¾‹ 3ï¼šå¤æ‚åœºæ™¯ä¸‹çš„ç»„åˆé€»è¾‘

å‡è®¾æˆ‘ä»¬éœ€è¦ä¸€ä¸ªç»„ä»¶ï¼Œæ—¢è¦ç®¡ç†è®¡æ•°å™¨ï¼Œåˆè¦è®°å½•æ“ä½œæ—¥å¿—ï¼Œè¿˜éœ€è¦å®šæ—¶åˆ·æ–°æ•°æ®ã€‚è¿™æ—¶å€™ï¼Œå‡½æ•°å¼è°ƒç”¨ç»„ä»¶çš„ç»„åˆèƒ½åŠ›å°±æ´¾ä¸Šç”¨åœºäº†ï¼š

```tsx
import { useState, useEffect } from 'react';

// è®¡æ•°å™¨é€»è¾‘
function useCounter(initialValue: number) {
  const [count, setCount] = useState(initialValue);
  return { count, increment: () => setCount(count + 1) };
}

// æ—¥å¿—é€»è¾‘
function useLogger(action: string) {
  const [logs, setLogs] = useState<string[]>([]);

  const log = (message: string) => {
    setLogs([...logs, `${action}: ${message} at ${new Date().toLocaleTimeString()}`]);
  };

  return { logs, log };
}

// å®šæ—¶åˆ·æ–°é€»è¾‘
function useAutoRefresh(interval: number, callback: () => void) {
  useEffect(() => {
    const id = setInterval(callback, interval);
    return () => clearInterval(id);
  }, [callback, interval]);
}

// ç»„åˆä½¿ç”¨
function Dashboard() {
  const { count, increment } = useCounter(0);
  const { logs, log } = useLogger('Dashboard');
  const refreshData = () => log(`Refreshed data with count ${count}`);
  useAutoRefresh(5000, refreshData);

  return (
    <div>
      <h2>è®¡æ•°: {count}</h2>
      <button onClick={() => {
        increment();
        log(`Incremented to ${count + 1}`);
      }}>
        å¢åŠ 
      </button>
      <h3>æ“ä½œæ—¥å¿—</h3>
      <ul>
        {logs.map((log, index) => (
          <li key={index}>{log}</li>
        ))}
      </ul>
    </div>
  );
}
```

è¿™ä¸ªä¾‹å­å±•ç¤ºäº†å¦‚ä½•é€šè¿‡**å‡½æ•°ç»„åˆ**ï¼Œå°†å¤šä¸ªç‹¬ç«‹çš„é€»è¾‘æ¨¡å—ç»„åˆæˆä¸€ä¸ªå¤æ‚çš„ç»„ä»¶ã€‚æ¯ä¸ªæ¨¡å—èŒè´£å•ä¸€ï¼Œç»„åˆèµ·æ¥å´èƒ½å®Œæˆå¤æ‚ä»»åŠ¡ã€‚

**å¹½é»˜å°æ’æ›²**ï¼šå†™è¿™ç§ç»„åˆé€»è¾‘çš„æ—¶å€™ï¼Œæ„Ÿè§‰è‡ªå·±åƒä¸ªâ€œä»£ç å¨å¸ˆâ€ï¼ŒæŠŠè®¡æ•°å™¨ã€æ—¥å¿—ã€å®šæ—¶å™¨ç‚’æˆä¸€é“â€œå‰ç«¯æ‚çƒ©æ±¤â€ã€‚ğŸ˜‹ å‘³é“å¦‚ä½•ï¼Œå…¨çœ‹ä½ æ€ä¹ˆè°ƒï¼

*ğŸ’¡ å° tipsï¼šç»„åˆé€»è¾‘æ—¶ï¼Œä¿æŒæ¯ä¸ªæ¨¡å—çš„ç‹¬ç«‹æ€§ï¼Œé¿å…æ¨¡å—é—´è€¦åˆï¼Œå¦åˆ™ç»´æŠ¤èµ·æ¥ä¼šåƒè§£â€œä¹è¿ç¯â€ã€‚*

## æœ€ä½³å®è·µï¼šè®©ä½ çš„å‡½æ•°å¼è°ƒç”¨ç»„ä»¶æ›´ä¸Šä¸€å±‚æ¥¼ ğŸ†

å°è£…å‡½æ•°å¼è°ƒç”¨ç»„ä»¶æ˜¯ä¸€é—¨æŠ€æœ¯æ´»ï¼Œä¹Ÿæ˜¯ä¸€é—¨è‰ºæœ¯æ´»ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ç»è¿‡å®æˆ˜éªŒè¯çš„æœ€ä½³å®è·µï¼Œå¸®ä½ å†™å‡ºæ›´ä¼˜é›…ã€æ›´å¥å£®çš„ä»£ç ã€‚

### 1. ä¿æŒå•ä¸€èŒè´£

æ¯ä¸ªå‡½æ•°å¼è°ƒç”¨ç»„ä»¶éƒ½åº”è¯¥åªåšä¸€ä»¶äº‹ã€‚æ¯”å¦‚ï¼Œ`useCounter` åªç®¡è®¡æ•°ï¼Œ`useLogger` åªç®¡æ—¥å¿—ã€‚å•ä¸€èŒè´£çš„ç»„ä»¶æ›´å®¹æ˜“æµ‹è¯•ã€å¤ç”¨å’Œç»´æŠ¤ã€‚

*ğŸ’¡ å° tipsï¼šå¦‚æœå‘ç°ä¸€ä¸ªå‡½æ•°å¼è°ƒç”¨ç»„ä»¶çš„åŠŸèƒ½å¤ªå¤šï¼Œè¯•ç€æŠŠå®ƒæ‹†æˆå¤šä¸ªå°å‡½æ•°ã€‚*

### 2. ä½¿ç”¨ TypeScript å¢å¼ºç±»å‹å®‰å…¨

TypeScript èƒ½è®©ä½ çš„ç»„ä»¶æ¥å£æ›´æ¸…æ™°ï¼Œé¿å…è¿è¡Œæ—¶é”™è¯¯ã€‚æ¯”å¦‚ï¼š

```tsx
interface CounterResult {
  count: number;
  increment: () => void;
  decrement: () => void;
}

function useCounter(initialValue: number): CounterResult {
  // ...
}
```

*ğŸ’¡ å° tipsï¼šä¸ºè¿”å›å€¼å®šä¹‰æ¥å£ï¼Œè€Œä¸æ˜¯ç›´æ¥ç”¨ `any`ï¼Œè¿™æ · IDE çš„æç¤ºä¼šæ›´å‹å¥½ã€‚*

### 3. æä¾›é»˜è®¤é…ç½®

ä¸ºå‡½æ•°å¼è°ƒç”¨ç»„ä»¶æä¾›é»˜è®¤å‚æ•°ï¼Œè®©è°ƒç”¨è€…å¯ä»¥â€œå¼€ç®±å³ç”¨â€ï¼š

```tsx
function useInput(initialValue: string, config = { validator: null }) {
  // ...
}
```

*ğŸ’¡ å° tipsï¼šé»˜è®¤é…ç½®è¦è¶³å¤Ÿé€šç”¨ï¼Œé¿å…è®©è°ƒç”¨è€…é¢‘ç¹è¦†ç›–ã€‚*

### 4. ä¼˜åŒ–æ€§èƒ½

å‡½æ•°å¼è°ƒç”¨ç»„ä»¶å¯èƒ½ä¼šæ¶‰åŠå¤§é‡çŠ¶æ€æ›´æ–°ï¼Œè®°å¾—ç”¨ `useMemo` å’Œ `useCallback` ä¼˜åŒ–æ€§èƒ½ï¼š

```tsx
function useCounter(initialValue: number) {
  const [count, setCount] = useState(initialValue);

  const increment = useCallback(() => setCount(count + 1), [count]);
  const decrement = useCallback(() => setCount(count - 1), [count]);

  return { count, increment, decrement };
}
```

*ğŸ’¡ å° tipsï¼šæ€§èƒ½ä¼˜åŒ–è¦é€‚åº¦ï¼Œè¿‡æ—©ä¼˜åŒ–å¯èƒ½è®©ä»£ç æ›´å¤æ‚ã€‚*

### 5. æä¾›è‰¯å¥½çš„é”™è¯¯å¤„ç†

æ— è®ºæ˜¯æ•°æ®è·å–è¿˜æ˜¯è¡¨å•æ ¡éªŒï¼Œéƒ½è¦è€ƒè™‘é”™è¯¯åœºæ™¯ï¼š

```tsx
function useFetch<T>(url: string) {
  const [error, setError] = useState<string | null>(null);

  useEffect(() => {
    try {
      // ...
    } catch (err) {
      setError('è¯·æ±‚å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•');
    }
  }, [url]);

  return { error, /* ... */ };
}
```

*ğŸ’¡ å° tipsï¼šé”™è¯¯ä¿¡æ¯è¦å¯¹ç”¨æˆ·å‹å¥½ï¼Œåˆ«ç›´æ¥æŠ›å‡ºâ€œUncaught TypeErrorâ€ä¹‹ç±»çš„æœ¯è¯­ã€‚*

### 6. æ–‡æ¡£åŒ–ä½ çš„ç»„ä»¶

ä¸€ä¸ªå¥½çš„å‡½æ•°å¼è°ƒç”¨ç»„ä»¶éœ€è¦æ¸…æ™°çš„æ–‡æ¡£ï¼Œè¯´æ˜è¾“å…¥ã€è¾“å‡ºå’Œç”¨æ³•ã€‚å¯ä»¥ç”¨ JSDoc æˆ– READMEï¼š

```tsx
/**
 * å°è£…è®¡æ•°å™¨é€»è¾‘
 * @param initialValue åˆå§‹å€¼
 * @returns åŒ…å« count å’Œæ“ä½œæ–¹æ³•çš„å¯¹è±¡
 */
function useCounter(initialValue: number) {
  // ...
}
```

*ğŸ’¡ å° tipsï¼šå†™æ–‡æ¡£æ—¶ï¼Œå‡è®¾è¯»è€…æ˜¯â€œæœªæ¥çš„è‡ªå·±â€ï¼Œå°½é‡å†™å¾—ç®€å•æ˜“æ‡‚ã€‚*

## é«˜çº§æŠ€å·§ï¼šè®©å‡½æ•°å¼è°ƒç”¨ç»„ä»¶æ›´â€œç‚«é…·â€ ğŸŒŸ

å¦‚æœä½ å·²ç»æŒæ¡äº†åŸºç¡€ç”¨æ³•ï¼Œä¸‹é¢è¿™äº›é«˜çº§æŠ€å·§èƒ½è®©ä½ çš„ç»„ä»¶æ›´ä¸Šä¸€å±‚æ¥¼ã€‚

### 1. é«˜é˜¶å‡½æ•°å¼è°ƒç”¨ç»„ä»¶

ä½ å¯ä»¥å°è£…ä¸€ä¸ªå‡½æ•°å¼è°ƒç”¨ç»„ä»¶ï¼Œä¸“é—¨ç”¨æ¥å¢å¼ºå…¶ä»–ç»„ä»¶ï¼š

```tsx
function withLoading<T>(useData: (props: T) => { data: any; loading: boolean }) {
  return function (props: T) {
    const { data, loading } = useData(props);

    if (loading) return <div>åŠ è½½ä¸­...</div>;
    return { data };
  };
}

// ä½¿ç”¨
const useUserData = withLoading<{ id: string }>((props) => {
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(false);

  useEffect(() => {
    setLoading(true);
    fetch(`/api/user/${props.id}`)
      .then((res) => res.json())
      .then(setData)
      .finally(() => setLoading(false));
  }, [props.id]);

  return { data, loading };
});
```

è¿™ç§é«˜é˜¶ç”¨æ³•å¯ä»¥è®©åŠ è½½çŠ¶æ€é€»è¾‘å¤ç”¨åˆ°å¤šä¸ªæ•°æ®è·å–åœºæ™¯ã€‚

*ğŸ’¡ å° tipsï¼šé«˜é˜¶ç»„ä»¶è¦ä¿æŒé€šç”¨æ€§ï¼Œé¿å…ç¡¬ç¼–ç ç‰¹å®šé€»è¾‘ã€‚*

### 2. å‡½æ•°å¼è°ƒç”¨ç»„ä»¶çš„çŠ¶æ€æœº

å¯¹äºå¤æ‚çš„çŠ¶æ€ç®¡ç†ï¼Œå¯ä»¥ç”¨çŠ¶æ€æœºæ€æƒ³æ¥ç»„ç»‡é€»è¾‘ï¼š

```tsx
import { useReducer } from 'react';

interface State {
  status: 'idle' | 'loading' | 'success' | 'error';
  data: any;
  error: string | null;
}

interface Action {
  type: 'FETCH' | 'SUCCESS' | 'ERROR';
  payload?: any;
}

function useFetchMachine<T>(url: string) {
  const [state, dispatch] = useReducer(
    (state: State, action: Action): State => {
      switch (action.type) {
        case 'FETCH':
          return { ...state, status: 'loading' };
        case 'SUCCESS':
          return { ...state, status: 'success', data: action.payload };
        case 'ERROR':
          return { ...state, status: 'error', error: action.payload };
        default:
          return state;
      }
    },
    { status: 'idle', data: null, error: null }
  );

  useEffect(() => {
    dispatch({ type: 'FETCH' });
    fetch(url)
      .then((res) => res.json())
      .then((data) => dispatch({ type: 'SUCCESS', payload: data }))
      .catch((err) => dispatch({ type: 'ERROR', payload: err.message }));
  }, [url]);

  return state;
}
```

çŠ¶æ€æœºè®©å¤æ‚é€»è¾‘æ›´æœ‰æ¡ç†ï¼Œå°¤å…¶é€‚åˆå¤šçŠ¶æ€åœºæ™¯ã€‚

*ğŸ’¡ å° tipsï¼šçŠ¶æ€æœºè™½å¥½ï¼Œä½†åˆ«æ»¥ç”¨ï¼Œç®€å•é€»è¾‘ç”¨ `useState` å°±å¤Ÿäº†ã€‚*

### 3. ä¸ Context ç»“åˆ

å‡½æ•°å¼è°ƒç”¨ç»„ä»¶å¯ä»¥ä¸ React Context ç»“åˆï¼Œå®ç°å…¨å±€é€»è¾‘å¤ç”¨ï¼š

```tsx
import { createContext, useContext } from 'react';

const ThemeContext = createContext({
  theme: 'light',
  toggleTheme: () => {},
});

function useTheme() {
  const { theme, toggleTheme } = useContext(ThemeContext);
  return { theme, toggleTheme };
}

// ä½¿ç”¨
function ThemeButton() {
  const { theme, toggleTheme } = useTheme();

  return (
    <button onClick={toggleTheme}>
      åˆ‡æ¢åˆ° {theme === 'light' ? 'æš—è‰²' : 'äº®è‰²'} ä¸»é¢˜
    </button>
  );
}
```

*ğŸ’¡ å° tipsï¼šContext è™½æ–¹ä¾¿ï¼Œä½†è¦æ§åˆ¶å…¶èŒƒå›´ï¼Œé¿å…å…¨å±€æ±¡æŸ“ã€‚*

## å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ ğŸ™‹â€â™‚ï¸

åœ¨å®é™…å¼€å‘ä¸­ï¼Œå‡½æ•°å¼è°ƒç”¨ç»„ä»¶å¯èƒ½ä¼šé‡åˆ°ä¸€äº›â€œå‘â€ã€‚è¿™é‡Œæ€»ç»“äº†ä¸€äº›å¸¸è§é—®é¢˜å’Œè§£å†³åŠæ³•ã€‚

### 1. æ€§èƒ½é—®é¢˜

**é—®é¢˜**ï¼šå‡½æ•°å¼è°ƒç”¨ç»„ä»¶é¢‘ç¹è§¦å‘é‡æ¸²æŸ“ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼šç”¨ `useMemo` å’Œ `useCallback` ç¼“å­˜å€¼å’Œå‡½æ•°ï¼š

```tsx
function useCounter(initialValue: number) {
  const [count, setCount] = useState(initialValue);

  return useMemo(
    () => ({
      count,
      increment: () => setCount(count + 1),
    }),
    [count]
  );
}
```

*ğŸ’¡ å° tipsï¼šæ€§èƒ½é—®é¢˜é€šå¸¸å‡ºåœ¨çˆ¶ç»„ä»¶é‡æ¸²æŸ“ï¼Œæ£€æŸ¥çˆ¶ç»„ä»¶çš„ props æ˜¯å¦ç¨³å®šã€‚*

### 2. ç±»å‹æ¨å¯¼å¤±è´¥

**é—®é¢˜**ï¼šTypeScript ç±»å‹æ¨å¯¼ä¸å‡†ç¡®ï¼Œå¯¼è‡´ IDE æç¤ºä¸å‹å¥½ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼šæ˜¾å¼å®šä¹‰è¿”å›å€¼ç±»å‹ï¼š

```tsx
interface FetchResult<T> {
  data: T | null;
  loading: boolean;
}

function useFetch<T>(url: string): FetchResult<T> {
  // ...
}
```

*ğŸ’¡ å° tipsï¼šç±»å‹æ¨å¯¼é—®é¢˜å¤šå‘äºæ³›å‹åœºæ™¯ï¼Œå¤šç”¨ `as` æ–­è¨€æ¥è¾…åŠ©ã€‚*

### 3. é€»è¾‘è¿‡äºå¤æ‚

**é—®é¢˜**ï¼šä¸€ä¸ªå‡½æ•°å¼è°ƒç”¨ç»„ä»¶åŒ…å«å¤ªå¤šé€»è¾‘ï¼Œéš¾ä»¥ç»´æŠ¤ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼šæ‹†åˆ†é€»è¾‘ï¼Œç»„åˆä½¿ç”¨å¤šä¸ªå°ç»„ä»¶ï¼š

```tsx
function useAuth() {
  const user = useUser();
  const permissions = usePermissions(user);
  return { user, permissions };
}
```

*ğŸ’¡ å° tipsï¼šå¤æ‚é€»è¾‘æ‹†åˆ†åï¼Œè®°å¾—å†™å•å…ƒæµ‹è¯•ï¼Œç¡®ä¿æ¯ä¸ªæ¨¡å—ç‹¬ç«‹å·¥ä½œã€‚*

## æ€»ç»“ï¼šå‡½æ•°å¼è°ƒç”¨ç»„ä»¶çš„è‰ºæœ¯ ğŸ­

å‡½æ•°å¼è°ƒç”¨ç»„ä»¶æ˜¯ React å¼€å‘ä¸­çš„ä¸€é¢—æ˜ç ï¼Œå®ƒè®©æˆ‘ä»¬å¯ä»¥ç”¨æ›´ä¼˜é›…çš„æ–¹å¼ç»„ç»‡ä»£ç ã€‚æ— è®ºæ˜¯ç®€å•çš„è®¡æ•°å™¨ï¼Œè¿˜æ˜¯å¤æ‚çš„æ•°æ®è·å–é€»è¾‘ï¼Œå®ƒéƒ½èƒ½è®©ä½ çš„ä»£ç æ›´æ¨¡å—åŒ–ã€å¯å¤ç”¨ã€æ˜“ç»´æŠ¤ã€‚é€šè¿‡æœ¬æ–‡çš„å­¦ä¹ ï¼Œä½ åº”è¯¥å·²ç»æŒæ¡äº†ï¼š
- å‡½æ•°å¼è°ƒç”¨ç»„ä»¶çš„**æ ¸å¿ƒåŸç†**ã€‚
- å¦‚ä½•é€šè¿‡**å®æˆ˜æ¡ˆä¾‹**å®ç°å¸¸è§åœºæ™¯ã€‚
- å¦‚ä½•ç”¨**æœ€ä½³å®è·µ**æå‡ä»£ç è´¨é‡ã€‚
- å¦‚ä½•ç”¨**é«˜çº§æŠ€å·§**åº”å¯¹å¤æ‚éœ€æ±‚ã€‚

å†™ä»£ç å°±åƒæ­ä¹é«˜ï¼Œå‡½æ•°å¼è°ƒç”¨ç»„ä»¶å°±æ˜¯é‚£äº›ç²¾å¿ƒè®¾è®¡çš„ç§¯æœ¨å—ã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½è®©ä½ åœ¨å‰ç«¯å¼€å‘çš„æ—…é€”ä¸­ï¼Œå¤šä¸€ä»½ä»å®¹ï¼Œå¤šä¸€ä»½ä¹è¶£ã€‚æ¯•ç«Ÿï¼Œä»£ç å†™å¾—å¥½ï¼Œç”Ÿæ´»æ‰æ›´å¦™ï¼ğŸ˜

å¦‚æœä½ æœ‰æ›´å¤šå…³äºå‡½æ•°å¼è°ƒç”¨ç»„ä»¶çš„ç–‘é—®ï¼Œæˆ–æƒ³åˆ†äº«ä½ çš„å°è£…å¿ƒå¾—ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµï¼ğŸ‘‡

*ğŸ’¡ å° tipsï¼šå†™å®Œä»£ç åï¼Œè®°å¾—ç»™è‡ªå·±æ³¡æ¯å’–å•¡ï¼Œå¥–åŠ±ä¸€ä¸‹è‡ªå·±çš„â€œå‡½æ•°å¼å†’é™©â€ï¼*

---