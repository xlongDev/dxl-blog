---
title: "æ·±å…¥æ¢ç´¢ JavaScript å‡½æ•°çš„å¥¥ç§˜ä¸å®è·µ"
date: "2022-01-20"
description: "å…¨é¢å‰–æ JavaScript å‡½æ•°çš„æ ¸å¿ƒæ¦‚å¿µã€åº•å±‚åŸç†ä¸æœ€ä½³å®è·µï¼Œé€‚åˆå‰ç«¯å¼€å‘è€…æ·±å…¥å­¦ä¹ ä¸åº”ç”¨ã€‚"
keywords: "JavaScript, å‡½æ•°, é—­åŒ…, é«˜é˜¶å‡½æ•°, å¼‚æ­¥ç¼–ç¨‹, å‡½æ•°å¼ç¼–ç¨‹, å‰ç«¯å¼€å‘"
author: "æ™“é¾™"
image: "/images/hero/javascript-functions.jpg"
tags: ["JavaScript", "å‰ç«¯å¼€å‘", "å‡½æ•°å¼ç¼–ç¨‹"]
category: "JavaScript"
---

> â€œå‡½æ•°æ˜¯ JavaScript çš„çµé­‚ï¼Œå®ƒä¸ä»…æ˜¯ä»£ç çš„æ‰§è¡Œè€…ï¼Œæ›´æ˜¯é€»è¾‘çš„ç¼–ç»‡è€…ã€‚â€ â€”â€” çµæ„Ÿæºäºã€ŠJavaScript: The Good Partsã€‹

JavaScript å‡½æ•°ï¼Œå®›å¦‚ç¼–ç¨‹ä¸–ç•Œä¸­çš„â€œé­”æ³•å’’è¯­â€ğŸª„ï¼Œæ—¢ç®€å•åˆæ·±é‚ƒï¼Œæ—¢æ˜¯ä»£ç çš„åŸºç¡€å•å…ƒï¼Œåˆèƒ½æ‰¿è½½å¤æ‚çš„é€»è¾‘ä¸å“²å­¦ã€‚ä½œä¸ºå‰ç«¯å¼€å‘è€…ï¼Œæˆ‘ä»¬æ¯å¤©éƒ½åœ¨ä¸å‡½æ•°æ‰“äº¤é“ï¼Œä½†ä½ æ˜¯å¦çœŸæ­£ç†è§£å®ƒä»¬çš„æœ¬è´¨ï¼Ÿå®ƒä»¬çš„è¿è¡Œæœºåˆ¶ï¼Ÿå®ƒä»¬ä¸ºä½•å¦‚æ­¤å¼ºå¤§å´åˆå¶å°”è®©äººæŠ“ç‹‚ï¼ŸğŸ˜… æœ¬æ–‡å°†å¸¦ä½ ä»å‡½æ•°çš„å®šä¹‰ã€è¿è¡ŒåŸç†åˆ°é«˜çº§åº”ç”¨ï¼Œå±‚å±‚å‰¥å¼€å‡½æ•°çš„â€œæ´‹è‘±â€ï¼Œæ·±å…¥å…¶æ ¸å¿ƒï¼Œç»“åˆå®ä¾‹ã€æœ€ä½³å®è·µï¼Œç”šè‡³ä¸€äº›å“²å­¦æ€è€ƒï¼Œå¸¦ä½ é¢†ç•¥ JavaScript å‡½æ•°çš„é­…åŠ›ã€‚

æœ¬æ–‡é¢å‘å¸Œæœ›æ·±å…¥ç†è§£ JavaScript çš„å‰ç«¯å¼€å‘è€…ï¼Œæ— è®ºä½ æ˜¯åˆå­¦è€…è¿˜æ˜¯æœ‰ä¸€å®šç»éªŒçš„å¼€å‘è€…ï¼Œéƒ½èƒ½ä»ä¸­æ‰¾åˆ°å¯å‘ã€‚å‡†å¤‡å¥½ä½ çš„ä»£ç ç¼–è¾‘å™¨å’Œå¥½å¥‡å¿ƒï¼Œæˆ‘ä»¬ä¸€èµ·å¼€å¯è¿™åœºå‡½æ•°çš„æ¢é™©ä¹‹æ—…ï¼ğŸš€

## ç›®å½•

1. å‡½æ•°çš„æœ¬è´¨ï¼šä»å®šä¹‰åˆ°æ‰§è¡Œ
2. å‡½æ•°çš„å¤šç§å½¢æ€ï¼šå£°æ˜ã€è¡¨è¾¾å¼ã€ç®­å¤´å‡½æ•°
3. é—­åŒ…ï¼šå‡½æ•°çš„â€œè®°å¿†é­”æ³•â€
4. é«˜é˜¶å‡½æ•°ä¸å‡½æ•°å¼ç¼–ç¨‹
5. å¼‚æ­¥å‡½æ•°ä¸ Promise çš„ä¼˜é›…èˆæ­¥
6. å‡½æ•°çš„æ€§èƒ½ä¼˜åŒ–ä¸æœ€ä½³å®è·µ
7. å‡½æ•°çš„è®¾è®¡å“²å­¦ä¸æ„Ÿæ‚Ÿ
8. æ€»ç»“ï¼šå‡½æ•°æ˜¯é€»è¾‘çš„è‰ºæœ¯

---

## 1. å‡½æ•°çš„æœ¬è´¨ï¼šä»å®šä¹‰åˆ°æ‰§è¡Œ

### 1.1 ä»€ä¹ˆæ˜¯å‡½æ•°ï¼Ÿ

åœ¨ JavaScript ä¸­ï¼Œå‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘ï¼ˆFirst-Class Citizenï¼‰ï¼Œå¯ä»¥åƒå˜é‡ä¸€æ ·è¢«èµ‹å€¼ã€ä¼ é€’ã€è¿”å›ã€‚ç®€å•æ¥è¯´ï¼Œå‡½æ•°æ˜¯ä¸€æ®µå¯é‡å¤æ‰§è¡Œçš„ä»£ç å—ï¼Œæ¥å—è¾“å…¥ï¼ˆå‚æ•°ï¼‰ï¼Œæ‰§è¡Œé€»è¾‘ï¼Œè¿”å›è¾“å‡ºã€‚å¬èµ·æ¥ç®€å•ï¼Œä½†å…¶èƒŒåçš„æœºåˆ¶å´å¦‚åŒä¸€ä¸ªç²¾å¯†çš„æ—¶é’Ÿï¼Œé½¿è½®å’¬åˆï¼Œæ»´ç­”ä½œå“ã€‚

ç”¨ä»£ç æ¥æ„Ÿå—ä¸€ä¸‹å‡½æ•°çš„â€œçµé­‚â€ï¼š

```javascript
function greet(name) {
  return `Hello, ${name}!`;
}
console.log(greet("Alice")); // è¾“å‡º: Hello, Alice!
```

è¡¨é¢ä¸Šï¼Œè¿™åªæ˜¯ä¸€ä¸ªç®€å•çš„é—®å€™å‡½æ•°ï¼Œä½†å®ƒè•´å«äº† JavaScript å‡½æ•°çš„å‡ ä¸ªæ ¸å¿ƒç‰¹æ€§ï¼š
- **å¯å¤ç”¨æ€§**ï¼šä¸€æ¬¡å®šä¹‰ï¼Œå¤šæ¬¡è°ƒç”¨ã€‚
- **å‚æ•°åŒ–**ï¼šé€šè¿‡å‚æ•°åŠ¨æ€å¤„ç†è¾“å…¥ã€‚
- **è¿”å›å€¼**ï¼šå‡½æ•°çš„â€œæˆæœâ€å¯ä»¥é€šè¿‡ `return` è¾“å‡ºã€‚

*Tips: åœ¨å®šä¹‰å‡½æ•°æ—¶ï¼Œå°½é‡æ˜ç¡®å‡½æ•°çš„è¾“å…¥å’Œè¾“å‡ºç±»å‹ï¼Œé¿å…éšå¼è½¬æ¢å¯¼è‡´çš„ bugã€‚*

### 1.2 å‡½æ•°çš„åº•å±‚æœºåˆ¶ï¼šè°ƒç”¨æ ˆä¸æ‰§è¡Œä¸Šä¸‹æ–‡

è¦çœŸæ­£ç†è§£å‡½æ•°ï¼Œæˆ‘ä»¬éœ€è¦æ·±å…¥ JavaScript å¼•æ“ï¼ˆæ¯”å¦‚ V8ï¼‰çš„è¿è¡Œæœºåˆ¶ã€‚æ¯æ¬¡è°ƒç”¨å‡½æ•°ï¼ŒJavaScript å¼•æ“éƒ½ä¼šåˆ›å»ºä¸€ä¸ª**æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆExecution Contextï¼‰**ï¼Œå¹¶å°†å…¶æ¨å…¥**è°ƒç”¨æ ˆï¼ˆCall Stackï¼‰**ã€‚å½“å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œä¸Šä¸‹æ–‡è¢«å¼¹å‡ºï¼Œæ ˆé¡¶æŒ‡å‘è°ƒç”¨å®ƒçš„å‡½æ•°ã€‚

æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š

```javascript
function outer() {
  inner();
}
function inner() {
  console.log("I'm inner!");
}
outer(); // è¾“å‡º: I'm inner!
```

æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š
1. `outer()` è¢«è°ƒç”¨ï¼Œåˆ›å»º `outer` çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œæ¨å…¥è°ƒç”¨æ ˆã€‚
2. `outer` è°ƒç”¨ `inner()`ï¼Œåˆ›å»º `inner` çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œæ¨å…¥æ ˆé¡¶ã€‚
3. `inner` æ‰§è¡Œå®Œæ¯•ï¼Œå¼¹å‡ºæ ˆã€‚
4. `outer` ç»§ç»­æ‰§è¡Œï¼Œå¼¹å‡ºæ ˆã€‚

è¿™ä¸ªè¿‡ç¨‹å°±åƒä¿„ç½—æ–¯å¥—å¨ƒï¼Œä¸€ä¸ªå‡½æ•°åµŒå¥—å¦ä¸€ä¸ªå‡½æ•°ï¼Œå±‚å±‚å±•å¼€åˆå±‚å±‚æ”¶èµ·ã€‚è°ƒç”¨æ ˆçš„æœ‰é™æ€§ä¹Ÿè§£é‡Šäº†ä¸ºä»€ä¹ˆé€’å½’è¿‡æ·±ä¼šå¯¼è‡´â€œæ ˆæº¢å‡ºâ€ï¼ˆStack Overflowï¼‰é”™è¯¯ã€‚ğŸ˜“

*Tips: åœ¨ç¼–å†™é€’å½’å‡½æ•°æ—¶ï¼Œå§‹ç»ˆè®¾ç½®æ˜ç¡®çš„é€€å‡ºæ¡ä»¶ï¼Œé¿å…æ ˆæº¢å‡ºã€‚*

### 1.3 å‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘çš„æ„ä¹‰

JavaScript çš„å‡½æ•°å¯ä»¥ï¼š
- è¢«èµ‹å€¼ç»™å˜é‡
- ä½œä¸ºå‚æ•°ä¼ é€’
- ä½œä¸ºè¿”å›å€¼è¿”å›

è¿™è®©å‡½æ•°åœ¨ JavaScript ä¸­æ— æ¯”çµæ´»ã€‚æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š

```javascript
const sayHello = function(name) {
  return `Hello, ${name}!`;
};
const executeFn = function(fn, arg) {
  return fn(arg);
};
console.log(executeFn(sayHello, "Bob")); // è¾“å‡º: Hello, Bob!
```

è¿™ç§çµæ´»æ€§ä¸ºé«˜é˜¶å‡½æ•°ã€å›è°ƒå‡½æ•°ã€å‡½æ•°å¼ç¼–ç¨‹å¥ å®šäº†åŸºç¡€ï¼Œæˆ‘ä»¬å°†åœ¨åé¢æ·±å…¥æ¢è®¨ã€‚

*Tips: åˆ©ç”¨å‡½æ•°ä½œä¸ºä¸€ç­‰å…¬æ°‘çš„ç‰¹æ€§ï¼Œå¯ä»¥å†™å‡ºæ›´æ¨¡å—åŒ–ã€å¯å¤ç”¨çš„ä»£ç ã€‚*

---

## 2. å‡½æ•°çš„å¤šç§å½¢æ€ï¼šå£°æ˜ã€è¡¨è¾¾å¼ã€ç®­å¤´å‡½æ•°

JavaScript ä¸­çš„å‡½æ•°æœ‰å¤šç§å®šä¹‰æ–¹å¼ï¼Œæ¯ç§æ–¹å¼éƒ½æœ‰å…¶é€‚ç”¨åœºæ™¯å’Œå¾®å¦™å·®å¼‚ã€‚è®©æˆ‘ä»¬é€ä¸€å‰–æã€‚

### 2.1 å‡½æ•°å£°æ˜

```javascript
function add(a, b) {
  return a + b;
}
```

**ç‰¹ç‚¹**ï¼š
- **æå‡ï¼ˆHoistingï¼‰**ï¼šå‡½æ•°å£°æ˜ä¼šè¢«æå‡åˆ°ä½œç”¨åŸŸé¡¶éƒ¨ï¼Œå¯ä»¥åœ¨å®šä¹‰å‰è°ƒç”¨ã€‚
- **å‘½åæ˜ç¡®**ï¼šä¾¿äºè°ƒè¯•å’Œé€’å½’è°ƒç”¨ã€‚

**é€‚ç”¨åœºæ™¯**ï¼šéœ€è¦å…¨å±€æˆ–æ¨¡å—çº§å‡½æ•°æ—¶ï¼Œå‡½æ•°å£°æ˜æ˜¯é¦–é€‰ã€‚

*Tips: ä½¿ç”¨å‡½æ•°å£°æ˜æ—¶ï¼Œç¡®ä¿å‡½æ•°åæ¸…æ™°åæ˜ å…¶åŠŸèƒ½ï¼Œæ¯”å¦‚ `calculateTotal` è€Œä¸æ˜¯ `calc`ã€‚*

### 2.2 å‡½æ•°è¡¨è¾¾å¼

```javascript
const multiply = function(a, b) {
  return a * b;
};
```

**ç‰¹ç‚¹**ï¼š
- **ä¸ä¼šæå‡**ï¼šå¿…é¡»å…ˆå®šä¹‰åä½¿ç”¨ã€‚
- **åŒ¿åæˆ–å‘½å**ï¼šå¯ä»¥åŒ¿åï¼Œä¹Ÿå¯ä»¥ä¸ºè°ƒè¯•å‘½åï¼ˆå¦‚ `const multiply = function multiplyFn()`ï¼‰ã€‚

**é€‚ç”¨åœºæ™¯**ï¼šé€‚åˆéœ€è¦åŠ¨æ€åˆ›å»ºå‡½æ•°æˆ–ä½œä¸ºå˜é‡ä¼ é€’çš„åœºæ™¯ã€‚

*Tips: åœ¨å‡½æ•°è¡¨è¾¾å¼ä¸­ä¸ºåŒ¿åå‡½æ•°å‘½åï¼Œæœ‰åŠ©äºåœ¨è°ƒè¯•æ—¶è¿½è¸ªè°ƒç”¨æ ˆã€‚*

### 2.3 ç®­å¤´å‡½æ•°

ES6 å¼•å…¥çš„ç®­å¤´å‡½æ•°ï¼Œè¯­æ³•ç®€æ´ï¼Œä½†æœ‰ä¸€äº›ç‹¬ç‰¹çš„è¡Œä¸ºï¼š

```javascript
const divide = (a, b) => a / b;
```

**ç‰¹ç‚¹**ï¼š
- **ç®€æ´è¯­æ³•**ï¼šå•è¡Œå‡½æ•°å¯ä»¥çœç•¥ `return` å’Œ `{}`ã€‚
- **ä¸ç»‘å®š `this`**ï¼šç®­å¤´å‡½æ•°çš„ `this` ç»§æ‰¿è‡ªå®šä¹‰æ—¶çš„ä¸Šä¸‹æ–‡ã€‚
- **æ—  `arguments` å¯¹è±¡**ï¼šæ— æ³•è®¿é—® `arguments`ï¼Œéœ€ç”¨ rest å‚æ•°æ›¿ä»£ã€‚

**ç¤ºä¾‹**ï¼š

```javascript
const obj = {
  name: "Alice",
  say: function() {
    const arrow = () => console.log(this.name);
    arrow(); // è¾“å‡º: Alice
  }
};
obj.say();
```

**é€‚ç”¨åœºæ™¯**ï¼šé€‚åˆå›è°ƒå‡½æ•°ã€çŸ­å°çš„å·¥å…·å‡½æ•°ï¼Œä½†ä¸é€‚åˆéœ€è¦åŠ¨æ€ `this` çš„åœºæ™¯ï¼ˆå¦‚æ–¹æ³•æˆ–æ„é€ å‡½æ•°ï¼‰ã€‚

*Tips: é¿å…åœ¨å¯¹è±¡æ–¹æ³•æˆ–æ„é€ å‡½æ•°ä¸­ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œä»¥å… `this` ç»‘å®šé—®é¢˜å¯¼è‡´ bugã€‚*

### 2.4 å¯¹æ¯”è¡¨æ ¼

| ç‰¹æ€§                | å‡½æ•°å£°æ˜ | å‡½æ•°è¡¨è¾¾å¼ | ç®­å¤´å‡½æ•° |
|---------------------|----------|------------|----------|
| **æå‡**            | æ˜¯       | å¦         | å¦       |
| **this ç»‘å®š**       | åŠ¨æ€     | åŠ¨æ€       | è¯æ³•     |
| **arguments å¯¹è±¡**  | æœ‰       | æœ‰         | æ—        |
| **é€‚åˆåœºæ™¯**        | å…¨å±€å‡½æ•° | åŠ¨æ€èµ‹å€¼   | å›è°ƒå‡½æ•° |

*Tips: é€‰æ‹©å‡½æ•°å½¢æ€æ—¶ï¼Œä¼˜å…ˆè€ƒè™‘ä»£ç çš„å¯è¯»æ€§å’Œä¸Šä¸‹æ–‡éœ€æ±‚ï¼Œè€Œä¸æ˜¯ä¸€å‘³è¿½æ±‚ç®€æ´ã€‚*

---

## 3. é—­åŒ…ï¼šå‡½æ•°çš„â€œè®°å¿†é­”æ³•â€

é—­åŒ…ï¼ˆClosureï¼‰æ˜¯ JavaScript å‡½æ•°çš„â€œè¶…èƒ½åŠ›â€ä¹‹ä¸€ï¼Œä¹Ÿæ˜¯é¢è¯•ä¸­çš„å¸¸å®¢ã€‚ç®€å•æ¥è¯´ï¼Œé—­åŒ…æ˜¯æŒ‡å‡½æ•°èƒ½å¤Ÿâ€œè®°ä½â€å…¶å®šä¹‰æ—¶æ‰€åœ¨çš„ä½œç”¨åŸŸï¼Œå³ä½¿è¯¥ä½œç”¨åŸŸå·²ç»é”€æ¯ã€‚

### 3.1 é—­åŒ…çš„å®šä¹‰ä¸åŸç†

é—­åŒ…çš„æ ¸å¿ƒæ˜¯**ä½œç”¨åŸŸé“¾ï¼ˆScope Chainï¼‰**ã€‚å½“å‡½æ•°è¢«å®šä¹‰æ—¶ï¼Œå®ƒä¼šä¿å­˜å¯¹å…¶å¤–éƒ¨å˜é‡çš„å¼•ç”¨ã€‚æ¥çœ‹ä¸€ä¸ªç»å…¸ä¾‹å­ï¼š

```javascript
function createCounter() {
  let count = 0;
  return function() {
    return ++count;
  };
}
const counter = createCounter();
console.log(counter()); // è¾“å‡º: 1
console.log(counter()); // è¾“å‡º: 2
```

**è§£æ**ï¼š
- `createCounter` åˆ›å»ºäº†ä¸€ä¸ªå†…éƒ¨å‡½æ•°ï¼Œå†…éƒ¨å‡½æ•°å¼•ç”¨äº†å¤–éƒ¨çš„ `count` å˜é‡ã€‚
- å³ä½¿ `createCounter` æ‰§è¡Œå®Œæ¯•ï¼Œ`count` å˜é‡ä¾ç„¶è¢«å†…éƒ¨å‡½æ•°â€œè®°ä½â€ï¼Œå½¢æˆé—­åŒ…ã€‚

è¿™å°±åƒæ˜¯å‡½æ•°èƒŒäº†ä¸€ä¸ªâ€œè®°å¿†èƒŒåŒ…â€ğŸ’ï¼Œé‡Œé¢è£…ç€å¤–éƒ¨å˜é‡ï¼Œéšæ—¶å¯ä»¥æå‡ºæ¥ç”¨ã€‚

*Tips: ä½¿ç”¨é—­åŒ…æ—¶ï¼Œæ³¨æ„å†…å­˜ç®¡ç†ï¼Œé¿å…ä¸å¿…è¦çš„å˜é‡å¼•ç”¨å¯¼è‡´å†…å­˜æ³„æ¼ã€‚*

### 3.2 é—­åŒ…çš„å®é™…åº”ç”¨

é—­åŒ…åœ¨å®é™…å¼€å‘ä¸­æœ‰å¹¿æ³›åº”ç”¨ï¼Œä»¥ä¸‹æ˜¯å‡ ä¸ªä¾‹å­ï¼š

#### ç¤ºä¾‹ 1ï¼šæ¨¡å—åŒ–

```javascript
const createModule = () => {
  let data = [];
  return {
    add: (item) => data.push(item),
    get: () => data
  };
};
const module = createModule();
module.add("Item 1");
console.log(module.get()); // è¾“å‡º: ["Item 1"]
```

**åœºæ™¯**ï¼šé€šè¿‡é—­åŒ…å®ç°ç§æœ‰å˜é‡ï¼Œæ¨¡æ‹Ÿæ¨¡å—åŒ–å¼€å‘ã€‚

*Tips: ä½¿ç”¨é—­åŒ…å®ç°æ¨¡å—æ—¶ï¼Œç¡®ä¿æ¥å£æ¸…æ™°ï¼Œå‡å°‘å¯¹å¤–æš´éœ²çš„å˜é‡ã€‚*

#### ç¤ºä¾‹ 2ï¼šé˜²æŠ–å‡½æ•°

```javascript
function debounce(fn, delay) {
  let timer = null;
  return function(...args) {
    clearTimeout(timer);
    timer = setTimeout(() => fn.apply(this, args), delay);
  };
}
const log = debounce(() => console.log("Debounced!"), 1000);
log(); // 1ç§’åè¾“å‡º: Debounced!
```

**åœºæ™¯**ï¼šé˜²æŠ–å‡½æ•°åˆ©ç”¨é—­åŒ…ä¿å­˜ `timer`ï¼Œå®ç°äº‹ä»¶èŠ‚æµã€‚

*Tips: åœ¨é˜²æŠ–å’ŒèŠ‚æµå‡½æ•°ä¸­ï¼Œå§‹ç»ˆæ¸…ç†æ—§çš„å®šæ—¶å™¨ï¼Œé¿å…å†…å­˜æµªè´¹ã€‚*

### 3.3 é—­åŒ…çš„é™·é˜±

é—­åŒ…è™½ç„¶å¼ºå¤§ï¼Œä½†ä¹Ÿå®¹æ˜“å¯¼è‡´é—®é¢˜ï¼Œæ¯”å¦‚ï¼š

- **å†…å­˜æ³„æ¼**ï¼šå¦‚æœé—­åŒ…æŒæœ‰çš„å˜é‡æœªè¢«é‡Šæ”¾ï¼Œå¯èƒ½å¯¼è‡´å†…å­˜å ç”¨è¿‡é«˜ã€‚
- **æ„å¤–å…±äº«**ï¼šå¤šä¸ªé—­åŒ…å…±äº«åŒä¸€å¤–éƒ¨å˜é‡ï¼Œå¯èƒ½å¯¼è‡´é€»è¾‘é”™è¯¯ã€‚

**ç¤ºä¾‹**ï¼š

```javascript
for (var i = 0; i < 3; i++) {
  setTimeout(() => console.log(i), 1000); // è¾“å‡º: 3, 3, 3
}
```

**ä¿®å¤**ï¼šä½¿ç”¨ `let` æˆ–ç«‹å³æ‰§è¡Œå‡½æ•°ï¼ˆIIFEï¼‰ï¼š

```javascript
for (let i = 0; i < 3; i++) {
  setTimeout(() => console.log(i), 1000); // è¾“å‡º: 0, 1, 2
}
```

*Tips: åœ¨å¾ªç¯ä¸­ä½¿ç”¨é—­åŒ…æ—¶ï¼Œä¼˜å…ˆä½¿ç”¨ `let` æˆ– IIFEï¼Œé¿å… `var` å¯¼è‡´çš„å˜é‡å…±äº«é—®é¢˜ã€‚*

---

## 4. é«˜é˜¶å‡½æ•°ä¸å‡½æ•°å¼ç¼–ç¨‹

é«˜é˜¶å‡½æ•°ï¼ˆHigher-Order Functionï¼‰æ˜¯æ¥å—å‡½æ•°ä½œä¸ºå‚æ•°æˆ–è¿”å›å‡½æ•°çš„å‡½æ•°ï¼Œæ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„åŸºçŸ³ã€‚JavaScript çš„æ•°ç»„æ–¹æ³•ï¼ˆå¦‚ `map`ã€`filter`ã€`reduce`ï¼‰å°±æ˜¯é«˜é˜¶å‡½æ•°çš„å…¸å‹ä»£è¡¨ã€‚

### 4.1 å¸¸è§çš„å†…ç½®é«˜é˜¶å‡½æ•°

#### ç¤ºä¾‹ 1ï¼š`map`

```javascript
const numbers = [1, 2, 3];
const doubled = numbers.map(n => n * 2);
console.log(doubled); // è¾“å‡º: [2, 4, 6]
```

#### ç¤ºä¾‹ 2ï¼š`filter`

```javascript
const evens = numbers.filter(n => n % 2 === 0);
console.log(evens); // è¾“å‡º: [2]
```

#### ç¤ºä¾‹ 3ï¼š`reduce`

```javascript
const sum = numbers.reduce((acc, n) => acc + n, 0);
console.log(sum); // è¾“å‡º: 6
```

*Tips: ä½¿ç”¨é«˜é˜¶å‡½æ•°æ—¶ï¼Œä¿æŒå›è°ƒå‡½æ•°ç®€å•æ˜äº†ï¼Œé¿å…å¤æ‚çš„é€»è¾‘åµŒå¥—ã€‚*

### 4.2 è‡ªå®šä¹‰é«˜é˜¶å‡½æ•°

æˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ›å»ºè‡ªå·±çš„é«˜é˜¶å‡½æ•°ï¼Œæ¯”å¦‚ä¸€ä¸ªâ€œç®¡é“â€å‡½æ•°ï¼š

```javascript
const pipe = (...fns) => (x) => fns.reduce((v, fn) => fn(v), x);
const addOne = x => x + 1;
const double = x => x * 2;
const process = pipe(addOne, double);
console.log(process(5)); // è¾“å‡º: 12 ï¼ˆ(5 + 1) * 2ï¼‰
```

**ç±»æ¯”**ï¼šç®¡é“å‡½æ•°å°±åƒæ˜¯æµæ°´çº¿ï¼Œæ•°æ®ä»ä¸€ç«¯è¿›å…¥ï¼Œç»è¿‡ä¸€ç³»åˆ—åŠ å·¥ï¼Œä»å¦ä¸€ç«¯è¾“å‡ºã€‚ğŸ­

*Tips: è®¾è®¡é«˜é˜¶å‡½æ•°æ—¶ï¼Œä¼˜å…ˆè€ƒè™‘å‡½æ•°çš„çº¯åº¦ï¼ˆæ— å‰¯ä½œç”¨ï¼‰å’Œå¯ç»„åˆæ€§ã€‚*

### 4.3 å‡½æ•°å¼ç¼–ç¨‹çš„æ ¸å¿ƒæ€æƒ³

å‡½æ•°å¼ç¼–ç¨‹ï¼ˆFPï¼‰å¼ºè°ƒï¼š
- **çº¯å‡½æ•°**ï¼šç›¸åŒçš„è¾“å…¥æ€»æ˜¯äº§ç”Ÿç›¸åŒçš„è¾“å‡ºï¼Œæ— å‰¯ä½œç”¨ã€‚
- **ä¸å¯å˜æ€§**ï¼šä¸ä¿®æ”¹åŸå§‹æ•°æ®ã€‚
- **å‡½æ•°ç»„åˆ**ï¼šé€šè¿‡ç»„åˆå°å‡½æ•°å®ç°å¤æ‚é€»è¾‘ã€‚

**ç¤ºä¾‹**ï¼šå®ç°ä¸€ä¸ªçº¯å‡½æ•°çš„è´­ç‰©è½¦æ€»ä»·è®¡ç®—ï¼š

```javascript
const calculateTotal = (items) =>
  items.reduce((total, { price, quantity }) => total + price * quantity, 0);
const cart = [
  { price: 10, quantity: 2 },
  { price: 20, quantity: 1 }
];
console.log(calculateTotal(cart)); // è¾“å‡º: 40
```

*Tips: åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œä¼˜å…ˆä½¿ç”¨ä¸å¯å˜æ•°æ®ç»“æ„ï¼ˆå¦‚ `const` å’Œæ•°ç»„æ–¹æ³•ï¼‰ï¼Œé¿å…ç›´æ¥ä¿®æ”¹å¯¹è±¡ã€‚*

---

## 5. å¼‚æ­¥å‡½æ•°ä¸ Promise çš„ä¼˜é›…èˆæ­¥

JavaScript çš„å¼‚æ­¥ç¼–ç¨‹ç¦»ä¸å¼€å‡½æ•°ï¼Œ`Promise` å’Œ `async/await` è®©å¼‚æ­¥ä»£ç æ›´ä¼˜é›…ã€‚

### 5.1 Promise ä¸å›è°ƒåœ°ç‹±

åœ¨ Promise å‡ºç°ä¹‹å‰ï¼Œå¼‚æ­¥ä»£ç å¸¸å¸¸é™·å…¥â€œå›è°ƒåœ°ç‹±â€ï¼š

```javascript
getData((data) => {
  processData(data, (result) => {
    saveData(result, (final) => {
      console.log(final);
    });
  });
});
```

Promise è®©ä»£ç æ›´æ¸…æ™°ï¼š

```javascript
getData()
  .then(processData)
  .then(saveData)
  .then(console.log)
  .catch(console.error);
```

*Tips: ä½¿ç”¨ Promise æ—¶ï¼Œå§‹ç»ˆå¤„ç† `.catch`ï¼Œé¿å…æœªæ•è·çš„é”™è¯¯å¯¼è‡´ç¨‹åºå´©æºƒã€‚*

### 5.2 async/awaitï¼šå¼‚æ­¥çš„â€œåŒæ­¥â€å†™æ³•

`async/await` æ˜¯ Promise çš„è¯­æ³•ç³–ï¼Œè®©å¼‚æ­¥ä»£ç çœ‹èµ·æ¥åƒåŒæ­¥ä»£ç ï¼š

```javascript
async function fetchData() {
  try {
    const data = await getData();
    const result = await processData(data);
    const final = await saveData(result);
    console.log(final);
  } catch (error) {
    console.error(error);
  }
}
fetchData();
```

**ç±»æ¯”**ï¼š`async/await` å°±åƒæ˜¯å¼‚æ­¥ä¸–ç•Œçš„â€œæ—¶é—´é­”æ³•â€ï¼Œè®©ä»£ç æš‚åœç­‰å¾…ç»“æœï¼Œä¼˜é›…è€Œç›´è§‚ã€‚â³

*Tips: ä½¿ç”¨ `async/await` æ—¶ï¼Œå§‹ç»ˆç”¨ `try/catch` åŒ…è£¹ï¼Œæ•è·æ½œåœ¨é”™è¯¯ã€‚*

### 5.3 å¼‚æ­¥å‡½æ•°çš„æœ€ä½³å®è·µ

- **å¹¶è¡Œæ‰§è¡Œ**ï¼šä½¿ç”¨ `Promise.all` å¹¶è¡Œå¤„ç†å¤šä¸ªå¼‚æ­¥ä»»åŠ¡ã€‚

```javascript
async function fetchMultiple() {
  const [data1, data2] = await Promise.all([fetchData1(), fetchData2()]);
  return { data1, data2 };
}
```

- **é”™è¯¯é‡è¯•**ï¼šä¸ºä¸å¯é çš„å¼‚æ­¥æ“ä½œæ·»åŠ é‡è¯•æœºåˆ¶ã€‚

```javascript
async function retry(fn, times = 3) {
  for (let i = 0; i < times; i++) {
    try {
      return await fn();
    } catch (error) {
      if (i === times - 1) throw error;
    }
  }
}
```

*Tips: åœ¨å¼‚æ­¥å‡½æ•°ä¸­ï¼Œåˆç†ä½¿ç”¨ `Promise.all` å’Œé‡è¯•æœºåˆ¶ï¼Œæå‡æ€§èƒ½å’Œå¯é æ€§ã€‚*

---

## 6. å‡½æ•°çš„æ€§èƒ½ä¼˜åŒ–ä¸æœ€ä½³å®è·µ

å‡½æ•°è™½å°ï¼Œä½†æ€§èƒ½é—®é¢˜ä¸å®¹å¿½è§†ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å®ç”¨çš„ä¼˜åŒ–æŠ€å·§ã€‚

### 6.1 å‡å°‘å‡½æ•°è°ƒç”¨å¼€é”€

- **ç¼“å­˜ç»“æœ**ï¼šå¯¹äºæ˜‚è´µçš„è®¡ç®—ï¼Œä½¿ç”¨è®°å¿†åŒ–ï¼ˆMemoizationï¼‰ã€‚

```javascript
const memoize = (fn) => {
  const cache = new Map();
  return (...args) => {
    const key = JSON.stringify(args);
    if (cache.has(key)) return cache.get(key);
    const result = fn(...args);
    cache.set(key, result);
    return result;
  };
};
const fibonacci = memoize((n) => (n <= 1 ? n : fibonacci(n - 1) + fibonacci(n - 2)));
console.log(fibonacci(40)); // å¿«é€Ÿè®¡ç®—
```

*Tips: è®°å¿†åŒ–é€‚åˆè¾“å…¥æœ‰é™ä¸”é‡å¤çš„åœºæ™¯ï¼Œä½†è¦æ³¨æ„ç¼“å­˜å¤§å°ï¼Œé¿å…å†…å­˜å ç”¨è¿‡é«˜ã€‚*

### 6.2 é¿å…ä¸å¿…è¦çš„å‡½æ•°åˆ›å»º

åœ¨å¾ªç¯ä¸­åˆ›å»ºå‡½æ•°å¯èƒ½å¯¼è‡´æ€§èƒ½é—®é¢˜ï¼š

```javascript
// ä½æ•ˆ
for (let i = 0; i < 1000; i++) {
  const fn = () => console.log(i);
  fn();
}

// ä¼˜åŒ–
const fn = (i) => console.log(i);
for (let i = 0; i < 1000; i++) {
  fn(i);
}
```

*Tips: å°†å‡½æ•°å®šä¹‰ç§»å‡ºå¾ªç¯ï¼Œå‡å°‘å†…å­˜åˆ†é…å’Œåƒåœ¾å›æ”¶çš„å¼€é”€ã€‚*

### 6.3 ä½¿ç”¨é»˜è®¤å‚æ•°å’Œè§£æ„

é»˜è®¤å‚æ•°å’Œè§£æ„èµ‹å€¼å¯ä»¥è®©å‡½æ•°æ›´ç®€æ´ï¼š

```javascript
function createUser({ name = "Anonymous", age = 18 } = {}) {
  return { name, age };
}
console.log(createUser({ name: "Alice" })); // è¾“å‡º: { name: "Alice", age: 18 }
```

*Tips: ä½¿ç”¨é»˜è®¤å‚æ•°å’Œè§£æ„æ—¶ï¼Œç¡®ä¿å‚æ•°ç»“æ„æ¸…æ™°ï¼Œé¿å…è¿‡äºå¤æ‚çš„åµŒå¥—ã€‚*

---

## 7. å‡½æ•°çš„è®¾è®¡å“²å­¦ä¸æ„Ÿæ‚Ÿ

> â€œå¥½çš„ä»£ç å°±åƒå¥½çš„ç¬‘è¯ï¼šç®€æ´ã€ä¼˜é›…ã€ä¸éœ€è¦è§£é‡Šã€‚â€ â€”â€” æ”¹ç¼–è‡ª Dan Abramov çš„æ¨æ–‡

å‡½æ•°ä¸ä»…æ˜¯ä»£ç çš„æ‰§è¡Œå•å…ƒï¼Œæ›´æ˜¯ç¨‹åºå‘˜æ€ç»´çš„æ˜ å°„ã€‚è®¾è®¡ä¸€ä¸ªå¥½çš„å‡½æ•°ï¼Œå°±åƒé›•åˆ»ä¸€ä»¶è‰ºæœ¯å“ï¼Œéœ€è¦å¹³è¡¡åŠŸèƒ½ã€æ€§èƒ½å’Œå¯è¯»æ€§ã€‚

### 7.1 å‡½æ•°çš„å•ä¸€èŒè´£

ä¸€ä¸ªå‡½æ•°åªåšä¸€ä»¶äº‹ã€‚å°±åƒã€ŠUnix å“²å­¦ã€‹æ‰€è¯´ï¼šâ€œDo one thing and do it well.â€ å•ä¸€èŒè´£çš„å‡½æ•°æ›´å®¹æ˜“æµ‹è¯•å’Œç»´æŠ¤ã€‚

**ç¤ºä¾‹**ï¼š

```javascript
// ä¸ä½³
function processUser(user) {
  validateUser(user);
  saveUser(user);
  sendEmail(user);
}

// ä¼˜åŒ–
function processUser(user) {
  validateUser(user);
  return saveUser(user).then(() => sendEmail(user));
}
```

*Tips: æ‹†åˆ†å¤æ‚å‡½æ•°ä¸ºå¤šä¸ªå•ä¸€èŒè´£çš„å°å‡½æ•°ï¼Œæå‡ä»£ç å¯è¯»æ€§å’Œå¯æµ‹è¯•æ€§ã€‚*

### 7.2 å‡½æ•°çš„å‘½åè‰ºæœ¯

å‡½æ•°åæ˜¯ä»£ç çš„â€œé—¨é¢â€ï¼Œå¥½çš„å‘½åèƒ½è®©äººä¸€ç›®äº†ç„¶ã€‚éµå¾ªâ€œåŠ¨è¯ + åè¯â€çš„æ¨¡å¼ï¼Œæ¯”å¦‚ `fetchData`ã€`renderChart`ã€‚

*Tips: é¿å…æ¨¡ç³Šçš„å‘½åï¼Œå¦‚ `handle` æˆ– `do`ï¼Œä½¿ç”¨å…·ä½“åŠ¨è¯æè¿°å‡½æ•°è¡Œä¸ºã€‚*

### 7.3 å‡½æ•°ä¸äººç”Ÿå“²å­¦

å‡½æ•°çš„è®¾è®¡è®©æˆ‘æƒ³èµ·ã€Šé“å¾·ç»ã€‹ä¸­çš„ä¸€å¥è¯ï¼šâ€œæ— ä¸ºè€Œæ— ä¸ä¸ºã€‚â€ å¥½çš„å‡½æ•°çœ‹ä¼¼ç®€å•ï¼Œå´èƒ½è§£å†³å¤æ‚é—®é¢˜ã€‚å®ƒä»¬ä¸å¼ºæ±‚æŒæ§ä¸€åˆ‡ï¼Œè€Œæ˜¯é€šè¿‡ç»„åˆã€å¤ç”¨ã€ä¼ é€’ï¼Œå®Œæˆæ›´å¤§çš„ç›®æ ‡ã€‚è¿™ä¸æ­£æ˜¯ç¨‹åºå‘˜çš„æ™ºæ…§å—ï¼ŸğŸ˜Š

---

## 8. æ€»ç»“ï¼šå‡½æ•°æ˜¯é€»è¾‘çš„è‰ºæœ¯

JavaScript å‡½æ•°æ˜¯å‰ç«¯å¼€å‘çš„æ ¸å¿ƒï¼Œä»ç®€å•çš„é—®å€™å‡½æ•°åˆ°å¤æ‚çš„é—­åŒ…ã€é«˜é˜¶å‡½æ•°ã€å¼‚æ­¥å¤„ç†ï¼Œå‡½æ•°è´¯ç©¿äº†æˆ‘ä»¬ä»£ç çš„æ–¹æ–¹é¢é¢ã€‚å®ƒä»¬ä¸ä»…æ˜¯å·¥å…·ï¼Œæ›´æ˜¯é€»è¾‘çš„è¡¨è¾¾ã€è®¾è®¡çš„è‰ºæœ¯ã€‚

é€šè¿‡æœ¬æ–‡ï¼Œæˆ‘ä»¬æ¢ç´¢äº†ï¼š
- å‡½æ•°çš„æœ¬è´¨ä¸è¿è¡Œæœºåˆ¶
- å¤šç§å‡½æ•°å½¢æ€çš„ä¼˜åŠ£
- é—­åŒ…çš„é­”æ³•ä¸é™·é˜±
- é«˜é˜¶å‡½æ•°ä¸å‡½æ•°å¼ç¼–ç¨‹çš„ä¼˜é›…
- å¼‚æ­¥å‡½æ•°çš„ç°ä»£å†™æ³•
- æ€§èƒ½ä¼˜åŒ–ä¸æœ€ä½³å®è·µ
- å‡½æ•°èƒŒåçš„è®¾è®¡å“²å­¦

å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½è®©ä½ å¯¹ JavaScript å‡½æ•°æœ‰æ›´æ·±çš„ç†è§£ï¼Œä¹Ÿèƒ½åœ¨æ—¥å¸¸å¼€å‘ä¸­å†™å‡ºæ›´ä¼˜é›…ã€å¥å£®çš„ä»£ç ã€‚å‡½æ•°çš„ä¸–ç•Œæ·±é‚ƒè€Œæœ‰è¶£ï¼Œæ„¿ä½ åœ¨è¿™ç‰‡ä»£ç çš„æµ·æ´‹ä¸­ï¼Œæ‰¾åˆ°å±äºè‡ªå·±çš„èˆªå‘ï¼â›µ

> â€œä»£ç æ˜¯è¯—ï¼Œå‡½æ•°æ˜¯éŸµã€‚â€ â€”â€” åŸåˆ›

å¿«å»è¯•è¯•å§ï¼Œå†™ä¸€ä¸ªå‡½æ•°ï¼Œè§£å†³ä¸€ä¸ªé—®é¢˜ï¼Œæˆ–è€…é‡æ„ä¸€æ®µä»£ç ï¼Œè®©ä½ çš„å‡½æ•°æˆä¸ºé€»è¾‘çš„è‰ºæœ¯å“ï¼ğŸ¨

---