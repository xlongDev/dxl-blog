---
title: "Webpack ç»ˆææŒ‡å—ï¼šä»é›¶åˆ°è‹±é›„çš„æ¨¡å—åŒ–è‰ºæœ¯ ğŸ¨"
date: "2021-10-01"
description: "æ·±å…¥æ¢ç´¢ Webpack çš„æ ¸å¿ƒåŸç†ã€é…ç½®æŠ€å·§ä¸æœ€ä½³å®è·µï¼Œå¸¦ä½ ä»æ–°æ‰‹åˆ°ä¸“å®¶ï¼Œè§£é”å‰ç«¯æ¨¡å—åŒ–çš„æ— é™å¯èƒ½ã€‚æœ¬æ–‡ä¸ä»…æ˜¯ä¸€ä»½æŠ€æœ¯æŒ‡å—ï¼Œæ›´æ˜¯ä¸€åœºå…³äºç§©åºä¸æ··æ²Œã€å¤æ‚ä¸ä¼˜é›…çš„å“²å­¦ä¹‹æ—…ã€‚"
keywords: "Webpack, æ¨¡å—åŒ–, å‰ç«¯å¼€å‘, JavaScript æ‰“åŒ…, æ€§èƒ½ä¼˜åŒ–, Tree Shaking, Code Splitting, Hot Module Replacement, æ„å»ºå·¥å…·"
author: "æ™“é¾™"
image: "/images/hero/webpack-guide.jpg"
tags: ["Webpack", "JavaScript", "å‰ç«¯å¼€å‘", "æ„å»ºå·¥å…·"]
category: "Build-Tools"
---

> â€œç§©åºå¹¶éå‹è¿«ï¼Œè€Œæ˜¯è§£æ”¾ï¼›æ··æ²Œå¹¶éè‡ªç”±ï¼Œè€Œæ˜¯æ¡æ¢ã€‚â€ â€”â€” ä½šå

åœ¨å‰ç«¯å¼€å‘çš„æµ©ç€šæ˜Ÿæµ·ä¸­ï¼ŒWebpack å°±åƒä¸€è‰˜å·¨å‹é£èˆ¹ ğŸš€ï¼Œå°†é›¶æ•£çš„ä»£ç æ¨¡å—ã€é™æ€èµ„æºå’Œä¾èµ–å…³ç³»ç¼–ç»‡æˆä¸€ä¸ªé«˜æ•ˆã€ä¼˜é›…çš„æ•´ä½“ã€‚å®ƒä¸ä»…æ˜¯å·¥å…·ï¼Œæ›´æ˜¯å“²å­¦ï¼šå¦‚ä½•åœ¨å¤æ‚æ€§ä¸­å¯»æ‰¾ç§©åºï¼Œå¦‚ä½•åœ¨æ··æ²Œä¸­åˆ›é€ ä¼˜é›…ã€‚ä½œä¸ºä¸€åå‰ç«¯å¼€å‘è€…ï¼ŒæŒæ¡ Webpack ä¸ä»…æ˜¯æŠ€æœ¯ä¸Šçš„è¿›é˜¶ï¼Œæ›´æ˜¯ä¸€ç§å¯¹ä»£ç å®‡å®™çš„æ·±åˆ»æ´å¯Ÿã€‚

æœ¬æ–‡å°†å¸¦ä½ ç©¿è¶Š Webpack çš„æ¯ä¸€ä¸ªè§’è½ï¼Œä»åŸºç¡€é…ç½®åˆ°é«˜çº§ä¼˜åŒ–ï¼Œä»æ ¸å¿ƒåŸç†åˆ°å®æˆ˜æ¡ˆä¾‹ã€‚æ— è®ºä½ æ˜¯åˆå‡ºèŒ…åºçš„æ–°æ‰‹ï¼Œè¿˜æ˜¯èº«ç»ç™¾æˆ˜çš„è€å…µï¼Œè¿™é‡Œéƒ½æœ‰ä½ æƒ³è¦çš„ç­”æ¡ˆã€‚è®©æˆ‘ä»¬ä¸€èµ·ï¼Œè§£é”æ¨¡å—åŒ–çš„è‰ºæœ¯ï¼Œä¹¦å†™å±äºå‰ç«¯çš„å²è¯—ï¼âœ¨

## æ€ç»´é“¾ï¼šä¸ºä»€ä¹ˆå†™è¿™ç¯‡æŒ‡å—ï¼Ÿ

åœ¨åŠ¨ç¬”ä¹‹å‰ï¼Œæˆ‘æƒ³å…ˆèŠèŠè¿™ç¯‡æ–‡ç« çš„â€œåˆå¿ƒâ€ã€‚Webpack çš„æ–‡æ¡£è™½ç„¶è¯¦å°½ï¼Œä½†å¾€å¾€åƒä¸€æœ¬æ™¦æ¶©çš„å¤ç±ï¼Œåˆå­¦è€…æœ›è€Œç”Ÿç•ï¼›ç¤¾åŒºæ•™ç¨‹è™½å¤šï¼Œå´é›¶æ•£å¦‚æ˜Ÿï¼Œç¼ºä¹ç³»ç»Ÿæ€§ã€‚æˆ‘å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½æˆä¸ºä¸€ç›æ˜ç¯ï¼Œæ—¢æœ‰æ·±åº¦åˆæ¥åœ°æ°”ï¼Œæ—¢æœ‰ç†è®ºåˆé‡å®è·µã€‚æ›´é‡è¦çš„æ˜¯ï¼Œæˆ‘æƒ³è®©å®ƒä¸ä»…ä»…æ˜¯ä¸€ä»½æŠ€æœ¯æ–‡æ¡£ï¼Œè€Œæ˜¯ä¸€åœºæ—…ç¨‹â€”â€”ä»é…ç½®æ–‡ä»¶çš„ç¬¬ä¸€æ¬¡æ•²å‡»ï¼Œåˆ°æ€§èƒ½ä¼˜åŒ–çš„æƒŠè‰³æˆæœï¼Œå†åˆ°å¯¹å‰ç«¯å·¥ç¨‹åŒ–æœ¬è´¨çš„æ€è€ƒã€‚

ä¸ºæ­¤ï¼Œæˆ‘å°†æ–‡ç« åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š
1. **Webpack çš„æ ¸å¿ƒç†å¿µ**ï¼šç†è§£å®ƒçš„å“²å­¦ä¸åŸç†ã€‚
2. **ä»é›¶å¼€å§‹é…ç½®**ï¼šæ‰‹æŠŠæ‰‹æ•™ä½ æ­å»ºä¸€ä¸ªç°ä»£ Webpack é¡¹ç›®ã€‚
3. **é«˜çº§ç‰¹æ€§ä¸ä¼˜åŒ–**ï¼šæ¢ç´¢ Tree Shakingã€Code Splitting ç­‰é»‘é­”æ³•ã€‚
4. **å®æˆ˜æ¡ˆä¾‹**ï¼šé€šè¿‡çœŸå®é¡¹ç›®å±•ç¤º Webpack çš„é­…åŠ›ã€‚
5. **æœ€ä½³å®è·µä¸å“²å­¦æ€è€ƒ**ï¼šä»æŠ€æœ¯åˆ°äººç”Ÿï¼ŒWebpack æ•™ç»™æˆ‘ä»¬ä»€ä¹ˆã€‚

å‡†å¤‡å¥½äº†å—ï¼Ÿè®©æˆ‘ä»¬å¯ç¨‹å§ï¼ğŸŒŒ

## ç¬¬ä¸€ç« ï¼šWebpack çš„æ ¸å¿ƒç†å¿µ â€”â€” æ¨¡å—åŒ–çš„å®‡å®™è§‚ ğŸŒ

Webpack æ˜¯ä»€ä¹ˆï¼Ÿç®€å•æ¥è¯´ï¼Œå®ƒæ˜¯ä¸€ä¸ª**æ¨¡å—æ‰“åŒ…å·¥å…·**ï¼Œå°†ä½ çš„ JavaScriptã€CSSã€å›¾ç‰‡ç­‰èµ„æºæ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ª bundleã€‚ä½†è¿™åªæ˜¯è¡¨è±¡ã€‚Webpack çš„çœŸæ­£åŠ›é‡åœ¨äºå®ƒå¯¹â€œæ¨¡å—åŒ–â€çš„æ·±åˆ»ç†è§£ã€‚

### 1.1 æ¨¡å—åŒ–çš„å“²å­¦

æ¨¡å—åŒ–æ˜¯ç°ä»£å‰ç«¯å¼€å‘çš„åŸºçŸ³ã€‚è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœæ²¡æœ‰æ¨¡å—åŒ–ï¼Œæˆ‘ä»¬çš„ä»£ç å°±åƒä¸€ç›˜æ•£æ²™ï¼šå˜é‡å†²çªã€ä¾èµ–æ··ä¹±ã€ç»´æŠ¤æˆæœ¬é«˜å¾—è®©äººæŠ“ç‹‚ã€‚Webpack å°±åƒä¸€ä½ä¼Ÿå¤§çš„å»ºç­‘å¸ˆï¼Œå°†è¿™äº›æ•£æ²™èšåˆæˆæ‘©å¤©å¤§æ¥¼ã€‚å®ƒé€šè¿‡ä»¥ä¸‹æ ¸å¿ƒç†å¿µå®ç°è¿™ä¸€ç›®æ ‡ï¼š

- **ä¸€åˆ‡çš†æ¨¡å—**ï¼šJavaScriptã€CSSã€å›¾ç‰‡ï¼Œç”šè‡³ HTMLï¼Œéƒ½å¯ä»¥æ˜¯æ¨¡å—ã€‚Webpack æ‰“ç ´äº†èµ„æºçš„è¾¹ç•Œï¼Œè®©å®ƒä»¬åœ¨ç»Ÿä¸€çš„è§„åˆ™ä¸‹åä½œã€‚
- **ä¾èµ–å›¾ï¼ˆDependency Graphï¼‰**ï¼šWebpack ä¼šåˆ†æä½ çš„ä»£ç ï¼Œæ„å»ºä¸€å¼ ä¾èµ–å›¾ï¼Œç²¾ç¡®è¿½è¸ªæ¯ä¸ªæ¨¡å—ä¹‹é—´çš„å…³ç³»ã€‚
- **æ’ä»¶ä¸åŠ è½½å™¨**ï¼šé€šè¿‡ Loader å¤„ç†é JavaScript èµ„æºï¼Œé€šè¿‡ Plugin æ‰©å±• Webpack çš„åŠŸèƒ½ï¼Œèµ‹äºˆå®ƒæ— é™å¯èƒ½ã€‚

> *â€œæ¨¡å—åŒ–æ˜¯å°†å¤æ‚é—®é¢˜æ‹†è§£ä¸ºç®€å•éƒ¨åˆ†çš„è‰ºæœ¯ï¼Œè€Œ Webpack æ˜¯è¿™é—¨è‰ºæœ¯çš„å·…å³°ä¹‹ä½œã€‚â€*

**å° Tips**ï¼š*ç†è§£ Webpack çš„æ ¸å¿ƒåœ¨äºâ€œæ¨¡å—â€ä¸â€œä¾èµ–â€ã€‚åœ¨å­¦ä¹ é…ç½®ä¹‹å‰ï¼Œå…ˆèŠ± 10 åˆ†é’Ÿé˜…è¯» Webpack å®˜ç½‘çš„â€œConceptsâ€ç« èŠ‚ï¼Œæ„Ÿå—å®ƒçš„å“²å­¦ã€‚*

### 1.2 Webpack çš„å·¥ä½œåŸç†

Webpack çš„å·¥ä½œæµç¨‹å¯ä»¥ç±»æ¯”æˆä¸€ä¸ªâ€œå®‡å®™å¤§çˆ†ç‚¸â€ï¼š
1. **å…¥å£ï¼ˆEntryï¼‰**ï¼šWebpack ä»ä½ æŒ‡å®šçš„å…¥å£æ–‡ä»¶å¼€å§‹ï¼Œç‚¹ç‡ƒæ¨¡å—åŒ–çš„ç¬¬ä¸€é¢—ç«èŠ±ã€‚
2. **ä¾èµ–è§£æ**ï¼šé€šè¿‡åˆ†æ `import` æˆ– `require`ï¼ŒWebpack é€’å½’æ„å»ºä¾èµ–å›¾ã€‚
3. **èµ„æºè½¬æ¢**ï¼šLoader å°†é JavaScript èµ„æºï¼ˆå¦‚ CSSã€å›¾ç‰‡ï¼‰è½¬æ¢ä¸ºæ¨¡å—ã€‚
4. **æ‰“åŒ…è¾“å‡º**ï¼šå°†æ‰€æœ‰æ¨¡å—æ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ª bundleï¼Œè¾“å‡ºåˆ°æŒ‡å®šç›®å½•ã€‚
5. **æ’ä»¶å¹²é¢„**ï¼šPlugin åœ¨æ‰“åŒ…çš„å„ä¸ªé˜¶æ®µæ³¨å…¥é€»è¾‘ï¼Œä¼˜åŒ–æˆ–æ‰©å±•åŠŸèƒ½ã€‚

ä¸‹è¡¨æ€»ç»“äº† Webpack çš„æ ¸å¿ƒæ¦‚å¿µï¼š

| æ¦‚å¿µ         | æè¿°                                                                 | ç±»æ¯”                     |
|--------------|----------------------------------------------------------------------|--------------------------|
| Entry        | æ‰“åŒ…çš„èµ·ç‚¹ï¼Œé€šå¸¸æ˜¯ä¸» JavaScript æ–‡ä»¶                                  | å®‡å®™å¤§çˆ†ç‚¸çš„å¥‡ç‚¹         |
| Output       | æ‰“åŒ…åçš„æ–‡ä»¶è¾“å‡ºè·¯å¾„å’Œåç§°                                           | æ˜Ÿç³»çš„æœ€ç»ˆå½¢æ€           |
| Loader       | å°†é JavaScript èµ„æºè½¬æ¢ä¸ºæ¨¡å—                                       | æ˜Ÿé™…ç¿»è¯‘å®˜               |
| Plugin       | æ‰©å±• Webpack åŠŸèƒ½ï¼Œå¦‚å‹ç¼©ã€æå– CSS                                  | å®‡å®™å·¥ç¨‹å¸ˆ               |
| Module       | ä»»ä½•å¯ä»¥è¢« Webpack å¤„ç†çš„æ–‡ä»¶ï¼ˆJSã€CSSã€å›¾ç‰‡ç­‰ï¼‰                     | æ˜Ÿçƒ                     |
| Chunk        | æ‰“åŒ…è¿‡ç¨‹ä¸­ç”Ÿæˆçš„ä»£ç å—ï¼Œé€šå¸¸å¯¹åº”ä¸€ä¸ªæˆ–å¤šä¸ªæ¨¡å—                       | æ˜Ÿå›¢                     |
| Bundle       | æœ€ç»ˆè¾“å‡ºçš„æ–‡ä»¶ï¼ŒåŒ…å«æ‰€æœ‰å¿…è¦çš„ä»£ç å’Œèµ„æº                             | å®Œæ•´çš„æ˜Ÿç³»               |

**å° Tips**ï¼š*åœ¨è°ƒè¯• Webpack æ—¶ï¼Œå°è¯•ä½¿ç”¨ `webpack --progress --profile` å‘½ä»¤ï¼ŒæŸ¥çœ‹æ¯ä¸ªé˜¶æ®µçš„è€—æ—¶ï¼Œç†è§£ä¾èµ–å›¾çš„æ„å»ºè¿‡ç¨‹ã€‚*

### 1.3 ä¸ºä»€ä¹ˆé€‰æ‹© Webpackï¼Ÿ

ä½ å¯èƒ½ä¼šé—®ï¼šViteã€esbuildã€Turbopack è¿™ä¹ˆå¿«ï¼Œä¸ºä»€ä¹ˆè¿˜è¦å­¦ Webpackï¼Ÿç­”æ¡ˆæ˜¯ï¼š**Webpack çš„ç”Ÿæ€ä¸çµæ´»æ€§æ— äººèƒ½æ•Œ**ã€‚å®ƒä¸ä»…æ˜¯æ‰“åŒ…å·¥å…·ï¼Œæ›´æ˜¯ä¸€ä¸ªå¹³å°ï¼Œæ”¯æ’‘ç€ä»å°å‹é¡¹ç›®åˆ°å¤æ‚åº”ç”¨çš„å„ç§éœ€æ±‚ã€‚Vite é€‚åˆå¿«é€Ÿå¼€å‘ï¼Œesbuild è¿½æ±‚æè‡´æ€§èƒ½ï¼Œä½† Webpack çš„æ’ä»¶ç”Ÿæ€å’Œç¤¾åŒºæ”¯æŒè®©å®ƒåœ¨ä¼ä¸šçº§é¡¹ç›®ä¸­å±¹ç«‹ä¸å€’ã€‚

> *â€œé€‰æ‹© Webpackï¼Œä¸æ˜¯å› ä¸ºå®ƒæœ€å¿«ï¼Œè€Œæ˜¯å› ä¸ºå®ƒæœ€å…¨ã€‚å®ƒçš„å¤æ‚æ€§æ˜¯è‡ªç”±çš„ä»£ä»·ï¼Œä¹Ÿæ˜¯æ— é™å¯èƒ½çš„é’¥åŒ™ã€‚â€*

**å° Tips**ï¼š*å¦‚æœä½ æ˜¯åˆå­¦è€…ï¼Œå¯ä»¥å…ˆç”¨ Vite å¿«é€Ÿä¸Šæ‰‹é¡¹ç›®ï¼Œç†Ÿæ‚‰æ¨¡å—åŒ–åå†å­¦ Webpackï¼Œä¼šäº‹åŠåŠŸå€ã€‚*

## ç¬¬äºŒç« ï¼šä»é›¶å¼€å§‹é…ç½® Webpack â€”â€” ä½ çš„ç¬¬ä¸€è‰˜é£èˆ¹ ğŸš€

è®©æˆ‘ä»¬ä»é›¶å¼€å§‹ï¼Œæ­å»ºä¸€ä¸ªç°ä»£åŒ–çš„ Webpack é¡¹ç›®ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„é…ç½®ï¼Œæ¶µç›– JavaScriptã€CSSã€å›¾ç‰‡å’Œ HTML çš„å¤„ç†ã€‚

### 2.1 åˆå§‹åŒ–é¡¹ç›®

é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªé¡¹ç›®ç›®å½•å¹¶åˆå§‹åŒ–ï¼š

```bash
mkdir webpack-demo
cd webpack-demo
npm init -y
npm install webpack webpack-cli --save-dev
```

åˆ›å»ºä¸€ä¸ªç®€å•çš„é¡¹ç›®ç»“æ„ï¼š

```
webpack-demo/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.js
â”‚   â”œâ”€â”€ styles.css
â”‚   â”œâ”€â”€ image.png
â”‚   â””â”€â”€ index.html
â”œâ”€â”€ package.json
â””â”€â”€ webpack.config.js
```

### 2.2 åŸºç¡€é…ç½®æ–‡ä»¶

åœ¨ `webpack.config.js` ä¸­å†™å…¥ä»¥ä¸‹å†…å®¹ï¼š

```javascript
const path = require('path');

module.exports = {
  entry: './src/index.js',
  output: {
    filename: 'bundle.js',
    path: path.resolve(__dirname, 'dist'),
    clean: true,
  },
  mode: 'development',
};
```

**ä»£ç è§£æ**ï¼š
- `entry`ï¼šæŒ‡å®šå…¥å£æ–‡ä»¶ï¼ŒWebpack ä»è¿™é‡Œå¼€å§‹æ„å»ºä¾èµ–å›¾ã€‚
- `output`ï¼šå®šä¹‰è¾“å‡ºè·¯å¾„å’Œæ–‡ä»¶åï¼Œ`clean: true` ä¼šè‡ªåŠ¨æ¸…ç† `dist` ç›®å½•ã€‚
- `mode`ï¼šè®¾ç½®ä¸º `development` æˆ– `production`ï¼Œå½±å“æ‰“åŒ…è¡Œä¸ºã€‚

è¿è¡Œæ‰“åŒ…ï¼š

```bash
npx webpack
```

ä½ ä¼šåœ¨ `dist` ç›®å½•ä¸‹çœ‹åˆ°ç”Ÿæˆçš„ `bundle.js`ã€‚ä½†ç°åœ¨å®ƒåªèƒ½å¤„ç† JavaScriptï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ æ›´å¤šåŠŸèƒ½ã€‚

**å° Tips**ï¼š*å§‹ç»ˆè®¾ç½® `mode`ï¼Œå¦åˆ™ Webpack ä¼šå‘å‡ºè­¦å‘Šã€‚å¼€å‘æ—¶ç”¨ `development`ï¼Œç”Ÿäº§ç¯å¢ƒç”¨ `production` ä»¥å¯ç”¨ä¼˜åŒ–ã€‚*

### 2.3 å¤„ç† CSS å’Œå›¾ç‰‡

å®‰è£…å¿…è¦çš„ Loaderï¼š

```bash
npm install style-loader css-loader file-loader --save-dev
```

æ›´æ–° `webpack.config.js`ï¼š

```javascript
const path = require('path');

module.exports = {
  entry: './src/index.js',
  output: {
    filename: 'bundle.js',
    path: path.resolve(__dirname, 'dist'),
    clean: true,
  },
  mode: 'development',
  module: {
    rules: [
      {
        test: /\.css$/,
        use: ['style-loader', 'css-loader'],
      },
      {
        test: /\.(png|jpg|jpeg|gif)$/i,
        type: 'asset/resource',
      },
    ],
  },
};
```

**ä»£ç è§£æ**ï¼š
- `module.rules`ï¼šå®šä¹‰èµ„æºå¤„ç†è§„åˆ™ã€‚
- `css-loader`ï¼šè§£æ CSS æ–‡ä»¶ä¸­çš„ `@import` å’Œ `url()`ã€‚
- `style-loader`ï¼šå°† CSS æ³¨å…¥åˆ° DOM ä¸­ã€‚
- `asset/resource`ï¼šå¤„ç†å›¾ç‰‡ï¼Œç”Ÿæˆå•ç‹¬çš„æ–‡ä»¶ã€‚

åœ¨ `src/index.js` ä¸­å¼•å…¥ CSS å’Œå›¾ç‰‡ï¼š

```javascript
import './styles.css';
import Image from './image.png';

const img = document.createElement('img');
img.src = Image;
document.body.appendChild(img);
```

**å° Tips**ï¼š*ä½¿ç”¨ `asset/resource` è€Œä¸æ˜¯è€æ—§çš„ `file-loader`ï¼Œå®ƒæ›´ç®€æ´ä¸”æ”¯æŒèµ„æºæ¨¡å—ã€‚*

### 2.4 å¤„ç† HTML

å®‰è£… `html-webpack-plugin`ï¼š

```bash
npm install html-webpack-plugin --save-dev
```

æ›´æ–° `webpack.config.js`ï¼š

```javascript
const path = require('path');
const HtmlWebpackPlugin = require('html-webpack-plugin');

module.exports = {
  entry: './src/index.js',
  output: {
    filename: 'bundle.js',
    path: path.resolve(__dirname, 'dist'),
    clean: true,
  },
  mode: 'development',
  module: {
    rules: [
      {
        test: /\.css$/,
        use: ['style-loader', 'css-loader'],
      },
      {
        test: /\.(png|jpg|jpeg|gif)$/i,
        type: 'asset/resource',
      },
    ],
  },
  plugins: [
    new HtmlWebpackPlugin({
      template: './src/index.html',
      filename: 'index.html',
    }),
  ],
};
```

åˆ›å»º `src/index.html`ï¼š

```html
<!DOCTYPE html>
<html>
<head>
  <title>Webpack Demo</title>
</head>
<body>
  <h1>Hello, Webpack!</h1>
</body>
</html>
```

`html-webpack-plugin` ä¼šè‡ªåŠ¨å°† `bundle.js` æ³¨å…¥åˆ° HTML ä¸­ã€‚

**å° Tips**ï¼š*ä½¿ç”¨ `html-webpack-plugin` çš„ `minify` é€‰é¡¹å¯ä»¥åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å‹ç¼© HTMLï¼Œå‡å°‘æ–‡ä»¶ä½“ç§¯ã€‚*

### 2.5 å¼€å‘æœåŠ¡å™¨

å®‰è£… `webpack-dev-server`ï¼š

```bash
npm install webpack-dev-server --save-dev
```

æ›´æ–° `package.json`ï¼š

```json
"scripts": {
  "start": "webpack serve --open",
  "build": "webpack"
}
```

è¿è¡Œ `npm start`ï¼ŒWebpack ä¼šå¯åŠ¨ä¸€ä¸ªå¼€å‘æœåŠ¡å™¨ï¼Œè‡ªåŠ¨åˆ·æ–°æµè§ˆå™¨ã€‚

**å° Tips**ï¼š*åœ¨ `webpack.config.js` ä¸­æ·»åŠ  `devServer: { hot: true }` å¯ç”¨çƒ­æ¨¡å—æ›¿æ¢ï¼ˆHMRï¼‰ï¼Œæå‡å¼€å‘ä½“éªŒã€‚*

## ç¬¬ä¸‰ç« ï¼šé«˜çº§ç‰¹æ€§ä¸ä¼˜åŒ– â€”â€” é‡Šæ”¾ Webpack çš„é»‘é­”æ³• ğŸª„

Webpack çš„çœŸæ­£é­…åŠ›åœ¨äºå®ƒçš„è¿›é˜¶åŠŸèƒ½ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›é«˜çº§ç‰¹æ€§å’Œä¼˜åŒ–æŠ€å·§ã€‚

### 3.1 Code Splitting

ä»£ç åˆ†å‰²å¯ä»¥å°†ä½ çš„ä»£ç æ‹†åˆ†ä¸ºå¤šä¸ª chunkï¼ŒæŒ‰éœ€åŠ è½½ï¼Œæå‡é¦–å±åŠ è½½é€Ÿåº¦ã€‚Webpack æ”¯æŒä¸¤ç§æ–¹å¼ï¼š
- **åŠ¨æ€å¯¼å…¥**ï¼šä½¿ç”¨ `import()` è¯­æ³•ã€‚
- **SplitChunksPlugin**ï¼šè‡ªåŠ¨æå–å…¬å…±æ¨¡å—ã€‚

ç¤ºä¾‹ï¼šåŠ¨æ€å¯¼å…¥æ¨¡å—

åœ¨ `src/index.js` ä¸­ï¼š

```javascript
document.getElementById('load').addEventListener('click', () => {
  import('./heavyModule.js').then(module => {
    module.default();
  });
});
```

Webpack ä¼šè‡ªåŠ¨å°† `heavyModule.js` æ‰“åŒ…ä¸ºå•ç‹¬çš„ chunkã€‚

**å° Tips**ï¼š*ä¸ºåŠ¨æ€å¯¼å…¥çš„ chunk è®¾ç½® `webpackChunkName`ï¼ˆå¦‚ `import(/* webpackChunkName: "heavy" */ './heavyModule.js')`ï¼‰ï¼Œä¾¿äºè°ƒè¯•å’Œåˆ†æã€‚*

### 3.2 Tree Shaking

Tree Shaking æ˜¯ä¸€ç§â€œæ‘‡æ ‘â€ä¼˜åŒ–ï¼Œé€šè¿‡ç§»é™¤æœªä½¿ç”¨çš„ä»£ç ï¼ˆdead codeï¼‰æ¥å‡å°‘ bundle ä½“ç§¯ã€‚Webpack åœ¨ `mode: 'production'` ä¸‹é»˜è®¤å¯ç”¨ã€‚

ç¤ºä¾‹ï¼šåˆ›å»º `src/utils.js`ï¼š

```javascript
export const usedFunction = () => console.log('I am used!');
export const unusedFunction = () => console.log('I am not used.');
```

åœ¨ `src/index.js` ä¸­ï¼š

```javascript
import { usedFunction } from './utils';
usedFunction();
```

æ‰“åŒ…åï¼Œ`unusedFunction` ä¼šè¢«ç§»é™¤ã€‚

**å° Tips**ï¼š*ç¡®ä¿ä½ çš„ä»£ç ä½¿ç”¨ ES æ¨¡å—ï¼ˆ`import`/`export`ï¼‰ï¼Œå› ä¸º CommonJS æ¨¡å—ä¸æ”¯æŒ Tree Shakingã€‚*

### 3.3 æå– CSS

ä½¿ç”¨ `mini-css-extract-plugin` å°† CSS æå–ä¸ºå•ç‹¬çš„æ–‡ä»¶ï¼Œä¼˜åŒ–åŠ è½½æ€§èƒ½ã€‚

å®‰è£…ï¼š

```bash
npm install mini-css-extract-plugin --save-dev
```

æ›´æ–° `webpack.config.js`ï¼š

```javascript
const path = require('path');
const HtmlWebpackPlugin = require('html-webpack-plugin');
const MiniCssExtractPlugin = require('mini-css-extract-plugin');

module.exports = {
  entry: './src/index.js',
  output: {
    filename: 'bundle.js',
    path: path.resolve(__dirname, 'dist'),
    clean: true,
  },
  mode: 'production',
  module: {
    rules: [
      {
        test: /\.css$/,
        use: [MiniCssExtractPlugin.loader, 'css-loader'],
      },
      {
        test: /\.(png|jpg|jpeg|gif)$/i,
        type: 'asset/resource',
      },
    ],
  },
  plugins: [
    new HtmlWebpackPlugin({
      template: './src/index.html',
      filename: 'index.html',
    }),
    new MiniCssExtractPlugin({
      filename: '[name].css',
    }),
  ],
};
```

**å° Tips**ï¼š*åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ `mini-css-extract-plugin`ï¼Œå¼€å‘ç¯å¢ƒä¸­ç»§ç»­ä½¿ç”¨ `style-loader` ä»¥æ”¯æŒ HMRã€‚*

### 3.4 æ€§èƒ½ä¼˜åŒ–

ä»¥ä¸‹æ˜¯ä¸€äº›å®ç”¨çš„æ€§èƒ½ä¼˜åŒ–æŠ€å·§ï¼š
- **ä½¿ç”¨ `optimization.splitChunks`**ï¼šæå–å…¬å…±æ¨¡å—ã€‚
- **å‹ç¼©ä»£ç **ï¼šåœ¨ç”Ÿäº§æ¨¡å¼ä¸‹ï¼ŒWebpack è‡ªåŠ¨ä½¿ç”¨ Terser å‹ç¼© JavaScriptã€‚
- **å›¾ç‰‡ä¼˜åŒ–**ï¼šä½¿ç”¨ `image-webpack-loader` å‹ç¼©å›¾ç‰‡ã€‚
- **ç¼“å­˜**ï¼šè®¾ç½® `output.filename: '[name].[contenthash].js'`ï¼Œåˆ©ç”¨æµè§ˆå™¨ç¼“å­˜ã€‚

**å° Tips**ï¼š*å®šæœŸä½¿ç”¨ `webpack-bundle-analyzer` åˆ†æ bundle ä½“ç§¯ï¼Œæ‰¾åˆ°ä¼˜åŒ–ç©ºé—´ã€‚*

## ç¬¬å››ç« ï¼šå®æˆ˜æ¡ˆä¾‹ â€”â€” æ„å»ºä¸€ä¸ª React å•é¡µåº”ç”¨ âš›ï¸

è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªçœŸå®çš„ React é¡¹ç›®ï¼Œå±•ç¤º Webpack çš„å¼ºå¤§èƒ½åŠ›ã€‚

### 4.1 åˆå§‹åŒ– React é¡¹ç›®

å®‰è£…ä¾èµ–ï¼š

```bash
npm install react react-dom --save
npm install @babel/core @babel/preset-env @babel/preset-react babel-loader --save-dev
```

åˆ›å»º `.babelrc`ï¼š

```json
{
  "presets": ["@babel/preset-env", "@babel/preset-react"]
}
```

æ›´æ–° `src/index.js`ï¼š

```javascript
import React from 'react';
import { createRoot } from 'react-dom/client';
import App from './App';

const root = createRoot(document.getElementById('root'));
root.render(<App />);
```

åˆ›å»º `src/App.js`ï¼š

```javascript
import React from 'react';

const App = () => {
  return <h1>Hello, React with Webpack! ğŸš€</h1>;
};

export default App;
```

æ›´æ–° `src/index.html`ï¼š

```html
<!DOCTYPE html>
<html>
<head>
  <title>React App</title>
</head>
<body>
  <div id="root"></div>
</body>
</html>
```

æ›´æ–° `webpack.config.js`ï¼š

```javascript
const path = require('path');
const HtmlWebpackPlugin = require('html-webpack-plugin');
const MiniCssExtractPlugin = require('mini-css-extract-plugin');

module.exports = {
  entry: './src/index.js',
  output: {
    filename: '[name].[contenthash].js',
    path: path.resolve(__dirname, 'dist'),
    clean: true,
  },
  mode: 'development',
  module: {
    rules: [
      {
        test: /\.jsx?$/,
        exclude: /node_modules/,
        use: 'babel-loader',
      },
      {
        test: /\.css$/,
        use: [MiniCssExtractPlugin.loader, 'css-loader'],
      },
      {
        test: /\.(png|jpg|jpeg|gif)$/i,
        type: 'asset/resource',
      },
    ],
  },
  plugins: [
    new HtmlWebpackPlugin({
      template: './src/index.html',
      filename: 'index.html',
    }),
    new MiniCssExtractPlugin({
      filename: '[name].css',
    }),
  ],
  devServer: {
    hot: true,
    open: true,
  },
};
```

è¿è¡Œ `npm start`ï¼Œä½ å°†çœ‹åˆ°ä¸€ä¸ªè¿è¡Œä¸­çš„ React åº”ç”¨ï¼

**å° Tips**ï¼š*åœ¨ React é¡¹ç›®ä¸­ï¼Œæ·»åŠ  `eslint` å’Œ `prettier` ç¡®ä¿ä»£ç é£æ ¼ä¸€è‡´ï¼Œæå‡å›¢é˜Ÿåä½œæ•ˆç‡ã€‚*

## ç¬¬äº”ç« ï¼šæœ€ä½³å®è·µä¸å“²å­¦æ€è€ƒ â€”â€” ä»æŠ€æœ¯åˆ°äººç”Ÿ ğŸŒŸ

Webpack ä¸ä»…æ˜¯ä¸€é—¨æŠ€æœ¯ï¼Œæ›´æ˜¯ä¸€ç§æ€ç»´æ–¹å¼ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›æœ€ä½³å®è·µï¼Œä»¥åŠå®ƒä»¬èƒŒåçš„å“²å­¦å¯ç¤ºã€‚

### 5.1 æœ€ä½³å®è·µ

1. **æ¨¡å—åŒ–ä¼˜å…ˆ**ï¼šå°†ä»£ç æ‹†åˆ†ä¸ºå°è€Œç¾çš„æ¨¡å—ï¼Œæå‡å¯ç»´æŠ¤æ€§ã€‚
   - *å° Tips*ï¼š*ä½¿ç”¨ `barrel` æ–‡ä»¶ï¼ˆå¦‚ `index.js`ï¼‰ç»Ÿä¸€å¯¼å‡ºæ¨¡å—ï¼Œç®€åŒ–å¯¼å…¥ã€‚*

2. **æŒ‰éœ€åŠ è½½**ï¼šåˆ©ç”¨åŠ¨æ€å¯¼å…¥å’Œ Code Splitting ä¼˜åŒ–æ€§èƒ½ã€‚
   - *å° Tips*ï¼š*åœ¨è·¯ç”±çº§åˆ«å®ç°æ‡’åŠ è½½ï¼Œå‡å°‘é¦–å±åŠ è½½æ—¶é—´ã€‚*

3. **ç¼“å­˜ç­–ç•¥**ï¼šä½¿ç”¨ `[contenthash]` ç¡®ä¿æ–‡ä»¶å†…å®¹ä¸å˜æ—¶ç¼“å­˜æœ‰æ•ˆã€‚
   - *å° Tips*ï¼š*ç»“åˆ Service Worker å®ç°ç¦»çº¿ç¼“å­˜ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚*

4. **æ€§èƒ½ç›‘æ§**ï¼šå®šæœŸåˆ†æ bundle ä½“ç§¯ï¼Œä¼˜åŒ–æ„å»ºé€Ÿåº¦ã€‚
   - *å° Tips*ï¼š*ä½¿ç”¨ `speed-measure-webpack-plugin` æµ‹é‡æ¯ä¸ª Loader å’Œ Plugin çš„è€—æ—¶ã€‚*

5. **æ–‡æ¡£åŒ–é…ç½®**ï¼šä¸ºå¤æ‚çš„ Webpack é…ç½®æ·»åŠ æ³¨é‡Šï¼Œæå‡å¯è¯»æ€§ã€‚
   - *å° Tips*ï¼š*å°†é…ç½®æ‹†åˆ†ä¸ºå¤šä¸ªæ–‡ä»¶ï¼ˆå¦‚ `webpack.dev.js` å’Œ `webpack.prod.js`ï¼‰ï¼Œä¾¿äºç»´æŠ¤ã€‚*

### 5.2 å“²å­¦æ€è€ƒ

Webpack çš„å¤æ‚æ€§è®©æˆ‘æƒ³èµ·äººç”Ÿçš„æ—…ç¨‹ã€‚ä»£ç ä¸­çš„ä¾èµ–å›¾ï¼Œå°±åƒæˆ‘ä»¬ç”Ÿæ´»ä¸­çš„å…³ç³»ç½‘ï¼›æ‰“åŒ…çš„è¿‡ç¨‹ï¼Œå°±åƒæˆ‘ä»¬ä»æ··æ²Œä¸­å¯»æ‰¾ç§©åºçš„åŠªåŠ›ã€‚æ¯ä¸€æ¬¡ä¼˜åŒ–ï¼Œéƒ½æ˜¯ä¸€æ¬¡å¯¹å®Œç¾çš„è¿½æ±‚ã€‚

> *â€œæŠ€æœ¯æ˜¯å·¥å…·ï¼Œå“²å­¦æ˜¯æ–¹å‘ã€‚Webpack æ•™ä¼šæˆ‘ä»¬ï¼šå¤æ‚ä¸å¯æ€•ï¼Œå¯æ€•çš„æ˜¯å¤±å»æŒæ§ã€‚â€*

åœ¨å­¦ä¹  Webpack çš„è¿‡ç¨‹ä¸­ï¼Œä½ æ˜¯å¦ä¹Ÿæ„Ÿå—åˆ°ä¸€ç§æŒæ§æ„Ÿï¼Ÿä»æœ€åˆçš„é…ç½®å‡ºé”™ï¼Œåˆ°æœ€ç»ˆçš„æ€§èƒ½é£è·ƒï¼Œè¿™ä¸æ­£æ˜¯æˆ‘ä»¬æˆé•¿çš„ç¼©å½±å—ï¼ŸWebpack è®©æˆ‘ä»¬å­¦ä¼šæ‹¥æŠ±å¤æ‚ï¼ŒåŒ–ç¹ä¸ºç®€ï¼›å®ƒè®©æˆ‘ä»¬æ˜ç™½ï¼ŒçœŸæ­£çš„ä¼˜é›…ï¼Œæºäºå¯¹ç»†èŠ‚çš„æè‡´è¿½æ±‚ã€‚

## ç»“è¯­ï¼šè¿ˆå‘æ˜Ÿè¾°å¤§æµ· ğŸŒ 

Webpack æ˜¯ä¸€é—¨è‰ºæœ¯ï¼Œä¹Ÿæ˜¯ä¸€åœºå†’é™©ã€‚å®ƒå¤æ‚ï¼Œå´å……æ»¡é­…åŠ›ï¼›å®ƒæ·±å¥¥ï¼Œå´å€¼å¾—æ¢ç´¢ã€‚å¸Œæœ›è¿™ç¯‡æŒ‡å—èƒ½æˆä¸ºä½ æ—…é€”ä¸­çš„ä¸€ç›æ˜ç¯ï¼ŒæŒ‡å¼•ä½ ä»é›¶åˆ°è‹±é›„ã€‚

> *â€œåœ¨ä»£ç çš„å®‡å®™ä¸­ï¼Œæ¯ä¸€è¡Œé…ç½®éƒ½æ˜¯ä¸€é¢—æ˜Ÿè¾°ã€‚æ„¿ä½ ç”¨ Webpackï¼Œç‚¹äº®å±äºè‡ªå·±çš„æ˜Ÿç©ºã€‚â€*

ç»§ç»­å‰è¡Œå§ï¼Œå‰ç«¯å¼€å‘è€…ï¼æ— è®ºæœªæ¥çš„å·¥å…·å¦‚ä½•å˜è¿ï¼Œæ¨¡å—åŒ–çš„ç²¾ç¥å°†æ°¸è¿œé—ªè€€ã€‚è®©æˆ‘ä»¬ä¸€èµ·ï¼Œä¹¦å†™æ›´ä¼˜é›…çš„ä»£ç ï¼Œåˆ›é€ æ›´ç¾å¥½çš„ä¸–ç•Œï¼âœ¨

---