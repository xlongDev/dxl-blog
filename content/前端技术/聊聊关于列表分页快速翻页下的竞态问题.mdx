---
title: "èŠèŠå…³äºåˆ—è¡¨åˆ†é¡µå¿«é€Ÿç¿»é¡µä¸‹çš„ç«æ€é—®é¢˜"
date: "2024-04-23"
description: "æ·±å…¥å‰–æå‰ç«¯åˆ†é¡µåœºæ™¯ä¸­çš„ç«æ€é—®é¢˜ï¼Œæ¢è®¨æˆå› ã€è§£å†³æ–¹æ¡ˆå’Œæœ€ä½³å®è·µï¼Œå¸¦ä½ ä»åŸç†åˆ°ä»£ç å…¨é¢æŒæ¡ã€‚"
keywords: "å‰ç«¯å¼€å‘, åˆ†é¡µ, ç«æ€é—®é¢˜, Race Condition, JavaScript, React, å¼‚æ­¥è¯·æ±‚, é˜²æŠ–èŠ‚æµ, AbortController"
author: "æ™“é¾™"
image: "/images/hero/race-condition-paging.jpg"
tags: ["å‰ç«¯å¼€å‘", "JavaScript", "React", "æ€§èƒ½ä¼˜åŒ–"]
category: "å‰ç«¯æŠ€æœ¯"
---

åˆ†é¡µåˆ—è¡¨ï¼Œå‡ ä¹æ˜¯æ¯ä¸ªå‰ç«¯å¼€å‘è€…éƒ½é€ƒä¸è¿‡çš„â€œè€æœ‹å‹â€ã€‚ä»ç”µå•†å•†å“åˆ—è¡¨åˆ°ç¤¾äº¤åª’ä½“åŠ¨æ€feedï¼Œåˆ†é¡µæ— å¤„ä¸åœ¨ã€‚ç„¶è€Œï¼Œå½“ç”¨æˆ·åŒ–èº«â€œç¿»é¡µç‹‚é­”â€ï¼Œå¿«é€Ÿç‚¹å‡»â€œä¸‹ä¸€é¡µâ€æŒ‰é’®æ—¶ï¼Œä½ æœ‰æ²¡æœ‰å‘ç°ï¼Œäº‹æƒ…å¥½åƒå¼€å§‹å˜å¾—æœ‰ç‚¹â€œå¤±æ§â€äº†ï¼Ÿæ•°æ®é”™ä¹±ã€é¡µé¢é—ªçƒï¼Œç”šè‡³è¯·æ±‚è¿”å›çš„é¡ºåºå®Œå…¨æ‰“ä¹±â€”â€”è¿™èƒŒåï¼Œå°±æ˜¯ç«æ€é—®é¢˜ï¼ˆRace Conditionï¼‰åœ¨ä½œç¥Ÿã€‚ä»Šå¤©ï¼Œå’±ä»¬å°±æ¥èŠèŠè¿™ä¸ªè®©äººå¤´ç§ƒçš„â€œç¿»é¡µbugâ€ï¼Œä»åŸç†åˆ°è§£å†³æ–¹æ¡ˆï¼Œå†åˆ°ä¸€äº›å®æˆ˜å°æŠ€å·§ï¼Œå¸¦ä½ å½»åº•æå®šå®ƒï¼ğŸŒŸ

## ä»€ä¹ˆæ˜¯ç«æ€é—®é¢˜ï¼Ÿ

å…ˆåˆ«æ€¥ç€ç¿»ä»£ç ï¼Œå’±ä»¬å…ˆä»æ ¹å„¿ä¸Šææ¸…æ¥šï¼šç«æ€é—®é¢˜åˆ°åº•æ˜¯ä¸ªå•¥ï¼Ÿç®€å•æ¥è¯´ï¼Œå®ƒå‘ç”Ÿåœ¨å¤šä¸ªå¼‚æ­¥æ“ä½œï¼ˆæ¯”å¦‚ç½‘ç»œè¯·æ±‚ï¼‰åŒæ—¶è¿›è¡Œï¼Œä½†å®ƒä»¬çš„å®Œæˆé¡ºåºå´ä¸å¯é¢„æµ‹çš„æ—¶å€™ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œä½ åœ¨æ“åœºä¸Šè·‘æ­¥ï¼Œæ—è¾¹è¿˜æœ‰å‡ ä¸ªäººï¼Œå¤§å®¶åŒæ—¶èµ·è·‘ï¼Œä½†è°å…ˆåˆ°ç»ˆç‚¹å®Œå…¨çœ‹è¿æ°”â€”â€”ç½‘ç»œè¯·æ±‚ä¹Ÿæ˜¯è¿™æ ·ï¼Œå°¤å…¶åœ¨åˆ†é¡µåœºæ™¯ä¸‹ï¼Œç”¨æˆ·å¿«é€Ÿåˆ‡æ¢é¡µé¢ï¼Œè¯·æ±‚å°±åƒè„±ç¼°çš„é‡é©¬ï¼Œè°å…ˆå›æ¥è¿˜çœŸä¸å¥½è¯´ã€‚

åœ¨åˆ†é¡µåˆ—è¡¨ä¸­ï¼Œå‡è®¾ä½ ç‚¹äº†â€œç¬¬2é¡µâ€ï¼Œç„¶åç«‹åˆ»åˆç‚¹äº†â€œç¬¬3é¡µâ€ã€‚å¦‚æœâ€œç¬¬2é¡µâ€çš„è¯·æ±‚å»¶è¿Ÿè¾ƒé«˜ï¼Œè€Œâ€œç¬¬3é¡µâ€çš„è¯·æ±‚ç§’å›ï¼Œç»“æœé¡µé¢å¯èƒ½å…ˆæ˜¾ç¤ºç¬¬3é¡µçš„æ•°æ®ï¼Œç„¶ååˆè¢«ç¬¬2é¡µçš„æ•°æ®è¦†ç›–ã€‚ç”¨æˆ·ä¸€è„¸æ‡µï¼šæˆ‘ä¸æ˜¯è¦çœ‹ç¬¬3é¡µå—ï¼Ÿè¿™ç§â€œæ—¶é—´é”™ä¹±â€çš„ä½“éªŒï¼Œç®€ç›´æ˜¯å‰ç«¯çš„å™©æ¢¦ã€‚ğŸ˜±

### ä¸€ä¸ªç›´è§‚çš„ä¾‹å­

æ¥çœ‹æ®µä¼ªä»£ç ï¼Œæ„Ÿå—ä¸€ä¸‹é—®é¢˜æ‰€åœ¨ï¼š

```javascript
function fetchPage(page) {
  fetch(`/api/list?page=${page}`).then((res) =>
    res.json().then((data) => {
      renderList(data);
    })
  );
}

button.onclick = () => {
  currentPage++;
  fetchPage(currentPage);
};
```

ç”¨æˆ·ç‚¹å‡»â€œä¸‹ä¸€é¡µâ€æŒ‰é’®ï¼Œ`currentPage` ä» 1 å˜æˆ 2ï¼Œå‘èµ·è¯·æ±‚ï¼›æ²¡ç­‰è¿”å›ï¼Œåˆç‚¹äº†ä¸€ä¸‹ï¼Œå˜æˆ 3ï¼Œåˆä¸€ä¸ªè¯·æ±‚ã€‚å¦‚æœç½‘ç»œçŠ¶å†µéšæœºï¼Œç¬¬2é¡µè¯·æ±‚å¯èƒ½åœ¨ç¬¬3é¡µä¹‹åè¿”å›ï¼Œæœ€ç»ˆ `renderList` ç”¨ç¬¬2é¡µçš„æ•°æ®è¦†ç›–äº†ç¬¬3é¡µã€‚ç¾éš¾ç°åœºå°±è¿™ä¹ˆè¯ç”Ÿäº†ã€‚

## ä¸ºä»€ä¹ˆç«æ€é—®é¢˜åœ¨åˆ†é¡µä¸­è¿™ä¹ˆå¸¸è§ï¼Ÿ

åˆ†é¡µåœºæ™¯å¤©ç”Ÿå°±å®¹æ˜“è¸©å‘ï¼Œä¸»è¦æœ‰è¿™å‡ ä¸ªâ€œç½ªé­ç¥¸é¦–â€ï¼š

1. **å¼‚æ­¥è¯·æ±‚çš„ä¸å¯æ§æ€§**  
   HTTP è¯·æ±‚å—ç½‘ç»œå»¶è¿Ÿã€æœåŠ¡å™¨å“åº”é€Ÿåº¦å½±å“ï¼Œè¿”å›é¡ºåºå®Œå…¨ä¸å¯é¢„æµ‹ã€‚å°±åƒä½ ç‚¹äº†ä¸¤ä»½å¤–å–ï¼Œä¸€ä»½è¿‘ä¸€å®¶è¿œï¼Œè¿œçš„åè€Œå…ˆé€åˆ°ã€‚

2. **ç”¨æˆ·æ“ä½œçš„é«˜é¢‘æ€§**  
   æœ‰äº›ç”¨æˆ·ç¿»é¡µè·Ÿç©èŠ‚å¥å¤§å¸ˆä¼¼çš„ï¼Œç‚¹å¾—é£å¿«ï¼Œå‰ç«¯æ ¹æœ¬æ¥ä¸åŠååº”ã€‚

3. **çŠ¶æ€ç®¡ç†çš„ç¼ºå¤±**  
   å¦‚æœä½ æ²¡å¥½å¥½ç®¡ä½åˆ†é¡µçŠ¶æ€ï¼ˆæ¯”å¦‚å½“å‰é¡µç å’Œè¯·æ±‚çš„å¯¹åº”å…³ç³»ï¼‰ï¼Œé‚£é¡µé¢å°±æ˜¯åœ¨â€œè£¸å¥”â€ã€‚

4. **UIæ›´æ–°é€»è¾‘çš„ç®€å•ç²—æš´**  
   å¾ˆå¤šå®ç°é‡Œï¼Œä¸ç®¡è¯·æ±‚æ˜¯å“ªä¸€é¡µçš„ï¼Œè¿”å›å°±ç›´æ¥æ¸²æŸ“ï¼Œå®Œå…¨ä¸è€ƒè™‘é¡ºåºé—®é¢˜ã€‚

æ˜ç™½äº†è¿™äº›ï¼Œå’±ä»¬å°±å¯ä»¥å¯¹ç—‡ä¸‹è¯äº†ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä¼šå¸¦ä½ ä»åŸç†åˆ°å®è·µï¼Œä¸€æ­¥æ­¥è§£å†³é—®é¢˜ï¼Œé¡ºä¾¿æŠ›å‡ºå‡ ä¸ªâ€œæ•‘å‘½é”¦å›Šâ€ã€‚ğŸ¯

## è§£å†³æ–¹æ¡ˆå¤§æ­ç§˜

ç«æ€é—®é¢˜è™½ç„¶çƒ¦äººï¼Œä½†ä¹Ÿä¸æ˜¯æ— è§£ã€‚ä»¥ä¸‹æ˜¯å‡ ç§å¸¸è§çš„è§£å†³æ€è·¯ï¼Œé™„å¸¦ä»£ç å’Œæœ€ä½³å®è·µï¼Œä¿ä½ æ‹¿èµ°å°±èƒ½ç”¨ï¼

### 1. ç”¨è¯·æ±‚æ ‡è¯†ï¼ˆRequest IDï¼‰åšæ ¡éªŒ

æœ€ç›´ç™½çš„æ–¹å¼ï¼šç»™æ¯ä¸ªè¯·æ±‚åŠ ä¸ªâ€œèº«ä»½è¯â€ï¼Œå›æ¥æ—¶æ£€æŸ¥ä¸€ä¸‹æ˜¯ä¸æ˜¯å½“å‰é¡µçš„åˆæ³•æ•°æ®ã€‚

#### å®ç°æ€è·¯
- æ¯æ¬¡å‘èµ·è¯·æ±‚æ—¶ï¼Œè®°å½•å½“å‰é¡µç ã€‚
- è¯·æ±‚è¿”å›æ—¶ï¼Œæ ¡éªŒé¡µç æ˜¯å¦åŒ¹é…ï¼Œä¸åŒ¹é…å°±ä¸¢å¼ƒã€‚

#### ä»£ç ç¤ºä¾‹ï¼ˆReactç‰ˆï¼‰

```javascript
function PaginatedList() {
  const [list, setList] = React.useState([]);
  const [currentPage, setCurrentPage] = React.useState(1);
  let latestPage = React.useRef(currentPage); // ç”¨ ref è¿½è¸ªæœ€æ–°é¡µç 

  const fetchPage = async (page) => {
    latestPage.current = page; // æ›´æ–°æœ€æ–°é¡µç 
    const res = await fetch(`/api/list?page=${page}`);
    const data = await res.json();
    if (latestPage.current === page) {
      // åªæœ‰åŒ¹é…å½“å‰é¡µçš„è¯·æ±‚æ‰æ›´æ–° UI
      setList(data);
    } else {
      console.log(`ä¸¢å¼ƒè¿‡æ—¶è¯·æ±‚: page ${page}`);
    }
  };

  return (
    <div>
      <button onClick={() => setCurrentPage((p) => p + 1)}>ä¸‹ä¸€é¡µ</button>
      <List data={list} />
    </div>
  );
}
```

#### å°Tips
- **ç”¨ `useRef` è€Œä¸æ˜¯çŠ¶æ€**ï¼š`currentPage` ä½œä¸ºçŠ¶æ€ä¼šå¯¼è‡´ç»„ä»¶é‡æ¸²æŸ“ï¼Œè€Œ `useRef` æ›´è½»é‡ï¼Œé€‚åˆè¿½è¸ªç¬æ—¶å€¼ã€‚
- **æ—¥å¿—è®°å½•**ï¼šä¸¢å¼ƒè¯·æ±‚æ—¶æ‰“ä¸ª logï¼Œä¾¿äºè°ƒè¯•æ—¶ç¡®è®¤é€»è¾‘æ˜¯å¦æ­£ç¡®ã€‚

#### ä¸ºä»€ä¹ˆç®¡ç”¨ï¼Ÿ
è¿™ç§æ–¹æ³•å°±åƒç»™æ¯ä¸ªè¯·æ±‚è´´äº†ä¸ªæ ‡ç­¾ï¼Œå›æ¥æ—¶â€œéªŒæ˜æ­£èº«â€ï¼Œç¡®ä¿åªæœ‰â€œæ­£ç‰Œâ€æ•°æ®èƒ½ä¸Šæ¡Œã€‚ç®€å•ç²—æš´ï¼Œä½†æ•ˆæœæ æ çš„ã€‚

---

### 2. AbortControllerï¼šä¼˜é›…å–æ¶ˆè¿‡æ—¶è¯·æ±‚

ä¸å…¶è®©è¿‡æ—¶çš„è¯·æ±‚å›æ¥æ£ä¹±ï¼Œä¸å¦‚ç›´æ¥åœ¨åŠè·¯ä¸Šâ€œå¹²æ‰â€å®ƒä»¬ã€‚`AbortController` å°±æ˜¯è¿™ä¸ªâ€œæ€æ‰‹â€ã€‚

#### å®ç°æ€è·¯
- æ¯æ¬¡å‘èµ·æ–°è¯·æ±‚å‰ï¼Œå–æ¶ˆä¸Šä¸€ä¸ªæœªå®Œæˆçš„è¯·æ±‚ã€‚
- ç”¨ `AbortController` çš„ `abort()` æ–¹æ³•ä¸­æ–­ç½‘ç»œè¯·æ±‚ã€‚

#### ä»£ç ç¤ºä¾‹

```javascript
function PaginatedList() {
  const [list, setList] = React.useState([]);
  const [currentPage, setCurrentPage] = React.useState(1);
  const controllerRef = React.useRef(null);

  const fetchPage = async (page) => {
    if (controllerRef.current) {
      controllerRef.current.abort(); // å–æ¶ˆä¸Šä¸€ä¸ªè¯·æ±‚
    }
    controllerRef.current = new AbortController();
    try {
      const res = await fetch(`/api/list?page=${page}`, {
        signal: controllerRef.current.signal,
      });
      const data = await res.json();
      setList(data);
    } catch (e) {
      if (e.name === "AbortError") {
        console.log("è¯·æ±‚è¢«å–æ¶ˆå•¦ï¼Œåˆ«æ…Œï¼");
      }
    }
  };

  React.useEffect(() => {
    fetchPage(currentPage);
  }, [currentPage]);

  return (
    <div>
      <button onClick={() => setCurrentPage((p) => p + 1)}>ä¸‹ä¸€é¡µ</button>
      <List data={list} />
    </div>
  );
}
```

#### å°Tips
- **æ¸…ç†å‰¯ä½œç”¨**ï¼šç»„ä»¶å¸è½½æ—¶è®°å¾—è°ƒç”¨ `abort()`ï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚
- **å…¼å®¹æ€§æ£€æŸ¥**ï¼š`AbortController` æ˜¯ç°ä»£æµè§ˆå™¨æ ‡é…ï¼Œä½†è€é¡¹ç›®è®°å¾—æŸ¥ä¸€ä¸‹ polyfillã€‚
- **ç”¨æˆ·ä½“éªŒ**ï¼šå¯ä»¥åŠ ä¸ª loading çŠ¶æ€ï¼Œé¿å…å–æ¶ˆè¯·æ±‚æ—¶ UI æŠ–åŠ¨ã€‚

#### ä¸ºä»€ä¹ˆä¼˜é›…ï¼Ÿ
è¿™æ‹›ç›´æ¥ä»æºå¤´è§£å†³é—®é¢˜ï¼Œè¿‡æ—¶çš„è¯·æ±‚è¿å›æ¥çš„æœºä¼šéƒ½æ²¡æœ‰ï¼Œé¡µé¢ç¨³å¦‚è€ç‹—ã€‚ğŸ¶

---

### 3. é˜²æŠ–ï¼ˆDebounceï¼‰ï¼šè®©ç”¨æˆ·å†·é™ä¸€ä¸‹

å¦‚æœç”¨æˆ·ç‚¹å¾—å¤ªå¿«ï¼Œé‚£å°±å¼ºåˆ¶è®©ä»–ä»¬â€œæ­‡ä¼šå„¿â€ã€‚é˜²æŠ–æ˜¯ä¸ªå¥½åŠæ³•ï¼ŒçŸ­æ—¶é—´å†…åªå¤„ç†æœ€åä¸€æ¬¡æ“ä½œã€‚

#### å®ç°æ€è·¯
- ç”¨ `debounce` å‡½æ•°åŒ…è£…åˆ†é¡µè¯·æ±‚ï¼Œè®¾å®šä¸€ä¸ªå»¶è¿Ÿï¼ˆæ¯”å¦‚ 300msï¼‰ã€‚
- ç”¨æˆ·å¿«é€Ÿç‚¹å‡»æ—¶ï¼Œåªæœ‰æœ€åä¸€æ¬¡ç‚¹å‡»ä¼šè§¦å‘è¯·æ±‚ã€‚

#### ä»£ç ç¤ºä¾‹ï¼ˆå¸¦ lodashï¼‰

```javascript
import { debounce } from "lodash";

function PaginatedList() {
  const [list, setList] = React.useState([]);
  const [currentPage, setCurrentPage] = React.useState(1);

  const fetchPage = debounce(async (page) => {
    const res = await fetch(`/api/list?page=${page}`);
    const data = await res.json();
    setList(data);
  }, 300);

  const handleNext = () => {
    setCurrentPage((p) => {
      fetchPage(p + 1);
      return p + 1;
    });
  };

  return (
    <div>
      <button onClick={handleNext}>ä¸‹ä¸€é¡µ</button>
      <List data={list} />
    </div>
  );
}
```

#### å°Tips
- **å»¶è¿Ÿæ—¶é—´è¦åˆç†**ï¼š300ms æ˜¯ä¸ªç»éªŒå€¼ï¼Œå¤ªçŸ­æ²¡æ•ˆæœï¼Œå¤ªé•¿ç”¨æˆ·ç­‰å¾—çƒ¦ã€‚
- **åˆ«å¿˜äº†å–æ¶ˆ**ï¼šç»„ä»¶å¸è½½æ—¶ç”¨ `fetchPage.cancel()` æ¸…ç†é˜²æŠ–å‡½æ•°ï¼ˆå¦‚æœç”¨ lodash è‡ªå¸¦æ”¯æŒï¼‰ã€‚
- **æç¤ºç”¨æˆ·**ï¼šå¯ä»¥ç”¨ä¸ªå°çš„ loading åŠ¨ç”»ï¼Œè®©ç”¨æˆ·çŸ¥é“â€œåˆ«æ€¥ï¼Œé©¬ä¸Šæ¥â€ã€‚

#### å¹½é»˜å°å½©è›‹
é˜²æŠ–å°±åƒåœ¨å’–å•¡åº—ç‚¹å•ï¼Œé¡¾å®¢å–Šï¼šâ€œæˆ‘è¦ latteï¼ä¸ï¼Œ cappuccinoï¼ä¸ï¼Œ mochaï¼â€ æœåŠ¡å‘˜æ·¡å®šåœ°è¯´ï¼šâ€œä½ å…ˆæƒ³å¥½ï¼Œæˆ‘åªè®°æœ€åä¸€ä¸ªã€‚â€ ğŸ˜‚

---

### 4. Promise.race + æ—¶é—´æˆ³ï¼šæ›´ç¡¬æ ¸çš„æ§åˆ¶

å¦‚æœä¸Šé¢è¿˜ä¸å¤Ÿâ€œç‹ â€ï¼Œå’±ä»¬å¯ä»¥ç”¨ `Promise.race` å’Œæ—¶é—´æˆ³ç»„åˆæ‹³ï¼Œç¡®ä¿æœ€æ–°è¯·æ±‚æ°¸è¿œèƒœå‡ºã€‚

#### å®ç°æ€è·¯
- ç»™æ¯ä¸ªè¯·æ±‚åŠ ä¸ªæ—¶é—´æˆ³ã€‚
- ç”¨ `Promise.race` æ¯”è¾ƒå¤šä¸ªè¯·æ±‚ï¼Œè°æœ€æ–°è°ä¸Šã€‚

#### ä»£ç ç¤ºä¾‹

```javascript
function PaginatedList() {
  const [list, setList] = React.useState([]);
  const [currentPage, setCurrentPage] = React.useState(1);
  const requestMap = React.useRef(new Map());

  const fetchPage = async (page) => {
    const timestamp = Date.now();
    requestMap.current.set(page, timestamp);
    const res = await fetch(`/api/list?page=${page}`);
    const data = await res.json();
    const latestTimestamp = requestMap.current.get(page);
    if (timestamp === latestTimestamp) {
      setList(data);
    } else {
      console.log(`è¯·æ±‚ ${page} è¢«æ›´æ–°çš„è¯·æ±‚è¦†ç›–`);
    }
  };

  return (
    <div>
      <button onClick={() => setCurrentPage((p) => p + 1)}>ä¸‹ä¸€é¡µ</button>
      <List data={list} />
    </div>
  );
}
```

#### å°Tips
- **Map æ¸…ç†**ï¼šè¯·æ±‚å®Œæˆååˆ é™¤å¯¹åº”çš„ keyï¼Œé¿å…å†…å­˜å ç”¨ã€‚
- **æ€§èƒ½ä¼˜åŒ–**ï¼šå¯ä»¥ç”¨ WeakMap æ›¿ä»£ Mapï¼Œè¿›ä¸€æ­¥å‡å°‘å†…å­˜å‹åŠ›ã€‚

#### ä¸ºä»€ä¹ˆç¡¬æ ¸ï¼Ÿ
è¿™æ‹›å°±åƒåœ¨èµ›è½¦åœºä¸ŠåŠ äº†ä¸ªè£åˆ¤ï¼Œä¸¥æ ¼æŒ‰â€œæœ€æ–°ä¼˜å…ˆâ€è§„åˆ™åˆ¤èƒœè´Ÿï¼Œç»ä¸å«ç³Šã€‚

---

## æœ€ä½³å®è·µé”¦å›Š

æå®šäº†åŸç†å’Œä»£ç ï¼Œå’±ä»¬å†æ¥ç‚¹â€œé”¦ä¸Šæ·»èŠ±â€çš„å®ç”¨å»ºè®®ï¼Œä¿è¯ä½ çš„åˆ†é¡µé€»è¾‘æ— æ‡ˆå¯å‡»ï¼š

1. **åŠ ä¸ª Loading çŠ¶æ€**  
   ç”¨æˆ·å¿«é€Ÿç¿»é¡µæ—¶ï¼Œæ˜¾ç¤ºä¸ªåŠ è½½åŠ¨ç”»ï¼Œæ—¢èƒ½é¿å…é¡µé¢é—ªçƒï¼Œä¹Ÿèƒ½æå‡ä½“éªŒã€‚  
   *Tips*: ç”¨ CSS åŠ¨ç”»æ¯”ç›´æ¥åˆ‡ DOM æ›´ä¸æ»‘ã€‚

2. **é™åˆ¶ç¿»é¡µé¢‘ç‡**  
   åœ¨ UI å±‚åŠ ä¸ªâ€œå†·å´æ—¶é—´â€ï¼Œæ¯”å¦‚æŒ‰é’®ç‚¹å‡»å 500ms å†…ç¦ç”¨ã€‚  
   *Tips*: ç”¨ `setTimeout` é…åˆ `disabled` å±æ€§ï¼Œç®€å•åˆæœ‰æ•ˆã€‚

3. **æœåŠ¡ç«¯é…åˆ**  
   å¦‚æœåç«¯èƒ½è¿”å›è¯·æ±‚çš„é¡µç æ ‡è¯†ï¼Œå‰ç«¯æ ¡éªŒä¼šæ›´çœå¿ƒã€‚  
   *Tips*: å’Œåç«¯çº¦å®šä¸ªå­—æ®µï¼Œæ¯”å¦‚ `response.meta.page`ã€‚

4. **é”™è¯¯å¤„ç†ä¸èƒ½å°‘**  
   ç½‘ç»œå‡ºé”™æ—¶ï¼Œåˆ«è®©ç”¨æˆ·é¢å¯¹ç©ºç™½é¡µï¼ŒåŠ ä¸ªé‡è¯•æŒ‰é’®ã€‚  
   *Tips*: ç”¨ `try-catch` åŒ…ä½ fetchï¼Œä¼˜é›…å¤„ç†å¼‚å¸¸ã€‚

5. **æµ‹è¯•ç”¨ä¾‹è¦åˆ°ä½**  
   å†™å•å…ƒæµ‹è¯•æ¨¡æ‹Ÿå¿«é€Ÿç¿»é¡µï¼ŒéªŒè¯é€»è¾‘æ˜¯å¦å¥å£®ã€‚  
   *Tips*: Jest + Mock Service Worker æ˜¯ç»é…ã€‚

---

## æ€»ç»“ï¼šç¿»é¡µæ— å¿§ï¼Œä»ä»Šå¤©å¼€å§‹

ç«æ€é—®é¢˜è™½ç„¶è®©äººæŠ“ç‹‚ï¼Œä½†åªè¦æŒæ¡äº†è¿™äº›æ‹›æ•°ï¼Œåˆ†é¡µåˆ—è¡¨ä¹Ÿèƒ½ç¨³å¦‚æ³°å±±ã€‚æ— è®ºæ˜¯ç®€å•çš„è¯·æ±‚æ ¡éªŒï¼Œè¿˜æ˜¯ä¼˜é›…çš„ `AbortController`ï¼ŒæŠ‘æˆ–æ˜¯ç¡¬æ ¸çš„æ—¶é—´æˆ³æ–¹æ¡ˆï¼Œæ€»æœ‰ä¸€æ¬¾é€‚åˆä½ çš„é¡¹ç›®ã€‚è®°ä½ï¼ŒæŠ€æœ¯æ²¡æœ‰é“¶å¼¹ï¼Œå…³é”®æ˜¯ç†è§£é—®é¢˜æœ¬è´¨ï¼Œçµæ´»åº”å¯¹åœºæ™¯éœ€æ±‚ã€‚

ä¸‹æ¬¡ç”¨æˆ·å†åŒ–èº«â€œç¿»é¡µç‹‚é­”â€ï¼Œä½ å¤§å¯æ·¡å®šåœ°å–å£å’–å•¡ï¼Œå› ä¸ºä½ å·²ç»èƒ¸æœ‰æˆç«¹ã€‚æœ‰ä»€ä¹ˆåˆ†é¡µç›¸å…³çš„â€œè¡€æ³ªå²â€æˆ–è€…éªšæ“ä½œï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ï¼Œå’±ä»¬ä¸€èµ·è¿›æ­¥ï¼ğŸš€

---