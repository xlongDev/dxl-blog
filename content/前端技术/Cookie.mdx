---
title: "å‰ç«¯ Cookie å…¨é¢è§£æï¼šä»å…¥é—¨åˆ°ç²¾é€š ğŸª"
date: "2022-09-02"
description: "æ·±å…¥æ¢è®¨å‰ç«¯ Cookie çš„å·¥ä½œåŸç†ã€ä½¿ç”¨åœºæ™¯ã€æ“ä½œæ–¹æ³•ã€å®‰å…¨æ€§é—®é¢˜åŠæœ€ä½³å®è·µï¼Œè®©ä½ å…¨é¢æŒæ¡ Cookie åœ¨ Web å¼€å‘ä¸­çš„åº”ç”¨ã€‚é™„å¸¦ä¸°å¯Œçš„å®æˆ˜æ¡ˆä¾‹å’Œä»£ç ç¤ºä¾‹ï¼"
keywords: "å‰ç«¯, Cookie, HTTP, æµè§ˆå™¨å­˜å‚¨, å®‰å…¨, Webå¼€å‘, èº«ä»½è®¤è¯, ä¼šè¯ç®¡ç†"
author: "æ™“é¾™"
image: "/images/hero/cookie.jpg"
tags: ["å‰ç«¯", "Cookie", "Webå¼€å‘", "æµè§ˆå™¨"]
category: "å‰ç«¯æŠ€æœ¯"
---

æƒ³è±¡ä¸€ä¸‹ï¼Œå½“ä½ èµ°è¿›ä¸€å®¶ç†Ÿæ‚‰çš„å’–å•¡åº— â˜•ï¸ï¼ŒæœåŠ¡å‘˜ä¼šè®°ä½ä½ çš„å£å‘³åå¥½ï¼Œç”šè‡³ç›´æ¥å‡†å¤‡ä½ æœ€çˆ±çš„é‚£æ¯æ‹¿é“ - è¿™å°±åƒç½‘ç«™ä¸­çš„ Cookie æœºåˆ¶ï¼Cookie å°±åƒæ˜¯ç½‘ç«™ç»™ä½ çš„ä¸€å¼ å°å°çš„ä¼šå‘˜å¡ ğŸ’³ï¼Œè®°å½•ç€ä½ çš„èº«ä»½ä¿¡æ¯å’Œä¸ªæ€§åŒ–è®¾ç½®ï¼Œè®©ä½ æ¯æ¬¡è®¿é—®éƒ½å€æ„Ÿäº²åˆ‡ã€‚

åœ¨ç°ä»£ Web å¼€å‘ä¸­ï¼ŒCookie ä½œä¸ºä¸€ç§è½»é‡çº§çš„æµè§ˆå™¨å­˜å‚¨æœºåˆ¶ï¼Œæ‰®æ¼”ç€ã€Œæ•°å­—è®°å¿†è€…ã€çš„è§’è‰²ã€‚æ— è®ºæ˜¯è®°ä½ä½ çš„ç™»å½•çŠ¶æ€ã€ç½‘ç«™ä¸»é¢˜åå¥½ï¼Œè¿˜æ˜¯è´­ç‰©è½¦ä¿¡æ¯ï¼ŒCookie éƒ½åœ¨é»˜é»˜å·¥ä½œã€‚æœ¬æ–‡å°†å¸¦ä½ æ·±å…¥äº†è§£ Cookie çš„æ–¹æ–¹é¢é¢ï¼Œä»åŸºç¡€æ¦‚å¿µåˆ°é«˜çº§åº”ç”¨ï¼Œå†åˆ°å®‰å…¨é˜²æŠ¤ï¼ŒåŠ©ä½ æˆä¸º Cookie è¿ç”¨çš„é«˜æ‰‹ï¼ ğŸš€

## ç›®å½•

1. [Cookie æ¦‚è¿°](#cookie-æ¦‚è¿°)
2. [Cookie çš„ç»„æˆå’Œå±æ€§](#cookie-çš„ç»„æˆå’Œå±æ€§)
3. [å¦‚ä½•åœ¨å‰ç«¯è®¾ç½®å’Œè¯»å– Cookie](#å¦‚ä½•åœ¨å‰ç«¯è®¾ç½®å’Œè¯»å–-cookie)
4. [é€šè¿‡ HTTP å¤´éƒ¨è®¾ç½® Cookie](#é€šè¿‡-http-å¤´éƒ¨è®¾ç½®-cookie)
5. [Cookie çš„ä½¿ç”¨åœºæ™¯](#cookie-çš„ä½¿ç”¨åœºæ™¯)
6. [å®‰å…¨æ€§é—®é¢˜åŠé˜²æŠ¤æªæ–½](#å®‰å…¨æ€§é—®é¢˜åŠé˜²æŠ¤æªæ–½)
7. [å¸¸è§é—®é¢˜åŠæœ€ä½³å®è·µ](#å¸¸è§é—®é¢˜åŠæœ€ä½³å®è·µ)
8. [æ€»ç»“](#æ€»ç»“)

---

## Cookie æ¦‚è¿°

Cookie æœ€æ—©ç”± [Lou Montulli](https://en.wikipedia.org/wiki/Lou_Montulli) åœ¨ 1994 å¹´æå‡ºï¼Œä¸»è¦ç”¨äºè§£å†³æ— çŠ¶æ€çš„ HTTP åè®®åœ¨çŠ¶æ€ä¿æŒæ–¹é¢çš„ä¸è¶³ã€‚å®ƒå…è®¸æœåŠ¡å™¨åœ¨ç”¨æˆ·çš„æµè§ˆå™¨ä¸Šå­˜å‚¨å°å—æ•°æ®ï¼Œä»è€Œå®ç°ä¼šè¯ç®¡ç†ã€ç”¨æˆ·è®¤è¯ã€ä¸ªæ€§åŒ–è®¾ç½®ç­‰åŠŸèƒ½ã€‚

> **æ³¨æ„ï¼š** Cookie çš„å­˜å‚¨å¤§å°ä¸€èˆ¬åœ¨ 4KB å·¦å³ï¼Œå„æµè§ˆå™¨å’Œä¸åŒåŸŸåçš„ Cookie æ•°é‡ä¸Šé™ä¹Ÿå„ä¸ç›¸åŒã€‚

---

## Cookie çš„ç»„æˆå’Œå±æ€§

ä¸€ä¸ª Cookie é€šå¸¸ç”±ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ç»„æˆï¼š

- **Name (åç§°)ï¼š** å”¯ä¸€æ ‡è¯† Cookie çš„é”®ã€‚
- **Value (å€¼)ï¼š** å­˜å‚¨çš„æ•°æ®ï¼Œå¯ä»¥æ˜¯ç®€å•çš„å­—ç¬¦ä¸²æˆ–ç»è¿‡ç¼–ç çš„æ•°æ®ã€‚
- **Domain (åŸŸ)ï¼š** æŒ‡å®š Cookie å¯ç”¨çš„åŸŸåï¼Œå†³å®šäº†å“ªäº›æœåŠ¡å™¨å¯ä»¥è®¿é—®è¯¥ Cookieã€‚
- **Path (è·¯å¾„)ï¼š** æŒ‡å®š Cookie åœ¨å½“å‰åŸŸä¸‹çš„æœ‰æ•ˆè·¯å¾„ã€‚
- **Expires/Max-Age (è¿‡æœŸæ—¶é—´)ï¼š** å®šä¹‰ Cookie çš„æœ‰æ•ˆæœŸã€‚`Expires` æ˜¯å…·ä½“æ—¥æœŸï¼Œè€Œ `Max-Age` æ˜¯ç§’æ•°ã€‚
- **Secure (å®‰å…¨æ ‡è®°)ï¼š** ä»…åœ¨ HTTPS è¿æ¥æ—¶å‘é€ Cookieã€‚
- **HttpOnly (ä»… HTTP)ï¼š** é˜²æ­¢é€šè¿‡ JavaScript è®¿é—® Cookieï¼Œä»è€Œé™ä½ XSS æ”»å‡»é£é™©ã€‚
- **SameSite (åŒç«™ç‚¹)ï¼š** æ§åˆ¶ Cookie æ˜¯å¦åœ¨è·¨ç«™è¯·æ±‚ä¸­å‘é€ï¼Œå¯è®¾ç½®ä¸º `Strict`ã€`Lax` æˆ– `None`ã€‚

### ç¤ºä¾‹è¯´æ˜

ä¾‹å¦‚ï¼Œä¸€ä¸ª Cookie çš„å­—ç¬¦ä¸²å¯èƒ½å¦‚ä¸‹ï¼š

```
sessionId=abc123; Domain=example.com; Path=/; Expires=Wed, 02 Feb 2025 12:00:00 GMT; Secure; HttpOnly; SameSite=Strict
```

è¿™è¡¨ç¤ºä¸€ä¸ªåä¸º `sessionId` çš„ Cookieï¼Œå€¼ä¸º `abc123`ï¼Œä»…åœ¨ `example.com` åŸŸä¸‹çš„æ‰€æœ‰è·¯å¾„æœ‰æ•ˆï¼Œä¸”åœ¨ 2025 å¹´ 2 æœˆ 2 æ—¥ä¸­åˆ 12 ç‚¹åè¿‡æœŸï¼Œåªèƒ½é€šè¿‡ HTTPS ä¼ è¾“ï¼Œå¹¶ä¸”ç¦æ­¢ JavaScript è®¿é—®ï¼ŒåŒæ—¶ä¸¥æ ¼é™åˆ¶è·¨ç«™è¯·æ±‚å‘é€ã€‚

---

## å¦‚ä½•åœ¨å‰ç«¯è®¾ç½®å’Œè¯»å– Cookie

åœ¨å‰ç«¯ï¼Œæˆ‘ä»¬é€šå¸¸é€šè¿‡ `document.cookie` æ¥æ“ä½œ Cookieã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ`document.cookie` çš„è¯»å†™æ¥å£æ¯”è¾ƒåŸå§‹ï¼Œæ¯æ¬¡æ“ä½œéƒ½æ˜¯åŸºäºå­—ç¬¦ä¸²çš„æ‹¼æ¥æˆ–è§£æã€‚

### è®¾ç½® Cookie

ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„è®¾ç½® Cookie çš„ç¤ºä¾‹ï¼š

```javascript
// è®¾ç½®ä¸€ä¸ªåä¸º username çš„ Cookieï¼Œå€¼ä¸º "xiaolong"ï¼Œ30 å¤©åè¿‡æœŸ
function setCookie(name, value, days) {
  let expires = "";
  if (days) {
    const date = new Date();
    date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);
    expires = "; expires=" + date.toUTCString();
  }
  document.cookie =
    name + "=" + encodeURIComponent(value) + expires + "; path=/";
}

setCookie("username", "xiaolong", 30);
```

### è¯»å– Cookie

è¯»å– Cookie åˆ™éœ€è¦å¯¹ `document.cookie` è¿›è¡Œè§£æï¼š

```javascript
// æ ¹æ®åç§°è·å– Cookie çš„å€¼
function getCookie(name) {
  const nameEQ = name + "=";
  const ca = document.cookie.split(";");
  for (let i = 0; i < ca.length; i++) {
    let c = ca[i].trim();
    if (c.indexOf(nameEQ) === 0) {
      return decodeURIComponent(c.substring(nameEQ.length));
    }
  }
  return null;
}

const username = getCookie("username");
console.log(username); // è¾“å‡ºï¼šxiaolong
```

### åˆ é™¤ Cookie

åˆ é™¤ Cookie å…¶å®å°±æ˜¯å°†è¿‡æœŸæ—¶é—´è®¾ç½®ä¸ºè¿‡å»çš„æ—¶é—´ï¼š

```javascript
// åˆ é™¤æŒ‡å®šåç§°çš„ Cookie
function deleteCookie(name) {
  document.cookie = name + "=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/";
}

deleteCookie("username");
```

---

## é€šè¿‡ HTTP å¤´éƒ¨è®¾ç½® Cookie

é™¤äº†é€šè¿‡ JavaScript æ“ä½œ Cookieï¼ŒæœåŠ¡å™¨ä¹Ÿå¯ä»¥é€šè¿‡ HTTP å“åº”å¤´éƒ¨è®¾ç½® Cookieã€‚å¸¸è§çš„ HTTP å¤´éƒ¨å­—æ®µä¸º `Set-Cookie`ã€‚

### ç¤ºä¾‹

å‡è®¾ä½ æ­£åœ¨ä½¿ç”¨ Node.js çš„ Express æ¡†æ¶ï¼Œè®¾ç½® Cookie çš„ç¤ºä¾‹å¦‚ä¸‹ï¼š

```javascript
const express = require("express");
const app = express();

app.get("/set-cookie", (req, res) => {
  // è®¾ç½® Cookie: name=user, å€¼ä¸º 'xiaolong'
  res.cookie("user", "xiaolong", {
    maxAge: 30 * 24 * 60 * 60 * 1000, // 30å¤©æœ‰æ•ˆæœŸ
    httpOnly: true, // ç¦æ­¢ JavaScript è®¿é—®
    secure: true, // ä»…åœ¨ HTTPS ä¸‹ä¼ è¾“
    sameSite: "Strict", // ä¸¥æ ¼åŒç«™ç‚¹ç­–ç•¥
  });
  res.send("Cookie å·²è®¾ç½®");
});

app.listen(3000, () => {
  console.log("æœåŠ¡å™¨åœ¨ç«¯å£ 3000 ä¸Šè¿è¡Œ");
});
```

å½“ç”¨æˆ·è®¿é—® `/set-cookie` è·¯å¾„æ—¶ï¼ŒæœåŠ¡å™¨ä¼šè¿”å›å¸¦æœ‰ `Set-Cookie` å¤´éƒ¨çš„å“åº”ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨ä¿å­˜è¯¥ Cookieã€‚

---

## Cookie çš„ä½¿ç”¨åœºæ™¯

Cookie åœ¨ Web å¼€å‘ä¸­çš„åº”ç”¨ååˆ†å¹¿æ³›ï¼Œå¸¸è§çš„åœºæ™¯åŒ…æ‹¬ï¼š

- **ä¼šè¯ç®¡ç†ï¼š** ä¿å­˜ç”¨æˆ·ç™»å½•çŠ¶æ€ã€èº«ä»½è®¤è¯ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼šsessionIdã€‚
- **ä¸ªæ€§åŒ–è®¾ç½®ï¼š** å­˜å‚¨ç”¨æˆ·åå¥½ã€è¯­è¨€è®¾ç½®ã€ä¸»é¢˜é€‰æ‹©ç­‰ã€‚
- **ç”¨æˆ·è·Ÿè¸ªï¼š** é€šè¿‡ Cookie è®°å½•ç”¨æˆ·è¡Œä¸ºã€ç»Ÿè®¡è®¿é—®é‡å’Œç”¨æˆ·è·¯å¾„ï¼Œç”¨äºåˆ†æå’Œå¹¿å‘Šå®šä½ã€‚
- **è·¨é¡µé¢æ•°æ®ä¼ é€’ï¼š** åœ¨ä¸åŒé¡µé¢é—´ä¼ é€’çŠ¶æ€æˆ–æ•°æ®ï¼Œä½†é€šå¸¸æ•°æ®é‡è¾ƒå°ã€‚

### ç¤ºä¾‹åœºæ™¯

1. **ç”¨æˆ·ç™»å½•çŠ¶æ€ï¼š** å½“ç”¨æˆ·ç™»å½•æ—¶ï¼ŒæœåŠ¡å™¨ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„ `sessionId` å¹¶é€šè¿‡ Cookie è¿”å›ç»™æµè§ˆå™¨ï¼Œåç»­è¯·æ±‚ä¸­æµè§ˆå™¨ä¼šè‡ªåŠ¨å¸¦ä¸Šè¯¥ Cookieï¼ŒæœåŠ¡å™¨æ®æ­¤è¯†åˆ«ç”¨æˆ·èº«ä»½ã€‚

2. **ä¸ªæ€§åŒ–è®¾ç½®ï¼š** ç½‘ç«™å¯ä»¥å°†ç”¨æˆ·çš„è¯­è¨€é€‰æ‹©å­˜å‚¨åœ¨ Cookie ä¸­ï¼Œä¸‹æ¬¡è®¿é—®æ—¶ç›´æ¥è¯»å–è¯¥ Cookieï¼Œä»è€ŒåŠ è½½ç›¸åº”çš„è¯­è¨€ç‰ˆæœ¬é¡µé¢ã€‚

---

## å®‰å…¨æ€§é—®é¢˜åŠé˜²æŠ¤æªæ–½

å°½ç®¡ Cookie éå¸¸å®ç”¨ï¼Œä½†ç”±äºå…¶åœ¨å®¢æˆ·ç«¯å­˜å‚¨æ•°æ®ï¼Œä¹Ÿå¸¦æ¥äº†ä¸€äº›å®‰å…¨éšæ‚£ã€‚ä¸»è¦åŒ…æ‹¬ï¼š

### XSSï¼ˆè·¨ç«™è„šæœ¬æ”»å‡»ï¼‰

æ”»å‡»è€…é€šè¿‡æ³¨å…¥æ¶æ„è„šæœ¬è·å–ç”¨æˆ·çš„ Cookie ä¿¡æ¯ï¼Œä»è€Œç›—å–èº«ä»½ä¿¡æ¯ã€‚**é˜²æŠ¤æªæ–½ï¼š**

- è®¾ç½® `HttpOnly` å±æ€§ï¼Œç¦æ­¢ JavaScript è®¿é—® Cookieã€‚
- å¯¹ç”¨æˆ·è¾“å…¥è¿›è¡Œä¸¥æ ¼çš„è¿‡æ»¤å’Œè½¬ä¹‰ï¼Œé˜²æ­¢æ¶æ„è„šæœ¬æ³¨å…¥ã€‚

### CSRFï¼ˆè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼‰

æ”»å‡»è€…åˆ©ç”¨ç”¨æˆ·çš„ç™»å½•çŠ¶æ€ï¼Œåœ¨ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹å‘æœåŠ¡å™¨å‘é€ä¼ªé€ çš„è¯·æ±‚ã€‚**é˜²æŠ¤æªæ–½ï¼š**

- è®¾ç½® `SameSite` å±æ€§ï¼Œå»ºè®®ä½¿ç”¨ `Strict` æˆ– `Lax` ç­–ç•¥ï¼Œé™åˆ¶è·¨ç«™è¯·æ±‚å¸¦ä¸Š Cookieã€‚
- åœ¨å…³é”®æ“ä½œä¸­ä½¿ç”¨ CSRF Token éªŒè¯è¯·æ±‚åˆæ³•æ€§ã€‚

### Cookie åŠ«æŒ ğŸ•µï¸â€â™‚ï¸

å°±åƒå°å·å¯èƒ½åœ¨é‚®å¯„è¿‡ç¨‹ä¸­çªƒå–åŒ…è£¹ä¸€æ ·ï¼Œæ”»å‡»è€…å¯èƒ½é€šè¿‡çªƒå¬ä¸å®‰å…¨çš„ HTTP è¿æ¥è·å– Cookie ä¿¡æ¯ã€‚**é˜²æŠ¤æªæ–½ï¼š**

- è®¾ç½® `Secure` å±æ€§ï¼Œç¡®ä¿ Cookie åªåœ¨ HTTPS è¿æ¥ä¸­ä¼ è¾“
- å®šæœŸæ›´æ–° Cookie ä¿¡æ¯ï¼Œå‡å°‘é•¿æœŸæœ‰æ•ˆ Cookie è¢«ç›—ç”¨çš„é£é™©
- ä½¿ç”¨åŠ¨æ€ Cookie å€¼ï¼Œå®šæœŸè½®æ¢ä¼šè¯æ ‡è¯†ç¬¦
- å®æ–½ IP ç»‘å®šï¼Œå°† Cookie ä¸ç”¨æˆ·çš„ IP åœ°å€å…³è”

### å®æˆ˜æ¡ˆä¾‹ï¼šå®‰å…¨çš„ Cookie é…ç½® ğŸ›¡ï¸

ä»¥ä¸‹æ˜¯ä¸€ä¸ªåœ¨ Express.js ä¸­é…ç½®å®‰å…¨ Cookie çš„æœ€ä½³å®è·µç¤ºä¾‹ï¼š

```javascript
app.use(
  session({
    name: "sessionId", // é¿å…ä½¿ç”¨é»˜è®¤çš„ connect.sid
    secret: process.env.SESSION_SECRET,
    cookie: {
      httpOnly: true, // é˜²æ­¢ XSS æ”»å‡»
      secure: true, // ä»… HTTPS
      sameSite: "strict", // é˜²æ­¢ CSRF æ”»å‡»
      maxAge: 1000 * 60 * 60, // 1å°æ—¶åè¿‡æœŸ
      path: "/",
      domain: ".example.com", // é™åˆ¶ Cookie ä½œç”¨åŸŸ
    },
    rolling: true, // åœ¨æ¯æ¬¡è¯·æ±‚æ—¶é‡ç½®è¿‡æœŸæ—¶é—´
    resave: false,
    saveUninitialized: false,
  })
);
```

---

## å¸¸è§é—®é¢˜åŠæœ€ä½³å®è·µ ğŸ’¡

### 1. Cookie çš„æ€§èƒ½ä¼˜åŒ– ğŸš€

å°±åƒæ•´ç†ä¼šå‘˜å¡ä¸€æ ·ï¼ŒCookie çš„ç®¡ç†ä¹Ÿéœ€è¦è®²ç©¶æ–¹æ³•ï¼š

- **æ§åˆ¶å¤§å°ï¼š** Cookie ä¼šåœ¨æ¯ä¸ªè¯·æ±‚ä¸­æºå¸¦ï¼Œå› æ­¤åº”å°½é‡ç²¾ç®€å†…å®¹
- **åˆç†è®¾ç½®è¿‡æœŸæ—¶é—´ï¼š** æ ¹æ®ä¸šåŠ¡éœ€æ±‚è®¾ç½®åˆé€‚çš„è¿‡æœŸæ—¶é—´ï¼Œé¿å…æ— é™æœŸå­˜å‚¨
- **ä½¿ç”¨å­åŸŸåéš”ç¦»ï¼š** å°†é™æ€èµ„æºæ”¾åœ¨å•ç‹¬çš„å­åŸŸåä¸‹ï¼Œé¿å… Cookie éšé™æ€èµ„æºè¯·æ±‚å‘é€

### 2. Cookie æ“ä½œæœ€ä½³å®è·µ âœ¨

ä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„ Cookie å·¥å…·ç±»ç¤ºä¾‹ï¼Œé›†æˆäº†å¸¸ç”¨çš„ Cookie æ“ä½œæ–¹æ³•ï¼š

```javascript
class CookieManager {
  // è®¾ç½® Cookie
  static set(name, value, options = {}) {
    const {
      days = 7,
      path = "/",
      domain = window.location.hostname,
      secure = window.location.protocol === "https:",
      sameSite = "Strict",
    } = options;

    const date = new Date();
    date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);

    document.cookie = [
      `${name}=${encodeURIComponent(value)}`,
      `expires=${date.toUTCString()}`,
      `path=${path}`,
      `domain=${domain}`,
      secure ? "secure" : "",
      `sameSite=${sameSite}`,
    ]
      .filter(Boolean)
      .join("; ");
  }

  // è·å– Cookie
  static get(name) {
    const value = document.cookie.match(`(^|;)\\s*${name}\\s*=\\s*([^;]+)`);
    return value ? decodeURIComponent(value.pop()) : null;
  }

  // åˆ é™¤ Cookie
  static delete(name, options = {}) {
    const { path = "/", domain = window.location.hostname } = options;
    this.set(name, "", {
      days: -1,
      path,
      domain,
    });
  }

  // æ£€æŸ¥ Cookie æ˜¯å¦å­˜åœ¨
  static exists(name) {
    return this.get(name) !== null;
  }

  // è·å–æ‰€æœ‰ Cookie
  static getAll() {
    return document.cookie.split("; ").reduce((cookies, cookie) => {
      const [name, value] = cookie.split("=");
      cookies[name] = decodeURIComponent(value);
      return cookies;
    }, {});
  }
}

// ä½¿ç”¨ç¤ºä¾‹
CookieManager.set("theme", "dark", {
  days: 30,
  secure: true,
  sameSite: "Strict",
});

const theme = CookieManager.get("theme");
console.log(theme); // "dark"

CookieManager.delete("theme");
```

### 3. å¸¸è§é—®é¢˜è§£ç­” â“

1. **Cookie vs localStorage**

   - Cookie ä¸»è¦ç”¨äºæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´çš„é€šä¿¡
   - localStorage ä»…ç”¨äºå®¢æˆ·ç«¯å­˜å‚¨ï¼Œå®¹é‡æ›´å¤§ï¼ˆ5MB vs 4KBï¼‰
   - Cookie å¯è®¾ç½® HttpOnly æå‡å®‰å…¨æ€§

2. **Cookie è·¨åŸŸé—®é¢˜**

   - é»˜è®¤æƒ…å†µä¸‹ Cookie ä¸æ”¯æŒè·¨åŸŸ
   - éœ€è¦åŒæ—¶è®¾ç½®å‰åç«¯ï¼š
     - å‰ç«¯ï¼šè®¾ç½® `withCredentials: true`
     - åç«¯ï¼šè®¾ç½® `Access-Control-Allow-Credentials: true`

3. **Cookie åŠ å¯†**
   - æ•æ„Ÿä¿¡æ¯å­˜å‚¨å‰å»ºè®®åŠ å¯†
   - å¯ä½¿ç”¨ Base64 æˆ–å…¶ä»–åŠ å¯†ç®—æ³•
   - æ³¨æ„ä¸è¦å­˜å‚¨è¿‡äºæ•æ„Ÿçš„ä¿¡æ¯

### å¸¸è§é—®é¢˜

1. **Cookie å­˜å‚¨å¤§å°æœ‰é™ï¼Ÿ**

   æ¯ä¸ª Cookie ä¸€èˆ¬æœ€å¤š 4KBï¼Œå„æµè§ˆå™¨å¯¹åŒä¸€åŸŸä¸‹çš„ Cookie æ•°é‡ä¹Ÿæœ‰é™åˆ¶ã€‚å› æ­¤ï¼ŒCookie é€‚åˆå­˜å‚¨å°‘é‡æ•°æ®ï¼Œä¸é€‚åˆå¤§é‡æ•°æ®å­˜å‚¨ã€‚

2. **å¦‚ä½•åŒæ—¶ç®¡ç†å¤šä¸ª Cookieï¼Ÿ**

   ç”±äº `document.cookie` è¿”å›çš„æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¤„ç†å¤šä¸ª Cookie æ—¶éœ€è¦æ‹†åˆ†å’Œè§£æã€‚æ¨èå°è£…æˆå·¥å…·å‡½æ•°ï¼Œæˆ–è€…ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚ js-cookieï¼‰ã€‚

3. **Cookie ä¸ LocalStorage çš„åŒºåˆ«ï¼Ÿ**

   - **Cookieï¼š** æ¯æ¬¡ HTTP è¯·æ±‚éƒ½ä¼šå¸¦ä¸Šï¼Œé€‚ç”¨äºä¼šè¯ç®¡ç†å’ŒæœåŠ¡å™¨ç«¯éªŒè¯ã€‚
   - **LocalStorage/SessionStorageï¼š** åªå­˜åœ¨äºæµè§ˆå™¨ç«¯ï¼Œä¸ä¼šè‡ªåŠ¨éšè¯·æ±‚å‘é€ï¼Œé€‚ç”¨äºå­˜å‚¨å¤§é‡éæ•æ„Ÿæ•°æ®ã€‚

### æœ€ä½³å®è·µ

- **åˆç†è®¾ç½®è¿‡æœŸæ—¶é—´ï¼š** æ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼Œåˆç†è®¾ç½® Cookie çš„è¿‡æœŸæ—¶é—´ï¼Œé¿å…è¿‡æœŸæ•°æ®å¸¦æ¥çš„é£é™©ã€‚
- **ä½¿ç”¨ HttpOnly å’Œ Secure å±æ€§ï¼š** æå‡ Cookie çš„å®‰å…¨æ€§ï¼Œå‡å°‘ XSS å’ŒåŠ«æŒé£é™©ã€‚
- **é™åˆ¶ Cookie çš„ä½œç”¨åŸŸï¼š** é€šè¿‡è®¾ç½® Domain å’Œ Path å±æ€§ï¼Œå°† Cookie çš„ä½¿ç”¨èŒƒå›´é™å®šåœ¨å¿…è¦çš„èŒƒå›´å†…ã€‚
- **æ•æ„Ÿä¿¡æ¯åŠ å¯†ï¼š** å¯¹äºæ•æ„Ÿæ•°æ®ï¼Œå»ºè®®åœ¨å­˜å‚¨å‰è¿›è¡ŒåŠ å¯†ï¼Œé˜²æ­¢æ³„éœ²ã€‚
- **ä½¿ç”¨ç°ä»£å­˜å‚¨æ–¹æ¡ˆï¼š** å¯¹äºå¤§é‡éæ•æ„Ÿæ•°æ®ï¼Œä¼˜å…ˆè€ƒè™‘ä½¿ç”¨ LocalStorage æˆ– IndexedDBã€‚

---

## æ€»ç»“

Cookie ä½œä¸ºä¸€ç§é‡è¦çš„å®¢æˆ·ç«¯å­˜å‚¨æœºåˆ¶ï¼Œåœ¨ä¿æŒä¼šè¯ã€ä¸ªæ€§åŒ–è®¾ç½®ä»¥åŠç”¨æˆ·è·Ÿè¸ªä¸­æ‰®æ¼”ç€è‡³å…³é‡è¦çš„è§’è‰²ã€‚è™½ç„¶å®ƒå­˜åœ¨ä¸€äº›å®‰å…¨éšæ‚£ï¼Œä½†é€šè¿‡åˆç†è®¾ç½®å±æ€§å’Œéµå¾ªæœ€ä½³å®è·µï¼Œå¯ä»¥å¤§å¤§é™ä½é£é™©ã€‚å¸Œæœ›æœ¬æ–‡é€šè¿‡å¯¹ Cookie åŸç†ã€æ“ä½œç¤ºä¾‹åŠå®‰å…¨ç­–ç•¥çš„è¯¦ç»†è§£æï¼Œèƒ½å¤Ÿå¸®åŠ©ä½ åœ¨å®é™…å¼€å‘ä¸­æ›´å¥½åœ°åˆ©ç”¨è¿™ä¸€å·¥å…·ï¼Œæ„å»ºå®‰å…¨é«˜æ•ˆçš„ Web åº”ç”¨ã€‚

> **å»¶ä¼¸é˜…è¯»ï¼š**
>
> - [MDN Web æ–‡æ¡£ï¼šHTTP Cookie](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Cookies)
> - [OWASPï¼šè·¨ç«™è¯·æ±‚ä¼ªé€  (CSRF) æ”»å‡»é˜²æŠ¤](https://owasp.org/www-community/attacks/csrf)

Happy Coding!
