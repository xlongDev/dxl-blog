---
type: "Post"
title: "ä¸€æ–‡æå®šå‰ç«¯è¯·æ±‚å°è£…ï¼šä»åŸç†åˆ°å®è·µçš„ç»ˆææŒ‡å— ğŸš€"
date: "2023-08-16"
description: "ä» HTTP åŸç†åˆ°è¯·æ±‚å°è£…çš„æœ€ä½³å®è·µï¼Œå…¨é¢è§£æå‰ç«¯è¯·æ±‚å°è£…çš„æ–¹æ–¹é¢é¢ï¼ŒåŒ…å«ä»£ç ç¤ºä¾‹ã€å®ç”¨æŠ€å·§å’Œå“²å­¦æ€è€ƒï¼ŒåŠ©ä½ æˆä¸ºè¯·æ±‚å°è£…å¤§å¸ˆï¼"
keywords: "å‰ç«¯è¯·æ±‚å°è£…, HTTP, Axios, Fetch, ç½‘ç»œè¯·æ±‚, RESTful API, é”™è¯¯å¤„ç†, è¯·æ±‚æ‹¦æˆª, TypeScript, å‰ç«¯å¼€å‘"
author: "æ™“é¾™"
image: "/images/hero/request-encapsulation.jpg"
tags: ["å‰ç«¯å¼€å‘", "HTTP", "JavaScript", "TypeScript", "ç½‘ç»œè¯·æ±‚"]
category: "å‰ç«¯æŠ€æœ¯"
---

> â€œå¥½çš„ä»£ç æ˜¯è‡ªè§£é‡Šçš„ï¼Œå¥½çš„è¯·æ±‚å°è£…æ˜¯è‡ªé€‚åº”çš„ã€‚â€ â€”â€” æŸä½ä¸æ„¿é€éœ²å§“åçš„å‰ç«¯å¤§ä½¬

åœ¨å‰ç«¯å¼€å‘çš„æµ©ç€šå®‡å®™ä¸­ï¼Œç½‘ç»œè¯·æ±‚å°±åƒæ˜Ÿé™…é£èˆ¹çš„å¼•æ“ï¼Œæ¨åŠ¨ç€æ•°æ®åœ¨å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ä¹‹é—´ç©¿æ¢­ã€‚æ— è®ºæ˜¯ç®€å•çš„ GET è¯·æ±‚ï¼Œè¿˜æ˜¯å¤æ‚çš„æ–‡ä»¶ä¸Šä¼ ï¼Œè¯·æ±‚å°è£…çš„è´¨é‡ç›´æ¥å†³å®šäº†é¡¹ç›®çš„å¯ç»´æŠ¤æ€§ã€å¯æ‰©å±•æ€§å’Œç”¨æˆ·ä½“éªŒã€‚ç„¶è€Œï¼Œå°è£…è¯·æ±‚ç»ä¸ä»…ä»…æ˜¯å†™ä¸ª `fetch` æˆ– `axios` çš„å·¥å…·å‡½æ•°ï¼Œå®ƒæ˜¯ä¸€é—¨è‰ºæœ¯ï¼Œèåˆäº†æŠ€æœ¯æ·±åº¦ã€è®¾è®¡å“²å­¦å’Œå·¥ç¨‹å®è·µã€‚

è¿™ç¯‡æ–‡ç« å°†å¸¦ä½ ä» HTTP çš„åº•å±‚åŸç†åˆ°è¯·æ±‚å°è£…çš„æè‡´å®è·µï¼Œæ·±å…¥å‰–ææ¯ä¸€ç¯èŠ‚ï¼Œé…ä»¥æ¸…æ™°çš„ä»£ç ç¤ºä¾‹ã€å®ç”¨è¡¨æ ¼å’Œæœ€ä½³å®è·µã€‚æ— è®ºä½ æ˜¯åˆšå…¥è¡Œçš„å°ç™½ï¼Œè¿˜æ˜¯èº«ç»ç™¾æˆ˜çš„è€å…µï¼Œè¿™é‡Œæ€»æœ‰èƒ½è®©ä½ ä¼šå¿ƒä¸€ç¬‘æˆ–æ‹æ¡ˆå«ç»çš„å†…å®¹ã€‚å‡†å¤‡å¥½äº†å—ï¼Ÿè®©æˆ‘ä»¬ä¸€èµ·ç‚¹ç‡ƒå¼•æ“ï¼Œé£å‘è¯·æ±‚å°è£…çš„æ˜Ÿè¾°å¤§æµ·ï¼ğŸŒŒ

## æ€ç»´å¯¼å›¾ï¼šæ–‡ç« ç»“æ„ä¸€è§ˆ

ä¸ºäº†è®©è¿™è¶Ÿæ—…ç¨‹æ¸…æ™°æ˜äº†ï¼Œå…ˆå¥‰ä¸Šä¸€å¼ æ€ç»´å¯¼å›¾ï¼Œæ¢³ç†æ–‡ç« çš„è„‰ç»œï¼š

1. **ä¸ºä»€ä¹ˆéœ€è¦è¯·æ±‚å°è£…ï¼Ÿ**  
   - ç½‘ç»œè¯·æ±‚çš„ç—›ç‚¹  
   - å°è£…çš„æ„ä¹‰ä¸ä»·å€¼  
2. **HTTP åŸç†ï¼šè¯·æ±‚å°è£…çš„åŸºçŸ³**  
   - HTTP åè®®åŸºç¡€  
   - RESTful API ä¸è®¾è®¡åŸåˆ™  
   - å¸¸è§çŠ¶æ€ç ä¸é”™è¯¯å¤„ç†  
3. **è¯·æ±‚å°è£…çš„æ ¸å¿ƒæŠ€æœ¯**  
   - Fetch vs Axiosï¼šæŠ€æœ¯é€‰å‹  
   - æ ¸å¿ƒåŠŸèƒ½ï¼šæ‹¦æˆªå™¨ã€è¶…æ—¶ã€å–æ¶ˆè¯·æ±‚  
   - TypeScript ç±»å‹å®‰å…¨  
4. **è¯·æ±‚å°è£…çš„æœ€ä½³å®è·µ**  
   - æ¨¡å—åŒ–è®¾è®¡  
   - é”™è¯¯å¤„ç†ä¸é‡è¯•æœºåˆ¶  
   - æ—¥å¿—ä¸ç›‘æ§  
5. **é«˜çº§åœºæ™¯ä¸è§£å†³æ–¹æ¡ˆ**  
   - æ–‡ä»¶ä¸Šä¼ ä¸ä¸‹è½½  
   - è¯·æ±‚åˆå¹¶ä¸é˜²æŠ–  
   - è·¨åŸŸä¸ä»£ç†  
6. **ä»ä»£ç åˆ°å“²å­¦ï¼šè¯·æ±‚å°è£…çš„æ›´é«˜å¢ƒç•Œ**  
   - å°è£…çš„è‰ºæœ¯ä¸äººç”Ÿå“²ç†  
   - æœªæ¥è¶‹åŠ¿ï¼šGraphQLã€gRPC ç­‰  
7. **æ€»ç»“ä¸å¯„è¯­**

æ¯ä¸€éƒ¨åˆ†éƒ½å°†ç»“åˆä»£ç ã€è¡¨æ ¼ã€ç±»æ¯”å’Œæœ€ä½³å®è·µï¼ŒåŠ›æ±‚è®©ä½ ä¸ä»…å­¦ä¼šå°è£…è¯·æ±‚ï¼Œè¿˜èƒ½æ„Ÿå—åˆ°ä»£ç èƒŒåçš„ç¾å­¦ä¸æ™ºæ…§ã€‚

---

## 1. ä¸ºä»€ä¹ˆéœ€è¦è¯·æ±‚å°è£…ï¼Ÿ ğŸ¤”

### 1.1 ç½‘ç»œè¯·æ±‚çš„ç—›ç‚¹

æƒ³è±¡ä¸€ä¸‹ï¼Œä½ åœ¨ä¸€ä¸ªå¤§å‹é¡¹ç›®ä¸­ï¼Œå‡ åä¸ªé¡µé¢éœ€è¦è°ƒç”¨åç«¯ APIã€‚å¦‚æœæ¯æ¬¡éƒ½ç›´æ¥å†™ `fetch` æˆ– `axios`ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿä»£ç é‡å¤ã€é…ç½®åˆ†æ•£ã€é”™è¯¯å¤„ç†ä¸ç»Ÿä¸€ã€è°ƒè¯•å™©æ¢¦â€¦â€¦è¿™å°±åƒæ¯æ¬¡åšé¥­éƒ½è¦ä»é›¶å¼€å§‹ç£¨åˆ€ã€æ´—èœã€è°ƒæ–™ï¼Œæ•ˆç‡ä½ä¸‹ä¸”å®¹æ˜“å‡ºé”™ã€‚

ä»¥ä¸‹æ˜¯å‰ç«¯å¼€å‘ä¸­å¸¸è§çš„ç½‘ç»œè¯·æ±‚ç—›ç‚¹ï¼š

| **ç—›ç‚¹**                     | **æè¿°**                                                                 | **åæœ**                           |
|------------------------------|--------------------------------------------------------------------------|------------------------------------|
| ä»£ç é‡å¤                     | æ¯ä¸ªè¯·æ±‚éƒ½é‡å¤å†™ URLã€headersã€é”™è¯¯å¤„ç†é€»è¾‘                               | ç»´æŠ¤æˆæœ¬é«˜ï¼Œä¿®æ”¹ä¸€å¤„éœ€å…¨å±€è°ƒæ•´     |
| é…ç½®åˆ†æ•£                     | baseURLã€è¶…æ—¶æ—¶é—´ç­‰é…ç½®æ•£è½åœ¨å„å¤„                                         | ä¸ä¸€è‡´çš„é…ç½®å¯¼è‡´è¡Œä¸ºä¸å¯é¢„æµ‹       |
| é”™è¯¯å¤„ç†ä¸ç»Ÿä¸€               | ä¸åŒé¡µé¢å¤„ç† 401ã€500 ç­‰çŠ¶æ€ç çš„æ–¹å¼ä¸åŒ                                 | ç”¨æˆ·ä½“éªŒå·®ï¼Œè°ƒè¯•å›°éš¾               |
| è°ƒè¯•å›°éš¾                     | æ²¡æœ‰ç»Ÿä¸€çš„æ—¥å¿—è®°å½•ï¼Œæ’æŸ¥é—®é¢˜æ—¶éœ€è¦é€ä¸ªæ£€æŸ¥                                | å¼€å‘æ•ˆç‡ä½ä¸‹                       |
| ç±»å‹å®‰å…¨ç¼ºå¤±                 | åœ¨ TypeScript é¡¹ç›®ä¸­ï¼Œå“åº”æ•°æ®ç±»å‹æœªå®šä¹‰ï¼Œå®¹æ˜“å¼•å‘è¿è¡Œæ—¶é”™è¯¯             | ä»£ç å¥å£®æ€§å·®                       |

### 1.2 å°è£…çš„æ„ä¹‰ä¸ä»·å€¼

è¯·æ±‚å°è£…å°±åƒç»™ä½ çš„é£èˆ¹è£…ä¸Šè‡ªåŠ¨å¯¼èˆªç³»ç»Ÿã€‚å®ƒä¸ä»…å‡å°‘é‡å¤åŠ³åŠ¨ï¼Œè¿˜èƒ½ï¼š

- **æé«˜ä»£ç å¤ç”¨æ€§**ï¼šä¸€ä¸ªå°è£…å¥½çš„è¯·æ±‚å·¥å…·ï¼Œé€‚ç”¨äºæ‰€æœ‰ API è°ƒç”¨ã€‚
- **ç»Ÿä¸€é…ç½®ç®¡ç†**ï¼šbaseURLã€headersã€è¶…æ—¶ç­‰é…ç½®ä¸€å¤„å®šä¹‰ï¼Œå¤„å¤„ç”Ÿæ•ˆã€‚
- **å¢å¼ºå¯ç»´æŠ¤æ€§**ï¼šä¿®æ”¹é€»è¾‘åªéœ€è°ƒæ•´å°è£…å±‚ï¼Œæ— éœ€æ”¹åŠ¨ä¸šåŠ¡ä»£ç ã€‚
- **æå‡ç”¨æˆ·ä½“éªŒ**ï¼šç»Ÿä¸€çš„é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶ï¼Œè®©ç”¨æˆ·æ„ŸçŸ¥æ›´æµç•…ã€‚
- **æ”¯æŒæ‰©å±•æ€§**ï¼šæ–¹ä¾¿é›†æˆæ‹¦æˆªå™¨ã€æ—¥å¿—ã€ç›‘æ§ç­‰é«˜çº§åŠŸèƒ½ã€‚

ç±»æ¯”ä¸€ä¸‹ï¼Œå¥½çš„è¯·æ±‚å°è£…å°±åƒä¸€ä½è´´å¿ƒçš„ç®¡å®¶ï¼šä½ åªéœ€è¯´â€œå¸®æˆ‘æ‹¿æ¯å’–å•¡â€ï¼Œå®ƒä¼šè‡ªåŠ¨é€‰æ‹©æœ€å¥½çš„å’–å•¡è±†ã€æ§åˆ¶æ°´æ¸©ã€è°ƒæ•´æµ“åº¦ï¼Œç”šè‡³åœ¨å’–å•¡å‡‰äº†æ—¶æé†’ä½ ã€‚è€Œæ²¡æœ‰å°è£…çš„è¯·æ±‚ï¼Œå°±åƒä½ æ¯æ¬¡éƒ½è¦è‡ªå·±è·‘å»å’–å•¡åº—ï¼Œæ’é˜Ÿã€ç‚¹å•ã€ç­‰å¾…ï¼Œæ•ˆç‡ä½ä¸‹ä¸”å®¹æ˜“å‡ºé”™ã€‚

> *Tipsï¼šè¯·æ±‚å°è£…ä¸ä»…æ˜¯æŠ€æœ¯é—®é¢˜ï¼Œæ›´æ˜¯å·¥ç¨‹æ€ç»´çš„ä½“ç°ã€‚å¥½çš„å°è£…èƒ½è®©ä½ çš„ä»£ç åƒè¯—æ­Œä¸€æ ·ä¼˜é›…ï¼Œåƒæœºå™¨ä¸€æ ·é«˜æ•ˆã€‚*

---

## 2. HTTP åŸç†ï¼šè¯·æ±‚å°è£…çš„åŸºçŸ³ ğŸ›ï¸

è¦æ‰“é€ ä¸€è‰˜å¯é çš„é£èˆ¹ï¼Œé¦–å…ˆå¾—äº†è§£å®‡å®™çš„è¿è¡Œè§„åˆ™ã€‚è¯·æ±‚å°è£…çš„åŸºç¡€æ˜¯ HTTP åè®®ï¼Œç†è§£å…¶åŸç†èƒ½å¸®åŠ©æˆ‘ä»¬è®¾è®¡æ›´å¥å£®çš„å°è£…æ–¹æ¡ˆã€‚

### 2.1 HTTP åè®®åŸºç¡€

HTTPï¼ˆHyperText Transfer Protocolï¼‰æ˜¯ Web çš„æ ¸å¿ƒåè®®ï¼ŒåŸºäºè¯·æ±‚-å“åº”æ¨¡å‹ã€‚ä»¥ä¸‹æ˜¯å‡ ä¸ªå…³é”®ç‚¹ï¼š

- **è¯·æ±‚æ–¹æ³•**ï¼šGETã€POSTã€PUTã€DELETEã€PATCH ç­‰ï¼Œæ¯ç§æ–¹æ³•æœ‰ç‰¹å®šè¯­ä¹‰ã€‚
- **è¯·æ±‚å¤´**ï¼šåŒ…å« Content-Typeã€Authorization ç­‰å…ƒä¿¡æ¯ã€‚
- **çŠ¶æ€ç **ï¼š200ï¼ˆæˆåŠŸï¼‰ã€404ï¼ˆæœªæ‰¾åˆ°ï¼‰ã€500ï¼ˆæœåŠ¡å™¨é”™è¯¯ï¼‰ç­‰ã€‚
- **è¯·æ±‚ä½“ä¸å“åº”ä½“**ï¼šé€šå¸¸ä¸º JSONã€FormData æˆ–äºŒè¿›åˆ¶æ•°æ®ã€‚

### 2.2 RESTful API ä¸è®¾è®¡åŸåˆ™

å¤§å¤šæ•°ç°ä»£ API éµå¾ª RESTful é£æ ¼ï¼Œæ ¸å¿ƒåŸåˆ™åŒ…æ‹¬ï¼š

- **èµ„æºå¯¼å‘**ï¼šAPI ä»¥èµ„æºä¸ºä¸­å¿ƒï¼Œä¾‹å¦‚ `/users` è¡¨ç¤ºç”¨æˆ·èµ„æºã€‚
- **æ— çŠ¶æ€**ï¼šæ¯æ¬¡è¯·æ±‚ç‹¬ç«‹ï¼ŒæœåŠ¡å™¨ä¸ä¿å­˜å®¢æˆ·ç«¯çŠ¶æ€ã€‚
- **ç»Ÿä¸€æ¥å£**ï¼šé€šè¿‡æ ‡å‡†æ–¹æ³•ï¼ˆGETã€POST ç­‰ï¼‰æ“ä½œèµ„æºã€‚

ç†è§£ RESTful èƒ½å¸®åŠ©æˆ‘ä»¬è®¾è®¡æ›´è¯­ä¹‰åŒ–çš„è¯·æ±‚å°è£…ã€‚ä¾‹å¦‚ï¼ŒGET è¯·æ±‚é€šå¸¸ä¸åº”æœ‰è¯·æ±‚ä½“ï¼ŒPOST è¯·æ±‚åº”æ˜ç¡® Content-Typeã€‚

### 2.3 å¸¸è§çŠ¶æ€ç ä¸é”™è¯¯å¤„ç†

çŠ¶æ€ç æ˜¯æœåŠ¡å™¨çš„â€œæƒ…ç»ªè¡¨è¾¾â€ï¼Œä»¥ä¸‹æ˜¯å¸¸è§çŠ¶æ€ç åŠå…¶å¤„ç†å»ºè®®ï¼š

| **çŠ¶æ€ç ** | **å«ä¹‰**                     | **å¤„ç†å»ºè®®**                                                                 |
|------------|------------------------------|------------------------------------------------------------------------------|
| 200        | æˆåŠŸ                         | ç›´æ¥è§£æå“åº”æ•°æ®                                                             |
| 400        | å®¢æˆ·ç«¯è¯·æ±‚é”™è¯¯               | æç¤ºç”¨æˆ·æ£€æŸ¥è¾“å…¥                                                             |
| 401        | æœªæˆæƒ                       | è·³è½¬ç™»å½•é¡µæˆ–åˆ·æ–° token                                                       |
| 403        | ç¦æ­¢è®¿é—®                     | æç¤ºç”¨æˆ·æ— æƒé™                                                               |
| 404        | èµ„æºæœªæ‰¾åˆ°                   | æç¤ºç”¨æˆ·èµ„æºä¸å­˜åœ¨                                                           |
| 500        | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯               | è®°å½•æ—¥å¿—ï¼Œæç¤ºç”¨æˆ·ç¨åé‡è¯•                                                   |

> *Tipsï¼šçŠ¶æ€ç ä¸ä»…æ˜¯æŠ€æœ¯åé¦ˆï¼Œä¹Ÿæ˜¯ç”¨æˆ·ä½“éªŒçš„èµ·ç‚¹ã€‚å¥½çš„é”™è¯¯å¤„ç†èƒ½è®©ç”¨æˆ·æ„Ÿåˆ°â€œè¢«å…³æ€€â€ï¼Œè€Œä¸æ˜¯â€œè¢«æŠ›å¼ƒâ€ã€‚*

---

## 3. è¯·æ±‚å°è£…çš„æ ¸å¿ƒæŠ€æœ¯ ğŸ› ï¸

æœ‰äº†ç†è®ºåŸºç¡€ï¼Œæˆ‘ä»¬å¼€å§‹åŠ¨æ‰‹æ‰“é€ é£èˆ¹çš„æ ¸å¿ƒå¼•æ“ã€‚ä»¥ä¸‹æ˜¯è¯·æ±‚å°è£…çš„æ ¸å¿ƒæŠ€æœ¯ç‚¹ï¼Œé…ä»¥ä»£ç ç¤ºä¾‹ã€‚

### 3.1 Fetch vs Axiosï¼šæŠ€æœ¯é€‰å‹

å‰ç«¯è¯·æ±‚ä¸»è¦ä¾èµ– `fetch`ï¼ˆæµè§ˆå™¨åŸç”Ÿï¼‰æˆ– `axios`ï¼ˆç¬¬ä¸‰æ–¹åº“ï¼‰ã€‚ä»¥ä¸‹æ˜¯ä¸¤è€…çš„å¯¹æ¯”ï¼š

| **ç‰¹æ€§**                | **Fetch**                              | **Axios**                              |
|-------------------------|----------------------------------------|----------------------------------------|
| æµè§ˆå™¨æ”¯æŒ              | åŸç”Ÿæ”¯æŒï¼Œæ— éœ€é¢å¤–å¼•å…¥                 | éœ€è¦å¼•å…¥åº“ï¼ˆçº¦ 13KB å‹ç¼©åï¼‰           |
| API è®¾è®¡                | åŸºäº Promiseï¼Œè¾ƒä¸ºç®€æ´                 | æ›´ä¸°å¯Œï¼Œæ˜“äºé…ç½®                       |
| æ‹¦æˆªå™¨                  | æ— å†…ç½®æ”¯æŒï¼Œéœ€æ‰‹åŠ¨å®ç°                 | å†…ç½®æ‹¦æˆªå™¨ï¼Œé€‚åˆå¤æ‚åœºæ™¯               |
| é”™è¯¯å¤„ç†                | é 2xx çŠ¶æ€ä¸æŠ›é”™ï¼Œéœ€æ‰‹åŠ¨æ£€æŸ¥          | è‡ªåŠ¨æŠ›å‡ºé 2xx é”™è¯¯                   |
| å–æ¶ˆè¯·æ±‚                | å†…ç½® AbortController                   | å†…ç½® CancelToken                      |
| JSON è§£æ               | éœ€æ‰‹åŠ¨è°ƒç”¨ `res.json()`                | è‡ªåŠ¨è§£æ JSON                         |

**é€‰å‹å»ºè®®**ï¼š
- å°å‹é¡¹ç›®æˆ–å¯¹æ€§èƒ½æ•æ„Ÿï¼šç”¨ `fetch`ï¼Œå‡å°‘ä¾èµ–ã€‚
- ä¸­å¤§å‹é¡¹ç›®æˆ–éœ€è¦å¤æ‚é€»è¾‘ï¼šç”¨ `axios`ï¼ŒåŠŸèƒ½æ›´å…¨é¢ã€‚

ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ `fetch` å°è£…ç¤ºä¾‹ï¼š

```javascript
const request = async (url, options = {}) => {
  try {
    const response = await fetch(url, {
      method: options.method || 'GET',
      headers: {
        'Content-Type': 'application/json',
        ...options.headers,
      },
      body: options.body ? JSON.stringify(options.body) : null,
    });

    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }

    return await response.json();
  } catch (error) {
    console.error('Request failed:', error);
    throw error;
  }
};

// ä½¿ç”¨ç¤ºä¾‹
request('/api/users', { method: 'GET' })
  .then(data => console.log(data))
  .catch(err => console.error(err));
```

> *Tipsï¼šé€‰å‹æ—¶ä¸è¦ç›²ç›®è¿½æ±‚â€œåŸç”Ÿâ€æˆ–â€œç¬¬ä¸‰æ–¹â€ã€‚é€‚åˆé¡¹ç›®è§„æ¨¡å’Œå›¢é˜Ÿä¹ æƒ¯çš„æ‰æ˜¯æœ€å¥½çš„ã€‚*

### 3.2 æ ¸å¿ƒåŠŸèƒ½ï¼šæ‹¦æˆªå™¨ã€è¶…æ—¶ã€å–æ¶ˆè¯·æ±‚

å¥½çš„è¯·æ±‚å°è£…éœ€è¦æ”¯æŒä»¥ä¸‹åŠŸèƒ½ï¼š

#### 3.2.1 æ‹¦æˆªå™¨

æ‹¦æˆªå™¨å°±åƒé£èˆ¹çš„æ£€æŸ¥ç«™ï¼Œå¯ä»¥åœ¨è¯·æ±‚å‘é€å‰æˆ–å“åº”è¿”å›åè¿›è¡Œå¹²é¢„ã€‚ä»¥ä¸‹æ˜¯åŸºäº `axios` çš„æ‹¦æˆªå™¨å®ç°ï¼š

```javascript
import axios from 'axios';

const instance = axios.create({
  baseURL: 'https://api.example.com',
  timeout: 10000,
});

// è¯·æ±‚æ‹¦æˆªå™¨
instance.interceptors.request.use(
  config => {
    config.headers.Authorization = `Bearer ${localStorage.getItem('token')}`;
    return config;
  },
  error => Promise.reject(error)
);

// å“åº”æ‹¦æˆªå™¨
instance.interceptors.response.use(
  response => response.data,
  error => {
    if (error.response?.status === 401) {
      window.location.href = '/login';
    }
    return Promise.reject(error);
  }
);

export default instance;
```

#### 3.2.2 è¶…æ—¶æ§åˆ¶

è¶…æ—¶æ˜¯é˜²æ­¢è¯·æ±‚â€œå¡æ­»â€çš„å…³é”®ã€‚`axios` é€šè¿‡ `timeout` é…ç½®å®ç°ï¼Œ`fetch` åˆ™éœ€ç»“åˆ `AbortController`ï¼š

```javascript
const fetchWithTimeout = async (url, options = {}, timeout = 10000) => {
  const controller = new AbortController();
  const id = setTimeout(() => controller.abort(), timeout);

  try {
    const response = await fetch(url, {
      ...options,
      signal: controller.signal,
    });
    clearTimeout(id);
    return await response.json();
  } catch (error) {
    if (error.name === 'AbortError') {
      throw new Error('Request timed out');
    }
    throw error;
  }
};
```

#### 3.2.3 å–æ¶ˆè¯·æ±‚

å–æ¶ˆè¯·æ±‚é€‚ç”¨äºç”¨æˆ·å¿«é€Ÿåˆ‡æ¢é¡µé¢æˆ–é‡å¤ç‚¹å‡»çš„åœºæ™¯ã€‚ä»¥ä¸‹æ˜¯ `axios` çš„å–æ¶ˆå®ç°ï¼š

```javascript
import axios from 'axios';

const CancelToken = axios.CancelToken;
let cancel;

const fetchData = () => {
  cancel && cancel('Request canceled');
  axios.get('/api/data', {
    cancelToken: new CancelToken(c => (cancel = c)),
  }).then(res => console.log(res));
};
```

> *Tipsï¼šæ‹¦æˆªå™¨æ˜¯è¯·æ±‚å°è£…çš„çµé­‚ï¼Œè¶…æ—¶å’Œå–æ¶ˆåˆ™æ˜¯å®ƒçš„ç¿…è†€ã€‚åˆç†ä½¿ç”¨å®ƒä»¬ï¼Œèƒ½è®©ä½ çš„ä»£ç å¦‚é£èˆ¹èˆ¬çµæ´»ã€‚*

### 3.3 TypeScript ç±»å‹å®‰å…¨

åœ¨ TypeScript é¡¹ç›®ä¸­ï¼Œç±»å‹å®‰å…¨æ˜¯ä¸å¯å¿½è§†çš„ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç±»å‹åŒ–çš„è¯·æ±‚å°è£…ç¤ºä¾‹ï¼š

```typescript
interface Response<T> {
  code: number;
  data: T;
  message: string;
}

interface RequestOptions {
  method?: 'GET' | 'POST' | 'PUT' | 'DELETE';
  headers?: Record<string, string>;
  body?: any;
}

const request = async <T>(url: string, options: RequestOptions = {}): Promise<Response<T>> => {
  const response = await fetch(url, {
    method: options.method || 'GET',
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
    body: options.body ? JSON.stringify(options.body) : null,
  });

  if (!response.ok) {
    throw new Error(`HTTP error! status: ${response.status}`);
  }

  return response.json();
};

// ä½¿ç”¨ç¤ºä¾‹
interface User {
  id: number;
  name: string;
}

request<User[]>('/api/users').then(res => {
  console.log(res.data); // ç±»å‹å®‰å…¨çš„ User[] æ•°æ®
});
```

> *Tipsï¼šTypeScript ä¸ä»…æ˜¯ç±»å‹æ£€æŸ¥å·¥å…·ï¼Œæ›´æ˜¯ä»£ç çš„â€œå¥‘çº¦â€ã€‚ç”¨å¥½ç±»å‹ï¼Œèƒ½è®©ä½ çš„å°è£…å¦‚æ³•å¾‹èˆ¬ä¸¥è°¨ã€‚*

---

## 4. è¯·æ±‚å°è£…çš„æœ€ä½³å®è·µ ğŸŒŸ

ç†è®ºå’Œä»£ç æœ‰äº†ï¼Œæ¥ä¸‹æ¥æ˜¯å·¥ç¨‹åŒ–çš„æœ€ä½³å®è·µã€‚è¿™äº›å®è·µèƒ½è®©ä½ çš„å°è£…ä»â€œèƒ½ç”¨â€å‡çº§åˆ°â€œæè‡´â€ã€‚

### 4.1 æ¨¡å—åŒ–è®¾è®¡

å°†è¯·æ±‚å°è£…æ‹†åˆ†ä¸ºå¤šä¸ªæ¨¡å—ï¼Œä¾‹å¦‚ï¼š

- `http.ts`ï¼šæ ¸å¿ƒè¯·æ±‚é€»è¾‘ã€‚
- `api/`ï¼šä¸šåŠ¡ API å®šä¹‰ã€‚
- `types/`ï¼šç±»å‹å®šä¹‰ã€‚
- `interceptors/`ï¼šæ‹¦æˆªå™¨é€»è¾‘ã€‚

ç¤ºä¾‹ç›®å½•ç»“æ„ï¼š

```
src/
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ user.ts
â”‚   â”œâ”€â”€ product.ts
â”œâ”€â”€ types/
â”‚   â”œâ”€â”€ response.ts
â”‚   â”œâ”€â”€ user.ts
â”œâ”€â”€ interceptors/
â”‚   â”œâ”€â”€ auth.ts
â”‚   â”œâ”€â”€ error.ts
â”œâ”€â”€ http.ts
```

`user.ts` ç¤ºä¾‹ï¼š

```typescript
import request from '../http';

export const getUser = (id: number) => request<User>(`/users/${id}`);
export const createUser = (data: Partial<User>) => request<User>('/users', { method: 'POST', body: data });
```

### 4.2 é”™è¯¯å¤„ç†ä¸é‡è¯•æœºåˆ¶

é”™è¯¯å¤„ç†éœ€è¦è€ƒè™‘ä»¥ä¸‹åœºæ™¯ï¼š

- **ç½‘ç»œé”™è¯¯**ï¼šæ–­ç½‘æˆ–è¶…æ—¶ã€‚
- **ä¸šåŠ¡é”™è¯¯**ï¼šåç«¯è¿”å›çš„é”™è¯¯ç ã€‚
- **å®¢æˆ·ç«¯é”™è¯¯**ï¼šå‚æ•°æ ¡éªŒå¤±è´¥ã€‚

ä»¥ä¸‹æ˜¯ä¸€ä¸ªå¸¦é‡è¯•çš„å°è£…ï¼š

```typescript
const requestWithRetry = async <T>(
  url: string,
  options: RequestOptions = {},
  retries = 3,
  delay = 1000
): Promise<Response<T>> => {
  for (let i = 0; i < retries; i++) {
    try {
      return await request<T>(url, options);
    } catch (error) {
      if (i === retries - 1) throw error;
      await new Promise(resolve => setTimeout(resolve, delay));
    }
  }
  throw new Error('Max retries reached');
};
```

### 4.3 æ—¥å¿—ä¸ç›‘æ§

æ—¥å¿—æ˜¯è°ƒè¯•å’Œç›‘æ§çš„åˆ©å™¨ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„æ—¥å¿—æ‹¦æˆªå™¨ï¼š

```typescript
instance.interceptors.request.use(config => {
  console.log(`[Request] ${config.method.toUpperCase()} ${config.url}`, config.data);
  return config;
});

instance.interceptors.response.use(
  response => {
    console.log(`[Response] ${response.config.url}`, response.data);
    return response;
  },
  error => {
    console.error(`[Error] ${error.config?.url}`, error.message);
    return Promise.reject(error);
  }
);
```

> *Tipsï¼šæ—¥å¿—æ˜¯ä»£ç çš„â€œæ—¥è®°â€ï¼Œè®°å½•å¾—å½“èƒ½è®©ä½ äº‹åŠåŠŸå€ã€‚åˆ«å¿˜äº†ä¸ºç”Ÿäº§ç¯å¢ƒå…³é—­æ— å…³æ—¥å¿—ï¼Œå…å¾—é£èˆ¹â€œè¶…è½½â€ã€‚*

---

## 5. é«˜çº§åœºæ™¯ä¸è§£å†³æ–¹æ¡ˆ ğŸš€

è¯·æ±‚å°è£…ä¸ä»…è¦è§£å†³å¸¸è§„åœºæ™¯ï¼Œè¿˜è¦åº”å¯¹å¤æ‚éœ€æ±‚ã€‚

### 5.1 æ–‡ä»¶ä¸Šä¼ ä¸ä¸‹è½½

æ–‡ä»¶ä¸Šä¼ é€šå¸¸ä½¿ç”¨ `FormData`ï¼Œä»¥ä¸‹æ˜¯å°è£…ç¤ºä¾‹ï¼š

```typescript
const uploadFile = async (file: File) => {
  const formData = new FormData();
  formData.append('file', file);

  return request<{ url: string }>('/upload', {
    method: 'POST',
    body: formData,
    headers: {
      // æ³¨æ„ï¼šFormData ä¸éœ€è¦æ‰‹åŠ¨è®¾ç½® Content-Type
    },
  });
};
```

æ–‡ä»¶ä¸‹è½½åˆ™éœ€å¤„ç† `Blob`ï¼š

```typescript
const downloadFile = async (url: string) => {
  const response = await fetch(url);
  const blob = await response.blob();
  const link = document.createElement('a');
  link.href = URL.createObjectURL(blob);
  link.download = 'file';
  link.click();
};
```

### 5.2 è¯·æ±‚åˆå¹¶ä¸é˜²æŠ–

åœ¨é«˜é¢‘è¯·æ±‚åœºæ™¯ï¼ˆå¦‚æœç´¢æ¡†è¾“å…¥ï¼‰ï¼Œå¯ä»¥é€šè¿‡é˜²æŠ–æˆ–è¯·æ±‚åˆå¹¶ä¼˜åŒ–æ€§èƒ½ï¼š

```typescript
const debounceRequest = <T>(fn: (...args: any[]) => Promise<T>, wait: number) => {
  let timer: NodeJS.Timeout;
  return (...args: any[]): Promise<T> => {
    clearTimeout(timer);
    return new Promise(resolve => {
      timer = setTimeout(() => resolve(fn(...args)), wait);
    });
  };
};

// ä½¿ç”¨ç¤ºä¾‹
const debouncedSearch = debounceRequest((query: string) => request(`/search?q=${query}`), 300);
```

### 5.3 è·¨åŸŸä¸ä»£ç†

è·¨åŸŸé—®é¢˜é€šå¸¸é€šè¿‡ä»£ç†è§£å†³ã€‚åœ¨å¼€å‘ç¯å¢ƒä¸­ï¼Œé…ç½® `vite.config.ts`ï¼š

```typescript
export default {
  server: {
    proxy: {
      '/api': {
        target: 'https://api.example.com',
        changeOrigin: true,
        rewrite: (path) => path.replace(/^\/api/, ''),
      },
    },
  },
};
```

> *Tipsï¼šè·¨åŸŸæ˜¯å‰ç«¯ä¸åç«¯çš„â€œæ²Ÿé€šéšœç¢â€ï¼Œä»£ç†æ˜¯ç¿»è¯‘å®˜ï¼Œå¸®ä½ è·¨è¶Šè¯­è¨€çš„é¸¿æ²Ÿã€‚*

---

## 6. ä»ä»£ç åˆ°å“²å­¦ï¼šè¯·æ±‚å°è£…çš„æ›´é«˜å¢ƒç•Œ ğŸŒ

è¯·æ±‚å°è£…ä¸ä»…æ˜¯ä¸€é¡¹æŠ€æœ¯ä»»åŠ¡ï¼Œæ›´æ˜¯ä¸€ç§æ€ç»´æ–¹å¼ã€‚å¥½çš„å°è£…å¦‚åŒä¸€é¦–è¯—ï¼Œç®€æ´å´å……æ»¡åŠ›é‡ï¼›å¦‚åŒä¸€è‰˜é£èˆ¹ï¼Œç²¾å¯†å´çµæ´»è‡ªå¦‚ã€‚

### 6.1 å°è£…çš„è‰ºæœ¯ä¸äººç”Ÿå“²ç†

å°è£…è¯·æ±‚çš„è¿‡ç¨‹ï¼Œå°±åƒåœ¨äººç”Ÿä¸­å¯»æ‰¾å¹³è¡¡ã€‚ä½ éœ€è¦åœ¨çµæ´»æ€§ä¸è§„èŒƒæ€§ä¹‹é—´å–èˆï¼Œåœ¨æ€§èƒ½ä¸å¯è¯»æ€§ä¹‹é—´æƒè¡¡ã€‚æ­£å¦‚å“²å­¦å®¶èµ«æ‹‰å…‹åˆ©ç‰¹æ‰€è¯´ï¼šâ€œä¸‡ç‰©çš†æµã€‚â€ä»£ç åœ¨å˜ï¼Œéœ€æ±‚åœ¨å˜ï¼Œå”¯æœ‰æ¸…æ™°çš„æ€ç»´å’Œä¼˜é›…çš„è®¾è®¡èƒ½è®©ä½ åœ¨å˜åŒ–ä¸­æ‰¾åˆ°ä¸å˜çš„çœŸç†ã€‚

### 6.2 æœªæ¥è¶‹åŠ¿ï¼šGraphQLã€gRPC ç­‰

RESTful API è™½æ˜¯ä¸»æµï¼Œä½† GraphQL å’Œ gRPC æ­£åœ¨å´›èµ·ã€‚GraphQL æä¾›äº†æ›´çµæ´»çš„æŸ¥è¯¢æ–¹å¼ï¼ŒgRPC åˆ™ä»¥é«˜æ€§èƒ½è‘—ç§°ã€‚æœªæ¥çš„è¯·æ±‚å°è£…éœ€è¦é€‚åº”è¿™äº›æ–°åè®®ï¼Œä¾‹å¦‚ï¼š

- **GraphQL å°è£…**ï¼šä½¿ç”¨ Apollo Client æˆ– urqlã€‚
- **gRPC å°è£…**ï¼šåŸºäº gRPC-Web å®ç°æµè§ˆå™¨è°ƒç”¨ã€‚

> *Tipsï¼šæŠ€æœ¯å¦‚æ½®æ°´ï¼Œæ¶¨è½æ— å¸¸ã€‚ä¿æŒå­¦ä¹ ï¼Œæ‹¥æŠ±å˜åŒ–ï¼Œä½ çš„é£èˆ¹æ‰èƒ½ä¹˜é£ç ´æµªã€‚*

---

## 7. æ€»ç»“ä¸å¯„è¯­ ğŸ‰

è¯·æ±‚å°è£…æ˜¯å‰ç«¯å¼€å‘è€…çš„å¿…ä¿®è¯¾ï¼Œå®ƒä¸ä»…æ˜¯æŠ€æœ¯èƒ½åŠ›çš„ä½“ç°ï¼Œæ›´æ˜¯å·¥ç¨‹æ€ç»´çš„ç»“æ™¶ã€‚é€šè¿‡è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬ä» HTTP åŸç†åˆ°æœ€ä½³å®è·µï¼Œæ¢ç´¢äº†è¯·æ±‚å°è£…çš„æ–¹æ–¹é¢é¢ã€‚å¸Œæœ›ä½ ä¸ä»…å­¦ä¼šäº†ä»£ç ï¼Œæ›´æ„Ÿå—åˆ°ä»£ç èƒŒåçš„ç¾å­¦ä¸å“²å­¦ã€‚

æœ€åï¼Œé€ä½ ä¸€å¥è¯ï¼šâ€œå¥½çš„è¯·æ±‚å°è£…ï¼Œå¦‚åŒå®‡å®™ä¸­çš„æ˜Ÿå…‰ï¼ŒæŒ‡å¼•ä½ çš„é¡¹ç›®èµ°å‘å…‰æ˜ã€‚â€ æ„¿ä½ çš„ä»£ç ä¼˜é›…ï¼Œé£èˆ¹ç¿±ç¿”ï¼ğŸš€

---