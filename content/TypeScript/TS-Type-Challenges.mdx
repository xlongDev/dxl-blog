---

title: "TypeScript ç±»å‹ä½“æ“ï¼šä»æ–°æ‰‹åˆ°å¿è€…å¤§å¸ˆçš„è¿›é˜¶ä¹‹æ—… ğŸ¥·"
date: "2023-06-01"
description: "æ·±å…¥æ¢ç´¢ TypeScript ç±»å‹ä½“æ“çš„å¥¥ç§˜ï¼Œå¸¦ä½ è§£é”é«˜çº§ç±»å‹æ“ä½œçš„åŸç†ä¸å®è·µï¼Œé™„å¸¦å®ç”¨æŠ€å·§ä¸å¹½é»˜åæ§½ã€‚"
keywords: "TypeScript, ç±»å‹ä½“æ“, é«˜çº§ç±»å‹, ç±»å‹æ¨å¯¼, æ¡ä»¶ç±»å‹, å·¥å…·ç±»å‹, å‰ç«¯å¼€å‘"
author: "æ™“é¾™"
image: "/images/hero/typescript-gymnastics.jpg"
tags: ["TypeScript", "JavaScript", "å‰ç«¯å¼€å‘"]
category: "TypeScript"

---

å¦‚æœä½ æ˜¯ä¸ªå‰ç«¯å¼€å‘è€…ï¼ŒTypeScriptï¼ˆä»¥ä¸‹ç®€ç§° TSï¼‰å¯èƒ½æ—©å·²æ˜¯ä½ çš„è€æœ‹å‹ã€‚å®ƒä¸ä»…å¸®ä½ æ•æ‰ä»£ç ä¸­çš„â€œä½çº§é”™è¯¯â€ï¼Œè¿˜èƒ½è®©ä½ åœ¨ç±»å‹å®‰å…¨çš„èˆ’é€‚åŒºé‡Œç¿©ç¿©èµ·èˆã€‚ç„¶è€Œï¼Œå½“ä½ å¼€å§‹æ¥è§¦ TS çš„**ç±»å‹ä½“æ“**ï¼ˆType Gymnasticsï¼‰ï¼Œä½ ä¼šå‘ç°ï¼Œè¿™ä¸å†æ˜¯ç®€å•çš„â€œç±»å‹æ£€æŸ¥â€ï¼Œè€Œæ˜¯ä¸€åœºè„‘åŠ›ä¸åˆ›é€ åŠ›çš„ç‹‚æ¬¢æ´¾å¯¹ ğŸ‰ã€‚ä»Šå¤©ï¼Œæˆ‘å°±å¸¦ä½ ä»é›¶åˆ°ä¸€ï¼Œæ¢ç´¢ç±»å‹ä½“æ“çš„å¥¥ç§˜ï¼Œè§£å‰–å®ƒçš„åŸç†ï¼Œåˆ†äº«å®ç”¨æŠ€å·§ï¼Œé¡ºä¾¿åæ§½å‡ å¥â€œç±»å‹åœ°ç‹±â€ä¸­çš„å¥‡é—»å¼‚äº‹ã€‚

## ä»€ä¹ˆæ˜¯ç±»å‹ä½“æ“ï¼Ÿ

ç®€å•æ¥è¯´ï¼Œç±»å‹ä½“æ“æ˜¯æŒ‡åˆ©ç”¨ TS çš„é«˜çº§ç±»å‹ç‰¹æ€§ï¼ˆæ¯”å¦‚æ¡ä»¶ç±»å‹ã€æ˜ å°„ç±»å‹ã€æ¨¡æ¿å­—é¢é‡ç±»å‹ç­‰ï¼‰ï¼Œé€šè¿‡å¤æ‚çš„ç»„åˆä¸æ¨å¯¼ï¼Œè§£å†³ä¸€äº›çœ‹ä¼¼â€œä¸å¯èƒ½â€çš„ç±»å‹é—®é¢˜ã€‚å®ƒæœ‰ç‚¹åƒæ•°å­¦é‡Œçš„â€œæ¨å¯¼å…¬å¼â€ï¼šä½ ä»å‡ ä¸ªåŸºæœ¬è§„åˆ™å‡ºå‘ï¼Œç»è¿‡ä¸€å †èŠ±å¼æ“ä½œï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ªç²¾ç¡®çš„ç±»å‹ç»“æœã€‚

ç±»æ¯”ä¸€ä¸‹ï¼šå¦‚æœæ™®é€šçš„ TS ç±»å‹æ˜¯â€œè·‘æ­¥â€ï¼Œé‚£ç±»å‹ä½“æ“å°±æ˜¯â€œä½“æ“è¿åŠ¨å‘˜åœ¨å¹³è¡¡æœ¨ä¸Šç¿»è·Ÿå¤´â€â€”â€”æ—¢éœ€è¦æŠ€å·§ï¼Œåˆè€ƒéªŒè„‘åŠ›ï¼Œè¿˜å¾—æœ‰ç‚¹è‰ºæœ¯æ„Ÿã€‚

> **åæ§½æ—¶é—´**ï¼šåˆšå¼€å§‹å­¦ç±»å‹ä½“æ“æ—¶ï¼Œæˆ‘è§‰å¾—è‡ªå·±åƒä¸ªæ–°æ‰‹å¿è€…ï¼Œæ‹¿ç€æ‰‹é‡Œå‰‘ä¹±æŒ¥ï¼Œæœ€åæŠŠè‡ªå·±æ‰å¾—æ»¡èº«æ˜¯æ´ã€‚åˆ«æ€•ï¼Œè¿™å¾ˆæ­£å¸¸ï¼

---

## åŸºç¡€å·¥å…·ç®±ï¼šç±»å‹ä½“æ“çš„â€œç‘å£«å†›åˆ€â€ ğŸ”§

åœ¨è¿›å…¥èŠ±å¼æ“ä½œå‰ï¼Œæˆ‘ä»¬å…ˆå¾—ç†Ÿæ‚‰ TS æä¾›çš„åŸºç¡€å·¥å…·ã€‚è¿™äº›å·¥å…·æ˜¯ç±»å‹ä½“æ“çš„â€œåŸºæœ¬åŠŸâ€ï¼Œç”¨å¾—å¥½ï¼Œèƒ½è®©ä½ äº‹åŠåŠŸå€ã€‚

### 1. æ¡ä»¶ç±»å‹ï¼ˆConditional Typesï¼‰

æ¡ä»¶ç±»å‹æ˜¯ç±»å‹ä½“æ“çš„çµé­‚ï¼Œç”¨æ³•ç±»ä¼¼äºä¸‰å…ƒè¿ç®—ç¬¦ï¼š

```typescript
type IsString<T> = T extends string ? "yes" : "no";

type Test1 = IsString<string>; // "yes"
type Test2 = IsString<number>; // "no"
```

åŸç†å¾ˆç®€å•ï¼š`T extends X ? A : B` ä¼šæ£€æŸ¥ç±»å‹ `T` æ˜¯å¦æ˜¯ `X` çš„å­é›†ï¼Œç„¶åè¿”å›å¯¹åº”çš„ç±»å‹ã€‚å¬èµ·æ¥åƒä¸ªâ€œç±»å‹ç‰ˆçš„ if-elseâ€ï¼Œå¯¹å§ï¼Ÿ

**è¿›é˜¶ç©æ³•**ï¼šæ¡ä»¶ç±»å‹å¯ä»¥åµŒå¥—ï¼Œåˆ¶é€ å‡ºâ€œç±»å‹å†³ç­–æ ‘â€ï¼š

```typescript
type GetType<T> = T extends string
  ? "string"
  : T extends number
    ? "number"
    : T extends boolean
      ? "boolean"
      : "unknown";

type T1 = GetType<"hello">; // "string"
type T2 = GetType<42>; // "number"
type T3 = GetType<{}>; // "unknown"
```

### 2.  infer å…³é”®å­—ï¼šç±»å‹æ¨å¯¼çš„â€œä¾¦æ¢â€ ğŸ•µï¸â€â™‚ï¸

`infer` æ˜¯æ¡ä»¶ç±»å‹ä¸­çš„ç§˜å¯†æ­¦å™¨ï¼Œèƒ½ä»ç±»å‹ä¸­â€œæå–â€ä¸€éƒ¨åˆ†ä¿¡æ¯ã€‚æ¯”å¦‚ï¼š

```typescript
type GetReturnType<T> = T extends (...args: any[]) => infer R ? R : never;

type Func = () => string;
type Return = GetReturnType<Func>; // string
```

è¿™é‡Œ `infer R` å°±åƒä¸ªä¾¦æ¢ï¼ŒæŠŠå‡½æ•°è¿”å›å€¼çš„ç±»å‹â€œå·â€äº†å‡ºæ¥ã€‚åŸç†æ˜¯ TS åœ¨åŒ¹é…ç±»å‹æ—¶ï¼Œä¼šå°è¯•æ¨å¯¼å‡º `R` çš„å…·ä½“å€¼ã€‚

**å°æŠ€å·§**ï¼š`infer` å¸¸ç”¨äºæå–æ•°ç»„å…ƒç´ ç±»å‹ã€Promise è¿”å›å€¼ç­‰åœºæ™¯ï¼š

```typescript
type UnwrapPromise<T> = T extends Promise<infer U> ? U : T;

type P = UnwrapPromise<Promise<string>>; // string
type Q = UnwrapPromise<number>; // number
```

### 3. æ˜ å°„ç±»å‹ï¼ˆMapped Typesï¼‰

æ˜ å°„ç±»å‹è®©ä½ å¯ä»¥éå†ä¸€ä¸ªç±»å‹çš„å±æ€§ï¼Œç”Ÿæˆæ–°çš„ç±»å‹ï¼š

```typescript
type Optional<T> = {
  [K in keyof T]?: T[K];
};

interface User {
  name: string;
  age: number;
}

type OptionalUser = Optional<User>;
// { name?: string; age?: number }
```

**ç±»æ¯”**ï¼šæƒ³è±¡ä½ åœ¨è£…ä¿®æˆ¿å­ï¼Œæ˜ å°„ç±»å‹å°±åƒæŠŠæ¯é—´æˆ¿é—´çš„å®¶å…·éƒ½æ¢æˆâ€œå¯é€‰æ¬¾â€â€”â€”è¦ä¸è¦æ”¾æ²™å‘ï¼Œéšä½ å¿ƒæƒ…ã€‚

### 4. æ¨¡æ¿å­—é¢é‡ç±»å‹ï¼ˆTemplate Literal Typesï¼‰

è¿™æ˜¯ TS 4.1 å¼•å…¥çš„â€œæ–°ç©å…·â€ï¼Œè®©ä½ èƒ½åƒæ“ä½œå­—ç¬¦ä¸²ä¸€æ ·æ“ä½œç±»å‹ï¼š

```typescript
type Greeting<T> = `Hello, ${T}`;

type Greet = Greeting<"World">; // "Hello, World"
```

å®ƒè¿˜èƒ½ç»“åˆ `infer` åšæ›´å¤æ‚çš„æ‹†è§£ï¼š

```typescript
type ExtractName<T> = T extends `Hello, ${infer N}` ? N : never;

type Name = ExtractName<"Hello, Xiaolong">; // "Xiaolong"
```

---

## ç±»å‹ä½“æ“çš„â€œèŠ±å¼è¡¨æ¼”â€ ğŸª

æœ‰äº†åŸºç¡€å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹çœŸæ­£çš„â€œä½“æ“è¡¨æ¼”â€äº†ã€‚ä»¥ä¸‹æ˜¯å‡ ä¸ªç»å…¸æ¡ˆä¾‹ï¼Œå¸¦ä½ æ„Ÿå—ç±»å‹ä½“æ“çš„é­…åŠ›ã€‚

### æ¡ˆä¾‹ 1ï¼šæ·±åº¦åªè¯»ï¼ˆDeepReadonlyï¼‰

TS è‡ªå¸¦çš„ `Readonly` åªä½œç”¨äºç¬¬ä¸€å±‚å±æ€§ï¼Œæƒ³è®©åµŒå¥—å¯¹è±¡ä¹Ÿåªè¯»æ€ä¹ˆåŠï¼Ÿæ¥ï¼Œè¯•è¯•è¿™ä¸ªï¼š

```typescript
type DeepReadonly<T> = {
  readonly [K in keyof T]: T[K] extends object ? DeepReadonly<T[K]> : T[K];
};

interface Nested {
  name: string;
  info: {
    age: number;
    address: string;
  };
}

type ReadonlyNested = DeepReadonly<Nested>;
```

ç»“æœæ˜¯æ‰€æœ‰åµŒå¥—å±æ€§éƒ½å˜æˆäº† `readonly`ã€‚åŸç†æ˜¯ç”¨é€’å½’ç»“åˆæ˜ å°„ç±»å‹ï¼Œä¸€å±‚ä¸€å±‚â€œé”â€ä½å±æ€§ã€‚

> **åæ§½**ï¼šç¬¬ä¸€æ¬¡å†™è¿™ä¸ªæ—¶ï¼Œæˆ‘é€’å½’å¿˜äº†åŠ ç»ˆæ­¢æ¡ä»¶ï¼ŒTS ç¼–è¯‘å™¨ç›´æ¥ç½¢å·¥ï¼Œç»™æˆ‘æŠ¥äº†ä¸ªâ€œç±»å‹å¤ªæ·±â€çš„é”™è¯¯ã€‚åˆ«ç¬‘ï¼Œä½ ä¹Ÿå¯èƒ½ä¼šè¸©å‘ï¼

### æ¡ˆä¾‹ 2ï¼šåè½¬å¯¹è±¡é”®å€¼ï¼ˆFlipï¼‰

æƒ³æŠŠå¯¹è±¡çš„é”®å’Œå€¼äº’æ¢ï¼Ÿç±»å‹ä½“æ“ä¹Ÿèƒ½åšåˆ°ï¼š

```typescript
type Flip<T> = {
  [K in keyof T as T[K] extends string | number | symbol ? T[K] : never]: K;
};

type Obj = { a: "1"; b: "2" };
type Flipped = Flip<Obj>;
// { "1": "a"; "2": "b" }
```

è¿™é‡Œç”¨åˆ°äº† `as` é‡æ–°æ˜ å°„é”®åï¼ŒåŸç†æ˜¯éå†åŸå¯¹è±¡çš„é”®ï¼ŒæŠŠå€¼ä½œä¸ºæ–°é”®ï¼Œé”®ä½œä¸ºæ–°å€¼ã€‚

### æ¡ˆä¾‹ 3ï¼šè§£æè·¯å¾„ï¼ˆParsePathï¼‰

å‡è®¾ä½ æœ‰ä¸ªæ·±å±‚å¯¹è±¡ï¼Œæƒ³é€šè¿‡å­—ç¬¦ä¸²è·¯å¾„è·å–ç±»å‹ï¼š

```typescript
type GetNestedType<T, P> = P extends `${infer K}.${infer Rest}`
  ? K extends keyof T
    ? GetNestedType<T[K], Rest>
    : never
  : P extends keyof T
    ? T[P]
    : never;

interface Data {
  user: {
    info: {
      name: string;
      age: number;
    };
  };
}

type NameType = GetNestedType<Data, "user.info.name">; // string
type AgeType = GetNestedType<Data, "user.info.age">; // number
```

è¿™æ‹›ç”¨åˆ°äº†æ¨¡æ¿å­—é¢é‡å’Œé€’å½’ï¼Œé€æ­¥è§£æè·¯å¾„ï¼Œåƒæ˜¯åœ¨å¯¹è±¡é‡Œâ€œæŒ–å®â€ä¸€æ ·ã€‚

---

## æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹ âš ï¸

ç±»å‹ä½“æ“è™½ç„¶ç‚«é…·ï¼Œä½†ä¹Ÿä¸æ˜¯ä¸‡èƒ½é’¥åŒ™ã€‚ä»¥ä¸‹æ˜¯æˆ‘æ€»ç»“çš„ä¸€äº›å®ç”¨å»ºè®®ï¼š

1. **ä¿æŒå¯è¯»æ€§**  
   åˆ«ä¸ºäº†ç‚«æŠ€å†™å‡ºä¸€å †æ²¡äººçœ‹å¾—æ‡‚çš„ç±»å‹ã€‚å¯ä»¥ç”¨ `type` åˆ†è§£å¤æ‚é€»è¾‘ï¼Œæ¯”å¦‚ï¼š
   ```typescript
   type Step1 = ...
   type Step2 = Step1 extends ... ? ... : ...
   ```

2. **å–„ç”¨å†…ç½®å·¥å…·ç±»å‹**  
   TS è‡ªå¸¦äº†å¾ˆå¤šå®ç”¨ç±»å‹ï¼Œæ¯”å¦‚ `Pick`ã€`Omit`ã€`Partial`ï¼Œèƒ½çœä¸å°‘åŠ›æ°”ï¼š
   ```typescript
   type UserPreview = Pick<User, "name" | "age">;
   ```

3. **æ€§èƒ½è€ƒé‡**  
   è¿‡äºå¤æ‚çš„ç±»å‹ä½“æ“ï¼ˆå°¤å…¶æ˜¯é€’å½’ï¼‰å¯èƒ½ä¼šæ‹–æ…¢ç¼–è¯‘é€Ÿåº¦ã€‚èƒ½ç®€å•è§£å†³çš„é—®é¢˜ï¼Œå°±åˆ«â€œç¿»è·Ÿå¤´â€ã€‚

4. **è°ƒè¯•æŠ€å·§**  
   ç±»å‹æŠ¥é”™çœ‹ä¸æ‡‚ï¼Ÿè¯•ç€ç”¨ `type Temp = ...` ä¸€æ­¥æ­¥æ‹†è§£ï¼Œæ‰¾å‡ºé—®é¢˜æ‰€åœ¨ã€‚

> **å¹½é»˜æé†’**ï¼šç±»å‹ä½“æ“ç©è¿‡å¤´ï¼ŒåŒäº‹å¯èƒ½ä¼šåœ¨ä»£ç å®¡æŸ¥æ—¶é—®ä½ ï¼šâ€œè¿™æ˜¯åœ¨å†™ä»£ç è¿˜æ˜¯åœ¨è§£æ•°å­¦é¢˜ï¼Ÿâ€

---

## ç»“è¯­ï¼šæˆä¸ºç±»å‹å¿è€… ğŸ¥·

TypeScript ç±»å‹ä½“æ“ä¸ä»…æ˜¯æŠ€æœ¯çš„ä½“ç°ï¼Œæ›´æ˜¯ä¸€ç§æ€ç»´çš„é”»ç‚¼ã€‚å®ƒè®©ä½ ä»â€œè¢«åŠ¨æ¥å—ç±»å‹â€å˜æˆâ€œä¸»åŠ¨å¡‘é€ ç±»å‹â€ï¼Œä»â€œå†™ä»£ç â€å‡çº§åˆ°â€œè®¾è®¡ç±»å‹ç³»ç»Ÿâ€ã€‚å½“ç„¶ï¼Œå­¦ä¹ è¿‡ç¨‹å¯èƒ½ä¼šè®©ä½ æŠ“ç‹‚ï¼ˆæˆ‘æ‡‚é‚£ç§å¯¹ç€çº¢çº¿å‘å‘†çš„æ„Ÿè§‰ï¼‰ï¼Œä½†ä¸€æ—¦æŒæ¡ï¼Œä½ ä¼šå‘ç°ä»£ç å˜å¾—æ›´ä¼˜é›…ã€æ›´å®‰å…¨ã€‚

æ‰€ä»¥ï¼Œæ‹¿èµ·ä½ çš„é”®ç›˜ï¼Œè¯•è¯•ä¸Šé¢çš„ä¾‹å­å§ï¼ä»åŸºç¡€å·¥å…·åˆ°èŠ±å¼æ“ä½œï¼Œæ¯ä¸€æ­¥éƒ½åœ¨è®©ä½ ç¦»â€œç±»å‹å¿è€…å¤§å¸ˆâ€æ›´è¿‘ä¸€ç‚¹ã€‚æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œæ¬¢è¿ç•™è¨€è®¨è®ºâ€”â€”æ¯•ç«Ÿï¼ŒTS ç¤¾åŒºé‡Œä»æ¥ä¸ç¼ºâ€œç±»å‹æ€ªäººâ€ ğŸ˜œã€‚

Happy typing, and may the types be with you! âœ¨

--- 