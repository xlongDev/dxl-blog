---

title: "æ·±å…¥ç†è§£ React å‡½æ•°å¼ç»„ä»¶ä¸ç±»ç»„ä»¶çš„åŒºåˆ«"
date: "2023-04-11"
description: "ä»åŸç†åˆ°å®è·µï¼Œå…¨é¢å‰–æ React å‡½æ•°å¼ç»„ä»¶ä¸ç±»ç»„ä»¶çš„å·®å¼‚ï¼Œå¸¦ä½ æŒæ¡ä¸¤è€…çš„ä¼˜åŠ£ã€ä½¿ç”¨åœºæ™¯å’Œæœ€ä½³å®è·µã€‚"
keywords: "React, å‡½æ•°å¼ç»„ä»¶, ç±»ç»„ä»¶, Hooks, å‰ç«¯å¼€å‘, JavaScript, ç»„ä»¶åŒ–å¼€å‘"
author: "æ™“é¾™"
image: "/images/hero/react-components.jpg"
tags: ["React", "JavaScript", "å‰ç«¯å¼€å‘"]
category: "React"

---

Reactï¼Œä½œä¸ºå‰ç«¯å¼€å‘ä¸­çš„â€œå¸¸é’æ ‘â€ï¼Œè‡ªè¯ç”Ÿä»¥æ¥å°±ä»¥ç»„ä»¶åŒ–å¼€å‘ä¸ºæ ¸å¿ƒç†å¿µæ”¹å˜äº†æˆ‘ä»¬æ„å»ºç•Œé¢çš„æ–¹å¼ã€‚è€Œåœ¨ React çš„ç»„ä»¶ä¸–ç•Œé‡Œï¼Œå‡½æ•°å¼ç»„ä»¶ï¼ˆFunctional Componentsï¼‰å’Œç±»ç»„ä»¶ï¼ˆClass Componentsï¼‰ä¸€ç›´æ˜¯ä¸¤å¤§ä¸»è§’ã€‚å°½ç®¡åœ¨ Hooks æ¨ªç©ºå‡ºä¸–åï¼Œå‡½æ•°å¼ç»„ä»¶é€æ¸å æ®äº†ä¸»å¯¼åœ°ä½ï¼Œä½†ç±»ç»„ä»¶ä¾ç„¶æœ‰å…¶å†å²æ„ä¹‰å’Œé€‚ç”¨åœºæ™¯ã€‚

é‚£ä¹ˆï¼Œè¿™ä¸¤è€…åˆ°åº•æœ‰å•¥åŒºåˆ«ï¼Ÿå®ƒä»¬çš„åº•å±‚åŸç†æ˜¯ä»€ä¹ˆï¼Ÿä»€ä¹ˆæ—¶å€™è¯¥ç”¨å“ªä¸ªï¼Ÿåˆ«æ€¥ï¼Œè¿™ç¯‡åšå®¢å°†å¸¦ä½ ä»å¤´åˆ°å°¾ã€ä»è¡¨åˆ°é‡Œåœ°å‰–æä¸¤è€…çš„å·®å¼‚ã€‚ä¸ä»…æœ‰å¹²è´§ï¼Œè¿˜æœ‰ä»£ç ç¤ºä¾‹ã€æœ€ä½³å®è·µï¼Œç”šè‡³ä¸€ç‚¹å°å¹½é»˜ï¼ˆæ¯•ç«Ÿï¼Œè°è¯´æŠ€æœ¯åšå®¢ä¸èƒ½æœ‰ç‚¹çµé­‚å‘¢ï¼ŸğŸ˜ï¼‰ã€‚å‡†å¤‡å¥½äº†å—ï¼Ÿè®©æˆ‘ä»¬å¼€å§‹è¿™åœº React ç»„ä»¶çš„â€œæ¢ç§˜ä¹‹æ—…â€å§ï¼

## ä¸€ã€ä»å¤–è§‚åˆ°æœ¬è´¨ï¼šä¸¤è€…çš„åŸºæœ¬åŒºåˆ«

### 1.1 è¯­æ³•ä¸Šçš„â€œé—¨é¢æ‹…å½“â€

å…ˆä»æœ€ç›´è§‚çš„åœ°æ–¹çœ‹èµ·ï¼šä»£ç é•¿å•¥æ ·ã€‚

#### ç±»ç»„ä»¶ï¼šä¼ ç»Ÿè´µæ—çš„æ°”è´¨
ç±»ç»„ä»¶æ˜¯ React æ—©æœŸçš„æ ‡é…ï¼Œç»§æ‰¿è‡ª `React.Component`ï¼Œå¸¦ç€æµ“æµ“çš„é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰æ°”æ¯ã€‚å†™èµ·æ¥å°±åƒåœ¨å†™ä¸€ä¸ªâ€œæœ‰å¤´æœ‰è„¸â€çš„ JavaScript ç±»ï¼š

```jsx
import React from "react";

class ClassCounter extends React.Component {
  constructor(props) {
    super(props);
    this.state = { count: 0 };
  }

  handleClick = () => {
    this.setState({ count: this.state.count + 1 });
  };

  render() {
    return (
      <div>
        <p>Count: {this.state.count}</p>
        <button onClick={this.handleClick}>åŠ ä¸€</button>
      </div>
    );
  }
}

export default ClassCounter;
```

ç§ç§ï¼Œ`constructor`ã€`this`ã€`render`ï¼Œæ»¡æ»¡çš„ä»ªå¼æ„Ÿï¼Œåƒæäº†ä¸€ä¸ªç©¿ç€ç‡•å°¾æœçš„è€è´µæ—ï¼Œä¼˜é›…ä½†æœ‰ç‚¹ç¹çã€‚

#### å‡½æ•°å¼ç»„ä»¶ï¼šç®€çº¦æ—¶å°šçš„æ–°æ˜Ÿ
ç›¸æ¯”ä¹‹ä¸‹ï¼Œå‡½æ•°å¼ç»„ä»¶å°±åƒä¸ªç©¿Tæ¤ç‰›ä»”è£¤çš„å¹´è½»äººï¼Œè½»è£…ä¸Šé˜µï¼Œç›´å¥”ä¸»é¢˜ã€‚è‡ªä»æœ‰äº† Hooksï¼Œå®ƒè¿˜èƒ½ç®¡ç†çŠ¶æ€å’Œå‰¯ä½œç”¨ï¼š

```jsx
import React, { useState } from "react";

function FunctionalCounter() {
  const [count, setCount] = useState(0);

  const handleClick = () => setCount(count + 1);

  return (
    <div>
      <p>Count: {count}</p>
      <button onClick={handleClick}>åŠ ä¸€</button>
    </div>
  );
}

export default FunctionalCounter;
```

ç®€å•ã€ç›´æ¥ï¼Œè¿ `this` éƒ½ä¸ç”¨æ“å¿ƒï¼Œä»£ç é‡ç›´æ¥è…°æ–©ã€‚å°±åƒç‚¹å¤–å–å’Œè‡ªå·±åšé¥­çš„åŒºåˆ«ï¼šä¸€ä¸ªæ˜¯å¿«é€Ÿä¸Šæ‰‹ï¼Œä¸€ä¸ªå¾—å…ˆæ´—é”…åˆ·ç¢—ã€‚

**å° Tips**: å¦‚æœä½ æ˜¯æ–°æ‰‹ï¼Œæˆ–è€…é¡¹ç›®è¿½æ±‚ç®€æ´ï¼Œå‡½æ•°å¼ç»„ä»¶ + Hooks æ˜¯ä½ çš„é¦–é€‰ã€‚ç±»ç»„ä»¶è™½ç„¶ä¸â€œè¿‡æ—¶â€ï¼Œä½†åœ¨ç°ä»£ React ä¸­å·²ç»æœ‰ç‚¹â€œè€æ´¾â€äº†ã€‚

---

### 1.2 åº•å±‚åŸç†ï¼šå®ƒä»¬æ˜¯æ€ä¹ˆè·‘èµ·æ¥çš„ï¼Ÿ

åˆ«çœ‹è¡¨é¢åŒºåˆ«ä¸å¤§ï¼ŒReact åœ¨å†…éƒ¨å¤„ç†è¿™ä¸¤è€…æ—¶å¯æ˜¯æœ‰ä¸åŒçš„â€œå¥—è·¯â€ã€‚

#### ç±»ç»„ä»¶ï¼šç”Ÿå‘½å‘¨æœŸçš„â€œè€å¸æœºâ€
ç±»ç»„ä»¶çš„æ ¸å¿ƒæ˜¯åŸºäºç±»çš„å®ä¾‹åŒ–ã€‚æ¯æ¬¡ä½ å†™ä¸€ä¸ªç±»ç»„ä»¶ï¼ŒReact éƒ½ä¼šé€šè¿‡ `new` æ“ä½œç¬¦åˆ›å»ºä¸€ä¸ªå®ä¾‹å¯¹è±¡ã€‚è¿™ä¸ªå®ä¾‹ä¼šæºå¸¦ `state`ã€`props` å’Œç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼ˆæ¯”å¦‚ `componentDidMount`ï¼‰ã€‚React çš„æ›´æ–°æœºåˆ¶ä¼šé€šè¿‡è°ƒç”¨å®ä¾‹çš„ `render` æ–¹æ³•æ¥ç”Ÿæˆ UIã€‚

è¿™å°±åƒä¸€ä¸ªå·¥å‚æµæ°´çº¿ï¼šReact è´Ÿè´£æŠŠé›¶ä»¶ï¼ˆstateã€propsï¼‰ç»„è£…æˆä¸€å°æœºå™¨ï¼ˆç»„ä»¶å®ä¾‹ï¼‰ï¼Œç„¶åæŒ‰ç”Ÿå‘½å‘¨æœŸçš„èŠ‚å¥å¯åŠ¨ã€è¿è¡Œã€é”€æ¯ã€‚

#### å‡½æ•°å¼ç»„ä»¶ï¼šçº¯å‡½æ•°çš„â€œè½»éª‘å…µâ€
å‡½æ•°å¼ç»„ä»¶æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªæ™®é€šçš„ JavaScript å‡½æ•°ï¼Œè¾“å…¥ `props`ï¼Œè¾“å‡º JSXã€‚æ²¡æœ‰å®ä¾‹åŒ–ï¼Œæ²¡æœ‰ `this`ï¼ŒReact ç›´æ¥è°ƒç”¨è¿™ä¸ªå‡½æ•°æ¥ç”Ÿæˆ UIã€‚Hooks çš„åŠ å…¥ï¼ˆæ¯”å¦‚ `useState`ã€`useEffect`ï¼‰è®©å®ƒèƒ½â€œè®°ä½â€çŠ¶æ€å’Œå¤„ç†å‰¯ä½œç”¨ï¼Œä½†è¿™äº›éƒ½æ˜¯é€šè¿‡é—­åŒ…å®ç°çš„ï¼Œè€Œä¸æ˜¯ç±»çš„å®ä¾‹å±æ€§ã€‚

ç±»æ¯”ä¸€ä¸‹ï¼šç±»ç»„ä»¶åƒä¸ªæœ‰å†…å­˜çš„æœºå™¨äººï¼Œå‡½æ•°å¼ç»„ä»¶åˆ™åƒä¸ªæ¯æ¬¡è¢«å¬å”¤å°±ç°åšç°å–çš„é­”æ³•å¸ˆï¼Œé é­”æ³•ï¼ˆé—­åŒ…ï¼‰è®°ä½ä¸Šä¸€æ¬¡çš„çŠ¶æ€ã€‚

**å° Tips**: ç†è§£é—­åŒ…å¯¹æŒæ¡ Hooks è‡³å…³é‡è¦ã€‚å¦‚æœä½ åœ¨å‡½æ•°å¼ç»„ä»¶é‡Œé‡åˆ°çŠ¶æ€â€œè¯¡å¼‚â€çš„é—®é¢˜ï¼Œå…«æˆæ˜¯é—­åŒ…æ²¡ææ¸…æ¥šã€‚

---

## äºŒã€åŠŸèƒ½å¯¹æ¯”ï¼šè°æ›´èƒ½æ‰“ï¼Ÿ

### 2.1 çŠ¶æ€ç®¡ç†ï¼šä» `this.state` åˆ° `useState`

ç±»ç»„ä»¶ç”¨ `this.state` å’Œ `this.setState` ç®¡ç†çŠ¶æ€ï¼Œæ›´æ–°æ˜¯åŸºäºå¯¹è±¡åˆå¹¶çš„ï¼š

```jsx
this.setState({ count: this.state.count + 1 });
```

è€Œå‡½æ•°å¼ç»„ä»¶ç”¨ `useState`ï¼Œæ›´ç»†ç²’åº¦ï¼Œæ¯æ¬¡æ›´æ–°æ˜¯æ›¿æ¢è€Œä¸æ˜¯åˆå¹¶ï¼š

```jsx
setCount(count + 1);
```

**ä¸¾ä¸ªä¾‹å­**ï¼šå‡è®¾ä½ è¦ç®¡ç†ä¸€ä¸ªè¡¨å•ï¼Œç±»ç»„ä»¶å¾—è¿™ä¹ˆå†™ï¼š

```jsx
class Form extends React.Component {
  state = { name: "", age: 0 };

  handleChange = (e) => {
    this.setState({ [e.target.name]: e.target.value });
  };

  render() {
    return (
      <form>
        <input name="name" value={this.state.name} onChange={this.handleChange} />
        <input name="age" value={this.state.age} onChange={this.handleChange} />
      </form>
    );
  }
}
```

å‡½æ•°å¼ç»„ä»¶å‘¢ï¼Ÿç®€æ´å¾—å¤šï¼š

```jsx
function Form() {
  const [form, setForm] = useState({ name: "", age: 0 });

  const handleChange = (e) => {
    setForm((prev) => ({ ...prev, [e.target.name]: e.target.value }));
  };

  return (
    <form>
      <input name="name" value={form.name} onChange={handleChange} />
      <input name="age" value={form.age} onChange={handleChange} />
    </form>
  );
}
```

**æœ€ä½³å®è·µ**: åœ¨å‡½æ•°å¼ç»„ä»¶ä¸­ï¼Œå¤æ‚çš„å¤šå­—æ®µçŠ¶æ€å¯ä»¥ç”¨ `useReducer` æ›¿ä»£å¤šä¸ª `useState`ï¼Œé€»è¾‘æ›´æ¸…æ™°ã€‚ç±»ç»„ä»¶åˆ™åªèƒ½é  `setState` çš„å›è°ƒç¡¬æ’‘ã€‚

**å° Tips**: `setState` æ˜¯å¼‚æ­¥çš„ï¼Œåˆ«æŒ‡æœ›ç«‹åˆ»æ‹¿åˆ°æ–°çŠ¶æ€ã€‚å‡½æ•°å¼ç»„ä»¶çš„ `setCount` ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œä½†å¯ä»¥ç”¨å‡½æ•°å¼æ›´æ–°ï¼ˆå¦‚ `setCount(prev => prev + 1)`ï¼‰é¿å…é—®é¢˜ã€‚

---

### 2.2 å‰¯ä½œç”¨ï¼šç”Ÿå‘½å‘¨æœŸ vs Hooks

ç±»ç»„ä»¶é ç”Ÿå‘½å‘¨æœŸæ–¹æ³•å¤„ç†å‰¯ä½œç”¨ï¼Œæ¯”å¦‚ `componentDidMount`ã€`componentDidUpdate`ï¼š

```jsx
class DataFetcher extends React.Component {
  state = { data: null };

  componentDidMount() {
    fetch("https://api.example.com/data")
      .then((res) => res.json())
      .then((data) => this.setState({ data }));
  }

  render() {
    return <div>{this.state.data ? this.state.data.message : "Loading..."}</div>;
  }
}
```

å‡½æ•°å¼ç»„ä»¶ç”¨ `useEffect`ï¼š

```jsx
function DataFetcher() {
  const [data, setData] = useState(null);

  useEffect(() => {
    fetch("https://api.example.com/data")
      .then((res) => res.json())
      .then((data) => setData(data));
  }, []); // ç©ºä¾èµ–æ•°ç»„æ¨¡æ‹Ÿ componentDidMount

  return <div>{data ? data.message : "Loading..."}</div>;
}
```

**ç±»æ¯”**ï¼šç”Ÿå‘½å‘¨æœŸåƒä¸ªä¸¥æ ¼çš„å‰§æœ¬ï¼ŒæŒ‰éƒ¨å°±ç­ï¼›`useEffect` åˆ™åƒä¸ªè‡ªç”±çš„å¯¼æ¼”ï¼Œæƒ³å•¥æ—¶å€™æ‹å•¥æ—¶å€™æ‹ã€‚

**æœ€ä½³å®è·µ**: ç”¨ `useEffect` æ—¶ï¼Œè®°å¾—æ¸…ç†å‰¯ä½œç”¨ï¼ˆè¿”å› cleanup å‡½æ•°ï¼‰ï¼Œæ¯”å¦‚å–æ¶ˆè®¢é˜…ã€æ¸…é™¤å®šæ—¶å™¨ï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚

**å° Tips**: å¦‚æœä½ åœ¨ `useEffect` é‡Œé¢‘ç¹é‡åˆ°ä¾èµ–æ•°ç»„é—®é¢˜ï¼Œè¯•ç€æŠŠé€»è¾‘æ‹†æˆå¤šä¸ª `useEffect`ï¼Œæ¯ä¸ªåªå…³æ³¨ä¸€ä¸ªâ€œèŒè´£â€ã€‚

---

### 2.3 æ€§èƒ½ï¼šè°æ›´å¿«ï¼Ÿ

ç±»ç»„ä»¶å› ä¸ºå®ä¾‹åŒ–å’Œç”Ÿå‘½å‘¨æœŸçš„å¼€é”€ï¼Œæ€§èƒ½ä¸Šå¤©ç„¶æ¯”å‡½æ•°å¼ç»„ä»¶å¤šä¸€ç‚¹è´Ÿæ‹…ã€‚å‡½æ•°å¼ç»„ä»¶æ˜¯â€œæ— çŠ¶æ€â€çš„ï¼ˆå½“ç„¶æœ‰äº† Hooks ä¹Ÿèƒ½æœ‰çŠ¶æ€ï¼‰ï¼ŒReact åªéœ€è¦è°ƒç”¨å‡½æ•°ï¼Œå°‘äº†å¾ˆå¤šä¸­é—´æ­¥éª¤ã€‚

**å¹½é»˜ç‚¹**ï¼šç±»ç»„ä»¶å°±åƒä¸ªè€å¼è’¸æ±½ç«è½¦ï¼Œè·‘å¾—ç¨³ä½†è´¹ç…¤ï¼›å‡½æ•°å¼ç»„ä»¶åˆ™æ˜¯ç”µåŠ¨è½¦ï¼Œè½»å¿«åˆçœç”µã€‚

**æœ€ä½³å®è·µ**: å°å‹ç»„ä»¶ç”¨å‡½æ•°å¼ç»„ä»¶ï¼Œæ€§èƒ½æ›´ä¼˜ã€‚å¦‚æœæœ‰å¤§é‡çŠ¶æ€å’Œå¤æ‚é€»è¾‘ï¼Œç±»ç»„ä»¶çš„ç»“æ„åŒ–å¯èƒ½æ›´é€‚åˆï¼ˆä½†ç°ä»£é¡¹ç›®åŸºæœ¬éƒ½ç”¨ Hooks + `useReducer` è§£å†³äº†ï¼‰ã€‚

**å° Tips**: ç”¨ React.memo åŒ…è£¹å‡½æ•°å¼ç»„ä»¶ï¼Œå¯ä»¥é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“ï¼Œæ€§èƒ½å†ä¸Šä¸€å±‚æ¥¼ã€‚

---

## ä¸‰ã€ä½¿ç”¨åœºæ™¯ï¼šè¯¥é€‰è°ï¼Ÿ

- **å‡½æ•°å¼ç»„ä»¶**ï¼šç°ä»£ React çš„é»˜è®¤é€‰æ‹©ï¼Œé€‚åˆ 90% çš„åœºæ™¯ï¼Œå°¤å…¶æ˜¯æ–°é¡¹ç›®ã€‚Hooks çš„çµæ´»æ€§è®©å®ƒå‡ ä¹æ— æ•Œã€‚
- **ç±»ç»„ä»¶**ï¼šè€é¡¹ç›®ç»´æŠ¤ã€éœ€è¦ Error Boundaryï¼ˆ`componentDidCatch`ï¼‰ï¼Œæˆ–è€…ä½ å°±æ˜¯å–œæ¬¢ OOP çš„é‚£ä¸€å¥—ã€‚

**ä¸¾ä¸ªä¾‹å­**ï¼šError Boundary ç›®å‰åªèƒ½ç”¨ç±»ç»„ä»¶å®ç°ï¼š

```jsx
class ErrorBoundary extends React.Component {
  state = { hasError: false };

  static getDerivedStateFromError(error) {
    return { hasError: true };
  }

  render() {
    if (this.state.hasError) {
      return <h1>å‡ºé”™äº†ï¼</h1>;
    }
    return this.props.children;
  }
}
```

å‡½æ•°å¼ç»„ä»¶æš‚æ—¶è¿˜æ²¡æ³•æ¥è¿™ä¸ªæ´»å„¿ã€‚

---

## å››ã€æˆ‘çš„çœ‹æ³•ï¼šå‡½æ•°å¼ç»„ä»¶çš„â€œæ–°ä¸–ç•Œâ€

è¯´å®è¯ï¼ŒHooks å‡ºæ¥åï¼Œç±»ç»„ä»¶å°±åƒè€å¼çš„ç¿»ç›–æ‰‹æœºï¼Œè™½ç„¶ç»å…¸ï¼Œä½†ç»ˆç©¶è¢«è§¦å±æ‰‹æœºå–ä»£ã€‚å‡½æ•°å¼ç»„ä»¶ä¸ä»…ä»£ç æ›´å°‘ï¼Œè¿˜æ›´ç¬¦åˆç°ä»£ JavaScript çš„å‡½æ•°å¼ç¼–ç¨‹è¶‹åŠ¿ï¼ˆFP çˆ±å¥½è€…ç‹‚å–œï¼ï¼‰ã€‚å½“ç„¶ï¼Œç±»ç»„ä»¶ä¹Ÿä¸æ˜¯ä¸€æ— æ˜¯å¤„ï¼Œå®ƒåœ¨æŸäº›ç‰¹å®šåœºæ™¯ï¼ˆæ¯”å¦‚ Error Boundaryï¼‰ä¾ç„¶æ˜¯â€œæœ€åçš„å€”å¼ºâ€ã€‚

**ç±»æ¯”**ï¼šç±»ç»„ä»¶åƒä¸€æœ¬åšé‡çš„æ•™ç§‘ä¹¦ï¼Œæ•™æ¡ä½†å…¨é¢ï¼›å‡½æ•°å¼ç»„ä»¶åˆ™æ˜¯ç¬”è®°æœ¬ï¼Œéšæ‰‹è®°ä¸‹çµæ„Ÿï¼Œæƒ³åˆ°å“ªå†™åˆ°å“ªã€‚

---
