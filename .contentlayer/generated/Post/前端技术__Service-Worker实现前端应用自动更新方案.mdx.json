{
  "title": "åŸºäºŽ Service Worker å®žçŽ°å‰ç«¯åº”ç”¨è‡ªåŠ¨æ›´æ–°æ–¹æ¡ˆ",
  "date": "2024-03-04T00:00:00.000Z",
  "description": "æ·±å…¥æŽ¢è®¨å¦‚ä½•åˆ©ç”¨ Service Worker å®žçŽ°å‰ç«¯åº”ç”¨çš„è‡ªåŠ¨æ›´æ–°ï¼Œæ¶µç›–åŽŸç†ã€å®žçŽ°æ­¥éª¤ã€æœ€ä½³å®žè·µå’Œå®žæˆ˜æ¡ˆä¾‹ï¼ŒåŠ©åŠ›å¼€å‘è€…æ‰“é€ ä¸æ»‘çš„ç”¨æˆ·ä½“éªŒã€‚",
  "keywords": "Service Worker, å‰ç«¯è‡ªåŠ¨æ›´æ–°, PWA, ç¦»çº¿ç¼“å­˜, Web å¼€å‘, JavaScript",
  "author": "æ™“é¾™",
  "image": "/images/hero/service-worker-auto-update.jpg",
  "tags": [
    "Service Worker",
    "PWA",
    "å‰ç«¯å¼€å‘",
    "JavaScript"
  ],
  "views": 0,
  "likes": 0,
  "category": "å‰ç«¯æŠ€æœ¯",
  "body": {
    "raw": "\nå˜¿ï¼Œå‰ç«¯å°ä¼™ä¼´ä»¬ï¼ðŸ‘‹ ä½ æœ‰æ²¡æœ‰é‡åˆ°è¿‡è¿™æ ·çš„å°´å°¬åœºæ™¯ï¼šç”¨æˆ·æ­£åœ¨ç”¨ä½ çš„ Web åº”ç”¨ï¼Œçªç„¶ä½ ä¸Šçº¿äº†ä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼Œä½†ç”¨æˆ·è¿˜åœç•™åœ¨æ—§ç‰ˆæœ¬ï¼Œç”šè‡³åˆ·æ–°éƒ½æ²¡ç”¨ï¼Œç›´åˆ°ä½ è‹¦å£å©†å¿ƒåœ°åŠä»–ä»¬â€œæ¸…ä¸‹ç¼“å­˜å†è¯•è¯•â€ï¼Ÿåˆ«ç¬‘ï¼Œè¿™ç§â€œçŽ„å­¦æ“ä½œâ€åœ¨å‰ç«¯å¼€å‘ä¸­ç®€ç›´æ˜¯å®¶å¸¸ä¾¿é¥­ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥èŠèŠå¦‚ä½•ç”¨ **Service Worker** è¿™ä¸ªâ€œå¹•åŽè‹±é›„â€å®žçŽ°å‰ç«¯åº”ç”¨çš„è‡ªåŠ¨æ›´æ–°ï¼Œè®©ç”¨æˆ·ä½“éªŒä¸æ»‘å¦‚å¥¶èŒ¶ ðŸ§‹ï¼Œå¼€å‘è€…å¿ƒæƒ…ç¾Žæ»‹æ»‹ã€‚\n\nè¿™ç¯‡æ–‡ç« ä¼šå¸¦ä½ ä»ŽåŽŸç†åˆ°å®žè·µï¼Œæ·±å…¥ Service Worker çš„â€œçµé­‚æ·±å¤„â€ï¼Œä¸ä»…æœ‰å¹²è´§ä»£ç ï¼Œè¿˜æœ‰æœ€ä½³å®žè·µå’Œä¸€äº›â€œé¿å‘æŒ‡å—â€ã€‚æ— è®ºä½ æ˜¯ PWA æ–°æ‰‹è¿˜æ˜¯è€å¸æœºï¼Œç›¸ä¿¡éƒ½èƒ½æœ‰æ‰€æ”¶èŽ·ã€‚å‡†å¤‡å¥½äº†å—ï¼Ÿè®©æˆ‘ä»¬å¼€å§‹å§ï¼ðŸš€\n\n## ä»€ä¹ˆæ˜¯ Service Workerï¼Ÿç®€å•èŠèŠå®ƒçš„â€œå‰ä¸–ä»Šç”Ÿâ€\n\nService Worker æœ¬è´¨ä¸Šæ˜¯è¿è¡Œåœ¨æµè§ˆå™¨åŽå°çš„ä¸€ä¸ª JavaScript çº¿ç¨‹ï¼Œç‹¬ç«‹äºŽä¸»çº¿ç¨‹ï¼Œä¸“é—¨ç”¨æ¥å¤„ç†ç½‘ç»œè¯·æ±‚ã€ç¼“å­˜èµ„æºå’ŒæŽ¨é€é€šçŸ¥ã€‚å®ƒæ˜¯ Progressive Web Appï¼ˆPWAï¼‰çš„æ ¸å¿ƒæ”¯æŸ±ä¹‹ä¸€ï¼Œå ªç§°â€œå‰ç«¯çš„è¶…çº§ç®¡å®¶â€ã€‚\n\nç±»æ¯”ä¸€ä¸‹ï¼Œæƒ³è±¡ Service Worker æ˜¯ä½ å®¶é‡Œçš„æ™ºèƒ½ç®¡å®¶ï¼šå½“ä½ ä¸åœ¨å®¶æ—¶ï¼Œå®ƒèƒ½å¸®ä½ æŽ¥å¿«é€’ï¼ˆæ‹¦æˆªç½‘ç»œè¯·æ±‚ï¼‰ã€æ•´ç†å†°ç®±ï¼ˆç®¡ç†ç¼“å­˜ï¼‰ï¼Œç”šè‡³è¿˜èƒ½åœ¨ä½ å›žå®¶å‰æé†’ä½ â€œä»Šå¤©æœ‰æ–°é‚®ä»¶â€ï¼ˆæŽ¨é€é€šçŸ¥ï¼‰ã€‚è€Œä»Šå¤©æˆ‘ä»¬è¦èŠçš„ï¼Œæ˜¯å¦‚ä½•è®©è¿™ä¸ªç®¡å®¶åœ¨â€œå¿«é€’æ›´æ–°â€æ—¶ï¼Œè‡ªåŠ¨é€šçŸ¥ä½ â€œæœ‰æ–°è´§åˆ°å•¦â€â€”â€”ä¹Ÿå°±æ˜¯å‰ç«¯åº”ç”¨çš„è‡ªåŠ¨æ›´æ–°ã€‚\n\n**Tips #1**: Service Worker åªåœ¨ HTTPS çŽ¯å¢ƒä¸‹å·¥ä½œï¼ˆæœ¬åœ°å¼€å‘é™¤å¤–ï¼‰ï¼Œæ‰€ä»¥ä¸Šçº¿å‰è®°å¾—æ£€æŸ¥ä½ çš„åŸŸåå®‰å…¨è¯ä¹¦ï¼Œä¸ç„¶å®ƒä¼šç›´æŽ¥ç½¢å·¥ï¼Œç»™ä½ æŠ›ä¸ª `SecurityError`ã€‚\n\n## ä¸ºä»€ä¹ˆéœ€è¦è‡ªåŠ¨æ›´æ–°ï¼Ÿ\n\nåœ¨ä¼ ç»Ÿçš„ Web åº”ç”¨ä¸­ï¼Œç”¨æˆ·è®¿é—®é¡µé¢æ—¶èŽ·å–çš„æ˜¯æœåŠ¡å™¨ä¸Šçš„æœ€æ–°èµ„æºã€‚ä½†å¦‚æžœä½ çš„åº”ç”¨æ˜¯ä¸ªå•é¡µåº”ç”¨ï¼ˆSPAï¼‰ï¼Œæˆ–è€…ä¾èµ–å¤§é‡é™æ€èµ„æºï¼Œç”¨æˆ·å¯èƒ½å› ä¸ºæµè§ˆå™¨ç¼“å­˜è€Œä¸€ç›´åœç•™åœ¨æ—§ç‰ˆæœ¬ã€‚æ›´åˆ«æé‚£ç§â€œç”¨æˆ·å¼€äº†åå‡ ä¸ª Tabï¼Œæ¯ä¸ª Tab ç‰ˆæœ¬è¿˜ä¸ä¸€æ ·â€çš„æ··ä¹±å±€é¢äº†ï¼ˆç®€ç›´æ˜¯å‰ç«¯å¼€å‘è€…çš„å™©æ¢¦ ðŸ˜±ï¼‰ã€‚\n\nService Worker èƒ½å¸®æˆ‘ä»¬è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å®ƒä¸ä»…å¯ä»¥ç¼“å­˜èµ„æºï¼Œè¿˜èƒ½åœ¨æ–°ç‰ˆæœ¬ä¸Šçº¿æ—¶ï¼Œä¸»åŠ¨æ›´æ–°ç¼“å­˜å¹¶é€šçŸ¥ç”¨æˆ·åˆ·æ–°é¡µé¢ã€‚å¬èµ·æ¥æ˜¯ä¸æ˜¯å¾ˆè´´å¿ƒï¼ŸæŽ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ä¸€æ­¥æ­¥æ­å¼€å®ƒçš„å®žçŽ°åŽŸç†ã€‚\n\n## è‡ªåŠ¨æ›´æ–°çš„æ ¸å¿ƒåŽŸç†\n\nService Worker çš„ç”Ÿå‘½å‘¨æœŸæ˜¯å®žçŽ°è‡ªåŠ¨æ›´æ–°çš„å…³é”®ã€‚å®ƒæœ‰ä¸‰ä¸ªä¸»è¦çŠ¶æ€ï¼š\n\n1. **Installingï¼ˆå®‰è£…ä¸­ï¼‰**: æ–° Service Worker è¢«æ³¨å†Œï¼Œå¼€å§‹ä¸‹è½½å¹¶å®‰è£…ã€‚\n2. **Waitingï¼ˆç­‰å¾…ä¸­ï¼‰**: æ–°ç‰ˆæœ¬å®‰è£…å®Œæˆï¼Œä½†æ—§ç‰ˆæœ¬è¿˜åœ¨æŽ§åˆ¶é¡µé¢ï¼Œå¾—ç­‰æ‰€æœ‰æ—§é¡µé¢å…³é—­ã€‚\n3. **Activeï¼ˆæ¿€æ´»ä¸­ï¼‰**: æ–°ç‰ˆæœ¬æŽ¥ç®¡é¡µé¢ï¼Œå¼€å§‹å·¥ä½œã€‚\n\nè‡ªåŠ¨æ›´æ–°çš„æ ¸å¿ƒåœ¨äºŽï¼šå½“æ£€æµ‹åˆ°æ–°ç‰ˆæœ¬çš„ Service Worker æ–‡ä»¶æ—¶ï¼Œæµè§ˆå™¨ä¼šè§¦å‘ `update` æµç¨‹ï¼Œä¸‹è½½æ–°æ–‡ä»¶å¹¶è¿›å…¥ `waiting` çŠ¶æ€ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ç›‘å¬è¿™äº›äº‹ä»¶ï¼Œä¸»åŠ¨æç¤ºç”¨æˆ·åˆ·æ–°ï¼Œæˆ–è€…ç›´æŽ¥å¼ºåˆ¶æ›´æ–°ã€‚\n\n**ç±»æ¯”æ—¶é—´**: å‡è®¾ä½ æ˜¯ä¸ªé¤åŽ…è€æ¿ï¼ŒService Worker æ˜¯ä½ çš„æœåŠ¡å‘˜ã€‚æ–°èœå•ï¼ˆæ–°ç‰ˆæœ¬ï¼‰æ¥äº†ï¼Œè€æœåŠ¡å‘˜è¿˜åœ¨å¿™ç€ä¼ºå€™è€é¡¾å®¢ï¼ˆæ—§é¡µé¢ï¼‰ï¼Œæ–°æœåŠ¡å‘˜åªèƒ½åœ¨ä¸€æ—ç­‰ç€ï¼ˆwaitingï¼‰ã€‚ä½ å¾—æƒ³åŠžæ³•è®©è€æœåŠ¡å‘˜â€œä¸‹ç­â€ï¼Œæ–°æœåŠ¡å‘˜ä¸Šå²—ã€‚\n\n## å®žçŽ°è‡ªåŠ¨æ›´æ–°çš„å®žæˆ˜æ–¹æ¡ˆ\n\nå¥½äº†ï¼Œç†è®ºèŠå¤Ÿäº†ï¼Œå’±ä»¬ç›´æŽ¥ä¸Šæ‰‹å¹²æ´»ï¼ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„å®žçŽ°æ–¹æ¡ˆï¼Œåˆ†æ­¥éª¤æ‹†è§£ã€‚\n\n### 1. æ³¨å†Œ Service Worker\n\né¦–å…ˆï¼Œåœ¨ä½ çš„å…¥å£æ–‡ä»¶ï¼ˆæ¯”å¦‚ `index.js`ï¼‰ä¸­æ³¨å†Œ Service Workerï¼š\n\n```javascript\n// sw-register.js\nif ('serviceWorker' in navigator) {\n  window.addEventListener('load', () => {\n    navigator.serviceWorker\n      .register('/sw.js')\n      .then((registration) => {\n        console.log('Service Worker æ³¨å†ŒæˆåŠŸ ðŸŽ‰', registration);\n      })\n      .catch((err) => {\n        console.error('Service Worker æ³¨å†Œå¤±è´¥ ðŸ˜¢', err);\n      });\n  });\n}\n```\n\nè¿™é‡Œçš„ `/sw.js` æ˜¯ä½ çš„ Service Worker æ–‡ä»¶è·¯å¾„ã€‚è®°å¾—åœ¨ HTML ä¸­å¼•å…¥è¿™ä¸ªæ³¨å†Œè„šæœ¬ï¼š\n\n```html\n<script src=\"/sw-register.js\"></script>\n```\n\n**Tips #2**: æ³¨å†Œæ—¶å¯ä»¥ç”¨ `scope` å‚æ•°é™åˆ¶ Service Worker çš„æŽ§åˆ¶èŒƒå›´ï¼Œæ¯”å¦‚ `navigator.serviceWorker.register('/sw.js', { scope: '/app/' })`ï¼Œè¿™æ ·å®ƒåªç®¡ `/app/` ä¸‹çš„èµ„æºã€‚\n\n### 2. ç¼–å†™ Service Worker é€»è¾‘\n\næŽ¥ä¸‹æ¥ï¼Œåœ¨ `sw.js` ä¸­å®žçŽ°ç¼“å­˜å’Œæ›´æ–°é€»è¾‘ï¼š\n\n```javascript\n// sw.js\nconst CACHE_NAME = 'my-app-cache-v1';\nconst urlsToCache = ['/', '/index.html', '/styles.css', '/app.js'];\n\n// å®‰è£…é˜¶æ®µï¼šç¼“å­˜åˆå§‹èµ„æº\nself.addEventListener('install', (event) => {\n  event.waitUntil(\n    caches.open(CACHE_NAME).then((cache) => {\n      console.log('ç¼“å­˜å¼€å¯ï¼Œèµ„æºåŠ è½½ä¸­...');\n      return cache.addAll(urlsToCache);\n    })\n  );\n});\n\n// æ¿€æ´»é˜¶æ®µï¼šæ¸…ç†æ—§ç¼“å­˜\nself.addEventListener('activate', (event) => {\n  event.waitUntil(\n    caches.keys().then((cacheNames) => {\n      return Promise.all(\n        cacheNames.map((name) => {\n          if (name !== CACHE_NAME) {\n            console.log(`æ¸…ç†æ—§ç¼“å­˜ï¼š${name}`);\n            return caches.delete(name);\n          }\n        })\n      );\n    })\n  );\n  // ç«‹å³æŽ¥ç®¡é¡µé¢\n  self.clients.claim();\n});\n\n// æ‹¦æˆªè¯·æ±‚ï¼šä»Žç¼“å­˜ä¸­è¯»å–\nself.addEventListener('fetch', (event) => {\n  event.respondWith(\n    caches.match(event.request).then((response) => {\n      return response || fetch(event.request);\n    })\n  );\n});\n```\n\nè¿™æ®µä»£ç å®žçŽ°äº†åŸºæœ¬çš„ç¼“å­˜é€»è¾‘ï¼Œä½†è¿˜æ²¡æ¶‰åŠæ›´æ–°æ£€æµ‹ã€‚åˆ«æ€¥ï¼Œå’±ä»¬æŽ¥ç€åŠ æ–™ï¼\n\n### 3. æ£€æµ‹æ–°ç‰ˆæœ¬å¹¶é€šçŸ¥ç”¨æˆ·\n\nä¸ºäº†å®žçŽ°è‡ªåŠ¨æ›´æ–°ï¼Œæˆ‘ä»¬éœ€è¦ç›‘å¬ Service Worker çš„æ›´æ–°äº‹ä»¶ã€‚å›žåˆ°æ³¨å†Œä»£ç ï¼Œæ·»åŠ æ›´æ–°æ£€æµ‹ï¼š\n\n```javascript\n// sw-register.js\nif ('serviceWorker' in navigator) {\n  window.addEventListener('load', () => {\n    navigator.serviceWorker\n      .register('/sw.js')\n      .then((registration) => {\n        console.log('Service Worker æ³¨å†ŒæˆåŠŸ ðŸŽ‰', registration);\n\n        // æ£€æŸ¥æ›´æ–°\n        registration.addEventListener('updatefound', () => {\n          const newWorker = registration.installing;\n          console.log('å‘çŽ°æ–°ç‰ˆæœ¬ï¼');\n\n          newWorker.addEventListener('statechange', () => {\n            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {\n              // æ–°ç‰ˆæœ¬å·²å®‰è£…ï¼Œæ—§ç‰ˆæœ¬è¿˜åœ¨è¿è¡Œ\n              showUpdateNotification(registration);\n            }\n          });\n        });\n      });\n  });\n}\n\nfunction showUpdateNotification(registration) {\n  const updateBtn = document.createElement('button');\n  updateBtn.textContent = 'æœ‰æ–°ç‰ˆæœ¬å•¦ï¼Œç‚¹å‡»æ›´æ–°ï¼';\n  updateBtn.style.cssText = 'position: fixed; bottom: 20px; right: 20px; padding: 10px;';\n  updateBtn.onclick = () => {\n    registration.waiting.postMessage({ type: 'SKIP_WAITING' });\n  };\n  document.body.appendChild(updateBtn);\n}\n```\n\nç„¶åŽåœ¨ `sw.js` ä¸­å“åº”è¿™ä¸ªæ¶ˆæ¯ï¼š\n\n```javascript\n// sw.js\nself.addEventListener('message', (event) => {\n  if (event.data && event.data.type === 'SKIP_WAITING') {\n    self.skipWaiting();\n  }\n});\n```\n\n**Tips #3**: `skipWaiting()` è®©æ–°ç‰ˆæœ¬ç«‹å³æ¿€æ´»ï¼Œä½†è¦å°å¿ƒï¼Œå¦‚æžœç”¨æˆ·æ­£åœ¨å¡«å†™è¡¨å•ï¼Œå¼ºåˆ¶åˆ·æ–°å¯èƒ½ä¼šä¸¢å¤±æ•°æ®ã€‚å»ºè®®åŠ ä¸ªç¡®è®¤å¼¹çª—ï¼Œæ¯”å¦‚ `confirm('æœ‰æ–°ç‰ˆæœ¬ï¼Œæ˜¯å¦ç«‹å³æ›´æ–°ï¼Ÿ')`ã€‚\n\n### 4. å¼ºåˆ¶åˆ·æ–°é¡µé¢\n\næ–°ç‰ˆæœ¬æ¿€æ´»åŽï¼Œé¡µé¢è¿˜å¾—åˆ·æ–°æ‰èƒ½ç”Ÿæ•ˆã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ `clients` API é€šçŸ¥æ‰€æœ‰é¡µé¢ï¼š\n\n```javascript\n// sw.js\nself.addEventListener('activate', (event) => {\n  event.waitUntil(\n    Promise.all([\n      caches.keys().then((cacheNames) => {\n        return Promise.all(\n          cacheNames.map((name) => {\n            if (name !== CACHE_NAME) {\n              return caches.delete(name);\n            }\n          })\n        );\n      }),\n      self.clients.claim().then(() => {\n        self.clients.matchAll().then((clients) => {\n          clients.forEach((client) => {\n            client.postMessage({ type: 'RELOAD' });\n          });\n        });\n      }),\n    ])\n  );\n});\n```\n\nç„¶åŽåœ¨å®¢æˆ·ç«¯ç›‘å¬æ¶ˆæ¯ï¼š\n\n```javascript\n// sw-register.js\nnavigator.serviceWorker.addEventListener('message', (event) => {\n  if (event.data && event.data.type === 'RELOAD') {\n    window.location.reload();\n  }\n});\n```\n\n**Tips #4**: å¦‚æžœä½ çš„åº”ç”¨æœ‰å¤æ‚çš„çŠ¶æ€ç®¡ç†ï¼ˆæ¯”å¦‚ Reduxï¼‰ï¼Œå¯ä»¥åœ¨åˆ·æ–°å‰ä¿å­˜çŠ¶æ€åˆ° `localStorage`ï¼Œåˆ·æ–°åŽå†æ¢å¤ï¼Œå‡å°‘ç”¨æˆ·æ„ŸçŸ¥çš„ä¸­æ–­ã€‚\n\n## æœ€ä½³å®žè·µä¸Žé¿å‘æŒ‡å—\n\nå®žçŽ°è‡ªåŠ¨æ›´æ–°åªæ˜¯ç¬¬ä¸€æ­¥ï¼Œæ€Žä¹ˆè®©å®ƒæ›´ç¨³å®šã€æ›´ä¼˜é›…ï¼Ÿè¿™é‡Œæœ‰å‡ æ¡å®žæˆ˜ç»éªŒï¼š\n\n1. **ç‰ˆæœ¬åŒ–ç¼“å­˜å**  \n   ç”¨ç‰ˆæœ¬å·å‘½åç¼“å­˜ï¼ˆæ¯”å¦‚ `my-app-cache-v2`ï¼‰ï¼Œæ¯æ¬¡éƒ¨ç½²æ–°ç‰ˆæœ¬æ—¶æ›´æ–°åå­—ï¼Œé¿å…æ—§ç¼“å­˜å¹²æ‰°æ–°é€»è¾‘ã€‚  \n   **Tips #5**: å¯ä»¥ç”¨æž„å»ºå·¥å…·ï¼ˆå¦‚ Webpackï¼‰ç”ŸæˆåŠ¨æ€ç‰ˆæœ¬å·ï¼Œå†™å…¥ `sw.js`ã€‚\n\n2. **ä¼˜é›…æç¤ºç”¨æˆ·**  \n   åˆ«ç›´æŽ¥åˆ·æ–°é¡µé¢ï¼Œè¯•è¯•ç”¨ Toast ç»„ä»¶æç¤ºç”¨æˆ·ï¼Œæˆ–è€…åŠ ä¸ªå€’è®¡æ—¶ï¼ˆâ€œ5ç§’åŽè‡ªåŠ¨æ›´æ–°â€ï¼‰ï¼Œä½“éªŒæ›´å‹å¥½ã€‚  \n   **Tips #6**: ç”¨ CSS åŠ¨ç”»è®©æç¤ºæ¡†â€œé£žå…¥â€ï¼Œç”¨æˆ·ä¼šè§‰å¾—ä½ å¾ˆç”¨å¿ƒã€‚\n\n3. **å¤„ç†ç½‘ç»œå¼‚å¸¸**  \n   å¦‚æžœæ–°ç‰ˆæœ¬ä¸‹è½½å¤±è´¥ï¼Œfallback åˆ°æ—§ç¼“å­˜ï¼Œåˆ«è®©ç”¨æˆ·çœ‹åˆ°ç™½å±ã€‚  \n   **Tips #7**: åœ¨ `fetch` äº‹ä»¶ä¸­åŠ ä¸ª `catch`ï¼Œè¿”å›ž `caches.match(event.request)`ã€‚\n\n4. **è°ƒè¯•ç¥žå™¨**  \n   Chrome DevTools çš„ Application é¢æ¿å¯ä»¥å¼ºåˆ¶æ›´æ–°æˆ–è·³è¿‡ç­‰å¾…ï¼Œå¼€å‘æ—¶å¤šç”¨ç”¨ï¼Œçœå¾—æŠ“çžŽã€‚  \n   **Tips #8**: æ‰“å¼€ â€œUpdate on reloadâ€ å¼€å…³ï¼Œæ¯æ¬¡åˆ·æ–°éƒ½è§¦å‘æ›´æ–°ï¼Œæµ‹è¯•è¶…æ–¹ä¾¿ã€‚\n\n## å®žæˆ˜æ¡ˆä¾‹ï¼šä¸€ä¸ªç®€å•çš„ To-Do App\n\nå‡è®¾ä½ æœ‰ä¸ª To-Do åº”ç”¨ï¼Œç”¨æˆ·å¯ä»¥æ·»åŠ ä»»åŠ¡ã€‚æ–°ç‰ˆæœ¬ä¸Šçº¿æ—¶ï¼Œä½ åŠ äº†ä¸ªâ€œä»»åŠ¡ä¼˜å…ˆçº§â€åŠŸèƒ½ã€‚æ€Žä¹ˆè®©ç”¨æˆ·æ— ç¼åˆ‡æ¢åˆ°æ–°ç‰ˆæœ¬ï¼Ÿ\n\n1. æ›´æ–° `sw.js`ï¼Œç¼“å­˜æ–°èµ„æºï¼ˆæ¯”å¦‚ `priority.js`ï¼‰ã€‚\n2. ç”¨æˆ·æ‰“å¼€åº”ç”¨æ—¶ï¼Œæ—§ç‰ˆæœ¬ä»åœ¨è¿è¡Œï¼ŒService Worker ä¸‹è½½æ–°ç‰ˆæœ¬ã€‚\n3. æç¤ºâ€œæœ‰æ–°åŠŸèƒ½å•¦ï¼Œç‚¹å‡»ä½“éªŒï¼â€ã€‚\n4. ç”¨æˆ·ç‚¹å‡»åŽï¼Œæ–°ç‰ˆæœ¬æ¿€æ´»ï¼Œé¡µé¢åˆ·æ–°ï¼Œä»»åŠ¡ä¼˜å…ˆçº§åŠŸèƒ½å°±ä¸Šçº¿äº†ã€‚\n\n**å°å½©è›‹**: å¦‚æžœç”¨æˆ·ç‚¹äº†â€œç¨åŽæ›´æ–°â€ï¼Œä½ å¯ä»¥æŠŠæç¤ºå­˜åˆ° `localStorage`ï¼Œä¸‹æ¬¡æ‰“å¼€æ—¶å†æé†’ï¼Œåˆ«å¤ªâ€œå¼ºè¿«ç—‡â€åœ°åˆ·å±ã€‚\n\n## é‡åˆ°é—®é¢˜æ€Žä¹ˆåŠžï¼Ÿ\n\n- **Service Worker ä¸æ›´æ–°ï¼Ÿ**  \n  æ£€æŸ¥æ–‡ä»¶åæˆ–å†…å®¹æœ‰æ²¡æœ‰å˜ï¼Œæµè§ˆå™¨åªåœ¨å­—èŠ‚çº§åˆ«å·®å¼‚æ—¶è§¦å‘æ›´æ–°ã€‚åŠ ä¸ªç‰ˆæœ¬æ³¨é‡Šï¼ˆ`// v1.0.1`ï¼‰è¯•è¯•ã€‚\n- **ç¼“å­˜ç‚¸äº†ï¼Ÿ**  \n  å®šæœŸæ¸…ç†æ— ç”¨ç¼“å­˜ï¼Œåˆ«è®©ç”¨æˆ·æµè§ˆå™¨å˜æˆâ€œåžƒåœ¾åœºâ€ã€‚\n- **ç”¨æˆ·ä½“éªŒå¡é¡¿ï¼Ÿ**  \n  å»¶è¿ŸåŠ è½½éžæ ¸å¿ƒèµ„æºï¼Œç”¨ `IntersectionObserver` é…åˆ Service Workerï¼Œæ‡’åŠ è½½å›¾ç‰‡å•¥çš„ã€‚\n\n## æ€»ç»“ï¼šService Worker çš„â€œé­”æ³•â€\n\nService Worker å°±åƒå‰ç«¯çš„â€œéšå½¢å®ˆæŠ¤è€…â€ï¼Œä¸ä»…èƒ½ç¼“å­˜èµ„æºï¼Œè¿˜èƒ½è®©ä½ çš„åº”ç”¨è‡ªåŠ¨æ›´æ–°ï¼Œå ªç§°çŽ°ä»£ Web å¼€å‘çš„ Swiss Army Knifeï¼ˆç‘žå£«å†›åˆ€ï¼‰ã€‚é€šè¿‡åˆç†çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†å’Œæ¶ˆæ¯é€šä¿¡ï¼Œæˆ‘ä»¬å¯ä»¥æ‰“é€ ä¸€ä¸ªâ€œç”¨æˆ·æ— æ„ŸçŸ¥â€çš„æ›´æ–°ä½“éªŒã€‚\n\nå½“ç„¶ï¼Œå®ƒä¹Ÿä¸æ˜¯ä¸‡èƒ½çš„ã€‚å®žçŽ°è‡ªåŠ¨æ›´æ–°éœ€è¦æƒè¡¡ç”¨æˆ·ä½“éªŒå’ŒæŠ€æœ¯å¤æ‚åº¦ï¼Œä½†ä¸€æ—¦æžå®šï¼Œä½ çš„ Web åº”ç”¨å°±ä¼šä»Žâ€œæ‰‹åŠ¨æŒ¡â€å‡çº§åˆ°â€œè‡ªåŠ¨æŒ¡â€ï¼Œå¼€å‘è€…å’Œç”¨æˆ·éƒ½èƒ½ä¹å¼€èŠ± ðŸŒ¸ã€‚\n\næœ‰ä»€ä¹ˆæƒ³æ³•æˆ–é—®é¢˜ï¼Ÿæ¬¢è¿Žç•™è¨€ï¼Œå’±ä»¬ä¸€èµ·æŽ¢è®¨ï¼æ¯•ç«Ÿï¼Œå‰ç«¯è¿™æ¡è·¯ï¼Œä¸å°±æ˜¯è¾¹è¸©å‘è¾¹æˆé•¿å˜› ðŸ˜„ã€‚\n\n---",
    "code": "var Component=(()=>{var p=Object.create;var c=Object.defineProperty;var E=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var F=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var u=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports),B=(l,e)=>{for(var r in e)c(l,r,{get:e[r],enumerable:!0})},i=(l,e,r,s)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let a of y(e))!g.call(l,a)&&a!==r&&c(l,a,{get:()=>e[a],enumerable:!(s=E(e,a))||s.enumerable});return l};var v=(l,e,r)=>(r=l!=null?p(F(l)):{},i(e||!l||!l.__esModule?c(r,\"default\",{value:l,enumerable:!0}):r,l)),k=l=>i(c({},\"__esModule\",{value:!0}),l);var t=u((W,d)=>{d.exports=_jsx_runtime});var m={};B(m,{default:()=>h,frontmatter:()=>f});var n=v(t()),f={type:\"Post\",title:\"\\u57FA\\u4E8E Service Worker \\u5B9E\\u73B0\\u524D\\u7AEF\\u5E94\\u7528\\u81EA\\u52A8\\u66F4\\u65B0\\u65B9\\u6848\",date:\"2024-03-04\",description:\"\\u6DF1\\u5165\\u63A2\\u8BA8\\u5982\\u4F55\\u5229\\u7528 Service Worker \\u5B9E\\u73B0\\u524D\\u7AEF\\u5E94\\u7528\\u7684\\u81EA\\u52A8\\u66F4\\u65B0\\uFF0C\\u6DB5\\u76D6\\u539F\\u7406\\u3001\\u5B9E\\u73B0\\u6B65\\u9AA4\\u3001\\u6700\\u4F73\\u5B9E\\u8DF5\\u548C\\u5B9E\\u6218\\u6848\\u4F8B\\uFF0C\\u52A9\\u529B\\u5F00\\u53D1\\u8005\\u6253\\u9020\\u4E1D\\u6ED1\\u7684\\u7528\\u6237\\u4F53\\u9A8C\\u3002\",keywords:\"Service Worker, \\u524D\\u7AEF\\u81EA\\u52A8\\u66F4\\u65B0, PWA, \\u79BB\\u7EBF\\u7F13\\u5B58, Web \\u5F00\\u53D1, JavaScript\",author:\"\\u6653\\u9F99\",image:\"/images/hero/service-worker-auto-update.jpg\",tags:[\"Service Worker\",\"PWA\",\"\\u524D\\u7AEF\\u5F00\\u53D1\",\"JavaScript\"],category:\"\\u524D\\u7AEF\\u6280\\u672F\"};function o(l){let e={a:\"a\",br:\"br\",code:\"code\",figure:\"figure\",h2:\"h2\",h3:\"h3\",hr:\"hr\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...l.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"\\u563F\\uFF0C\\u524D\\u7AEF\\u5C0F\\u4F19\\u4F34\\u4EEC\\uFF01\\u{1F44B} \\u4F60\\u6709\\u6CA1\\u6709\\u9047\\u5230\\u8FC7\\u8FD9\\u6837\\u7684\\u5C34\\u5C2C\\u573A\\u666F\\uFF1A\\u7528\\u6237\\u6B63\\u5728\\u7528\\u4F60\\u7684 Web \\u5E94\\u7528\\uFF0C\\u7A81\\u7136\\u4F60\\u4E0A\\u7EBF\\u4E86\\u4E00\\u4E2A\\u65B0\\u7248\\u672C\\uFF0C\\u4F46\\u7528\\u6237\\u8FD8\\u505C\\u7559\\u5728\\u65E7\\u7248\\u672C\\uFF0C\\u751A\\u81F3\\u5237\\u65B0\\u90FD\\u6CA1\\u7528\\uFF0C\\u76F4\\u5230\\u4F60\\u82E6\\u53E3\\u5A46\\u5FC3\\u5730\\u529D\\u4ED6\\u4EEC\\u201C\\u6E05\\u4E0B\\u7F13\\u5B58\\u518D\\u8BD5\\u8BD5\\u201D\\uFF1F\\u522B\\u7B11\\uFF0C\\u8FD9\\u79CD\\u201C\\u7384\\u5B66\\u64CD\\u4F5C\\u201D\\u5728\\u524D\\u7AEF\\u5F00\\u53D1\\u4E2D\\u7B80\\u76F4\\u662F\\u5BB6\\u5E38\\u4FBF\\u996D\\u3002\\u4ECA\\u5929\\uFF0C\\u6211\\u4EEC\\u5C31\\u6765\\u804A\\u804A\\u5982\\u4F55\\u7528 \",(0,n.jsx)(e.strong,{children:\"Service Worker\"}),\" \\u8FD9\\u4E2A\\u201C\\u5E55\\u540E\\u82F1\\u96C4\\u201D\\u5B9E\\u73B0\\u524D\\u7AEF\\u5E94\\u7528\\u7684\\u81EA\\u52A8\\u66F4\\u65B0\\uFF0C\\u8BA9\\u7528\\u6237\\u4F53\\u9A8C\\u4E1D\\u6ED1\\u5982\\u5976\\u8336 \\u{1F9CB}\\uFF0C\\u5F00\\u53D1\\u8005\\u5FC3\\u60C5\\u7F8E\\u6ECB\\u6ECB\\u3002\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u8FD9\\u7BC7\\u6587\\u7AE0\\u4F1A\\u5E26\\u4F60\\u4ECE\\u539F\\u7406\\u5230\\u5B9E\\u8DF5\\uFF0C\\u6DF1\\u5165 Service Worker \\u7684\\u201C\\u7075\\u9B42\\u6DF1\\u5904\\u201D\\uFF0C\\u4E0D\\u4EC5\\u6709\\u5E72\\u8D27\\u4EE3\\u7801\\uFF0C\\u8FD8\\u6709\\u6700\\u4F73\\u5B9E\\u8DF5\\u548C\\u4E00\\u4E9B\\u201C\\u907F\\u5751\\u6307\\u5357\\u201D\\u3002\\u65E0\\u8BBA\\u4F60\\u662F PWA \\u65B0\\u624B\\u8FD8\\u662F\\u8001\\u53F8\\u673A\\uFF0C\\u76F8\\u4FE1\\u90FD\\u80FD\\u6709\\u6240\\u6536\\u83B7\\u3002\\u51C6\\u5907\\u597D\\u4E86\\u5417\\uFF1F\\u8BA9\\u6211\\u4EEC\\u5F00\\u59CB\\u5427\\uFF01\\u{1F680}\"}),`\n`,(0,n.jsx)(e.h2,{id:\"\\u4EC0\\u4E48\\u662F-service-worker\\u7B80\\u5355\\u804A\\u804A\\u5B83\\u7684\\u524D\\u4E16\\u4ECA\\u751F\",children:(0,n.jsx)(e.a,{href:\"#\\u4EC0\\u4E48\\u662F-service-worker\\u7B80\\u5355\\u804A\\u804A\\u5B83\\u7684\\u524D\\u4E16\\u4ECA\\u751F\",children:\"\\u4EC0\\u4E48\\u662F Service Worker\\uFF1F\\u7B80\\u5355\\u804A\\u804A\\u5B83\\u7684\\u201C\\u524D\\u4E16\\u4ECA\\u751F\\u201D\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Service Worker \\u672C\\u8D28\\u4E0A\\u662F\\u8FD0\\u884C\\u5728\\u6D4F\\u89C8\\u5668\\u540E\\u53F0\\u7684\\u4E00\\u4E2A JavaScript \\u7EBF\\u7A0B\\uFF0C\\u72EC\\u7ACB\\u4E8E\\u4E3B\\u7EBF\\u7A0B\\uFF0C\\u4E13\\u95E8\\u7528\\u6765\\u5904\\u7406\\u7F51\\u7EDC\\u8BF7\\u6C42\\u3001\\u7F13\\u5B58\\u8D44\\u6E90\\u548C\\u63A8\\u9001\\u901A\\u77E5\\u3002\\u5B83\\u662F Progressive Web App\\uFF08PWA\\uFF09\\u7684\\u6838\\u5FC3\\u652F\\u67F1\\u4E4B\\u4E00\\uFF0C\\u582A\\u79F0\\u201C\\u524D\\u7AEF\\u7684\\u8D85\\u7EA7\\u7BA1\\u5BB6\\u201D\\u3002\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u7C7B\\u6BD4\\u4E00\\u4E0B\\uFF0C\\u60F3\\u8C61 Service Worker \\u662F\\u4F60\\u5BB6\\u91CC\\u7684\\u667A\\u80FD\\u7BA1\\u5BB6\\uFF1A\\u5F53\\u4F60\\u4E0D\\u5728\\u5BB6\\u65F6\\uFF0C\\u5B83\\u80FD\\u5E2E\\u4F60\\u63A5\\u5FEB\\u9012\\uFF08\\u62E6\\u622A\\u7F51\\u7EDC\\u8BF7\\u6C42\\uFF09\\u3001\\u6574\\u7406\\u51B0\\u7BB1\\uFF08\\u7BA1\\u7406\\u7F13\\u5B58\\uFF09\\uFF0C\\u751A\\u81F3\\u8FD8\\u80FD\\u5728\\u4F60\\u56DE\\u5BB6\\u524D\\u63D0\\u9192\\u4F60\\u201C\\u4ECA\\u5929\\u6709\\u65B0\\u90AE\\u4EF6\\u201D\\uFF08\\u63A8\\u9001\\u901A\\u77E5\\uFF09\\u3002\\u800C\\u4ECA\\u5929\\u6211\\u4EEC\\u8981\\u804A\\u7684\\uFF0C\\u662F\\u5982\\u4F55\\u8BA9\\u8FD9\\u4E2A\\u7BA1\\u5BB6\\u5728\\u201C\\u5FEB\\u9012\\u66F4\\u65B0\\u201D\\u65F6\\uFF0C\\u81EA\\u52A8\\u901A\\u77E5\\u4F60\\u201C\\u6709\\u65B0\\u8D27\\u5230\\u5566\\u201D\\u2014\\u2014\\u4E5F\\u5C31\\u662F\\u524D\\u7AEF\\u5E94\\u7528\\u7684\\u81EA\\u52A8\\u66F4\\u65B0\\u3002\"}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Tips #1\"}),\": Service Worker \\u53EA\\u5728 HTTPS \\u73AF\\u5883\\u4E0B\\u5DE5\\u4F5C\\uFF08\\u672C\\u5730\\u5F00\\u53D1\\u9664\\u5916\\uFF09\\uFF0C\\u6240\\u4EE5\\u4E0A\\u7EBF\\u524D\\u8BB0\\u5F97\\u68C0\\u67E5\\u4F60\\u7684\\u57DF\\u540D\\u5B89\\u5168\\u8BC1\\u4E66\\uFF0C\\u4E0D\\u7136\\u5B83\\u4F1A\\u76F4\\u63A5\\u7F62\\u5DE5\\uFF0C\\u7ED9\\u4F60\\u629B\\u4E2A \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"SecurityError\"})})})}),\"\\u3002\"]}),`\n`,(0,n.jsx)(e.h2,{id:\"\\u4E3A\\u4EC0\\u4E48\\u9700\\u8981\\u81EA\\u52A8\\u66F4\\u65B0\",children:(0,n.jsx)(e.a,{href:\"#\\u4E3A\\u4EC0\\u4E48\\u9700\\u8981\\u81EA\\u52A8\\u66F4\\u65B0\",children:\"\\u4E3A\\u4EC0\\u4E48\\u9700\\u8981\\u81EA\\u52A8\\u66F4\\u65B0\\uFF1F\"})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5728\\u4F20\\u7EDF\\u7684 Web \\u5E94\\u7528\\u4E2D\\uFF0C\\u7528\\u6237\\u8BBF\\u95EE\\u9875\\u9762\\u65F6\\u83B7\\u53D6\\u7684\\u662F\\u670D\\u52A1\\u5668\\u4E0A\\u7684\\u6700\\u65B0\\u8D44\\u6E90\\u3002\\u4F46\\u5982\\u679C\\u4F60\\u7684\\u5E94\\u7528\\u662F\\u4E2A\\u5355\\u9875\\u5E94\\u7528\\uFF08SPA\\uFF09\\uFF0C\\u6216\\u8005\\u4F9D\\u8D56\\u5927\\u91CF\\u9759\\u6001\\u8D44\\u6E90\\uFF0C\\u7528\\u6237\\u53EF\\u80FD\\u56E0\\u4E3A\\u6D4F\\u89C8\\u5668\\u7F13\\u5B58\\u800C\\u4E00\\u76F4\\u505C\\u7559\\u5728\\u65E7\\u7248\\u672C\\u3002\\u66F4\\u522B\\u63D0\\u90A3\\u79CD\\u201C\\u7528\\u6237\\u5F00\\u4E86\\u5341\\u51E0\\u4E2A Tab\\uFF0C\\u6BCF\\u4E2A Tab \\u7248\\u672C\\u8FD8\\u4E0D\\u4E00\\u6837\\u201D\\u7684\\u6DF7\\u4E71\\u5C40\\u9762\\u4E86\\uFF08\\u7B80\\u76F4\\u662F\\u524D\\u7AEF\\u5F00\\u53D1\\u8005\\u7684\\u5669\\u68A6 \\u{1F631}\\uFF09\\u3002\"}),`\n`,(0,n.jsx)(e.p,{children:\"Service Worker \\u80FD\\u5E2E\\u6211\\u4EEC\\u89E3\\u51B3\\u8FD9\\u4E2A\\u95EE\\u9898\\u3002\\u5B83\\u4E0D\\u4EC5\\u53EF\\u4EE5\\u7F13\\u5B58\\u8D44\\u6E90\\uFF0C\\u8FD8\\u80FD\\u5728\\u65B0\\u7248\\u672C\\u4E0A\\u7EBF\\u65F6\\uFF0C\\u4E3B\\u52A8\\u66F4\\u65B0\\u7F13\\u5B58\\u5E76\\u901A\\u77E5\\u7528\\u6237\\u5237\\u65B0\\u9875\\u9762\\u3002\\u542C\\u8D77\\u6765\\u662F\\u4E0D\\u662F\\u5F88\\u8D34\\u5FC3\\uFF1F\\u63A5\\u4E0B\\u6765\\uFF0C\\u6211\\u4EEC\\u5C31\\u4E00\\u6B65\\u6B65\\u63ED\\u5F00\\u5B83\\u7684\\u5B9E\\u73B0\\u539F\\u7406\\u3002\"}),`\n`,(0,n.jsx)(e.h2,{id:\"\\u81EA\\u52A8\\u66F4\\u65B0\\u7684\\u6838\\u5FC3\\u539F\\u7406\",children:(0,n.jsx)(e.a,{href:\"#\\u81EA\\u52A8\\u66F4\\u65B0\\u7684\\u6838\\u5FC3\\u539F\\u7406\",children:\"\\u81EA\\u52A8\\u66F4\\u65B0\\u7684\\u6838\\u5FC3\\u539F\\u7406\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Service Worker \\u7684\\u751F\\u547D\\u5468\\u671F\\u662F\\u5B9E\\u73B0\\u81EA\\u52A8\\u66F4\\u65B0\\u7684\\u5173\\u952E\\u3002\\u5B83\\u6709\\u4E09\\u4E2A\\u4E3B\\u8981\\u72B6\\u6001\\uFF1A\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Installing\\uFF08\\u5B89\\u88C5\\u4E2D\\uFF09\"}),\": \\u65B0 Service Worker \\u88AB\\u6CE8\\u518C\\uFF0C\\u5F00\\u59CB\\u4E0B\\u8F7D\\u5E76\\u5B89\\u88C5\\u3002\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Waiting\\uFF08\\u7B49\\u5F85\\u4E2D\\uFF09\"}),\": \\u65B0\\u7248\\u672C\\u5B89\\u88C5\\u5B8C\\u6210\\uFF0C\\u4F46\\u65E7\\u7248\\u672C\\u8FD8\\u5728\\u63A7\\u5236\\u9875\\u9762\\uFF0C\\u5F97\\u7B49\\u6240\\u6709\\u65E7\\u9875\\u9762\\u5173\\u95ED\\u3002\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Active\\uFF08\\u6FC0\\u6D3B\\u4E2D\\uFF09\"}),\": \\u65B0\\u7248\\u672C\\u63A5\\u7BA1\\u9875\\u9762\\uFF0C\\u5F00\\u59CB\\u5DE5\\u4F5C\\u3002\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u81EA\\u52A8\\u66F4\\u65B0\\u7684\\u6838\\u5FC3\\u5728\\u4E8E\\uFF1A\\u5F53\\u68C0\\u6D4B\\u5230\\u65B0\\u7248\\u672C\\u7684 Service Worker \\u6587\\u4EF6\\u65F6\\uFF0C\\u6D4F\\u89C8\\u5668\\u4F1A\\u89E6\\u53D1 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"update\"})})})}),\" \\u6D41\\u7A0B\\uFF0C\\u4E0B\\u8F7D\\u65B0\\u6587\\u4EF6\\u5E76\\u8FDB\\u5165 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"waiting\"})})})}),\" \\u72B6\\u6001\\u3002\\u6211\\u4EEC\\u53EF\\u4EE5\\u901A\\u8FC7\\u76D1\\u542C\\u8FD9\\u4E9B\\u4E8B\\u4EF6\\uFF0C\\u4E3B\\u52A8\\u63D0\\u793A\\u7528\\u6237\\u5237\\u65B0\\uFF0C\\u6216\\u8005\\u76F4\\u63A5\\u5F3A\\u5236\\u66F4\\u65B0\\u3002\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"\\u7C7B\\u6BD4\\u65F6\\u95F4\"}),\": \\u5047\\u8BBE\\u4F60\\u662F\\u4E2A\\u9910\\u5385\\u8001\\u677F\\uFF0CService Worker \\u662F\\u4F60\\u7684\\u670D\\u52A1\\u5458\\u3002\\u65B0\\u83DC\\u5355\\uFF08\\u65B0\\u7248\\u672C\\uFF09\\u6765\\u4E86\\uFF0C\\u8001\\u670D\\u52A1\\u5458\\u8FD8\\u5728\\u5FD9\\u7740\\u4F3A\\u5019\\u8001\\u987E\\u5BA2\\uFF08\\u65E7\\u9875\\u9762\\uFF09\\uFF0C\\u65B0\\u670D\\u52A1\\u5458\\u53EA\\u80FD\\u5728\\u4E00\\u65C1\\u7B49\\u7740\\uFF08waiting\\uFF09\\u3002\\u4F60\\u5F97\\u60F3\\u529E\\u6CD5\\u8BA9\\u8001\\u670D\\u52A1\\u5458\\u201C\\u4E0B\\u73ED\\u201D\\uFF0C\\u65B0\\u670D\\u52A1\\u5458\\u4E0A\\u5C97\\u3002\"]}),`\n`,(0,n.jsx)(e.h2,{id:\"\\u5B9E\\u73B0\\u81EA\\u52A8\\u66F4\\u65B0\\u7684\\u5B9E\\u6218\\u65B9\\u6848\",children:(0,n.jsx)(e.a,{href:\"#\\u5B9E\\u73B0\\u81EA\\u52A8\\u66F4\\u65B0\\u7684\\u5B9E\\u6218\\u65B9\\u6848\",children:\"\\u5B9E\\u73B0\\u81EA\\u52A8\\u66F4\\u65B0\\u7684\\u5B9E\\u6218\\u65B9\\u6848\"})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u597D\\u4E86\\uFF0C\\u7406\\u8BBA\\u804A\\u591F\\u4E86\\uFF0C\\u54B1\\u4EEC\\u76F4\\u63A5\\u4E0A\\u624B\\u5E72\\u6D3B\\uFF01\\u4E0B\\u9762\\u662F\\u4E00\\u4E2A\\u5B8C\\u6574\\u7684\\u5B9E\\u73B0\\u65B9\\u6848\\uFF0C\\u5206\\u6B65\\u9AA4\\u62C6\\u89E3\\u3002\"}),`\n`,(0,n.jsx)(e.h3,{id:\"1-\\u6CE8\\u518C-service-worker\",children:(0,n.jsx)(e.a,{href:\"#1-\\u6CE8\\u518C-service-worker\",children:\"1. \\u6CE8\\u518C Service Worker\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u9996\\u5148\\uFF0C\\u5728\\u4F60\\u7684\\u5165\\u53E3\\u6587\\u4EF6\\uFF08\\u6BD4\\u5982 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"index.js\"})})})}),\"\\uFF09\\u4E2D\\u6CE8\\u518C Service Worker\\uFF1A\"]}),`\n`,(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// sw-register.js\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"if\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'serviceWorker'\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" in\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" navigator) {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  window.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"addEventListener\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'load'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", () \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    navigator.serviceWorker\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      .\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"register\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'/sw.js'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\")\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      .\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,n.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"registration\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        console.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'Service Worker \\u6CE8\\u518C\\u6210\\u529F \\u{1F389}'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", registration);\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      })\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      .\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"catch\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,n.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"err\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        console.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"error\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'Service Worker \\u6CE8\\u518C\\u5931\\u8D25 \\u{1F622}'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", err);\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      });\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  });\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u8FD9\\u91CC\\u7684 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"/sw.js\"})})})}),\" \\u662F\\u4F60\\u7684 Service Worker \\u6587\\u4EF6\\u8DEF\\u5F84\\u3002\\u8BB0\\u5F97\\u5728 HTML \\u4E2D\\u5F15\\u5165\\u8FD9\\u4E2A\\u6CE8\\u518C\\u811A\\u672C\\uFF1A\"]}),`\n`,(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"html\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.code,{\"data-language\":\"html\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"script\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" src\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"/sw-register.js\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"></\"}),(0,n.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"script\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\">\"})]})})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Tips #2\"}),\": \\u6CE8\\u518C\\u65F6\\u53EF\\u4EE5\\u7528 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"scope\"})})})}),\" \\u53C2\\u6570\\u9650\\u5236 Service Worker \\u7684\\u63A7\\u5236\\u8303\\u56F4\\uFF0C\\u6BD4\\u5982 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"navigator.serviceWorker.register('/sw.js', { scope: '/app/' })\"})})})}),\"\\uFF0C\\u8FD9\\u6837\\u5B83\\u53EA\\u7BA1 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"/app/\"})})})}),\" \\u4E0B\\u7684\\u8D44\\u6E90\\u3002\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"2-\\u7F16\\u5199-service-worker-\\u903B\\u8F91\",children:(0,n.jsx)(e.a,{href:\"#2-\\u7F16\\u5199-service-worker-\\u903B\\u8F91\",children:\"2. \\u7F16\\u5199 Service Worker \\u903B\\u8F91\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u63A5\\u4E0B\\u6765\\uFF0C\\u5728 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"sw.js\"})})})}),\" \\u4E2D\\u5B9E\\u73B0\\u7F13\\u5B58\\u548C\\u66F4\\u65B0\\u903B\\u8F91\\uFF1A\"]}),`\n`,(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// sw.js\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" CACHE_NAME\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" 'my-app-cache-v1'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" urlsToCache\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" [\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'/'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'/index.html'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'/styles.css'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'/app.js'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"];\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u5B89\\u88C5\\u9636\\u6BB5\\uFF1A\\u7F13\\u5B58\\u521D\\u59CB\\u8D44\\u6E90\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"self.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"addEventListener\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'install'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"event\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  event.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"waitUntil\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    caches.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"open\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"CACHE_NAME\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\").\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,n.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"cache\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      console.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u7F13\\u5B58\\u5F00\\u542F\\uFF0C\\u8D44\\u6E90\\u52A0\\u8F7D\\u4E2D...'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"      return\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" cache.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"addAll\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(urlsToCache);\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    })\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  );\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u6FC0\\u6D3B\\u9636\\u6BB5\\uFF1A\\u6E05\\u7406\\u65E7\\u7F13\\u5B58\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"self.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"addEventListener\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'activate'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"event\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  event.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"waitUntil\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    caches.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"keys\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"().\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,n.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"cacheNames\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"      return\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" Promise\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"all\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        cacheNames.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"map\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,n.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"name\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"          if\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (name \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"!==\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" CACHE_NAME\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"            console.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"`\\u6E05\\u7406\\u65E7\\u7F13\\u5B58\\uFF1A${\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"name\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"}`\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"            return\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" caches.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"delete\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(name);\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"          }\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        })\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      );\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    })\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  );\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"  // \\u7ACB\\u5373\\u63A5\\u7BA1\\u9875\\u9762\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  self.clients.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"claim\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u62E6\\u622A\\u8BF7\\u6C42\\uFF1A\\u4ECE\\u7F13\\u5B58\\u4E2D\\u8BFB\\u53D6\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"self.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"addEventListener\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'fetch'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"event\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  event.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"respondWith\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    caches.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"match\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(event.request).\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,n.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"response\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"      return\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" response \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"||\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" fetch\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(event.request);\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    })\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  );\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u8FD9\\u6BB5\\u4EE3\\u7801\\u5B9E\\u73B0\\u4E86\\u57FA\\u672C\\u7684\\u7F13\\u5B58\\u903B\\u8F91\\uFF0C\\u4F46\\u8FD8\\u6CA1\\u6D89\\u53CA\\u66F4\\u65B0\\u68C0\\u6D4B\\u3002\\u522B\\u6025\\uFF0C\\u54B1\\u4EEC\\u63A5\\u7740\\u52A0\\u6599\\uFF01\"}),`\n`,(0,n.jsx)(e.h3,{id:\"3-\\u68C0\\u6D4B\\u65B0\\u7248\\u672C\\u5E76\\u901A\\u77E5\\u7528\\u6237\",children:(0,n.jsx)(e.a,{href:\"#3-\\u68C0\\u6D4B\\u65B0\\u7248\\u672C\\u5E76\\u901A\\u77E5\\u7528\\u6237\",children:\"3. \\u68C0\\u6D4B\\u65B0\\u7248\\u672C\\u5E76\\u901A\\u77E5\\u7528\\u6237\"})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u4E3A\\u4E86\\u5B9E\\u73B0\\u81EA\\u52A8\\u66F4\\u65B0\\uFF0C\\u6211\\u4EEC\\u9700\\u8981\\u76D1\\u542C Service Worker \\u7684\\u66F4\\u65B0\\u4E8B\\u4EF6\\u3002\\u56DE\\u5230\\u6CE8\\u518C\\u4EE3\\u7801\\uFF0C\\u6DFB\\u52A0\\u66F4\\u65B0\\u68C0\\u6D4B\\uFF1A\"}),`\n`,(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// sw-register.js\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"if\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'serviceWorker'\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" in\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" navigator) {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  window.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"addEventListener\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'load'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", () \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    navigator.serviceWorker\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      .\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"register\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'/sw.js'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\")\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      .\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,n.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"registration\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        console.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'Service Worker \\u6CE8\\u518C\\u6210\\u529F \\u{1F389}'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", registration);\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"        // \\u68C0\\u67E5\\u66F4\\u65B0\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        registration.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"addEventListener\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'updatefound'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", () \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"          const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" newWorker\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" registration.installing;\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"          console.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u53D1\\u73B0\\u65B0\\u7248\\u672C\\uFF01'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"          newWorker.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"addEventListener\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'statechange'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", () \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"            if\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (newWorker.state \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"===\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" 'installed'\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" &&\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" navigator.serviceWorker.controller) {\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"              // \\u65B0\\u7248\\u672C\\u5DF2\\u5B89\\u88C5\\uFF0C\\u65E7\\u7248\\u672C\\u8FD8\\u5728\\u8FD0\\u884C\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"              showUpdateNotification\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(registration);\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"            }\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"          });\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        });\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      });\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  });\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"function\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" showUpdateNotification\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"registration\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" updateBtn\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" document.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"createElement\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'button'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  updateBtn.textContent \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" '\\u6709\\u65B0\\u7248\\u672C\\u5566\\uFF0C\\u70B9\\u51FB\\u66F4\\u65B0\\uFF01'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  updateBtn.style.cssText \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" 'position: fixed; bottom: 20px; right: 20px; padding: 10px;'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  updateBtn.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"onclick\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    registration.waiting.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"postMessage\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"({ type: \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'SKIP_WAITING'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" });\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  };\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  document.body.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"appendChild\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(updateBtn);\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u7136\\u540E\\u5728 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"sw.js\"})})})}),\" \\u4E2D\\u54CD\\u5E94\\u8FD9\\u4E2A\\u6D88\\u606F\\uFF1A\"]}),`\n`,(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// sw.js\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"self.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"addEventListener\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'message'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"event\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  if\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (event.data \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"&&\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" event.data.type \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"===\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" 'SKIP_WAITING'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    self.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"skipWaiting\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Tips #3\"}),\": \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"skipWaiting()\"})})})}),\" \\u8BA9\\u65B0\\u7248\\u672C\\u7ACB\\u5373\\u6FC0\\u6D3B\\uFF0C\\u4F46\\u8981\\u5C0F\\u5FC3\\uFF0C\\u5982\\u679C\\u7528\\u6237\\u6B63\\u5728\\u586B\\u5199\\u8868\\u5355\\uFF0C\\u5F3A\\u5236\\u5237\\u65B0\\u53EF\\u80FD\\u4F1A\\u4E22\\u5931\\u6570\\u636E\\u3002\\u5EFA\\u8BAE\\u52A0\\u4E2A\\u786E\\u8BA4\\u5F39\\u7A97\\uFF0C\\u6BD4\\u5982 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"confirm('\\u6709\\u65B0\\u7248\\u672C\\uFF0C\\u662F\\u5426\\u7ACB\\u5373\\u66F4\\u65B0\\uFF1F')\"})})})}),\"\\u3002\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"4-\\u5F3A\\u5236\\u5237\\u65B0\\u9875\\u9762\",children:(0,n.jsx)(e.a,{href:\"#4-\\u5F3A\\u5236\\u5237\\u65B0\\u9875\\u9762\",children:\"4. \\u5F3A\\u5236\\u5237\\u65B0\\u9875\\u9762\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u65B0\\u7248\\u672C\\u6FC0\\u6D3B\\u540E\\uFF0C\\u9875\\u9762\\u8FD8\\u5F97\\u5237\\u65B0\\u624D\\u80FD\\u751F\\u6548\\u3002\\u6211\\u4EEC\\u53EF\\u4EE5\\u901A\\u8FC7 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"clients\"})})})}),\" API \\u901A\\u77E5\\u6240\\u6709\\u9875\\u9762\\uFF1A\"]}),`\n`,(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// sw.js\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"self.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"addEventListener\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'activate'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"event\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  event.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"waitUntil\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"    Promise\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"all\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"([\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      caches.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"keys\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"().\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,n.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"cacheNames\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"        return\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" Promise\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"all\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"          cacheNames.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"map\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,n.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"name\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"            if\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (name \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"!==\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" CACHE_NAME\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"              return\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" caches.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"delete\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(name);\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"            }\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"          })\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        );\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      }),\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      self.clients.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"claim\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"().\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(() \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        self.clients.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"matchAll\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"().\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,n.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"clients\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"          clients.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"forEach\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,n.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"client\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"            client.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"postMessage\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"({ type: \"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'RELOAD'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" });\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"          });\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        });\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      }),\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    ])\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  );\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u7136\\u540E\\u5728\\u5BA2\\u6237\\u7AEF\\u76D1\\u542C\\u6D88\\u606F\\uFF1A\"}),`\n`,(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// sw-register.js\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"navigator.serviceWorker.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"addEventListener\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'message'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"event\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  if\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (event.data \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"&&\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" event.data.type \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"===\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" 'RELOAD'\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    window.location.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"reload\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Tips #4\"}),\": \\u5982\\u679C\\u4F60\\u7684\\u5E94\\u7528\\u6709\\u590D\\u6742\\u7684\\u72B6\\u6001\\u7BA1\\u7406\\uFF08\\u6BD4\\u5982 Redux\\uFF09\\uFF0C\\u53EF\\u4EE5\\u5728\\u5237\\u65B0\\u524D\\u4FDD\\u5B58\\u72B6\\u6001\\u5230 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"localStorage\"})})})}),\"\\uFF0C\\u5237\\u65B0\\u540E\\u518D\\u6062\\u590D\\uFF0C\\u51CF\\u5C11\\u7528\\u6237\\u611F\\u77E5\\u7684\\u4E2D\\u65AD\\u3002\"]}),`\n`,(0,n.jsx)(e.h2,{id:\"\\u6700\\u4F73\\u5B9E\\u8DF5\\u4E0E\\u907F\\u5751\\u6307\\u5357\",children:(0,n.jsx)(e.a,{href:\"#\\u6700\\u4F73\\u5B9E\\u8DF5\\u4E0E\\u907F\\u5751\\u6307\\u5357\",children:\"\\u6700\\u4F73\\u5B9E\\u8DF5\\u4E0E\\u907F\\u5751\\u6307\\u5357\"})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5B9E\\u73B0\\u81EA\\u52A8\\u66F4\\u65B0\\u53EA\\u662F\\u7B2C\\u4E00\\u6B65\\uFF0C\\u600E\\u4E48\\u8BA9\\u5B83\\u66F4\\u7A33\\u5B9A\\u3001\\u66F4\\u4F18\\u96C5\\uFF1F\\u8FD9\\u91CC\\u6709\\u51E0\\u6761\\u5B9E\\u6218\\u7ECF\\u9A8C\\uFF1A\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"\\u7248\\u672C\\u5316\\u7F13\\u5B58\\u540D\"}),(0,n.jsx)(e.br,{}),`\n`,\"\\u7528\\u7248\\u672C\\u53F7\\u547D\\u540D\\u7F13\\u5B58\\uFF08\\u6BD4\\u5982 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"my-app-cache-v2\"})})})}),\"\\uFF09\\uFF0C\\u6BCF\\u6B21\\u90E8\\u7F72\\u65B0\\u7248\\u672C\\u65F6\\u66F4\\u65B0\\u540D\\u5B57\\uFF0C\\u907F\\u514D\\u65E7\\u7F13\\u5B58\\u5E72\\u6270\\u65B0\\u903B\\u8F91\\u3002\",(0,n.jsx)(e.br,{}),`\n`,(0,n.jsx)(e.strong,{children:\"Tips #5\"}),\": \\u53EF\\u4EE5\\u7528\\u6784\\u5EFA\\u5DE5\\u5177\\uFF08\\u5982 Webpack\\uFF09\\u751F\\u6210\\u52A8\\u6001\\u7248\\u672C\\u53F7\\uFF0C\\u5199\\u5165 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"sw.js\"})})})}),\"\\u3002\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"\\u4F18\\u96C5\\u63D0\\u793A\\u7528\\u6237\"}),(0,n.jsx)(e.br,{}),`\n`,\"\\u522B\\u76F4\\u63A5\\u5237\\u65B0\\u9875\\u9762\\uFF0C\\u8BD5\\u8BD5\\u7528 Toast \\u7EC4\\u4EF6\\u63D0\\u793A\\u7528\\u6237\\uFF0C\\u6216\\u8005\\u52A0\\u4E2A\\u5012\\u8BA1\\u65F6\\uFF08\\u201C5\\u79D2\\u540E\\u81EA\\u52A8\\u66F4\\u65B0\\u201D\\uFF09\\uFF0C\\u4F53\\u9A8C\\u66F4\\u53CB\\u597D\\u3002\",(0,n.jsx)(e.br,{}),`\n`,(0,n.jsx)(e.strong,{children:\"Tips #6\"}),\": \\u7528 CSS \\u52A8\\u753B\\u8BA9\\u63D0\\u793A\\u6846\\u201C\\u98DE\\u5165\\u201D\\uFF0C\\u7528\\u6237\\u4F1A\\u89C9\\u5F97\\u4F60\\u5F88\\u7528\\u5FC3\\u3002\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"\\u5904\\u7406\\u7F51\\u7EDC\\u5F02\\u5E38\"}),(0,n.jsx)(e.br,{}),`\n`,\"\\u5982\\u679C\\u65B0\\u7248\\u672C\\u4E0B\\u8F7D\\u5931\\u8D25\\uFF0Cfallback \\u5230\\u65E7\\u7F13\\u5B58\\uFF0C\\u522B\\u8BA9\\u7528\\u6237\\u770B\\u5230\\u767D\\u5C4F\\u3002\",(0,n.jsx)(e.br,{}),`\n`,(0,n.jsx)(e.strong,{children:\"Tips #7\"}),\": \\u5728 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"fetch\"})})})}),\" \\u4E8B\\u4EF6\\u4E2D\\u52A0\\u4E2A \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"catch\"})})})}),\"\\uFF0C\\u8FD4\\u56DE \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"caches.match(event.request)\"})})})}),\"\\u3002\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"\\u8C03\\u8BD5\\u795E\\u5668\"}),(0,n.jsx)(e.br,{}),`\n`,\"Chrome DevTools \\u7684 Application \\u9762\\u677F\\u53EF\\u4EE5\\u5F3A\\u5236\\u66F4\\u65B0\\u6216\\u8DF3\\u8FC7\\u7B49\\u5F85\\uFF0C\\u5F00\\u53D1\\u65F6\\u591A\\u7528\\u7528\\uFF0C\\u7701\\u5F97\\u6293\\u778E\\u3002\",(0,n.jsx)(e.br,{}),`\n`,(0,n.jsx)(e.strong,{children:\"Tips #8\"}),\": \\u6253\\u5F00 \\u201CUpdate on reload\\u201D \\u5F00\\u5173\\uFF0C\\u6BCF\\u6B21\\u5237\\u65B0\\u90FD\\u89E6\\u53D1\\u66F4\\u65B0\\uFF0C\\u6D4B\\u8BD5\\u8D85\\u65B9\\u4FBF\\u3002\"]}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.h2,{id:\"\\u5B9E\\u6218\\u6848\\u4F8B\\u4E00\\u4E2A\\u7B80\\u5355\\u7684-to-do-app\",children:(0,n.jsx)(e.a,{href:\"#\\u5B9E\\u6218\\u6848\\u4F8B\\u4E00\\u4E2A\\u7B80\\u5355\\u7684-to-do-app\",children:\"\\u5B9E\\u6218\\u6848\\u4F8B\\uFF1A\\u4E00\\u4E2A\\u7B80\\u5355\\u7684 To-Do App\"})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5047\\u8BBE\\u4F60\\u6709\\u4E2A To-Do \\u5E94\\u7528\\uFF0C\\u7528\\u6237\\u53EF\\u4EE5\\u6DFB\\u52A0\\u4EFB\\u52A1\\u3002\\u65B0\\u7248\\u672C\\u4E0A\\u7EBF\\u65F6\\uFF0C\\u4F60\\u52A0\\u4E86\\u4E2A\\u201C\\u4EFB\\u52A1\\u4F18\\u5148\\u7EA7\\u201D\\u529F\\u80FD\\u3002\\u600E\\u4E48\\u8BA9\\u7528\\u6237\\u65E0\\u7F1D\\u5207\\u6362\\u5230\\u65B0\\u7248\\u672C\\uFF1F\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"\\u66F4\\u65B0 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"sw.js\"})})})}),\"\\uFF0C\\u7F13\\u5B58\\u65B0\\u8D44\\u6E90\\uFF08\\u6BD4\\u5982 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"priority.js\"})})})}),\"\\uFF09\\u3002\"]}),`\n`,(0,n.jsx)(e.li,{children:\"\\u7528\\u6237\\u6253\\u5F00\\u5E94\\u7528\\u65F6\\uFF0C\\u65E7\\u7248\\u672C\\u4ECD\\u5728\\u8FD0\\u884C\\uFF0CService Worker \\u4E0B\\u8F7D\\u65B0\\u7248\\u672C\\u3002\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\u63D0\\u793A\\u201C\\u6709\\u65B0\\u529F\\u80FD\\u5566\\uFF0C\\u70B9\\u51FB\\u4F53\\u9A8C\\uFF01\\u201D\\u3002\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\u7528\\u6237\\u70B9\\u51FB\\u540E\\uFF0C\\u65B0\\u7248\\u672C\\u6FC0\\u6D3B\\uFF0C\\u9875\\u9762\\u5237\\u65B0\\uFF0C\\u4EFB\\u52A1\\u4F18\\u5148\\u7EA7\\u529F\\u80FD\\u5C31\\u4E0A\\u7EBF\\u4E86\\u3002\"}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"\\u5C0F\\u5F69\\u86CB\"}),\": \\u5982\\u679C\\u7528\\u6237\\u70B9\\u4E86\\u201C\\u7A0D\\u540E\\u66F4\\u65B0\\u201D\\uFF0C\\u4F60\\u53EF\\u4EE5\\u628A\\u63D0\\u793A\\u5B58\\u5230 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"localStorage\"})})})}),\"\\uFF0C\\u4E0B\\u6B21\\u6253\\u5F00\\u65F6\\u518D\\u63D0\\u9192\\uFF0C\\u522B\\u592A\\u201C\\u5F3A\\u8FEB\\u75C7\\u201D\\u5730\\u5237\\u5C4F\\u3002\"]}),`\n`,(0,n.jsx)(e.h2,{id:\"\\u9047\\u5230\\u95EE\\u9898\\u600E\\u4E48\\u529E\",children:(0,n.jsx)(e.a,{href:\"#\\u9047\\u5230\\u95EE\\u9898\\u600E\\u4E48\\u529E\",children:\"\\u9047\\u5230\\u95EE\\u9898\\u600E\\u4E48\\u529E\\uFF1F\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Service Worker \\u4E0D\\u66F4\\u65B0\\uFF1F\"}),(0,n.jsx)(e.br,{}),`\n`,\"\\u68C0\\u67E5\\u6587\\u4EF6\\u540D\\u6216\\u5185\\u5BB9\\u6709\\u6CA1\\u6709\\u53D8\\uFF0C\\u6D4F\\u89C8\\u5668\\u53EA\\u5728\\u5B57\\u8282\\u7EA7\\u522B\\u5DEE\\u5F02\\u65F6\\u89E6\\u53D1\\u66F4\\u65B0\\u3002\\u52A0\\u4E2A\\u7248\\u672C\\u6CE8\\u91CA\\uFF08\",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"// v1.0.1\"})})})}),\"\\uFF09\\u8BD5\\u8BD5\\u3002\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"\\u7F13\\u5B58\\u70B8\\u4E86\\uFF1F\"}),(0,n.jsx)(e.br,{}),`\n`,\"\\u5B9A\\u671F\\u6E05\\u7406\\u65E0\\u7528\\u7F13\\u5B58\\uFF0C\\u522B\\u8BA9\\u7528\\u6237\\u6D4F\\u89C8\\u5668\\u53D8\\u6210\\u201C\\u5783\\u573E\\u573A\\u201D\\u3002\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"\\u7528\\u6237\\u4F53\\u9A8C\\u5361\\u987F\\uFF1F\"}),(0,n.jsx)(e.br,{}),`\n`,\"\\u5EF6\\u8FDF\\u52A0\\u8F7D\\u975E\\u6838\\u5FC3\\u8D44\\u6E90\\uFF0C\\u7528 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"IntersectionObserver\"})})})}),\" \\u914D\\u5408 Service Worker\\uFF0C\\u61D2\\u52A0\\u8F7D\\u56FE\\u7247\\u5565\\u7684\\u3002\"]}),`\n`]}),`\n`,(0,n.jsx)(e.h2,{id:\"\\u603B\\u7ED3service-worker-\\u7684\\u9B54\\u6CD5\",children:(0,n.jsx)(e.a,{href:\"#\\u603B\\u7ED3service-worker-\\u7684\\u9B54\\u6CD5\",children:\"\\u603B\\u7ED3\\uFF1AService Worker \\u7684\\u201C\\u9B54\\u6CD5\\u201D\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Service Worker \\u5C31\\u50CF\\u524D\\u7AEF\\u7684\\u201C\\u9690\\u5F62\\u5B88\\u62A4\\u8005\\u201D\\uFF0C\\u4E0D\\u4EC5\\u80FD\\u7F13\\u5B58\\u8D44\\u6E90\\uFF0C\\u8FD8\\u80FD\\u8BA9\\u4F60\\u7684\\u5E94\\u7528\\u81EA\\u52A8\\u66F4\\u65B0\\uFF0C\\u582A\\u79F0\\u73B0\\u4EE3 Web \\u5F00\\u53D1\\u7684 Swiss Army Knife\\uFF08\\u745E\\u58EB\\u519B\\u5200\\uFF09\\u3002\\u901A\\u8FC7\\u5408\\u7406\\u7684\\u751F\\u547D\\u5468\\u671F\\u7BA1\\u7406\\u548C\\u6D88\\u606F\\u901A\\u4FE1\\uFF0C\\u6211\\u4EEC\\u53EF\\u4EE5\\u6253\\u9020\\u4E00\\u4E2A\\u201C\\u7528\\u6237\\u65E0\\u611F\\u77E5\\u201D\\u7684\\u66F4\\u65B0\\u4F53\\u9A8C\\u3002\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5F53\\u7136\\uFF0C\\u5B83\\u4E5F\\u4E0D\\u662F\\u4E07\\u80FD\\u7684\\u3002\\u5B9E\\u73B0\\u81EA\\u52A8\\u66F4\\u65B0\\u9700\\u8981\\u6743\\u8861\\u7528\\u6237\\u4F53\\u9A8C\\u548C\\u6280\\u672F\\u590D\\u6742\\u5EA6\\uFF0C\\u4F46\\u4E00\\u65E6\\u641E\\u5B9A\\uFF0C\\u4F60\\u7684 Web \\u5E94\\u7528\\u5C31\\u4F1A\\u4ECE\\u201C\\u624B\\u52A8\\u6321\\u201D\\u5347\\u7EA7\\u5230\\u201C\\u81EA\\u52A8\\u6321\\u201D\\uFF0C\\u5F00\\u53D1\\u8005\\u548C\\u7528\\u6237\\u90FD\\u80FD\\u4E50\\u5F00\\u82B1 \\u{1F338}\\u3002\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u6709\\u4EC0\\u4E48\\u60F3\\u6CD5\\u6216\\u95EE\\u9898\\uFF1F\\u6B22\\u8FCE\\u7559\\u8A00\\uFF0C\\u54B1\\u4EEC\\u4E00\\u8D77\\u63A2\\u8BA8\\uFF01\\u6BD5\\u7ADF\\uFF0C\\u524D\\u7AEF\\u8FD9\\u6761\\u8DEF\\uFF0C\\u4E0D\\u5C31\\u662F\\u8FB9\\u8E29\\u5751\\u8FB9\\u6210\\u957F\\u561B \\u{1F604}\\u3002\"}),`\n`,(0,n.jsx)(e.hr,{})]})}function h(l={}){let{wrapper:e}=l.components||{};return e?(0,n.jsx)(e,{...l,children:(0,n.jsx)(o,{...l})}):o(l)}return k(m);})();\n;return Component;"
  },
  "_id": "å‰ç«¯æŠ€æœ¯/Service-Workerå®žçŽ°å‰ç«¯åº”ç”¨è‡ªåŠ¨æ›´æ–°æ–¹æ¡ˆ.mdx",
  "_raw": {
    "sourceFilePath": "å‰ç«¯æŠ€æœ¯/Service-Workerå®žçŽ°å‰ç«¯åº”ç”¨è‡ªåŠ¨æ›´æ–°æ–¹æ¡ˆ.mdx",
    "sourceFileName": "Service-Workerå®žçŽ°å‰ç«¯åº”ç”¨è‡ªåŠ¨æ›´æ–°æ–¹æ¡ˆ.mdx",
    "sourceFileDir": "å‰ç«¯æŠ€æœ¯",
    "contentType": "mdx",
    "flattenedPath": "å‰ç«¯æŠ€æœ¯/Service-Workerå®žçŽ°å‰ç«¯åº”ç”¨è‡ªåŠ¨æ›´æ–°æ–¹æ¡ˆ"
  },
  "type": "Post",
  "url": "/blog/å‰ç«¯æŠ€æœ¯/Service-Workerå®žçŽ°å‰ç«¯åº”ç”¨è‡ªåŠ¨æ›´æ–°æ–¹æ¡ˆ"
}