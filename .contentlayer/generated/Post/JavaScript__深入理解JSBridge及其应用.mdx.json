{
  "title": "æ·±å…¥ç†è§£JSBridgeåŠå…¶åº”ç”¨",
  "date": "2023-05-31T00:00:00.000Z",
  "description": "å…¨é¢è§£æJSBridgeçš„åŸç†ã€å®ç°ä¸åº”ç”¨åœºæ™¯ï¼Œå¸¦ä½ ä»é›¶åˆ°ä¸€æŒæ¡å‰ç«¯ä¸Nativeé€šä¿¡çš„å¥¥ç§˜ï¼Œé™„å¸¦å®ç”¨æŠ€å·§ä¸æœ€ä½³å®è·µã€‚",
  "keywords": "JSBridge, å‰ç«¯å¼€å‘, Nativeé€šä¿¡, H5ä¸Nativeæ··åˆå¼€å‘, JavaScript, WebView, æ€§èƒ½ä¼˜åŒ–, æ··åˆå¼€å‘",
  "author": "æ™“é¾™",
  "image": "/images/hero/jsbridge.jpg",
  "tags": [
    "JavaScript",
    "å‰ç«¯å¼€å‘",
    "æ··åˆå¼€å‘"
  ],
  "views": 0,
  "likes": 0,
  "category": "JavaScript",
  "body": {
    "raw": "\nå—¨ï¼Œå„ä½å‰ç«¯å°ä¼™ä¼´ï¼ä»Šå¤©æˆ‘ä»¬è¦èŠä¸€ä¸ªåœ¨æ··åˆå¼€å‘ä¸­å ªç§°â€œçµé­‚æ¡¥æ¢â€çš„æŠ€æœ¯â€”â€”**JSBridge**ã€‚å¦‚æœä½ æ›¾è¢«â€œå¦‚ä½•è®©H5é¡µé¢è°ƒç”¨NativeåŠŸèƒ½â€è¿™ä¸ªé—®é¢˜æå¾—å¤´æ™•è„‘èƒ€ï¼Œæˆ–è€…åœ¨WebViewé‡Œè‹¦è‹¦å¯»æ‰¾æ€§èƒ½ä¼˜åŒ–çš„çµæ„Ÿï¼Œé‚£ä¹ˆè¿™ç¯‡æ–‡ç« å°±æ˜¯ä¸ºä½ é‡èº«å®šåˆ¶çš„ï¼ğŸš€\n\nJSBridgeï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯è¿æ¥JavaScriptå’ŒNativeä»£ç çš„â€œç¿»è¯‘å®˜â€ã€‚å®ƒè®©H5é¡µé¢å’ŒåŸç”Ÿåº”ç”¨ï¼ˆAndroidã€iOSï¼‰èƒ½å¤Ÿæ„‰å¿«åœ°â€œæ¡æ‰‹â€ï¼Œå®ç°åŒå‘é€šä¿¡ã€‚åˆ«çœ‹å®ƒåå­—é‡Œå¸¦ä¸ªâ€œBridgeâ€ï¼ˆæ¡¥ï¼‰ï¼Œå®é™…ä¸Šå®ƒæ›´åƒä¸ªâ€œè¶…çº§å¿«é€’å‘˜â€ï¼Œåœ¨Webå’ŒNativeä¹‹é—´ä¼ é€’æ¶ˆæ¯ã€æ‰§è¡Œä»»åŠ¡ï¼Œç”šè‡³è¿˜èƒ½å¸¦ç‚¹â€œç§äººè®¢åˆ¶â€çš„æ„Ÿè§‰ã€‚\n\nè¿™ç¯‡åšå®¢æˆ‘ä¼šå¸¦ä½ ä»åŸç†åˆ°å®è·µï¼Œå±‚å±‚å‰¥å¼€JSBridgeçš„ç¥ç§˜é¢çº±ï¼Œé…ä¸Šä»£ç ç¤ºä¾‹ã€ç±»æ¯”è§£é‡Šï¼Œè¿˜æœ‰ä¸€äº›æˆ‘è¸©å‘æ—¶æ€»ç»“çš„æœ€ä½³å®è·µã€‚å†…å®¹ä¼šå°½é‡ä¸°å¯Œï¼Œæ¶µç›–ä»åŸºç¡€åˆ°è¿›é˜¶çš„æ–¹æ–¹é¢é¢ï¼Œç”šè‡³è¿˜æœ‰ç‚¹å¯¹æœªæ¥çš„ç•…æƒ³ã€‚å‡†å¤‡å¥½äº†å—ï¼Ÿè®©æˆ‘ä»¬ä¸€å¤´æ‰è¿›è¿™ä¸ªæ··åˆå¼€å‘çš„ä¸–ç•Œå§ï¼ğŸŒ\n\n## ä»€ä¹ˆæ˜¯JSBridgeï¼Ÿ\n\nå…ˆä»åŸºç¡€è¯´èµ·ã€‚JSBridgeæœ¬è´¨ä¸Šæ˜¯ä¸€ç§æœºåˆ¶ï¼Œç”¨äºè§£å†³WebViewï¼ˆæµè§ˆå™¨å†…æ ¸ï¼‰å’ŒNativeä»£ç ä¹‹é—´çš„é€šä¿¡é—®é¢˜ã€‚WebViewå°±åƒä¸€ä¸ªâ€œæ²™ç›’â€ï¼ŒH5é¡µé¢è·‘åœ¨é‡Œé¢ï¼Œè™½ç„¶çµæ´»ï¼Œä½†æƒé™æœ‰é™ï¼Œæƒ³è°ƒç”¨æ‘„åƒå¤´ã€è·å–åœ°ç†ä½ç½®ï¼Ÿæ²¡é—¨ï¼è€ŒNativeä»£ç ï¼ˆJava/Kotlin/Objective-C/Swiftï¼‰åˆ™åƒâ€œå…¨èƒ½ç®¡å®¶â€ï¼Œå•¥éƒ½èƒ½å¹²ã€‚äºæ˜¯ï¼ŒJSBridgeå°±æˆäº†ä¸¤è€…ä¹‹é—´çš„â€œä¸­é—´äººâ€ã€‚\n\nç±»æ¯”ä¸€ä¸‹ï¼šæƒ³è±¡H5æ˜¯ä½åœ¨é«˜æ¥¼é‡Œçš„ç¨‹åºå‘˜ï¼Œæƒ³åƒå¤–å–ä½†å‡ºä¸äº†é—¨ï¼›Nativeæ˜¯æ¥¼ä¸‹çš„å¤–å–å°å“¥ï¼Œèƒ½é€é¤ä¸Šé—¨ã€‚JSBridgeå‘¢ï¼Ÿå°±æ˜¯é‚£ä¸ªæ¥å•ã€è·‘è…¿çš„â€œå¤–å–å¹³å°â€ï¼Œæ—¢èƒ½æŠŠéœ€æ±‚ä¼ è¾¾ä¸‹å»ï¼Œè¿˜èƒ½æŠŠé¥­èœé€ä¸Šæ¥ã€‚ğŸ•\n\n### JSBridgeçš„æ ¸å¿ƒä»»åŠ¡\n\n1. **JSè°ƒç”¨Native**ï¼šæ¯”å¦‚H5é¡µé¢æƒ³æ‹ç…§ã€è°ƒèµ·æ”¯ä»˜ã€‚\n2. **Nativeè°ƒç”¨JS**ï¼šæ¯”å¦‚Nativeæ¨é€é€šçŸ¥ç»™H5ï¼Œæˆ–è€…è¿”å›è°ƒç”¨ç»“æœã€‚\n3. **åŒå‘é€šä¿¡**ï¼šç¡®ä¿æ¶ˆæ¯ä¼ é€’å¯é ã€æ•°æ®æ ¼å¼ç»Ÿä¸€ã€‚\n\nå¬èµ·æ¥ç®€å•ï¼Œä½†å®ç°èµ·æ¥å¯ä¸è½»æ¾ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ·±å…¥åŸç†ï¼Œçœ‹çœ‹è¿™åº§â€œæ¡¥â€æ˜¯æ€ä¹ˆæ­èµ·æ¥çš„ã€‚\n\n## JSBridgeçš„å·¥ä½œåŸç†\n\nJSBridgeçš„å®ç°æ–¹å¼å› å¹³å°ï¼ˆAndroid/iOSï¼‰è€Œå¼‚ï¼Œä½†æ ¸å¿ƒæ€æƒ³ä¸€è‡´ï¼šåˆ©ç”¨WebViewæä¾›çš„â€œé’©å­â€æˆ–â€œæ¥å£â€ï¼Œè®©JSå’ŒNativeäº’ç›¸â€œå–Šè¯â€ã€‚æˆ‘ä»¬å…ˆæ‹†è§£ä¸‰ç§ä¸»è¦æ–¹å¼ï¼Œå†æ‰©å±•ä¸€äº›å†·é—¨ä½†å®ç”¨çš„æŠ€å·§ã€‚\n\n### 1. URL Schemeæ‹¦æˆª\n\nè¿™æ˜¯æœ€ç»å…¸çš„å®ç°æ–¹å¼ã€‚H5é€šè¿‡æ„é€ ä¸€ä¸ªç‰¹æ®Šçš„URLï¼ˆæ¯”å¦‚`myapp://callCamera`ï¼‰ï¼Œç„¶åç”¨`<a>`æ ‡ç­¾æˆ–`location.href`è§¦å‘ã€‚WebViewç›‘å¬åˆ°è¿™ä¸ªURLåï¼ŒNativeç«¯è§£æå¹¶æ‰§è¡Œå¯¹åº”æ“ä½œã€‚\n\n#### ç¤ºä¾‹ä»£ç ï¼ˆAndroidï¼‰\n```javascript\n// H5ç«¯è§¦å‘\nfunction callNativeCamera() {\n  window.location.href = \"myapp://callCamera?callback=handleCameraResult\";\n}\n\n// Nativeç«¯ï¼ˆä¼ªä»£ç ï¼ŒJavaï¼‰\nwebView.setWebViewClient(new WebViewClient() {\n  @Override\n  public boolean shouldOverrideUrlLoading(WebView view, String url) {\n    if (url.startsWith(\"myapp://\")) {\n      Uri uri = Uri.parse(url);\n      String method = uri.getHost(); // \"callCamera\"\n      String callback = uri.getQueryParameter(\"callback\");\n      takePhoto(callback);\n      return true; // æ‹¦æˆªï¼Œä¸è®©WebViewåŠ è½½\n    }\n    return false;\n  }\n});\n```\n\n#### å°Tips\n- **å®‰å…¨æ€§**ï¼šURL Schemeè¦åŠ å¯†æˆ–åŠ ç­¾åï¼Œé˜²æ­¢æ¶æ„è°ƒç”¨ã€‚æ¯”å¦‚ç”¨HMAC-SHA256ç­¾åã€‚\n- **å›è°ƒ**ï¼šé€šè¿‡URLå‚æ•°å¸¦ä¸Šå›è°ƒå‡½æ•°åï¼ŒNativeæ‰§è¡Œå®Œåå†é€šè¿‡JSè°ƒç”¨å®ƒã€‚\n- **è°ƒè¯•**ï¼šç”¨`alert`æˆ–`console.log`æ‰“å°URLï¼Œå¿«é€Ÿå®šä½é—®é¢˜ã€‚\n\n### 2. JavaScriptæ¥å£æ³¨å…¥\n\næ›´ç°ä»£çš„åšæ³•æ˜¯Nativeé€šè¿‡WebViewæ³¨å…¥å…¨å±€å¯¹è±¡ï¼ŒH5ç›´æ¥è°ƒç”¨ã€‚æ¯”å¦‚Androidçš„`addJavascriptInterface`ï¼ŒiOSçš„`WKScriptMessageHandler`ã€‚\n\n#### ç¤ºä¾‹ä»£ç ï¼ˆiOSï¼‰\n```swift\n// Nativeç«¯æ³¨å…¥\nlet config = WKWebViewConfiguration()\nlet userContent = WKUserContentController()\nuserContent.add(self, name: \"nativeBridge\")\nconfig.userContentController = userContent\nlet webView = WKWebView(frame: .zero, configuration: config)\n\n// H5ç«¯è°ƒç”¨\nwindow.webkit.messageHandlers.nativeBridge.postMessage({\n  method: \"openMap\",\n  data: { lat: 39.9042, lng: 116.4074 }\n});\n```\n\n#### å°Tips\n- **å‘½åç©ºé—´**ï¼šæ³¨å…¥çš„å¯¹è±¡åè¦å”¯ä¸€ï¼Œé¿å…å†²çªï¼Œæ¯”å¦‚ç”¨`myAppNativeBridge`ã€‚\n- **ç‰ˆæœ¬å…¼å®¹**ï¼šè€ç‰ˆæœ¬Androidï¼ˆ4.4ä»¥ä¸‹ï¼‰æœ‰å®‰å…¨æ¼æ´ï¼Œå»ºè®®åŠ é˜²æŠ¤ï¼Œæ¯”å¦‚é™åˆ¶è°ƒç”¨æ¥æºã€‚\n- **æ€§èƒ½**ï¼šæ³¨å…¥å¯¹è±¡å°½é‡è½»é‡ï¼Œåˆ«å¡å¤ªå¤šæ–¹æ³•ã€‚\n\n### 3. Prompt/Alert hackï¼ˆå†·é—¨æŠ€å·§ï¼‰\n\nåœ¨ä¸€äº›è€è®¾å¤‡æˆ–ä½ç‰ˆæœ¬WebViewä¸Šï¼Œå¯èƒ½æ²¡æœ‰æ¥å£æ³¨å…¥åŠŸèƒ½ã€‚è¿™æ—¶å¯ä»¥ç”¨`window.prompt`æˆ–`window.alert`ä½œä¸ºé€šä¿¡é€šé“ã€‚H5è°ƒç”¨`prompt`ï¼ŒNativeæ‹¦æˆªå¹¶è§£æã€‚\n\n#### ç¤ºä¾‹ä»£ç \n```javascript\n// H5ç«¯\nfunction callNativeHack(method, data) {\n  window.prompt(JSON.stringify({ method, data }));\n}\n\n// Androidç«¯\nwebView.setWebChromeClient(new WebChromeClient() {\n  @Override\n  public boolean onJsPrompt(WebView view, String url, String message, String defaultValue, JsPromptResult result) {\n    JSONObject json = new JSONObject(message);\n    String method = json.getString(\"method\");\n    // å¤„ç†é€»è¾‘\n    result.confirm(\"success\"); // è¿”å›ç»“æœ\n    return true;\n  }\n});\n```\n\n#### å°Tips\n- **é€‚ç”¨æ€§**ï¼šä»…ç”¨äºå…¼å®¹è€è®¾å¤‡ï¼Œç°ä»£åœºæ™¯ä¸æ¨èã€‚\n- **æ•°æ®é‡**ï¼š`prompt`æœ‰é•¿åº¦é™åˆ¶ï¼Œåˆ«ä¼ å¤§æ•°æ®ã€‚\n\n### 4. åŒå‘é€šä¿¡çš„å®ç°\n\næ— è®ºæ˜¯å“ªç§æ–¹å¼ï¼Œå›è°ƒæœºåˆ¶éƒ½å¿…ä¸å¯å°‘ã€‚H5è°ƒç”¨Nativeåï¼Œé€šå¸¸éœ€è¦ç»“æœè¿”å›ã€‚æˆ‘ä»¬å¯ä»¥ç”¨`Promise`å°è£…ï¼Œæˆ–è€…é€šè¿‡å…¨å±€äº‹ä»¶åˆ†å‘ã€‚\n\n#### ç¤ºä¾‹ï¼ˆPromiseå°è£…ï¼‰\n```javascript\nfunction callNative(method, data) {\n  return new Promise((resolve, reject) => {\n    const callbackId = `cb_${Date.now()}`;\n    window[callbackId] = (result) => {\n      resolve(result);\n      delete window[callbackId]; // æ¸…ç†\n    };\n    window.nativeBridge.postMessage({ method, data, callbackId });\n    setTimeout(() => reject(new Error(\"Nativeè¶…æ—¶\")), 5000); // è¶…æ—¶ä¿æŠ¤\n  });\n}\n\n// ä½¿ç”¨\ncallNative(\"getLocation\", {}).then(res => {\n  console.log(\"ä½ç½®è·å–æˆåŠŸ:\", res);\n}).catch(err => {\n  console.error(\"å‡ºé”™å•¦:\", err);\n});\n```\n\n#### å°Tips\n- **å”¯ä¸€ID**ï¼šcallbackIdè¦å…¨å±€å”¯ä¸€ï¼Œé¿å…è¦†ç›–ï¼Œå¯ä»¥åŠ éšæœºæ•°ã€‚\n- **è¶…æ—¶å¤„ç†**ï¼šåŠ ä¸ªsetTimeoutï¼Œé˜²æ­¢Nativeæ²¡å“åº”å¡æ­»ã€‚\n- **é”™è¯¯æ—¥å¿—**ï¼šå¤±è´¥æ—¶è®°å½•è¯¦ç»†é”™è¯¯ï¼Œæ–¹ä¾¿æ’æŸ¥ã€‚\n\n## JSBridgeçš„å¸¸è§åº”ç”¨åœºæ™¯\n\nç†è®ºè®²å®Œï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹JSBridgeåœ¨å®æˆ˜ä¸­æ€ä¹ˆå¤§æ˜¾èº«æ‰‹ã€‚ä»¥ä¸‹æ˜¯æ›´å¤šåœºæ™¯å’Œæ¡ˆä¾‹ã€‚\n\n### 1. H5è°ƒç”¨NativeåŠŸèƒ½\n- **æ‹ç…§/æ‰«ç **ï¼šç”µå•†Appé‡Œæ‰«äºŒç»´ç é¢†å–ä¼˜æƒ åˆ¸ã€‚\n- **æ”¯ä»˜**ï¼šH5é¡µé¢è°ƒèµ·æ”¯ä»˜å®/å¾®ä¿¡æ”¯ä»˜ã€‚\n- **æ¨é€é€šçŸ¥**ï¼šNativeæ”¶åˆ°æ¨é€åé€šçŸ¥H5æ›´æ–°UIã€‚\n- **æ–‡ä»¶ä¸Šä¼ **ï¼šH5é€‰æ‹©æœ¬åœ°æ–‡ä»¶ï¼ŒNativeå¤„ç†ä¸Šä¼ é€»è¾‘ã€‚\n\n### 2. Nativeå¢å¼ºH5ä½“éªŒ\n- **æ€§èƒ½ä¼˜åŒ–**ï¼šNativeæ‹¦æˆªé™æ€èµ„æºè¯·æ±‚ï¼Œç¼“å­˜åˆ°æœ¬åœ°ã€‚\n- **è‡ªå®šä¹‰UI**ï¼šNativeæä¾›æ²‰æµ¸å¼å¯¼èˆªæ ï¼ŒH5åªç®¡å†…å®¹ã€‚\n- **æ‰‹åŠ¿æ§åˆ¶**ï¼šNativeç›‘å¬æ»‘åŠ¨äº‹ä»¶ï¼Œå¢å¼ºäº¤äº’ã€‚\n\n### 3. æ•°æ®å…±äº«\n- **ç”¨æˆ·ä¿¡æ¯**ï¼šNativeæŠŠç™»å½•æ€ä¼ ç»™H5ï¼Œå…å»é‡å¤ç™»å½•ã€‚\n- **è®¾å¤‡ä¿¡æ¯**ï¼šè·å–ç”µæ± ç”µé‡ã€å±å¹•æ–¹å‘ã€ç½‘ç»œçŠ¶æ€ã€‚\n- **å®æ—¶æ•°æ®**ï¼šNativeæ¨é€è‚¡ç¥¨ä»·æ ¼ç»™H5é¡µé¢ã€‚\n\n### 4. å¤æ‚äº¤äº’\n- **ç›´æ’­é—´æ§åˆ¶**ï¼šH5é¡µé¢æ§åˆ¶Nativeæ’­æ”¾å™¨æš‚åœ/æ’­æ”¾ã€‚\n- **æ¸¸æˆå¢å¼º**ï¼šH5æ¸¸æˆè°ƒç”¨Nativeçš„éœ‡åŠ¨åé¦ˆã€‚\n\n#### å®æˆ˜æ¡ˆä¾‹ï¼šH5è°ƒèµ·åœ°å›¾å¯¼èˆª\n```javascript\nfunction openMapNavigation(lat, lng) {\n  callNative(\"openMap\", { lat, lng }).then(() => {\n    console.log(\"å¯¼èˆªå·²å¯åŠ¨ï¼\");\n  }).catch(err => {\n    alert(\"å¯¼èˆªå¤±è´¥ï¼Œè¯·æ£€æŸ¥Nativeæ”¯æŒï¼\");\n  });\n}\n```\n\n#### å®æˆ˜æ¡ˆä¾‹ï¼šå®æ—¶æ¶ˆæ¯åŒæ­¥\n```javascript\n// Nativeæ¨é€æ¶ˆæ¯ç»™H5\nwindow.onNativeMessage = (data) => {\n  const { type, content } = data;\n  if (type === \"chat\") {\n    updateChatUI(content);\n  }\n};\n\n// H5å‘é€æ¶ˆæ¯\nfunction sendMessage(text) {\n  callNative(\"sendChat\", { text }).then(res => {\n    console.log(\"æ¶ˆæ¯å‘é€æˆåŠŸ:\", res);\n  });\n}\n```\n\n## å®ç°ä¸€ä¸ªå®Œæ•´çš„JSBridgeåº“\n\nä¸ºäº†åŠ æ·±ç†è§£ï¼Œæˆ‘ä»¬è‡ªå·±åŠ¨æ‰‹å†™ä¸ªåŠŸèƒ½æ›´é½å…¨çš„JSBridgeåº“å§ï¼ç›®æ ‡ï¼šæ”¯æŒåŒå‘é€šä¿¡ã€é”™è¯¯å¤„ç†ã€äº‹ä»¶ç›‘å¬ã€‚\n\n```javascript\nclass JSBridge {\n  constructor() {\n    this.callbacks = {}; // å­˜å‚¨å›è°ƒ\n    this.eventListeners = {}; // äº‹ä»¶ç›‘å¬\n    this.nativeBridge = window.nativeBridge || window.webkit?.messageHandlers?.nativeBridge;\n    this.init();\n  }\n\n  init() {\n    // Nativeè°ƒç”¨JSçš„å…¨å±€å…¥å£\n    window.receiveFromNative = (data) => {\n      const { callbackId, result, event, payload } = data;\n      if (callbackId && this.callbacks[callbackId]) {\n        this.callbacks[callbackId](result);\n        delete this.callbacks[callbackId];\n      }\n      if (event && this.eventListeners[event]) {\n        this.eventListeners[event].forEach(cb => cb(payload));\n      }\n    };\n  }\n\n  call(method, data = {}) {\n    return new Promise((resolve, reject) => {\n      if (!this.nativeBridge) {\n        reject(new Error(\"Nativeæ¡¥æœªæ³¨å…¥ï¼\"));\n        return;\n      }\n      const callbackId = `cb_${Date.now()}_${Math.random().toString(36).slice(2)}`;\n      this.callbacks[callbackId] = resolve;\n      try {\n        this.nativeBridge.postMessage({ method, data, callbackId });\n      } catch (e) {\n        reject(e);\n      }\n      setTimeout(() => {\n        if (this.callbacks[callbackId]) {\n          reject(new Error(\"Nativeå“åº”è¶…æ—¶\"));\n          delete this.callbacks[callbackId];\n        }\n      }, 10000);\n    });\n  }\n\n  on(event, callback) {\n    if (!this.eventListeners[event]) {\n      this.eventListeners[event] = [];\n    }\n    this.eventListeners[event].push(callback);\n  }\n\n  off(event, callback) {\n    if (this.eventListeners[event]) {\n      this.eventListeners[event] = this.eventListeners[event].filter(cb => cb !== callback);\n    }\n  }\n}\n\n// ä½¿ç”¨\nconst bridge = new JSBridge();\n\n// è°ƒç”¨Native\nbridge.call(\"takePhoto\", { quality: \"high\" }).then(photo => {\n  console.log(\"ç…§ç‰‡æ•°æ®:\", photo);\n}).catch(err => {\n  console.error(\"æ‹ç…§å¤±è´¥:\", err);\n});\n\n// ç›‘å¬Nativeäº‹ä»¶\nbridge.on(\"pushNotification\", (data) => {\n  console.log(\"æ”¶åˆ°æ¨é€:\", data);\n});\n```\n\n#### å°Tips\n- **é”™è¯¯å¤„ç†**ï¼šæ•è·postMessageå¼‚å¸¸ï¼Œé˜²æ­¢å´©æºƒã€‚\n- **äº‹ä»¶è§£ç»‘**ï¼šç”¨`off`æ¸…ç†ä¸ç”¨çš„ç›‘å¬ï¼Œçœå†…å­˜ã€‚\n- **æ—¥å¿—å¢å¼º**ï¼šåŠ ä¸ª`debug`æ¨¡å¼ï¼Œæ‰“å°æ¯æ¡æ¶ˆæ¯ã€‚\n\n## æœ€ä½³å®è·µä¸è¸©å‘ç»éªŒ\n\nJSBridgeè™½å¥½ï¼Œä½†ç”¨ä¸å¥½ä¹Ÿå®¹æ˜“ç¿»è½¦ã€‚ä»¥ä¸‹æ˜¯æˆ‘æ€»ç»“çš„ä¸€äº›å®ç”¨å»ºè®®ï¼Œå¸¦ç‚¹â€œè¡€æ³ªå²â€çš„å‘³é“ã€‚\n\n### 1. æ€§èƒ½ä¼˜åŒ–\n- **å‡å°‘é€šä¿¡**ï¼šåˆ«å•¥éƒ½è°ƒNativeï¼Œèƒ½åœ¨H5è§£å†³çš„å°½é‡è‡ªå·±æå®šã€‚\n- **æ‰¹é‡è°ƒç”¨**ï¼šå¤šæ¬¡å°è¯·æ±‚åˆå¹¶æˆä¸€æ¬¡å¤§è¯·æ±‚ï¼Œå‡å°‘å¼€é”€ã€‚\n- **ç¼“å­˜ç»“æœ**ï¼šå¸¸ç”¨æ•°æ®ï¼ˆå¦‚è®¾å¤‡ä¿¡æ¯ï¼‰ç¼“å­˜åˆ°localStorageã€‚\n- **å°Tips**ï¼šç”¨`performance.now()`æµ‹é€šä¿¡è€—æ—¶ï¼Œæ‰¾åˆ°ç“¶é¢ˆã€‚\n\n### 2. å®‰å…¨æ€§\n- **å‚æ•°æ ¡éªŒ**ï¼šH5å’ŒNativeéƒ½è¦éªŒè¯è¾“å…¥ï¼Œé˜²æ³¨å…¥ã€‚\n- **æƒé™æ§åˆ¶**ï¼šæ•æ„Ÿæ“ä½œåŠ tokenæ ¡éªŒã€‚\n- **åŠ å¯†é€šä¿¡**ï¼šç”¨AESåŠ å¯†æ•°æ®ï¼Œé˜²æ­¢æŠ“åŒ…ã€‚\n- **å°Tips**ï¼šåˆ«æŠŠcallbackIdå†™æ­»ï¼Œéšæœºç”Ÿæˆæ˜¯ç‹é“ã€‚\n\n### 3. è°ƒè¯•æŠ€å·§\n- **æ—¥å¿—ç³»ç»Ÿ**ï¼šH5å’ŒNativeéƒ½æ‰“æ—¥å¿—ï¼Œé—®é¢˜ä¸€ç›®äº†ç„¶ã€‚\n- **æ¨¡æ‹Ÿå™¨**ï¼šæœ¬åœ°èµ·ä¸ªMock Nativeç¯å¢ƒï¼Œå¼€å‘æ•ˆç‡ç¿»å€ã€‚\n- **æŠ“åŒ…åˆ†æ**ï¼šç”¨Charlesæˆ–FiddleræŠ“é€šä¿¡æ•°æ®ã€‚\n- **å°Tips**ï¼šChrome DevToolsåŠ `console.log`ï¼ŒNativeç”¨IDEè°ƒè¯•ï¼Œé»„é‡‘æ­æ¡£ï¼\n\n### 4. å¤æ‚åœºæ™¯ä¼˜åŒ–\n- **å¤šWebViewç®¡ç†**ï¼šå¤šä¸ªH5é¡µé¢å…±ç”¨ä¸€ä¸ªbridgeï¼ŒåŠ é¡µé¢æ ‡è¯†ã€‚\n- **é‡è¯•æœºåˆ¶**ï¼šç½‘ç»œå·®æ—¶è‡ªåŠ¨é‡è¯•3æ¬¡ã€‚\n- **å°Tips**ï¼šç”¨`WeakMap`å­˜é¡µé¢å®ä¾‹ï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚\n\n### 5. å¹½é»˜è¸©å‘è®°\næœ‰ä¸€æ¬¡æˆ‘å¿˜äº†æ¸…ç†å›è°ƒå‡½æ•°ï¼Œç»“æœå†…å­˜æ³„æ¼ï¼ŒAppå¡æˆPPTã€‚åæ¥åŠ äº†ä¸ª`delete`ï¼Œæ‰å‘ç°â€œæ¸…ç†å«ç”Ÿâ€åœ¨ä»£ç é‡Œä¹Ÿè¿™ä¹ˆé‡è¦ã€‚ğŸ˜‚è¿˜æœ‰æ¬¡è°ƒè¯•å¿˜äº†å…³æ—¥å¿—ï¼Œä¸Šçº¿åç”¨æˆ·æ”¶åˆ°ä¸€å †`alert`ï¼Œå·®ç‚¹è¢«äº§å“ç»ç†â€œè¿½æ€â€ï¼\n\n## JSBridgeçš„æ€§èƒ½ç“¶é¢ˆä¸è§£å†³æ–¹æ¡ˆ\n\nJSBridgeè™½å¼ºå¤§ï¼Œä½†ä¹Ÿæœ‰çŸ­æ¿ï¼Œå°¤å…¶åœ¨é«˜é¢‘é€šä¿¡æˆ–å¤§æ•°æ®ä¼ è¾“æ—¶ã€‚\n\n### ç“¶é¢ˆåˆ†æ\n1. **åºåˆ—åŒ–å¼€é”€**ï¼šJSON.stringify/JSON.parseå¾ˆè€—æ—¶ã€‚\n2. **WebViewæ¸²æŸ“**ï¼šé¢‘ç¹è°ƒç”¨å¯èƒ½å¯¼è‡´UIå¡é¡¿ã€‚\n3. **å•çº¿ç¨‹é™åˆ¶**ï¼šJSæ˜¯å•çº¿ç¨‹ï¼Œé€šä¿¡å¯†é›†æ—¶å®¹æ˜“å µå¡ã€‚\n\n### è§£å†³æ–¹æ¡ˆ\n- **äºŒè¿›åˆ¶ä¼ è¾“**ï¼šç”¨ArrayBufferæ›¿ä»£JSONï¼Œå‡å°‘åºåˆ—åŒ–æˆæœ¬ã€‚\n- **åˆ†ç‰‡ä¼ è¾“**ï¼šå¤§æ•°æ®æ‹†æˆå°å—ï¼Œé€æ­¥å‘é€ã€‚\n- **Web Worker**ï¼šé€šä¿¡é€»è¾‘æ”¾åˆ°Workeré‡Œï¼Œè§£æ”¾ä¸»çº¿ç¨‹ã€‚\n- **å°Tips**ï¼šç”¨`requestIdleCallback`è°ƒåº¦ä½ä¼˜å…ˆçº§ä»»åŠ¡ï¼Œä¼˜åŒ–ä½“éªŒã€‚\n\n#### ç¤ºä¾‹ï¼šåˆ†ç‰‡ä¼ è¾“\n```javascript\nfunction sendLargeData(data) {\n  const chunkSize = 1024 * 1024; // 1MB\n  const chunks = [];\n  for (let i = 0; i < data.length; i += chunkSize) {\n    chunks.push(data.slice(i, i + chunkSize));\n  }\n  chunks.forEach((chunk, index) => {\n    bridge.call(\"sendChunk\", { chunk, index, total: chunks.length });\n  });\n}\n```\n\n## JSBridgeä¸æ··åˆå¼€å‘ç”Ÿæ€\n\nJSBridgeä¸æ˜¯å­¤ç«‹çš„ï¼Œå®ƒå’Œæ•´ä¸ªæ··åˆå¼€å‘ç”Ÿæ€æ¯æ¯ç›¸å…³ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹å®ƒä¸å…¶ä»–æŠ€æœ¯çš„äº’åŠ¨ã€‚\n\n### 1. ä¸React Native/Flutterçš„å¯¹æ¯”\n- **React Native**ï¼šç›´æ¥ç”¨JSå†™Nativeç»„ä»¶ï¼Œé€šä¿¡æ›´åŸç”Ÿï¼Œä½†å­¦ä¹ æˆæœ¬é«˜ã€‚\n- **Flutter**ï¼šå…¨Dartç”Ÿæ€ï¼Œæ€§èƒ½ä¼˜å¼‚ï¼Œä½†H5é›†æˆè¾ƒå¼±ã€‚\n- **JSBridge**ï¼šè½»é‡çµæ´»ï¼Œé€‚åˆå·²æœ‰H5é¡¹ç›®æ”¹é€ ã€‚\n\n### 2. ä¸WebAssemblyçš„ç»“åˆ\næœªæ¥å¯ä»¥ç”¨Wasmåšé«˜æ€§èƒ½è®¡ç®—ï¼Œå†é€šè¿‡JSBridgeè°ƒç”¨Nativeï¼Œæ‰“é€ â€œæ€§èƒ½æ€ªå…½â€ã€‚\n\n### 3. ä¸PWAçš„ç«äº‰\nPWAï¼ˆæ¸è¿›å¼Webåº”ç”¨ï¼‰æƒ³å–ä»£éƒ¨åˆ†NativeåŠŸèƒ½ï¼Œä½†å—é™äºæµè§ˆå™¨APIï¼ŒJSBridgeä»æ˜¯æ··åˆå¼€å‘çš„æ€æ‰‹é”ã€‚\n\n## JSBridgeçš„æœªæ¥\n\néšç€WebæŠ€æœ¯è¿›æ­¥ï¼ˆæ¯”å¦‚WebAssemblyï¼‰å’ŒNativeèƒ½åŠ›çš„å¼€æ”¾ï¼ˆFlutterã€React Nativeï¼‰ï¼ŒJSBridgeä¼šä¸ä¼šâ€œä¸‹å²—â€ï¼Ÿæˆ‘è§‰å¾—ä¸ä¼šï¼Œå®ƒæ›´åƒæ˜¯â€œè¿›åŒ–â€ã€‚æœªæ¥çš„JSBridgeå¯èƒ½ä¼šæ›´è½»é‡ã€æ›´æ ‡å‡†åŒ–ï¼Œç”šè‡³èå…¥åˆ°æ¡†æ¶é‡Œï¼Œæˆä¸ºå¼€ç®±å³ç”¨çš„åŠŸèƒ½ã€‚æˆ–è®¸æœ‰ä¸€å¤©ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°â€œJSBridge 2.0â€ï¼Œç”¨WebSocketæˆ–gRPCæ›¿ä»£ç°åœ¨çš„æœºåˆ¶ï¼Œå®ç°æ¯«ç§’çº§é€šä¿¡ã€‚\n\nç±»æ¯”ä¸€ä¸‹ï¼šJSBridgeå°±åƒäº’è”ç½‘é‡Œçš„â€œé‚®å·®â€ï¼Œè™½ç„¶æœ‰äº†ç”µå­é‚®ä»¶ï¼Œä½†ä¼ ç»Ÿä¿¡ä»¶ä¾ç„¶æœ‰å®ƒçš„æµªæ¼«å’Œä»·å€¼ã€‚ğŸ“¬\n\n## æ€»ç»“\n\nJSBridgeæ˜¯æ··åˆå¼€å‘ä¸­çš„â€œå¹•åè‹±é›„â€ï¼Œå®ƒè®©H5å’ŒNativeçš„åä½œå˜å¾—æ— ç¼åˆé«˜æ•ˆã€‚ä»URLæ‹¦æˆªåˆ°æ¥å£æ³¨å…¥ï¼Œä»ç®€å•è°ƒç”¨åˆ°å¤æ‚é€šä¿¡ï¼Œå®ƒçš„æ ¸å¿ƒåœ¨äºâ€œæ¡¥æ¢æ€ç»´â€â€”â€”è¿æ¥ã€åˆ†å‘ã€åé¦ˆã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®ä½ ä»åŸç†åˆ°å®è·µå½»åº•ææ‡‚å®ƒï¼Œç”šè‡³åœ¨ä¸‹ä¸ªé¡¹ç›®é‡Œå¤§æ”¾å¼‚å½©ï¼\n\nå¦‚æœä½ æœ‰å•¥ç–‘é—®æˆ–æƒ³åˆ†äº«è‡ªå·±çš„JSBridgeæ•…äº‹ï¼Œæ¬¢è¿ç•™è¨€ï¼Œå’±ä»¬ä¸€èµ·èŠèŠï¼æ¯•ç«Ÿï¼ŒæŠ€æœ¯æ˜¯æ­»çš„ï¼Œäº¤æµæ˜¯æ´»çš„å˜›ã€‚ğŸ˜\n\n---",
    "code": "var Component=(()=>{var p=Object.create;var a=Object.defineProperty;var E=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var F=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var B=(n,l)=>()=>(l||n((l={exports:{}}).exports,l),l.exports),u=(n,l)=>{for(var r in l)a(n,r,{get:l[r],enumerable:!0})},s=(n,l,r,i)=>{if(l&&typeof l==\"object\"||typeof l==\"function\")for(let c of y(l))!g.call(n,c)&&c!==r&&a(n,c,{get:()=>l[c],enumerable:!(i=E(l,c))||i.enumerable});return n};var b=(n,l,r)=>(r=n!=null?p(F(n)):{},s(l||!n||!n.__esModule?a(r,\"default\",{value:n,enumerable:!0}):r,n)),v=n=>s(a({},\"__esModule\",{value:!0}),n);var o=B((A,d)=>{d.exports=_jsx_runtime});var m={};u(m,{default:()=>h,frontmatter:()=>f});var e=b(o()),f={type:\"Post\",title:\"\\u6DF1\\u5165\\u7406\\u89E3JSBridge\\u53CA\\u5176\\u5E94\\u7528\",date:\"2023-05-31\",description:\"\\u5168\\u9762\\u89E3\\u6790JSBridge\\u7684\\u539F\\u7406\\u3001\\u5B9E\\u73B0\\u4E0E\\u5E94\\u7528\\u573A\\u666F\\uFF0C\\u5E26\\u4F60\\u4ECE\\u96F6\\u5230\\u4E00\\u638C\\u63E1\\u524D\\u7AEF\\u4E0ENative\\u901A\\u4FE1\\u7684\\u5965\\u79D8\\uFF0C\\u9644\\u5E26\\u5B9E\\u7528\\u6280\\u5DE7\\u4E0E\\u6700\\u4F73\\u5B9E\\u8DF5\\u3002\",keywords:\"JSBridge, \\u524D\\u7AEF\\u5F00\\u53D1, Native\\u901A\\u4FE1, H5\\u4E0ENative\\u6DF7\\u5408\\u5F00\\u53D1, JavaScript, WebView, \\u6027\\u80FD\\u4F18\\u5316, \\u6DF7\\u5408\\u5F00\\u53D1\",author:\"\\u6653\\u9F99\",image:\"/images/hero/jsbridge.jpg\",tags:[\"JavaScript\",\"\\u524D\\u7AEF\\u5F00\\u53D1\",\"\\u6DF7\\u5408\\u5F00\\u53D1\"],category:\"JavaScript\"};function t(n){let l={a:\"a\",code:\"code\",figure:\"figure\",h2:\"h2\",h3:\"h3\",h4:\"h4\",hr:\"hr\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...n.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(l.p,{children:[\"\\u55E8\\uFF0C\\u5404\\u4F4D\\u524D\\u7AEF\\u5C0F\\u4F19\\u4F34\\uFF01\\u4ECA\\u5929\\u6211\\u4EEC\\u8981\\u804A\\u4E00\\u4E2A\\u5728\\u6DF7\\u5408\\u5F00\\u53D1\\u4E2D\\u582A\\u79F0\\u201C\\u7075\\u9B42\\u6865\\u6881\\u201D\\u7684\\u6280\\u672F\\u2014\\u2014\",(0,e.jsx)(l.strong,{children:\"JSBridge\"}),\"\\u3002\\u5982\\u679C\\u4F60\\u66FE\\u88AB\\u201C\\u5982\\u4F55\\u8BA9H5\\u9875\\u9762\\u8C03\\u7528Native\\u529F\\u80FD\\u201D\\u8FD9\\u4E2A\\u95EE\\u9898\\u641E\\u5F97\\u5934\\u6655\\u8111\\u80C0\\uFF0C\\u6216\\u8005\\u5728WebView\\u91CC\\u82E6\\u82E6\\u5BFB\\u627E\\u6027\\u80FD\\u4F18\\u5316\\u7684\\u7075\\u611F\\uFF0C\\u90A3\\u4E48\\u8FD9\\u7BC7\\u6587\\u7AE0\\u5C31\\u662F\\u4E3A\\u4F60\\u91CF\\u8EAB\\u5B9A\\u5236\\u7684\\uFF01\\u{1F680}\"]}),`\n`,(0,e.jsx)(l.p,{children:\"JSBridge\\uFF0C\\u7B80\\u5355\\u6765\\u8BF4\\uFF0C\\u5C31\\u662F\\u8FDE\\u63A5JavaScript\\u548CNative\\u4EE3\\u7801\\u7684\\u201C\\u7FFB\\u8BD1\\u5B98\\u201D\\u3002\\u5B83\\u8BA9H5\\u9875\\u9762\\u548C\\u539F\\u751F\\u5E94\\u7528\\uFF08Android\\u3001iOS\\uFF09\\u80FD\\u591F\\u6109\\u5FEB\\u5730\\u201C\\u63E1\\u624B\\u201D\\uFF0C\\u5B9E\\u73B0\\u53CC\\u5411\\u901A\\u4FE1\\u3002\\u522B\\u770B\\u5B83\\u540D\\u5B57\\u91CC\\u5E26\\u4E2A\\u201CBridge\\u201D\\uFF08\\u6865\\uFF09\\uFF0C\\u5B9E\\u9645\\u4E0A\\u5B83\\u66F4\\u50CF\\u4E2A\\u201C\\u8D85\\u7EA7\\u5FEB\\u9012\\u5458\\u201D\\uFF0C\\u5728Web\\u548CNative\\u4E4B\\u95F4\\u4F20\\u9012\\u6D88\\u606F\\u3001\\u6267\\u884C\\u4EFB\\u52A1\\uFF0C\\u751A\\u81F3\\u8FD8\\u80FD\\u5E26\\u70B9\\u201C\\u79C1\\u4EBA\\u8BA2\\u5236\\u201D\\u7684\\u611F\\u89C9\\u3002\"}),`\n`,(0,e.jsx)(l.p,{children:\"\\u8FD9\\u7BC7\\u535A\\u5BA2\\u6211\\u4F1A\\u5E26\\u4F60\\u4ECE\\u539F\\u7406\\u5230\\u5B9E\\u8DF5\\uFF0C\\u5C42\\u5C42\\u5265\\u5F00JSBridge\\u7684\\u795E\\u79D8\\u9762\\u7EB1\\uFF0C\\u914D\\u4E0A\\u4EE3\\u7801\\u793A\\u4F8B\\u3001\\u7C7B\\u6BD4\\u89E3\\u91CA\\uFF0C\\u8FD8\\u6709\\u4E00\\u4E9B\\u6211\\u8E29\\u5751\\u65F6\\u603B\\u7ED3\\u7684\\u6700\\u4F73\\u5B9E\\u8DF5\\u3002\\u5185\\u5BB9\\u4F1A\\u5C3D\\u91CF\\u4E30\\u5BCC\\uFF0C\\u6DB5\\u76D6\\u4ECE\\u57FA\\u7840\\u5230\\u8FDB\\u9636\\u7684\\u65B9\\u65B9\\u9762\\u9762\\uFF0C\\u751A\\u81F3\\u8FD8\\u6709\\u70B9\\u5BF9\\u672A\\u6765\\u7684\\u7545\\u60F3\\u3002\\u51C6\\u5907\\u597D\\u4E86\\u5417\\uFF1F\\u8BA9\\u6211\\u4EEC\\u4E00\\u5934\\u624E\\u8FDB\\u8FD9\\u4E2A\\u6DF7\\u5408\\u5F00\\u53D1\\u7684\\u4E16\\u754C\\u5427\\uFF01\\u{1F30D}\"}),`\n`,(0,e.jsx)(l.h2,{id:\"\\u4EC0\\u4E48\\u662Fjsbridge\",children:(0,e.jsx)(l.a,{href:\"#\\u4EC0\\u4E48\\u662Fjsbridge\",children:\"\\u4EC0\\u4E48\\u662FJSBridge\\uFF1F\"})}),`\n`,(0,e.jsx)(l.p,{children:\"\\u5148\\u4ECE\\u57FA\\u7840\\u8BF4\\u8D77\\u3002JSBridge\\u672C\\u8D28\\u4E0A\\u662F\\u4E00\\u79CD\\u673A\\u5236\\uFF0C\\u7528\\u4E8E\\u89E3\\u51B3WebView\\uFF08\\u6D4F\\u89C8\\u5668\\u5185\\u6838\\uFF09\\u548CNative\\u4EE3\\u7801\\u4E4B\\u95F4\\u7684\\u901A\\u4FE1\\u95EE\\u9898\\u3002WebView\\u5C31\\u50CF\\u4E00\\u4E2A\\u201C\\u6C99\\u76D2\\u201D\\uFF0CH5\\u9875\\u9762\\u8DD1\\u5728\\u91CC\\u9762\\uFF0C\\u867D\\u7136\\u7075\\u6D3B\\uFF0C\\u4F46\\u6743\\u9650\\u6709\\u9650\\uFF0C\\u60F3\\u8C03\\u7528\\u6444\\u50CF\\u5934\\u3001\\u83B7\\u53D6\\u5730\\u7406\\u4F4D\\u7F6E\\uFF1F\\u6CA1\\u95E8\\uFF01\\u800CNative\\u4EE3\\u7801\\uFF08Java/Kotlin/Objective-C/Swift\\uFF09\\u5219\\u50CF\\u201C\\u5168\\u80FD\\u7BA1\\u5BB6\\u201D\\uFF0C\\u5565\\u90FD\\u80FD\\u5E72\\u3002\\u4E8E\\u662F\\uFF0CJSBridge\\u5C31\\u6210\\u4E86\\u4E24\\u8005\\u4E4B\\u95F4\\u7684\\u201C\\u4E2D\\u95F4\\u4EBA\\u201D\\u3002\"}),`\n`,(0,e.jsx)(l.p,{children:\"\\u7C7B\\u6BD4\\u4E00\\u4E0B\\uFF1A\\u60F3\\u8C61H5\\u662F\\u4F4F\\u5728\\u9AD8\\u697C\\u91CC\\u7684\\u7A0B\\u5E8F\\u5458\\uFF0C\\u60F3\\u5403\\u5916\\u5356\\u4F46\\u51FA\\u4E0D\\u4E86\\u95E8\\uFF1BNative\\u662F\\u697C\\u4E0B\\u7684\\u5916\\u5356\\u5C0F\\u54E5\\uFF0C\\u80FD\\u9001\\u9910\\u4E0A\\u95E8\\u3002JSBridge\\u5462\\uFF1F\\u5C31\\u662F\\u90A3\\u4E2A\\u63A5\\u5355\\u3001\\u8DD1\\u817F\\u7684\\u201C\\u5916\\u5356\\u5E73\\u53F0\\u201D\\uFF0C\\u65E2\\u80FD\\u628A\\u9700\\u6C42\\u4F20\\u8FBE\\u4E0B\\u53BB\\uFF0C\\u8FD8\\u80FD\\u628A\\u996D\\u83DC\\u9001\\u4E0A\\u6765\\u3002\\u{1F355}\"}),`\n`,(0,e.jsx)(l.h3,{id:\"jsbridge\\u7684\\u6838\\u5FC3\\u4EFB\\u52A1\",children:(0,e.jsx)(l.a,{href:\"#jsbridge\\u7684\\u6838\\u5FC3\\u4EFB\\u52A1\",children:\"JSBridge\\u7684\\u6838\\u5FC3\\u4EFB\\u52A1\"})}),`\n`,(0,e.jsxs)(l.ol,{children:[`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"JS\\u8C03\\u7528Native\"}),\"\\uFF1A\\u6BD4\\u5982H5\\u9875\\u9762\\u60F3\\u62CD\\u7167\\u3001\\u8C03\\u8D77\\u652F\\u4ED8\\u3002\"]}),`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"Native\\u8C03\\u7528JS\"}),\"\\uFF1A\\u6BD4\\u5982Native\\u63A8\\u9001\\u901A\\u77E5\\u7ED9H5\\uFF0C\\u6216\\u8005\\u8FD4\\u56DE\\u8C03\\u7528\\u7ED3\\u679C\\u3002\"]}),`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u53CC\\u5411\\u901A\\u4FE1\"}),\"\\uFF1A\\u786E\\u4FDD\\u6D88\\u606F\\u4F20\\u9012\\u53EF\\u9760\\u3001\\u6570\\u636E\\u683C\\u5F0F\\u7EDF\\u4E00\\u3002\"]}),`\n`]}),`\n`,(0,e.jsx)(l.p,{children:\"\\u542C\\u8D77\\u6765\\u7B80\\u5355\\uFF0C\\u4F46\\u5B9E\\u73B0\\u8D77\\u6765\\u53EF\\u4E0D\\u8F7B\\u677E\\u3002\\u63A5\\u4E0B\\u6765\\uFF0C\\u6211\\u4EEC\\u5C31\\u6DF1\\u5165\\u539F\\u7406\\uFF0C\\u770B\\u770B\\u8FD9\\u5EA7\\u201C\\u6865\\u201D\\u662F\\u600E\\u4E48\\u642D\\u8D77\\u6765\\u7684\\u3002\"}),`\n`,(0,e.jsx)(l.h2,{id:\"jsbridge\\u7684\\u5DE5\\u4F5C\\u539F\\u7406\",children:(0,e.jsx)(l.a,{href:\"#jsbridge\\u7684\\u5DE5\\u4F5C\\u539F\\u7406\",children:\"JSBridge\\u7684\\u5DE5\\u4F5C\\u539F\\u7406\"})}),`\n`,(0,e.jsx)(l.p,{children:\"JSBridge\\u7684\\u5B9E\\u73B0\\u65B9\\u5F0F\\u56E0\\u5E73\\u53F0\\uFF08Android/iOS\\uFF09\\u800C\\u5F02\\uFF0C\\u4F46\\u6838\\u5FC3\\u601D\\u60F3\\u4E00\\u81F4\\uFF1A\\u5229\\u7528WebView\\u63D0\\u4F9B\\u7684\\u201C\\u94A9\\u5B50\\u201D\\u6216\\u201C\\u63A5\\u53E3\\u201D\\uFF0C\\u8BA9JS\\u548CNative\\u4E92\\u76F8\\u201C\\u558A\\u8BDD\\u201D\\u3002\\u6211\\u4EEC\\u5148\\u62C6\\u89E3\\u4E09\\u79CD\\u4E3B\\u8981\\u65B9\\u5F0F\\uFF0C\\u518D\\u6269\\u5C55\\u4E00\\u4E9B\\u51B7\\u95E8\\u4F46\\u5B9E\\u7528\\u7684\\u6280\\u5DE7\\u3002\"}),`\n`,(0,e.jsx)(l.h3,{id:\"1-url-scheme\\u62E6\\u622A\",children:(0,e.jsx)(l.a,{href:\"#1-url-scheme\\u62E6\\u622A\",children:\"1. URL Scheme\\u62E6\\u622A\"})}),`\n`,(0,e.jsxs)(l.p,{children:[\"\\u8FD9\\u662F\\u6700\\u7ECF\\u5178\\u7684\\u5B9E\\u73B0\\u65B9\\u5F0F\\u3002H5\\u901A\\u8FC7\\u6784\\u9020\\u4E00\\u4E2A\\u7279\\u6B8A\\u7684URL\\uFF08\\u6BD4\\u5982\",(0,e.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{children:\"myapp://callCamera\"})})})}),\"\\uFF09\\uFF0C\\u7136\\u540E\\u7528\",(0,e.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{children:\"<a>\"})})})}),\"\\u6807\\u7B7E\\u6216\",(0,e.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{children:\"location.href\"})})})}),\"\\u89E6\\u53D1\\u3002WebView\\u76D1\\u542C\\u5230\\u8FD9\\u4E2AURL\\u540E\\uFF0CNative\\u7AEF\\u89E3\\u6790\\u5E76\\u6267\\u884C\\u5BF9\\u5E94\\u64CD\\u4F5C\\u3002\"]}),`\n`,(0,e.jsx)(l.h4,{id:\"\\u793A\\u4F8B\\u4EE3\\u7801android\",children:(0,e.jsx)(l.a,{href:\"#\\u793A\\u4F8B\\u4EE3\\u7801android\",children:\"\\u793A\\u4F8B\\u4EE3\\u7801\\uFF08Android\\uFF09\"})}),`\n`,(0,e.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,e.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// H5\\u7AEF\\u89E6\\u53D1\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"function\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" callNativeCamera\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  window.location.href \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:' \"myapp://callCamera?callback=handleCameraResult\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// Native\\u7AEF\\uFF08\\u4F2A\\u4EE3\\u7801\\uFF0CJava\\uFF09\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"webView.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"setWebViewClient\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"new\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" WebViewClient\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  @Override\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  public boolean \"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"shouldOverrideUrlLoading\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"WebView\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\" view\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"String\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\" url\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    if\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (url.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"startsWith\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"myapp://\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\")) {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      Uri uri \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" Uri.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"parse\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(url);\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      String method \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" uri.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"getHost\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(); \"}),(0,e.jsx)(l.span,{style:{color:\"#6A737D\"},children:'// \"callCamera\"'})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      String callback \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" uri.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"getQueryParameter\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"callback\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"      takePhoto\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(callback);\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      return\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" true\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"; \"}),(0,e.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u62E6\\u622A\\uFF0C\\u4E0D\\u8BA9WebView\\u52A0\\u8F7D\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    return\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" false\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})}),`\n`,(0,e.jsx)(l.h4,{id:\"\\u5C0Ftips\",children:(0,e.jsx)(l.a,{href:\"#\\u5C0Ftips\",children:\"\\u5C0FTips\"})}),`\n`,(0,e.jsxs)(l.ul,{children:[`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u5B89\\u5168\\u6027\"}),\"\\uFF1AURL Scheme\\u8981\\u52A0\\u5BC6\\u6216\\u52A0\\u7B7E\\u540D\\uFF0C\\u9632\\u6B62\\u6076\\u610F\\u8C03\\u7528\\u3002\\u6BD4\\u5982\\u7528HMAC-SHA256\\u7B7E\\u540D\\u3002\"]}),`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u56DE\\u8C03\"}),\"\\uFF1A\\u901A\\u8FC7URL\\u53C2\\u6570\\u5E26\\u4E0A\\u56DE\\u8C03\\u51FD\\u6570\\u540D\\uFF0CNative\\u6267\\u884C\\u5B8C\\u540E\\u518D\\u901A\\u8FC7JS\\u8C03\\u7528\\u5B83\\u3002\"]}),`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u8C03\\u8BD5\"}),\"\\uFF1A\\u7528\",(0,e.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{children:\"alert\"})})})}),\"\\u6216\",(0,e.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{children:\"console.log\"})})})}),\"\\u6253\\u5370URL\\uFF0C\\u5FEB\\u901F\\u5B9A\\u4F4D\\u95EE\\u9898\\u3002\"]}),`\n`]}),`\n`,(0,e.jsx)(l.h3,{id:\"2-javascript\\u63A5\\u53E3\\u6CE8\\u5165\",children:(0,e.jsx)(l.a,{href:\"#2-javascript\\u63A5\\u53E3\\u6CE8\\u5165\",children:\"2. JavaScript\\u63A5\\u53E3\\u6CE8\\u5165\"})}),`\n`,(0,e.jsxs)(l.p,{children:[\"\\u66F4\\u73B0\\u4EE3\\u7684\\u505A\\u6CD5\\u662FNative\\u901A\\u8FC7WebView\\u6CE8\\u5165\\u5168\\u5C40\\u5BF9\\u8C61\\uFF0CH5\\u76F4\\u63A5\\u8C03\\u7528\\u3002\\u6BD4\\u5982Android\\u7684\",(0,e.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{children:\"addJavascriptInterface\"})})})}),\"\\uFF0CiOS\\u7684\",(0,e.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{children:\"WKScriptMessageHandler\"})})})}),\"\\u3002\"]}),`\n`,(0,e.jsx)(l.h4,{id:\"\\u793A\\u4F8B\\u4EE3\\u7801ios\",children:(0,e.jsx)(l.a,{href:\"#\\u793A\\u4F8B\\u4EE3\\u7801ios\",children:\"\\u793A\\u4F8B\\u4EE3\\u7801\\uFF08iOS\\uFF09\"})}),`\n`,(0,e.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"swift\",\"data-theme\":\"github-dark\",children:(0,e.jsxs)(l.code,{\"data-language\":\"swift\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// Native\\u7AEF\\u6CE8\\u5165\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"let\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" config \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" WKWebViewConfiguration\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"()\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"let\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" userContent \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" WKUserContentController\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"()\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"userContent.\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"add\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"self\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"name\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"nativeBridge\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\")\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"config.userContentController \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" userContent\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"let\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" webView \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" WKWebView\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"frame\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\": .zero, \"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"configuration\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\": config)\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// H5\\u7AEF\\u8C03\\u7528\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"window.webkit.messageHandlers.nativeBridge.\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"postMessage\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  method\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:' \"openMap\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"  data\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\": { lat\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 39.9042\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", lng\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 116.4074\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" }\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})}),`\n`,(0,e.jsx)(l.h4,{id:\"\\u5C0Ftips-1\",children:(0,e.jsx)(l.a,{href:\"#\\u5C0Ftips-1\",children:\"\\u5C0FTips\"})}),`\n`,(0,e.jsxs)(l.ul,{children:[`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u547D\\u540D\\u7A7A\\u95F4\"}),\"\\uFF1A\\u6CE8\\u5165\\u7684\\u5BF9\\u8C61\\u540D\\u8981\\u552F\\u4E00\\uFF0C\\u907F\\u514D\\u51B2\\u7A81\\uFF0C\\u6BD4\\u5982\\u7528\",(0,e.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{children:\"myAppNativeBridge\"})})})}),\"\\u3002\"]}),`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u7248\\u672C\\u517C\\u5BB9\"}),\"\\uFF1A\\u8001\\u7248\\u672CAndroid\\uFF084.4\\u4EE5\\u4E0B\\uFF09\\u6709\\u5B89\\u5168\\u6F0F\\u6D1E\\uFF0C\\u5EFA\\u8BAE\\u52A0\\u9632\\u62A4\\uFF0C\\u6BD4\\u5982\\u9650\\u5236\\u8C03\\u7528\\u6765\\u6E90\\u3002\"]}),`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u6027\\u80FD\"}),\"\\uFF1A\\u6CE8\\u5165\\u5BF9\\u8C61\\u5C3D\\u91CF\\u8F7B\\u91CF\\uFF0C\\u522B\\u585E\\u592A\\u591A\\u65B9\\u6CD5\\u3002\"]}),`\n`]}),`\n`,(0,e.jsx)(l.h3,{id:\"3-promptalert-hack\\u51B7\\u95E8\\u6280\\u5DE7\",children:(0,e.jsx)(l.a,{href:\"#3-promptalert-hack\\u51B7\\u95E8\\u6280\\u5DE7\",children:\"3. Prompt/Alert hack\\uFF08\\u51B7\\u95E8\\u6280\\u5DE7\\uFF09\"})}),`\n`,(0,e.jsxs)(l.p,{children:[\"\\u5728\\u4E00\\u4E9B\\u8001\\u8BBE\\u5907\\u6216\\u4F4E\\u7248\\u672CWebView\\u4E0A\\uFF0C\\u53EF\\u80FD\\u6CA1\\u6709\\u63A5\\u53E3\\u6CE8\\u5165\\u529F\\u80FD\\u3002\\u8FD9\\u65F6\\u53EF\\u4EE5\\u7528\",(0,e.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{children:\"window.prompt\"})})})}),\"\\u6216\",(0,e.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{children:\"window.alert\"})})})}),\"\\u4F5C\\u4E3A\\u901A\\u4FE1\\u901A\\u9053\\u3002H5\\u8C03\\u7528\",(0,e.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{children:\"prompt\"})})})}),\"\\uFF0CNative\\u62E6\\u622A\\u5E76\\u89E3\\u6790\\u3002\"]}),`\n`,(0,e.jsx)(l.h4,{id:\"\\u793A\\u4F8B\\u4EE3\\u7801\",children:(0,e.jsx)(l.a,{href:\"#\\u793A\\u4F8B\\u4EE3\\u7801\",children:\"\\u793A\\u4F8B\\u4EE3\\u7801\"})}),`\n`,(0,e.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,e.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// H5\\u7AEF\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"function\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" callNativeHack\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"method\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"data\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  window.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"prompt\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"JSON\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"stringify\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({ method, data }));\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// Android\\u7AEF\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"webView.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"setWebChromeClient\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"new\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" WebChromeClient\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  @Override\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  public boolean \"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"onJsPrompt\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"WebView\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\" view\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"String\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\" url\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"String\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\" message\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"String\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\" defaultValue\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"JsPromptResult\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\" result\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    JSONObject json \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" JSONObject\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(message);\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    String method \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" json.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"getString\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"method\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"    // \\u5904\\u7406\\u903B\\u8F91\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    result.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"confirm\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"success\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"); \"}),(0,e.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u8FD4\\u56DE\\u7ED3\\u679C\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    return\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" true\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})}),`\n`,(0,e.jsx)(l.h4,{id:\"\\u5C0Ftips-2\",children:(0,e.jsx)(l.a,{href:\"#\\u5C0Ftips-2\",children:\"\\u5C0FTips\"})}),`\n`,(0,e.jsxs)(l.ul,{children:[`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u9002\\u7528\\u6027\"}),\"\\uFF1A\\u4EC5\\u7528\\u4E8E\\u517C\\u5BB9\\u8001\\u8BBE\\u5907\\uFF0C\\u73B0\\u4EE3\\u573A\\u666F\\u4E0D\\u63A8\\u8350\\u3002\"]}),`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u6570\\u636E\\u91CF\"}),\"\\uFF1A\",(0,e.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{children:\"prompt\"})})})}),\"\\u6709\\u957F\\u5EA6\\u9650\\u5236\\uFF0C\\u522B\\u4F20\\u5927\\u6570\\u636E\\u3002\"]}),`\n`]}),`\n`,(0,e.jsx)(l.h3,{id:\"4-\\u53CC\\u5411\\u901A\\u4FE1\\u7684\\u5B9E\\u73B0\",children:(0,e.jsx)(l.a,{href:\"#4-\\u53CC\\u5411\\u901A\\u4FE1\\u7684\\u5B9E\\u73B0\",children:\"4. \\u53CC\\u5411\\u901A\\u4FE1\\u7684\\u5B9E\\u73B0\"})}),`\n`,(0,e.jsxs)(l.p,{children:[\"\\u65E0\\u8BBA\\u662F\\u54EA\\u79CD\\u65B9\\u5F0F\\uFF0C\\u56DE\\u8C03\\u673A\\u5236\\u90FD\\u5FC5\\u4E0D\\u53EF\\u5C11\\u3002H5\\u8C03\\u7528Native\\u540E\\uFF0C\\u901A\\u5E38\\u9700\\u8981\\u7ED3\\u679C\\u8FD4\\u56DE\\u3002\\u6211\\u4EEC\\u53EF\\u4EE5\\u7528\",(0,e.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{children:\"Promise\"})})})}),\"\\u5C01\\u88C5\\uFF0C\\u6216\\u8005\\u901A\\u8FC7\\u5168\\u5C40\\u4E8B\\u4EF6\\u5206\\u53D1\\u3002\"]}),`\n`,(0,e.jsx)(l.h4,{id:\"\\u793A\\u4F8Bpromise\\u5C01\\u88C5\",children:(0,e.jsx)(l.a,{href:\"#\\u793A\\u4F8Bpromise\\u5C01\\u88C5\",children:\"\\u793A\\u4F8B\\uFF08Promise\\u5C01\\u88C5\\uFF09\"})}),`\n`,(0,e.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,e.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"function\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" callNative\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"method\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"data\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" Promise\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"resolve\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"reject\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" callbackId\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\" `cb_${\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"Date\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"now\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"()\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"}`\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    window[callbackId] \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"result\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"      resolve\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(result);\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      delete\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" window[callbackId]; \"}),(0,e.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u6E05\\u7406\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    };\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    window.nativeBridge.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"postMessage\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({ method, data, callbackId });\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"    setTimeout\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(() \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" reject\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"new\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Error\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"Native\\u8D85\\u65F6\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\")), \"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"5000\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"); \"}),(0,e.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u8D85\\u65F6\\u4FDD\\u62A4\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  });\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u4F7F\\u7528\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"callNative\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"getLocation\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", {}).\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"res\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =>\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  console.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"\\u4F4D\\u7F6E\\u83B7\\u53D6\\u6210\\u529F:\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", res);\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}).\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"catch\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"err\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =>\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  console.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"error\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"\\u51FA\\u9519\\u5566:\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", err);\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})}),`\n`,(0,e.jsx)(l.h4,{id:\"\\u5C0Ftips-3\",children:(0,e.jsx)(l.a,{href:\"#\\u5C0Ftips-3\",children:\"\\u5C0FTips\"})}),`\n`,(0,e.jsxs)(l.ul,{children:[`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u552F\\u4E00ID\"}),\"\\uFF1AcallbackId\\u8981\\u5168\\u5C40\\u552F\\u4E00\\uFF0C\\u907F\\u514D\\u8986\\u76D6\\uFF0C\\u53EF\\u4EE5\\u52A0\\u968F\\u673A\\u6570\\u3002\"]}),`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u8D85\\u65F6\\u5904\\u7406\"}),\"\\uFF1A\\u52A0\\u4E2AsetTimeout\\uFF0C\\u9632\\u6B62Native\\u6CA1\\u54CD\\u5E94\\u5361\\u6B7B\\u3002\"]}),`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u9519\\u8BEF\\u65E5\\u5FD7\"}),\"\\uFF1A\\u5931\\u8D25\\u65F6\\u8BB0\\u5F55\\u8BE6\\u7EC6\\u9519\\u8BEF\\uFF0C\\u65B9\\u4FBF\\u6392\\u67E5\\u3002\"]}),`\n`]}),`\n`,(0,e.jsx)(l.h2,{id:\"jsbridge\\u7684\\u5E38\\u89C1\\u5E94\\u7528\\u573A\\u666F\",children:(0,e.jsx)(l.a,{href:\"#jsbridge\\u7684\\u5E38\\u89C1\\u5E94\\u7528\\u573A\\u666F\",children:\"JSBridge\\u7684\\u5E38\\u89C1\\u5E94\\u7528\\u573A\\u666F\"})}),`\n`,(0,e.jsx)(l.p,{children:\"\\u7406\\u8BBA\\u8BB2\\u5B8C\\uFF0C\\u6211\\u4EEC\\u6765\\u770B\\u770BJSBridge\\u5728\\u5B9E\\u6218\\u4E2D\\u600E\\u4E48\\u5927\\u663E\\u8EAB\\u624B\\u3002\\u4EE5\\u4E0B\\u662F\\u66F4\\u591A\\u573A\\u666F\\u548C\\u6848\\u4F8B\\u3002\"}),`\n`,(0,e.jsx)(l.h3,{id:\"1-h5\\u8C03\\u7528native\\u529F\\u80FD\",children:(0,e.jsx)(l.a,{href:\"#1-h5\\u8C03\\u7528native\\u529F\\u80FD\",children:\"1. H5\\u8C03\\u7528Native\\u529F\\u80FD\"})}),`\n`,(0,e.jsxs)(l.ul,{children:[`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u62CD\\u7167/\\u626B\\u7801\"}),\"\\uFF1A\\u7535\\u5546App\\u91CC\\u626B\\u4E8C\\u7EF4\\u7801\\u9886\\u53D6\\u4F18\\u60E0\\u5238\\u3002\"]}),`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u652F\\u4ED8\"}),\"\\uFF1AH5\\u9875\\u9762\\u8C03\\u8D77\\u652F\\u4ED8\\u5B9D/\\u5FAE\\u4FE1\\u652F\\u4ED8\\u3002\"]}),`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u63A8\\u9001\\u901A\\u77E5\"}),\"\\uFF1ANative\\u6536\\u5230\\u63A8\\u9001\\u540E\\u901A\\u77E5H5\\u66F4\\u65B0UI\\u3002\"]}),`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u6587\\u4EF6\\u4E0A\\u4F20\"}),\"\\uFF1AH5\\u9009\\u62E9\\u672C\\u5730\\u6587\\u4EF6\\uFF0CNative\\u5904\\u7406\\u4E0A\\u4F20\\u903B\\u8F91\\u3002\"]}),`\n`]}),`\n`,(0,e.jsx)(l.h3,{id:\"2-native\\u589E\\u5F3Ah5\\u4F53\\u9A8C\",children:(0,e.jsx)(l.a,{href:\"#2-native\\u589E\\u5F3Ah5\\u4F53\\u9A8C\",children:\"2. Native\\u589E\\u5F3AH5\\u4F53\\u9A8C\"})}),`\n`,(0,e.jsxs)(l.ul,{children:[`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u6027\\u80FD\\u4F18\\u5316\"}),\"\\uFF1ANative\\u62E6\\u622A\\u9759\\u6001\\u8D44\\u6E90\\u8BF7\\u6C42\\uFF0C\\u7F13\\u5B58\\u5230\\u672C\\u5730\\u3002\"]}),`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u81EA\\u5B9A\\u4E49UI\"}),\"\\uFF1ANative\\u63D0\\u4F9B\\u6C89\\u6D78\\u5F0F\\u5BFC\\u822A\\u680F\\uFF0CH5\\u53EA\\u7BA1\\u5185\\u5BB9\\u3002\"]}),`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u624B\\u52BF\\u63A7\\u5236\"}),\"\\uFF1ANative\\u76D1\\u542C\\u6ED1\\u52A8\\u4E8B\\u4EF6\\uFF0C\\u589E\\u5F3A\\u4EA4\\u4E92\\u3002\"]}),`\n`]}),`\n`,(0,e.jsx)(l.h3,{id:\"3-\\u6570\\u636E\\u5171\\u4EAB\",children:(0,e.jsx)(l.a,{href:\"#3-\\u6570\\u636E\\u5171\\u4EAB\",children:\"3. \\u6570\\u636E\\u5171\\u4EAB\"})}),`\n`,(0,e.jsxs)(l.ul,{children:[`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u7528\\u6237\\u4FE1\\u606F\"}),\"\\uFF1ANative\\u628A\\u767B\\u5F55\\u6001\\u4F20\\u7ED9H5\\uFF0C\\u514D\\u53BB\\u91CD\\u590D\\u767B\\u5F55\\u3002\"]}),`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u8BBE\\u5907\\u4FE1\\u606F\"}),\"\\uFF1A\\u83B7\\u53D6\\u7535\\u6C60\\u7535\\u91CF\\u3001\\u5C4F\\u5E55\\u65B9\\u5411\\u3001\\u7F51\\u7EDC\\u72B6\\u6001\\u3002\"]}),`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u5B9E\\u65F6\\u6570\\u636E\"}),\"\\uFF1ANative\\u63A8\\u9001\\u80A1\\u7968\\u4EF7\\u683C\\u7ED9H5\\u9875\\u9762\\u3002\"]}),`\n`]}),`\n`,(0,e.jsx)(l.h3,{id:\"4-\\u590D\\u6742\\u4EA4\\u4E92\",children:(0,e.jsx)(l.a,{href:\"#4-\\u590D\\u6742\\u4EA4\\u4E92\",children:\"4. \\u590D\\u6742\\u4EA4\\u4E92\"})}),`\n`,(0,e.jsxs)(l.ul,{children:[`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u76F4\\u64AD\\u95F4\\u63A7\\u5236\"}),\"\\uFF1AH5\\u9875\\u9762\\u63A7\\u5236Native\\u64AD\\u653E\\u5668\\u6682\\u505C/\\u64AD\\u653E\\u3002\"]}),`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u6E38\\u620F\\u589E\\u5F3A\"}),\"\\uFF1AH5\\u6E38\\u620F\\u8C03\\u7528Native\\u7684\\u9707\\u52A8\\u53CD\\u9988\\u3002\"]}),`\n`]}),`\n`,(0,e.jsx)(l.h4,{id:\"\\u5B9E\\u6218\\u6848\\u4F8Bh5\\u8C03\\u8D77\\u5730\\u56FE\\u5BFC\\u822A\",children:(0,e.jsx)(l.a,{href:\"#\\u5B9E\\u6218\\u6848\\u4F8Bh5\\u8C03\\u8D77\\u5730\\u56FE\\u5BFC\\u822A\",children:\"\\u5B9E\\u6218\\u6848\\u4F8B\\uFF1AH5\\u8C03\\u8D77\\u5730\\u56FE\\u5BFC\\u822A\"})}),`\n`,(0,e.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,e.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"function\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" openMapNavigation\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"lat\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"lng\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  callNative\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"openMap\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", { lat, lng }).\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(() \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    console.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"\\u5BFC\\u822A\\u5DF2\\u542F\\u52A8\\uFF01\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }).\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"catch\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"err\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =>\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"    alert\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"\\u5BFC\\u822A\\u5931\\u8D25\\uFF0C\\u8BF7\\u68C0\\u67E5Native\\u652F\\u6301\\uFF01\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  });\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})}),`\n`,(0,e.jsx)(l.h4,{id:\"\\u5B9E\\u6218\\u6848\\u4F8B\\u5B9E\\u65F6\\u6D88\\u606F\\u540C\\u6B65\",children:(0,e.jsx)(l.a,{href:\"#\\u5B9E\\u6218\\u6848\\u4F8B\\u5B9E\\u65F6\\u6D88\\u606F\\u540C\\u6B65\",children:\"\\u5B9E\\u6218\\u6848\\u4F8B\\uFF1A\\u5B9E\\u65F6\\u6D88\\u606F\\u540C\\u6B65\"})}),`\n`,(0,e.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,e.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// Native\\u63A8\\u9001\\u6D88\\u606F\\u7ED9H5\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"window.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"onNativeMessage\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"data\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" { \"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"type\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"content\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" } \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" data;\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  if\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (type \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"===\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:' \"chat\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"    updateChatUI\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(content);\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"};\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// H5\\u53D1\\u9001\\u6D88\\u606F\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"function\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" sendMessage\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"text\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  callNative\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"sendChat\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", { text }).\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"res\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =>\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    console.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"\\u6D88\\u606F\\u53D1\\u9001\\u6210\\u529F:\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", res);\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  });\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})}),`\n`,(0,e.jsx)(l.h2,{id:\"\\u5B9E\\u73B0\\u4E00\\u4E2A\\u5B8C\\u6574\\u7684jsbridge\\u5E93\",children:(0,e.jsx)(l.a,{href:\"#\\u5B9E\\u73B0\\u4E00\\u4E2A\\u5B8C\\u6574\\u7684jsbridge\\u5E93\",children:\"\\u5B9E\\u73B0\\u4E00\\u4E2A\\u5B8C\\u6574\\u7684JSBridge\\u5E93\"})}),`\n`,(0,e.jsx)(l.p,{children:\"\\u4E3A\\u4E86\\u52A0\\u6DF1\\u7406\\u89E3\\uFF0C\\u6211\\u4EEC\\u81EA\\u5DF1\\u52A8\\u624B\\u5199\\u4E2A\\u529F\\u80FD\\u66F4\\u9F50\\u5168\\u7684JSBridge\\u5E93\\u5427\\uFF01\\u76EE\\u6807\\uFF1A\\u652F\\u6301\\u53CC\\u5411\\u901A\\u4FE1\\u3001\\u9519\\u8BEF\\u5904\\u7406\\u3001\\u4E8B\\u4EF6\\u76D1\\u542C\\u3002\"}),`\n`,(0,e.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,e.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"class\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" JSBridge\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  constructor\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".callbacks \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {}; \"}),(0,e.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u5B58\\u50A8\\u56DE\\u8C03\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".eventListeners \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {}; \"}),(0,e.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u4E8B\\u4EF6\\u76D1\\u542C\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".nativeBridge \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" window.nativeBridge \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"||\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" window.webkit?.messageHandlers?.nativeBridge;\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"init\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  init\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"    // Native\\u8C03\\u7528JS\\u7684\\u5168\\u5C40\\u5165\\u53E3\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    window.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"receiveFromNative\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"data\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      const\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" { \"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"callbackId\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"result\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"event\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"payload\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" } \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" data;\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      if\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (callbackId \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"&&\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".callbacks[callbackId]) {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"        this\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".callbacks[callbackId](result);\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"        delete\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".callbacks[callbackId];\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      }\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      if\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (event \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"&&\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".eventListeners[event]) {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"        this\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".eventListeners[event].\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"forEach\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"cb\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =>\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" cb\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(payload));\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      }\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    };\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  call\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"method\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"data\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {}) {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    return\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" Promise\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"resolve\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"reject\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      if\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"!\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"this\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".nativeBridge) {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"        reject\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"new\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Error\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"Native\\u6865\\u672A\\u6CE8\\u5165\\uFF01\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"));\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"        return\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      }\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      const\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" callbackId\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\" `cb_${\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"Date\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"now\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"()\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"}_${\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"Math\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"random\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"().\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"toString\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"36\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\").\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"slice\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"2\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"}`\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"      this\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".callbacks[callbackId] \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" resolve;\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      try\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"        this\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".nativeBridge.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"postMessage\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({ method, data, callbackId });\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      } \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"catch\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (e) {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"        reject\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(e);\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      }\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"      setTimeout\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(() \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"        if\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"this\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".callbacks[callbackId]) {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"          reject\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"new\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Error\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"Native\\u54CD\\u5E94\\u8D85\\u65F6\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"));\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"          delete\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".callbacks[callbackId];\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"        }\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      }, \"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"10000\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    });\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  on\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"event\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"callback\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    if\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"!\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"this\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".eventListeners[event]) {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"      this\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".eventListeners[event] \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" [];\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".eventListeners[event].\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"push\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(callback);\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  off\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"event\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"callback\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    if\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"this\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".eventListeners[event]) {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"      this\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".eventListeners[event] \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".eventListeners[event].\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"filter\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"cb\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =>\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" cb \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"!==\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" callback);\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u4F7F\\u7528\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" bridge\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" JSBridge\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u8C03\\u7528Native\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"bridge.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"call\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"takePhoto\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", { quality: \"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"high\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" }).\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"photo\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =>\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  console.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"\\u7167\\u7247\\u6570\\u636E:\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", photo);\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}).\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"catch\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"err\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =>\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  console.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"error\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"\\u62CD\\u7167\\u5931\\u8D25:\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", err);\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"});\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u76D1\\u542CNative\\u4E8B\\u4EF6\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"bridge.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"on\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"pushNotification\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", (\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"data\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  console.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"\\u6536\\u5230\\u63A8\\u9001:\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", data);\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})}),`\n`,(0,e.jsx)(l.h4,{id:\"\\u5C0Ftips-4\",children:(0,e.jsx)(l.a,{href:\"#\\u5C0Ftips-4\",children:\"\\u5C0FTips\"})}),`\n`,(0,e.jsxs)(l.ul,{children:[`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u9519\\u8BEF\\u5904\\u7406\"}),\"\\uFF1A\\u6355\\u83B7postMessage\\u5F02\\u5E38\\uFF0C\\u9632\\u6B62\\u5D29\\u6E83\\u3002\"]}),`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u4E8B\\u4EF6\\u89E3\\u7ED1\"}),\"\\uFF1A\\u7528\",(0,e.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{children:\"off\"})})})}),\"\\u6E05\\u7406\\u4E0D\\u7528\\u7684\\u76D1\\u542C\\uFF0C\\u7701\\u5185\\u5B58\\u3002\"]}),`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u65E5\\u5FD7\\u589E\\u5F3A\"}),\"\\uFF1A\\u52A0\\u4E2A\",(0,e.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{children:\"debug\"})})})}),\"\\u6A21\\u5F0F\\uFF0C\\u6253\\u5370\\u6BCF\\u6761\\u6D88\\u606F\\u3002\"]}),`\n`]}),`\n`,(0,e.jsx)(l.h2,{id:\"\\u6700\\u4F73\\u5B9E\\u8DF5\\u4E0E\\u8E29\\u5751\\u7ECF\\u9A8C\",children:(0,e.jsx)(l.a,{href:\"#\\u6700\\u4F73\\u5B9E\\u8DF5\\u4E0E\\u8E29\\u5751\\u7ECF\\u9A8C\",children:\"\\u6700\\u4F73\\u5B9E\\u8DF5\\u4E0E\\u8E29\\u5751\\u7ECF\\u9A8C\"})}),`\n`,(0,e.jsx)(l.p,{children:\"JSBridge\\u867D\\u597D\\uFF0C\\u4F46\\u7528\\u4E0D\\u597D\\u4E5F\\u5BB9\\u6613\\u7FFB\\u8F66\\u3002\\u4EE5\\u4E0B\\u662F\\u6211\\u603B\\u7ED3\\u7684\\u4E00\\u4E9B\\u5B9E\\u7528\\u5EFA\\u8BAE\\uFF0C\\u5E26\\u70B9\\u201C\\u8840\\u6CEA\\u53F2\\u201D\\u7684\\u5473\\u9053\\u3002\"}),`\n`,(0,e.jsx)(l.h3,{id:\"1-\\u6027\\u80FD\\u4F18\\u5316\",children:(0,e.jsx)(l.a,{href:\"#1-\\u6027\\u80FD\\u4F18\\u5316\",children:\"1. \\u6027\\u80FD\\u4F18\\u5316\"})}),`\n`,(0,e.jsxs)(l.ul,{children:[`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u51CF\\u5C11\\u901A\\u4FE1\"}),\"\\uFF1A\\u522B\\u5565\\u90FD\\u8C03Native\\uFF0C\\u80FD\\u5728H5\\u89E3\\u51B3\\u7684\\u5C3D\\u91CF\\u81EA\\u5DF1\\u641E\\u5B9A\\u3002\"]}),`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u6279\\u91CF\\u8C03\\u7528\"}),\"\\uFF1A\\u591A\\u6B21\\u5C0F\\u8BF7\\u6C42\\u5408\\u5E76\\u6210\\u4E00\\u6B21\\u5927\\u8BF7\\u6C42\\uFF0C\\u51CF\\u5C11\\u5F00\\u9500\\u3002\"]}),`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u7F13\\u5B58\\u7ED3\\u679C\"}),\"\\uFF1A\\u5E38\\u7528\\u6570\\u636E\\uFF08\\u5982\\u8BBE\\u5907\\u4FE1\\u606F\\uFF09\\u7F13\\u5B58\\u5230localStorage\\u3002\"]}),`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u5C0FTips\"}),\"\\uFF1A\\u7528\",(0,e.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{children:\"performance.now()\"})})})}),\"\\u6D4B\\u901A\\u4FE1\\u8017\\u65F6\\uFF0C\\u627E\\u5230\\u74F6\\u9888\\u3002\"]}),`\n`]}),`\n`,(0,e.jsx)(l.h3,{id:\"2-\\u5B89\\u5168\\u6027\",children:(0,e.jsx)(l.a,{href:\"#2-\\u5B89\\u5168\\u6027\",children:\"2. \\u5B89\\u5168\\u6027\"})}),`\n`,(0,e.jsxs)(l.ul,{children:[`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u53C2\\u6570\\u6821\\u9A8C\"}),\"\\uFF1AH5\\u548CNative\\u90FD\\u8981\\u9A8C\\u8BC1\\u8F93\\u5165\\uFF0C\\u9632\\u6CE8\\u5165\\u3002\"]}),`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u6743\\u9650\\u63A7\\u5236\"}),\"\\uFF1A\\u654F\\u611F\\u64CD\\u4F5C\\u52A0token\\u6821\\u9A8C\\u3002\"]}),`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u52A0\\u5BC6\\u901A\\u4FE1\"}),\"\\uFF1A\\u7528AES\\u52A0\\u5BC6\\u6570\\u636E\\uFF0C\\u9632\\u6B62\\u6293\\u5305\\u3002\"]}),`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u5C0FTips\"}),\"\\uFF1A\\u522B\\u628AcallbackId\\u5199\\u6B7B\\uFF0C\\u968F\\u673A\\u751F\\u6210\\u662F\\u738B\\u9053\\u3002\"]}),`\n`]}),`\n`,(0,e.jsx)(l.h3,{id:\"3-\\u8C03\\u8BD5\\u6280\\u5DE7\",children:(0,e.jsx)(l.a,{href:\"#3-\\u8C03\\u8BD5\\u6280\\u5DE7\",children:\"3. \\u8C03\\u8BD5\\u6280\\u5DE7\"})}),`\n`,(0,e.jsxs)(l.ul,{children:[`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u65E5\\u5FD7\\u7CFB\\u7EDF\"}),\"\\uFF1AH5\\u548CNative\\u90FD\\u6253\\u65E5\\u5FD7\\uFF0C\\u95EE\\u9898\\u4E00\\u76EE\\u4E86\\u7136\\u3002\"]}),`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u6A21\\u62DF\\u5668\"}),\"\\uFF1A\\u672C\\u5730\\u8D77\\u4E2AMock Native\\u73AF\\u5883\\uFF0C\\u5F00\\u53D1\\u6548\\u7387\\u7FFB\\u500D\\u3002\"]}),`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u6293\\u5305\\u5206\\u6790\"}),\"\\uFF1A\\u7528Charles\\u6216Fiddler\\u6293\\u901A\\u4FE1\\u6570\\u636E\\u3002\"]}),`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u5C0FTips\"}),\"\\uFF1AChrome DevTools\\u52A0\",(0,e.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{children:\"console.log\"})})})}),\"\\uFF0CNative\\u7528IDE\\u8C03\\u8BD5\\uFF0C\\u9EC4\\u91D1\\u642D\\u6863\\uFF01\"]}),`\n`]}),`\n`,(0,e.jsx)(l.h3,{id:\"4-\\u590D\\u6742\\u573A\\u666F\\u4F18\\u5316\",children:(0,e.jsx)(l.a,{href:\"#4-\\u590D\\u6742\\u573A\\u666F\\u4F18\\u5316\",children:\"4. \\u590D\\u6742\\u573A\\u666F\\u4F18\\u5316\"})}),`\n`,(0,e.jsxs)(l.ul,{children:[`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u591AWebView\\u7BA1\\u7406\"}),\"\\uFF1A\\u591A\\u4E2AH5\\u9875\\u9762\\u5171\\u7528\\u4E00\\u4E2Abridge\\uFF0C\\u52A0\\u9875\\u9762\\u6807\\u8BC6\\u3002\"]}),`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u91CD\\u8BD5\\u673A\\u5236\"}),\"\\uFF1A\\u7F51\\u7EDC\\u5DEE\\u65F6\\u81EA\\u52A8\\u91CD\\u8BD53\\u6B21\\u3002\"]}),`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u5C0FTips\"}),\"\\uFF1A\\u7528\",(0,e.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{children:\"WeakMap\"})})})}),\"\\u5B58\\u9875\\u9762\\u5B9E\\u4F8B\\uFF0C\\u907F\\u514D\\u5185\\u5B58\\u6CC4\\u6F0F\\u3002\"]}),`\n`]}),`\n`,(0,e.jsx)(l.h3,{id:\"5-\\u5E7D\\u9ED8\\u8E29\\u5751\\u8BB0\",children:(0,e.jsx)(l.a,{href:\"#5-\\u5E7D\\u9ED8\\u8E29\\u5751\\u8BB0\",children:\"5. \\u5E7D\\u9ED8\\u8E29\\u5751\\u8BB0\"})}),`\n`,(0,e.jsxs)(l.p,{children:[\"\\u6709\\u4E00\\u6B21\\u6211\\u5FD8\\u4E86\\u6E05\\u7406\\u56DE\\u8C03\\u51FD\\u6570\\uFF0C\\u7ED3\\u679C\\u5185\\u5B58\\u6CC4\\u6F0F\\uFF0CApp\\u5361\\u6210PPT\\u3002\\u540E\\u6765\\u52A0\\u4E86\\u4E2A\",(0,e.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{children:\"delete\"})})})}),\"\\uFF0C\\u624D\\u53D1\\u73B0\\u201C\\u6E05\\u7406\\u536B\\u751F\\u201D\\u5728\\u4EE3\\u7801\\u91CC\\u4E5F\\u8FD9\\u4E48\\u91CD\\u8981\\u3002\\u{1F602}\\u8FD8\\u6709\\u6B21\\u8C03\\u8BD5\\u5FD8\\u4E86\\u5173\\u65E5\\u5FD7\\uFF0C\\u4E0A\\u7EBF\\u540E\\u7528\\u6237\\u6536\\u5230\\u4E00\\u5806\",(0,e.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{children:\"alert\"})})})}),\"\\uFF0C\\u5DEE\\u70B9\\u88AB\\u4EA7\\u54C1\\u7ECF\\u7406\\u201C\\u8FFD\\u6740\\u201D\\uFF01\"]}),`\n`,(0,e.jsx)(l.h2,{id:\"jsbridge\\u7684\\u6027\\u80FD\\u74F6\\u9888\\u4E0E\\u89E3\\u51B3\\u65B9\\u6848\",children:(0,e.jsx)(l.a,{href:\"#jsbridge\\u7684\\u6027\\u80FD\\u74F6\\u9888\\u4E0E\\u89E3\\u51B3\\u65B9\\u6848\",children:\"JSBridge\\u7684\\u6027\\u80FD\\u74F6\\u9888\\u4E0E\\u89E3\\u51B3\\u65B9\\u6848\"})}),`\n`,(0,e.jsx)(l.p,{children:\"JSBridge\\u867D\\u5F3A\\u5927\\uFF0C\\u4F46\\u4E5F\\u6709\\u77ED\\u677F\\uFF0C\\u5C24\\u5176\\u5728\\u9AD8\\u9891\\u901A\\u4FE1\\u6216\\u5927\\u6570\\u636E\\u4F20\\u8F93\\u65F6\\u3002\"}),`\n`,(0,e.jsx)(l.h3,{id:\"\\u74F6\\u9888\\u5206\\u6790\",children:(0,e.jsx)(l.a,{href:\"#\\u74F6\\u9888\\u5206\\u6790\",children:\"\\u74F6\\u9888\\u5206\\u6790\"})}),`\n`,(0,e.jsxs)(l.ol,{children:[`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u5E8F\\u5217\\u5316\\u5F00\\u9500\"}),\"\\uFF1AJSON.stringify/JSON.parse\\u5F88\\u8017\\u65F6\\u3002\"]}),`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"WebView\\u6E32\\u67D3\"}),\"\\uFF1A\\u9891\\u7E41\\u8C03\\u7528\\u53EF\\u80FD\\u5BFC\\u81F4UI\\u5361\\u987F\\u3002\"]}),`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u5355\\u7EBF\\u7A0B\\u9650\\u5236\"}),\"\\uFF1AJS\\u662F\\u5355\\u7EBF\\u7A0B\\uFF0C\\u901A\\u4FE1\\u5BC6\\u96C6\\u65F6\\u5BB9\\u6613\\u5835\\u585E\\u3002\"]}),`\n`]}),`\n`,(0,e.jsx)(l.h3,{id:\"\\u89E3\\u51B3\\u65B9\\u6848\",children:(0,e.jsx)(l.a,{href:\"#\\u89E3\\u51B3\\u65B9\\u6848\",children:\"\\u89E3\\u51B3\\u65B9\\u6848\"})}),`\n`,(0,e.jsxs)(l.ul,{children:[`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u4E8C\\u8FDB\\u5236\\u4F20\\u8F93\"}),\"\\uFF1A\\u7528ArrayBuffer\\u66FF\\u4EE3JSON\\uFF0C\\u51CF\\u5C11\\u5E8F\\u5217\\u5316\\u6210\\u672C\\u3002\"]}),`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u5206\\u7247\\u4F20\\u8F93\"}),\"\\uFF1A\\u5927\\u6570\\u636E\\u62C6\\u6210\\u5C0F\\u5757\\uFF0C\\u9010\\u6B65\\u53D1\\u9001\\u3002\"]}),`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"Web Worker\"}),\"\\uFF1A\\u901A\\u4FE1\\u903B\\u8F91\\u653E\\u5230Worker\\u91CC\\uFF0C\\u89E3\\u653E\\u4E3B\\u7EBF\\u7A0B\\u3002\"]}),`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"\\u5C0FTips\"}),\"\\uFF1A\\u7528\",(0,e.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{children:\"requestIdleCallback\"})})})}),\"\\u8C03\\u5EA6\\u4F4E\\u4F18\\u5148\\u7EA7\\u4EFB\\u52A1\\uFF0C\\u4F18\\u5316\\u4F53\\u9A8C\\u3002\"]}),`\n`]}),`\n`,(0,e.jsx)(l.h4,{id:\"\\u793A\\u4F8B\\u5206\\u7247\\u4F20\\u8F93\",children:(0,e.jsx)(l.a,{href:\"#\\u793A\\u4F8B\\u5206\\u7247\\u4F20\\u8F93\",children:\"\\u793A\\u4F8B\\uFF1A\\u5206\\u7247\\u4F20\\u8F93\"})}),`\n`,(0,e.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,e.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"function\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" sendLargeData\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"data\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" chunkSize\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 1024\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" *\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 1024\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"; \"}),(0,e.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// 1MB\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" chunks\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" [];\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  for\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"let\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" i \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 0\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"; i \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"<\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" data.\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"length\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"; i \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"+=\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" chunkSize) {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    chunks.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"push\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(data.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"slice\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(i, i \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"+\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" chunkSize));\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  chunks.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"forEach\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"chunk\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"index\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    bridge.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"call\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"sendChunk\"'}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", { chunk, index, total: chunks.\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"length\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" });\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  });\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})}),`\n`,(0,e.jsx)(l.h2,{id:\"jsbridge\\u4E0E\\u6DF7\\u5408\\u5F00\\u53D1\\u751F\\u6001\",children:(0,e.jsx)(l.a,{href:\"#jsbridge\\u4E0E\\u6DF7\\u5408\\u5F00\\u53D1\\u751F\\u6001\",children:\"JSBridge\\u4E0E\\u6DF7\\u5408\\u5F00\\u53D1\\u751F\\u6001\"})}),`\n`,(0,e.jsx)(l.p,{children:\"JSBridge\\u4E0D\\u662F\\u5B64\\u7ACB\\u7684\\uFF0C\\u5B83\\u548C\\u6574\\u4E2A\\u6DF7\\u5408\\u5F00\\u53D1\\u751F\\u6001\\u606F\\u606F\\u76F8\\u5173\\u3002\\u6211\\u4EEC\\u6765\\u770B\\u770B\\u5B83\\u4E0E\\u5176\\u4ED6\\u6280\\u672F\\u7684\\u4E92\\u52A8\\u3002\"}),`\n`,(0,e.jsx)(l.h3,{id:\"1-\\u4E0Ereact-nativeflutter\\u7684\\u5BF9\\u6BD4\",children:(0,e.jsx)(l.a,{href:\"#1-\\u4E0Ereact-nativeflutter\\u7684\\u5BF9\\u6BD4\",children:\"1. \\u4E0EReact Native/Flutter\\u7684\\u5BF9\\u6BD4\"})}),`\n`,(0,e.jsxs)(l.ul,{children:[`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"React Native\"}),\"\\uFF1A\\u76F4\\u63A5\\u7528JS\\u5199Native\\u7EC4\\u4EF6\\uFF0C\\u901A\\u4FE1\\u66F4\\u539F\\u751F\\uFF0C\\u4F46\\u5B66\\u4E60\\u6210\\u672C\\u9AD8\\u3002\"]}),`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"Flutter\"}),\"\\uFF1A\\u5168Dart\\u751F\\u6001\\uFF0C\\u6027\\u80FD\\u4F18\\u5F02\\uFF0C\\u4F46H5\\u96C6\\u6210\\u8F83\\u5F31\\u3002\"]}),`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"JSBridge\"}),\"\\uFF1A\\u8F7B\\u91CF\\u7075\\u6D3B\\uFF0C\\u9002\\u5408\\u5DF2\\u6709H5\\u9879\\u76EE\\u6539\\u9020\\u3002\"]}),`\n`]}),`\n`,(0,e.jsx)(l.h3,{id:\"2-\\u4E0Ewebassembly\\u7684\\u7ED3\\u5408\",children:(0,e.jsx)(l.a,{href:\"#2-\\u4E0Ewebassembly\\u7684\\u7ED3\\u5408\",children:\"2. \\u4E0EWebAssembly\\u7684\\u7ED3\\u5408\"})}),`\n`,(0,e.jsx)(l.p,{children:\"\\u672A\\u6765\\u53EF\\u4EE5\\u7528Wasm\\u505A\\u9AD8\\u6027\\u80FD\\u8BA1\\u7B97\\uFF0C\\u518D\\u901A\\u8FC7JSBridge\\u8C03\\u7528Native\\uFF0C\\u6253\\u9020\\u201C\\u6027\\u80FD\\u602A\\u517D\\u201D\\u3002\"}),`\n`,(0,e.jsx)(l.h3,{id:\"3-\\u4E0Epwa\\u7684\\u7ADE\\u4E89\",children:(0,e.jsx)(l.a,{href:\"#3-\\u4E0Epwa\\u7684\\u7ADE\\u4E89\",children:\"3. \\u4E0EPWA\\u7684\\u7ADE\\u4E89\"})}),`\n`,(0,e.jsx)(l.p,{children:\"PWA\\uFF08\\u6E10\\u8FDB\\u5F0FWeb\\u5E94\\u7528\\uFF09\\u60F3\\u53D6\\u4EE3\\u90E8\\u5206Native\\u529F\\u80FD\\uFF0C\\u4F46\\u53D7\\u9650\\u4E8E\\u6D4F\\u89C8\\u5668API\\uFF0CJSBridge\\u4ECD\\u662F\\u6DF7\\u5408\\u5F00\\u53D1\\u7684\\u6740\\u624B\\u950F\\u3002\"}),`\n`,(0,e.jsx)(l.h2,{id:\"jsbridge\\u7684\\u672A\\u6765\",children:(0,e.jsx)(l.a,{href:\"#jsbridge\\u7684\\u672A\\u6765\",children:\"JSBridge\\u7684\\u672A\\u6765\"})}),`\n`,(0,e.jsx)(l.p,{children:\"\\u968F\\u7740Web\\u6280\\u672F\\u8FDB\\u6B65\\uFF08\\u6BD4\\u5982WebAssembly\\uFF09\\u548CNative\\u80FD\\u529B\\u7684\\u5F00\\u653E\\uFF08Flutter\\u3001React Native\\uFF09\\uFF0CJSBridge\\u4F1A\\u4E0D\\u4F1A\\u201C\\u4E0B\\u5C97\\u201D\\uFF1F\\u6211\\u89C9\\u5F97\\u4E0D\\u4F1A\\uFF0C\\u5B83\\u66F4\\u50CF\\u662F\\u201C\\u8FDB\\u5316\\u201D\\u3002\\u672A\\u6765\\u7684JSBridge\\u53EF\\u80FD\\u4F1A\\u66F4\\u8F7B\\u91CF\\u3001\\u66F4\\u6807\\u51C6\\u5316\\uFF0C\\u751A\\u81F3\\u878D\\u5165\\u5230\\u6846\\u67B6\\u91CC\\uFF0C\\u6210\\u4E3A\\u5F00\\u7BB1\\u5373\\u7528\\u7684\\u529F\\u80FD\\u3002\\u6216\\u8BB8\\u6709\\u4E00\\u5929\\uFF0C\\u6211\\u4EEC\\u4F1A\\u770B\\u5230\\u201CJSBridge 2.0\\u201D\\uFF0C\\u7528WebSocket\\u6216gRPC\\u66FF\\u4EE3\\u73B0\\u5728\\u7684\\u673A\\u5236\\uFF0C\\u5B9E\\u73B0\\u6BEB\\u79D2\\u7EA7\\u901A\\u4FE1\\u3002\"}),`\n`,(0,e.jsx)(l.p,{children:\"\\u7C7B\\u6BD4\\u4E00\\u4E0B\\uFF1AJSBridge\\u5C31\\u50CF\\u4E92\\u8054\\u7F51\\u91CC\\u7684\\u201C\\u90AE\\u5DEE\\u201D\\uFF0C\\u867D\\u7136\\u6709\\u4E86\\u7535\\u5B50\\u90AE\\u4EF6\\uFF0C\\u4F46\\u4F20\\u7EDF\\u4FE1\\u4EF6\\u4F9D\\u7136\\u6709\\u5B83\\u7684\\u6D6A\\u6F2B\\u548C\\u4EF7\\u503C\\u3002\\u{1F4EC}\"}),`\n`,(0,e.jsx)(l.h2,{id:\"\\u603B\\u7ED3\",children:(0,e.jsx)(l.a,{href:\"#\\u603B\\u7ED3\",children:\"\\u603B\\u7ED3\"})}),`\n`,(0,e.jsx)(l.p,{children:\"JSBridge\\u662F\\u6DF7\\u5408\\u5F00\\u53D1\\u4E2D\\u7684\\u201C\\u5E55\\u540E\\u82F1\\u96C4\\u201D\\uFF0C\\u5B83\\u8BA9H5\\u548CNative\\u7684\\u534F\\u4F5C\\u53D8\\u5F97\\u65E0\\u7F1D\\u53C8\\u9AD8\\u6548\\u3002\\u4ECEURL\\u62E6\\u622A\\u5230\\u63A5\\u53E3\\u6CE8\\u5165\\uFF0C\\u4ECE\\u7B80\\u5355\\u8C03\\u7528\\u5230\\u590D\\u6742\\u901A\\u4FE1\\uFF0C\\u5B83\\u7684\\u6838\\u5FC3\\u5728\\u4E8E\\u201C\\u6865\\u6881\\u601D\\u7EF4\\u201D\\u2014\\u2014\\u8FDE\\u63A5\\u3001\\u5206\\u53D1\\u3001\\u53CD\\u9988\\u3002\\u5E0C\\u671B\\u8FD9\\u7BC7\\u6587\\u7AE0\\u80FD\\u5E2E\\u4F60\\u4ECE\\u539F\\u7406\\u5230\\u5B9E\\u8DF5\\u5F7B\\u5E95\\u641E\\u61C2\\u5B83\\uFF0C\\u751A\\u81F3\\u5728\\u4E0B\\u4E2A\\u9879\\u76EE\\u91CC\\u5927\\u653E\\u5F02\\u5F69\\uFF01\"}),`\n`,(0,e.jsx)(l.p,{children:\"\\u5982\\u679C\\u4F60\\u6709\\u5565\\u7591\\u95EE\\u6216\\u60F3\\u5206\\u4EAB\\u81EA\\u5DF1\\u7684JSBridge\\u6545\\u4E8B\\uFF0C\\u6B22\\u8FCE\\u7559\\u8A00\\uFF0C\\u54B1\\u4EEC\\u4E00\\u8D77\\u804A\\u804A\\uFF01\\u6BD5\\u7ADF\\uFF0C\\u6280\\u672F\\u662F\\u6B7B\\u7684\\uFF0C\\u4EA4\\u6D41\\u662F\\u6D3B\\u7684\\u561B\\u3002\\u{1F60E}\"}),`\n`,(0,e.jsx)(l.hr,{})]})}function h(n={}){let{wrapper:l}=n.components||{};return l?(0,e.jsx)(l,{...n,children:(0,e.jsx)(t,{...n})}):t(n)}return v(m);})();\n;return Component;"
  },
  "_id": "JavaScript/æ·±å…¥ç†è§£JSBridgeåŠå…¶åº”ç”¨.mdx",
  "_raw": {
    "sourceFilePath": "JavaScript/æ·±å…¥ç†è§£JSBridgeåŠå…¶åº”ç”¨.mdx",
    "sourceFileName": "æ·±å…¥ç†è§£JSBridgeåŠå…¶åº”ç”¨.mdx",
    "sourceFileDir": "JavaScript",
    "contentType": "mdx",
    "flattenedPath": "JavaScript/æ·±å…¥ç†è§£JSBridgeåŠå…¶åº”ç”¨"
  },
  "type": "Post",
  "url": "/blog/JavaScript/æ·±å…¥ç†è§£JSBridgeåŠå…¶åº”ç”¨"
}