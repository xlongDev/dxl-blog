{
  "title": "æ­ç§˜æ–‡ä»¶ä¸Šä¼ è¿›åº¦æ¡çš„èƒŒåã€Œé»‘é­”æ³•ã€",
  "date": "2023-03-15T00:00:00.000Z",
  "description": "æ·±å…¥å‰–æå‰ç«¯æ–‡ä»¶ä¸Šä¼ è¿›åº¦æ¡çš„å®ç°åŸç†ä¸æŠ€æœ¯ç»†èŠ‚ï¼Œä»åº•å±‚åè®®åˆ°æœ€ä½³å®è·µï¼Œæ­ç§˜é‚£äº›é²œä¸ºäººçŸ¥çš„ã€Œé­”æ³•ã€æŠ€å·§ã€‚",
  "keywords": "æ–‡ä»¶ä¸Šä¼ ,è¿›åº¦æ¡,XHR,Fetch API,åˆ†å—ä¸Šä¼ ,å‰ç«¯ä¼˜åŒ–",
  "author": "æ™“é¾™",
  "image": "/images/tech/upload-progress.jpg",
  "tags": [
    "å‰ç«¯å¼€å‘",
    "Web API",
    "æ€§èƒ½ä¼˜åŒ–"
  ],
  "views": 0,
  "likes": 0,
  "category": "å‰ç«¯æŠ€æœ¯",
  "body": {
    "raw": "\nå½“æˆ‘ä»¬ç‚¹å‡»ä¸Šä¼ æŒ‰é’®æ—¶ï¼Œé‚£ä¸ªä¼˜é›…æ»‘åŠ¨çš„è¿›åº¦æ¡ä»¿ä½›æœ‰é­”æ³•èˆ¬ç²¾å‡†é¢„æµ‹ç€ä¸Šä¼ æ—¶é—´ã€‚ä½†åœ¨è¿™çœ‹ä¼¼ç®€å•çš„åŠ¨ç”»èƒŒåï¼Œéšè—ç€ä¸€ç³»åˆ—ç²¾å¦™çš„æŠ€æœ¯é…åˆã€‚ä»Šå¤©ï¼Œå°±è®©æˆ‘ä»¬åŒ–èº«ã€Œå‰ç«¯é­”æ³•å¸ˆã€ï¼Œç”¨ä»£ç å©åŸšç†¬åˆ¶è¿™ä»½è¿›åº¦æ¡ç§˜è¯å§ï¼ğŸ§™â™‚ï¸\n\n![æ–‡ä»¶ä¸Šä¼ æµç¨‹ç¤ºæ„å›¾](/images/tech/upload-flow.png)\n\n## ä¸€ã€è¿›åº¦æ¡çš„ã€Œæ—¶é—´é­”æ³•ã€åŸºç¡€åŸç†\n\n### 1.1 HTTP åè®®çš„ã€Œé¢„è¨€ã€èƒ½åŠ›\næ¯ä¸ªæ–‡ä»¶ä¸Šä¼ è¯·æ±‚éƒ½åƒå¯„é€å¿«é€’åŒ…è£¹ğŸ“¦ï¼ŒæœåŠ¡å™¨éœ€è¦çŸ¥é“åŒ…è£¹çš„æ€»é‡é‡ï¼ˆContent-Lengthï¼‰æ‰èƒ½é¢„ä¼°è¿è¾“æ—¶é—´ã€‚è¿™å°±æ˜¯è¿›åº¦é¢„æµ‹çš„åŸºç¡€ï¼š\n\n```javascript\n// é€šè¿‡ File API è·å–æ–‡ä»¶å…ƒä¿¡æ¯\nconst file = document.querySelector('input').files[0];\nconsole.log(`åŒ…è£¹æ€»é‡é‡ï¼š${file.size} å­—èŠ‚`);\n```\n\n**åº•å±‚é»‘é­”æ³•æ­ç§˜**ï¼š  \nç°ä»£æµè§ˆå™¨é€šè¿‡ [Streams API](https://developer.mozilla.org/en-US/docs/Web/API/Streams_API) å°†æ–‡ä»¶åˆ‡åˆ†ä¸ºå¤šä¸ªæ•°æ®å—ï¼ˆchunkï¼‰ï¼Œæ¯ä¸ª chunk å°±åƒå¿«é€’è¿è¾“è½¦ğŸš›ï¼Œæµè§ˆå™¨ä¼šåœ¨å‘è½¦å‰å‘ŠçŸ¥æ€»è½¦æ¬¡ï¼š\n\n```bash\n# è¯·æ±‚å¤´ä¸­è‡ªåŠ¨æºå¸¦å…³é”®ä¿¡æ¯\nContent-Length: 2678543  # æ€»å­—èŠ‚æ•°\nContent-Type: multipart/form-data # åŒ…è£¹ç±»å‹\n```\n\n### 1.2 æµè§ˆå™¨çš„äº‹ä»¶ã€Œæ°´æ™¶çƒã€\næµè§ˆå™¨æä¾›äº†ä¸¤ç§ã€Œé¢„è¨€ã€è¿›åº¦çš„æ–¹å¼ï¼š\n\n#### æ–¹æ¡ˆ Aï¼šXMLHttpRequest çš„ã€Œå åœæœ¯ã€\n```javascript\nconst xhr = new XMLHttpRequest();\nxhr.upload.addEventListener('progress', (e) => {\n  if (e.lengthComputable) {\n    const percent = (e.loaded / e.total) * 100;\n    console.log(`å½“å‰è¿›åº¦ï¼š${percent.toFixed(2)}%`);\n  }\n});\n```\n\n#### æ–¹æ¡ˆ Bï¼šFetch API çš„ã€Œç°ä»£å·«æœ¯ã€\n```javascript\nconst response = await fetch(url, {\n  method: 'POST',\n  body: formData,\n  signal: controller.signal\n});\n\nconst reader = response.body.getReader();\nwhile(true) {\n  const { done, value } = await reader.read();\n  if (done) break;\n  console.log('æ”¶åˆ°æ•°æ®å—:', value);\n}\n```\n\n**âš¡ å®æˆ˜å°è´´å£«**ï¼š  \nä½¿ç”¨ `performance.now()` è®°å½•æ—¶é—´æˆ³ï¼Œå¯ä»¥è®¡ç®—å®æ—¶ä¸Šä¼ é€Ÿåº¦ï¼š\n```javascript\nlet lastLoaded = 0;\nlet lastTime = performance.now();\n\nfunction calculateSpeed(currentLoaded) {\n  const deltaTime = (performance.now() - lastTime) / 1000;\n  const speed = (currentLoaded - lastLoaded) / deltaTime; \n  lastLoaded = currentLoaded;\n  lastTime = performance.now();\n  return `${(speed / 1024).toFixed(2)} KB/s`;\n}\n```\n\n## äºŒã€åˆ†å—ä¸Šä¼ çš„ã€Œç©ºé—´é­”æ³•ã€å®è·µ\n\n### 2.1 å¤§æ–‡ä»¶åˆ†å—ä¼ è¾“åè®®\nå½“ä¸Šä¼  2GB çš„è®¾è®¡ç¨¿æ—¶ï¼Œç›´æ¥ä¼ é€å°±åƒç”¨ç‹¬æœ¨èˆŸæ¨ªæ¸¡å¤ªå¹³æ´‹â›µã€‚åˆ†å—ä¸Šä¼ å°†æ–‡ä»¶åˆ‡åˆ†ä¸ºå¤šä¸ªå°èˆ¹é˜Ÿï¼š\n\n```javascript\nconst CHUNK_SIZE = 5 * 1024 * 1024; // 5MB\nlet offset = 0;\n\nwhile (offset < file.size) {\n  const chunk = file.slice(offset, offset + CHUNK_SIZE);\n  uploadChunk(chunk);\n  offset += CHUNK_SIZE;\n}\n\nasync function uploadChunk(chunk) {\n  const formData = new FormData();\n  formData.append('chunk', chunk);\n  formData.append('chunkIndex', currentChunk);\n  await fetch('/upload-chunk', { method: 'POST', body: formData });\n}\n```\n\n### 2.2 å¹¶å‘æ§åˆ¶çš„ã€Œå¤šé‡å½±åˆ†èº«ã€\né€šè¿‡ Promise.all å®ç°å¹¶è¡Œä¸Šä¼ ï¼Œå°±åƒæ´¾å‡ºå¤šä¸ªå¿«é€’å‘˜åŒæ—¶é€è´§ï¼š\n\n```javascript\nconst MAX_CONCURRENT = 3; // æœ€å¤§å¹¶å‘æ•°\nconst chunksQueue = [];\n\nfor (let i = 0; i < totalChunks; i++) {\n  if (chunksQueue.length < MAX_CONCURRENT) {\n    chunksQueue.push(uploadChunk(i));\n  } else {\n    await Promise.race(chunksQueue);\n    chunksQueue.push(uploadChunk(i));\n  }\n}\nawait Promise.all(chunksQueue);\n```\n\n**ğŸ”¥ é«˜é˜¶æŠ€å·§**ï¼š  \nä½¿ç”¨ Web Worker å¤„ç†åŠ å¯†/å‹ç¼©ï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹ï¼š\n```javascript\n// åœ¨ä¸»çº¿ç¨‹\nconst worker = new Worker('crypto-worker.js');\nworker.postMessage({ file: chunk });\n\n// åœ¨ Worker ä¸­\nself.onmessage = (e) => {\n  const encrypted = encryptChunk(e.data.file);\n  self.postMessage(encrypted);\n};\n```\n\n## ä¸‰ã€è¿›åº¦æ¡çš„ã€Œè§†è§‰é­”æ³•ã€ä¼˜åŒ–\n\n### 3.1 æŠ—æŠ–åŠ¨å¹³æ»‘ç®—æ³•\nåŸå§‹è¿›åº¦äº‹ä»¶åƒå¿ƒç”µå›¾èˆ¬æŠ–åŠ¨ï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ ã€Œç¨³å®šå‰‚ã€ï¼š\n\n```javascript\nlet lastUpdate = 0;\nconst SMOOTH_INTERVAL = 200; // 200ms æ›´æ–°ä¸€æ¬¡\n\nfunction updateProgress(current) {\n  const now = Date.now();\n  if (now - lastUpdate > SMOOTH_INTERVAL) {\n    renderProgress(current);\n    lastUpdate = now;\n  }\n}\n```\n\n### 3.2 è¿›åº¦é¢„æµ‹çš„ã€Œå…ˆçŸ¥ç®—æ³•ã€\nåŸºäºå‰©ä½™æ—¶é—´å’Œé€Ÿåº¦é¢„æµ‹ï¼Œè®©ç”¨æˆ·å¿ƒä¸­æœ‰æ•°ï¼š\n\n```javascript\nfunction calculateETA(total, loaded, speed) {\n  const remainingBytes = total - loaded;\n  const seconds = remainingBytes / speed;\n  \n  if (seconds > 3600) {\n    return `${(seconds/3600).toFixed(1)} å°æ—¶`;\n  } else if (seconds > 60) {\n    return `${(seconds/60).toFixed(1)} åˆ†é’Ÿ`;\n  }\n  return `${Math.ceil(seconds)} ç§’`;\n}\n```\n\n**ğŸ¨ åŠ¨ç”»é»‘é­”æ³•**ï¼š  \nä½¿ç”¨ CSS Transition å®ç°ä¸æ»‘åŠ¨ç”»ï¼š\n```css\n.progress-bar {\n  transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n}\n```\n\n## å››ã€ã€Œé˜²å¾¡æ€§é­”æ³•ã€æœ€ä½³å®è·µ\n\n### 4.1 æ–­ç‚¹ç»­ä¼ å®ç°\nä¸ºæ¯ä¸ªåˆ†å—ç”Ÿæˆå”¯ä¸€æŒ‡çº¹ï¼Œæ”¯æŒä»æ–­ç‚¹æ¢å¤ï¼š\n\n```javascript\nasync function resumeUpload() {\n  const res = await fetch('/upload-status');\n  const { uploadedChunks } = await res.json();\n  \n  chunks.forEach((_, index) => {\n    if (!uploadedChunks.includes(index)) {\n      uploadChunk(index);\n    }\n  });\n}\n```\n\n### 4.2 é”™è¯¯é‡è¯•æœºåˆ¶\nä¸ºä¸Šä¼ æ“ä½œæ·»åŠ è‡ªåŠ¨å¤æ´»æœ¯ï¼š\n\n```javascript\nasync function retryWrapper(fn, maxRetries = 3) {\n  let retries = 0;\n  \n  while (retries < maxRetries) {\n    try {\n      return await fn();\n    } catch (err) {\n      retries++;\n      await new Promise(r => setTimeout(r, 1000 * retries));\n    }\n  }\n  throw new Error('ä¸Šä¼ å¤±è´¥');\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nawait retryWrapper(() => uploadChunk(5));\n```\n\n## äº”ã€å‰æ²¿ã€Œé»‘é­”æ³•ã€æŠ€æœ¯æ‹“å±•\n\n### 5.1 WebSocket å®æ—¶è¿›åº¦\nå»ºç«‹åŒå‘é€šä¿¡é€šé“ï¼Œå®ç°ç§’çº§è¿›åº¦åŒæ­¥ï¼š\n\n```javascript\nconst ws = new WebSocket('wss://api.example.com/upload');\n\nws.onmessage = (event) => {\n  const data = JSON.parse(event.data);\n  if (data.type === 'progress') {\n    updateProgress(data.percent);\n  }\n};\n\n// å‘é€åˆ†å—å®Œæˆé€šçŸ¥\nfunction onChunkUploaded(index) {\n  ws.send(JSON.stringify({ type: 'chunk', index }));\n}\n```\n\n### 5.2 WASM åŠ é€ŸåŠ å¯†\nä½¿ç”¨ WebAssembly è¿›è¡Œé«˜æ€§èƒ½åŠ å¯†ï¼š\n\n```rust\n// lib.rs\n#[wasm_bindgen]\npub fn encrypt_chunk(data: &[u8]) -> Vec<u8> {\n  // AES åŠ å¯†é€»è¾‘\n}\n```\n\n```javascript\n// åœ¨å‰ç«¯è°ƒç”¨\nconst wasmModule = await import('./encrypt.wasm');\nconst encrypted = wasmModule.encrypt_chunk(chunkData);\n```\n\n## å…­ã€é­”æ³•å®éªŒå®¤ï¼ˆæœ€ä½³å®è·µæ¸…å•ï¼‰\n\nğŸ”® **å®æˆ˜å’’è¯­æ¸…å•**ï¼š\n1. å§‹ç»ˆè®¾ç½® `Content-Length` å¤´éƒ¨\n2. ä½¿ç”¨åˆ†å—ä¸Šä¼ å¤„ç†å¤§æ–‡ä»¶ï¼ˆ>50MBï¼‰\n3. ä¸ºç§»åŠ¨ç«¯å¢åŠ  20% çš„è¿›åº¦ç¼“å†²\n4. é‡‡ç”¨æŒ‡æ•°é€€é¿é‡è¯•ç­–ç•¥\n5. é€šè¿‡ `navigator.connection` é€‚é…ç½‘ç»œç±»å‹\n6. æ·»åŠ æš‚åœ/æ¢å¤åŠŸèƒ½\n7. ä½¿ç”¨ Web Vitals ç›‘æ§ä¸Šä¼ æ€§èƒ½\n\n```javascript\n// ç½‘ç»œç±»å‹é€‚é…ç¤ºä¾‹\nif (navigator.connection.effectiveType === '4g') {\n  MAX_CONCURRENT = 5;\n} else {\n  MAX_CONCURRENT = 2;\n}\n```\n\n## ç»“è¯­ï¼šé­”æ³•å¸ˆçš„è‡ªæˆ‘ä¿®å…»\n\næ–‡ä»¶ä¸Šä¼ è¿›åº¦æ¡çš„é­”æ³•ä¸–ç•Œè¿œä¸æ­¢äºæ­¤ï¼Œéšç€ WebTransportã€WebRTC ç­‰æ–°æŠ€æœ¯çš„å‘å±•ï¼Œæœªæ¥æˆ‘ä»¬ç”šè‡³å¯ä»¥å®ç° P2P æ–‡ä»¶ä¼ è¾“ã€‚è®°ä½ï¼Œä¼˜ç§€çš„é­”æ³•å¸ˆä¸ä»…è¦æŒæ¡å’’è¯­ï¼Œæ›´è¦ç†è§£èƒŒåçš„å¥¥æœ¯åŸç†ã€‚ä¸‹æ¬¡å½“ç”¨æˆ·æƒŠå¹äºä¸æ»‘çš„è¿›åº¦æ¡æ—¶ï¼Œä½ å¯ä»¥å¾®å¾®ä¸€ç¬‘â€”â€”è¿™å¯æ˜¯å‰ç«¯é­”æ³•å¸ˆçš„ç‹¬å®¶ç§˜æŠ€ï¼âœ¨\n\n> \"ä»»ä½•è¶³å¤Ÿå…ˆè¿›çš„ç§‘æŠ€ï¼Œçš†ä¸é­”æ³•æ— å¼‚ã€‚\" â€”â€” äºšç‘ŸÂ·CÂ·å…‹æ‹‰å…‹\n\n---\n\n**ğŸ“š æ‰©å±•é˜…è¯»**ï¼š\n- [Streams API å®æˆ˜æŒ‡å—](https://web.dev/streams/)\n- [WebAssembly æ€§èƒ½ä¼˜åŒ–æ¡ˆä¾‹](https://rustwasm.github.io/)\n- [HTTP/3 å¯¹æ–‡ä»¶ä¸Šä¼ çš„å½±å“](https://http3-explained.haxx.se/)",
    "code": "var Component=(()=>{var p=Object.create;var s=Object.defineProperty;var E=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var F=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(n,l)=>()=>(l||n((l={exports:{}}).exports,l),l.exports),B=(n,l)=>{for(var r in l)s(n,r,{get:l[r],enumerable:!0})},o=(n,l,r,a)=>{if(l&&typeof l==\"object\"||typeof l==\"function\")for(let c of y(l))!u.call(n,c)&&c!==r&&s(n,c,{get:()=>l[c],enumerable:!(a=E(l,c))||a.enumerable});return n};var f=(n,l,r)=>(r=n!=null?p(F(n)):{},o(l||!n||!n.__esModule?s(r,\"default\",{value:n,enumerable:!0}):r,n)),m=n=>o(s({},\"__esModule\",{value:!0}),n);var i=g((w,d)=>{d.exports=_jsx_runtime});var k={};B(k,{default:()=>h,frontmatter:()=>b});var e=f(i()),b={type:\"Post\",title:\"\\u63ED\\u79D8\\u6587\\u4EF6\\u4E0A\\u4F20\\u8FDB\\u5EA6\\u6761\\u7684\\u80CC\\u540E\\u300C\\u9ED1\\u9B54\\u6CD5\\u300D\",date:\"2023-03-15\",description:\"\\u6DF1\\u5165\\u5256\\u6790\\u524D\\u7AEF\\u6587\\u4EF6\\u4E0A\\u4F20\\u8FDB\\u5EA6\\u6761\\u7684\\u5B9E\\u73B0\\u539F\\u7406\\u4E0E\\u6280\\u672F\\u7EC6\\u8282\\uFF0C\\u4ECE\\u5E95\\u5C42\\u534F\\u8BAE\\u5230\\u6700\\u4F73\\u5B9E\\u8DF5\\uFF0C\\u63ED\\u79D8\\u90A3\\u4E9B\\u9C9C\\u4E3A\\u4EBA\\u77E5\\u7684\\u300C\\u9B54\\u6CD5\\u300D\\u6280\\u5DE7\\u3002\",keywords:\"\\u6587\\u4EF6\\u4E0A\\u4F20,\\u8FDB\\u5EA6\\u6761,XHR,Fetch API,\\u5206\\u5757\\u4E0A\\u4F20,\\u524D\\u7AEF\\u4F18\\u5316\",author:\"\\u6653\\u9F99\",image:\"/images/tech/upload-progress.jpg\",tags:[\"\\u524D\\u7AEF\\u5F00\\u53D1\",\"Web API\",\"\\u6027\\u80FD\\u4F18\\u5316\"],category:\"\\u524D\\u7AEF\\u6280\\u672F\"};function t(n){let l={a:\"a\",blockquote:\"blockquote\",br:\"br\",code:\"code\",figure:\"figure\",h2:\"h2\",h3:\"h3\",h4:\"h4\",hr:\"hr\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...n.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(l.p,{children:\"\\u5F53\\u6211\\u4EEC\\u70B9\\u51FB\\u4E0A\\u4F20\\u6309\\u94AE\\u65F6\\uFF0C\\u90A3\\u4E2A\\u4F18\\u96C5\\u6ED1\\u52A8\\u7684\\u8FDB\\u5EA6\\u6761\\u4EFF\\u4F5B\\u6709\\u9B54\\u6CD5\\u822C\\u7CBE\\u51C6\\u9884\\u6D4B\\u7740\\u4E0A\\u4F20\\u65F6\\u95F4\\u3002\\u4F46\\u5728\\u8FD9\\u770B\\u4F3C\\u7B80\\u5355\\u7684\\u52A8\\u753B\\u80CC\\u540E\\uFF0C\\u9690\\u85CF\\u7740\\u4E00\\u7CFB\\u5217\\u7CBE\\u5999\\u7684\\u6280\\u672F\\u914D\\u5408\\u3002\\u4ECA\\u5929\\uFF0C\\u5C31\\u8BA9\\u6211\\u4EEC\\u5316\\u8EAB\\u300C\\u524D\\u7AEF\\u9B54\\u6CD5\\u5E08\\u300D\\uFF0C\\u7528\\u4EE3\\u7801\\u5769\\u57DA\\u71AC\\u5236\\u8FD9\\u4EFD\\u8FDB\\u5EA6\\u6761\\u79D8\\u836F\\u5427\\uFF01\\u{1F9D9}\\u2642\\uFE0F\"}),`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.img,{src:\"/images/tech/upload-flow.png\",alt:\"\\u6587\\u4EF6\\u4E0A\\u4F20\\u6D41\\u7A0B\\u793A\\u610F\\u56FE\"})}),`\n`,(0,e.jsx)(l.h2,{id:\"\\u4E00\\u8FDB\\u5EA6\\u6761\\u7684\\u65F6\\u95F4\\u9B54\\u6CD5\\u57FA\\u7840\\u539F\\u7406\",children:(0,e.jsx)(l.a,{href:\"#\\u4E00\\u8FDB\\u5EA6\\u6761\\u7684\\u65F6\\u95F4\\u9B54\\u6CD5\\u57FA\\u7840\\u539F\\u7406\",children:\"\\u4E00\\u3001\\u8FDB\\u5EA6\\u6761\\u7684\\u300C\\u65F6\\u95F4\\u9B54\\u6CD5\\u300D\\u57FA\\u7840\\u539F\\u7406\"})}),`\n`,(0,e.jsx)(l.h3,{id:\"11-http-\\u534F\\u8BAE\\u7684\\u9884\\u8A00\\u80FD\\u529B\",children:(0,e.jsx)(l.a,{href:\"#11-http-\\u534F\\u8BAE\\u7684\\u9884\\u8A00\\u80FD\\u529B\",children:\"1.1 HTTP \\u534F\\u8BAE\\u7684\\u300C\\u9884\\u8A00\\u300D\\u80FD\\u529B\"})}),`\n`,(0,e.jsx)(l.p,{children:\"\\u6BCF\\u4E2A\\u6587\\u4EF6\\u4E0A\\u4F20\\u8BF7\\u6C42\\u90FD\\u50CF\\u5BC4\\u9001\\u5FEB\\u9012\\u5305\\u88F9\\u{1F4E6}\\uFF0C\\u670D\\u52A1\\u5668\\u9700\\u8981\\u77E5\\u9053\\u5305\\u88F9\\u7684\\u603B\\u91CD\\u91CF\\uFF08Content-Length\\uFF09\\u624D\\u80FD\\u9884\\u4F30\\u8FD0\\u8F93\\u65F6\\u95F4\\u3002\\u8FD9\\u5C31\\u662F\\u8FDB\\u5EA6\\u9884\\u6D4B\\u7684\\u57FA\\u7840\\uFF1A\"}),`\n`,(0,e.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,e.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u901A\\u8FC7 File API \\u83B7\\u53D6\\u6587\\u4EF6\\u5143\\u4FE1\\u606F\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" file\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" document.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"querySelector\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'input'\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\").files[\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"];\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"console.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"`\\u5305\\u88F9\\u603B\\u91CD\\u91CF\\uFF1A${\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"file\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"size\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"} \\u5B57\\u8282`\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]})]})})}),`\n`,(0,e.jsxs)(l.p,{children:[(0,e.jsx)(l.strong,{children:\"\\u5E95\\u5C42\\u9ED1\\u9B54\\u6CD5\\u63ED\\u79D8\"}),\"\\uFF1A\",(0,e.jsx)(l.br,{}),`\n`,\"\\u73B0\\u4EE3\\u6D4F\\u89C8\\u5668\\u901A\\u8FC7 \",(0,e.jsx)(l.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/Streams_API\",children:\"Streams API\"}),\" \\u5C06\\u6587\\u4EF6\\u5207\\u5206\\u4E3A\\u591A\\u4E2A\\u6570\\u636E\\u5757\\uFF08chunk\\uFF09\\uFF0C\\u6BCF\\u4E2A chunk \\u5C31\\u50CF\\u5FEB\\u9012\\u8FD0\\u8F93\\u8F66\\u{1F69B}\\uFF0C\\u6D4F\\u89C8\\u5668\\u4F1A\\u5728\\u53D1\\u8F66\\u524D\\u544A\\u77E5\\u603B\\u8F66\\u6B21\\uFF1A\"]}),`\n`,(0,e.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"github-dark\",children:(0,e.jsxs)(l.code,{\"data-language\":\"bash\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"# \\u8BF7\\u6C42\\u5934\\u4E2D\\u81EA\\u52A8\\u643A\\u5E26\\u5173\\u952E\\u4FE1\\u606F\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"Content-Length:\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 2678543\"}),(0,e.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"  # \\u603B\\u5B57\\u8282\\u6570\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"Content-Type:\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\" multipart/form-data\"}),(0,e.jsx)(l.span,{style:{color:\"#6A737D\"},children:\" # \\u5305\\u88F9\\u7C7B\\u578B\"})]})]})})}),`\n`,(0,e.jsx)(l.h3,{id:\"12-\\u6D4F\\u89C8\\u5668\\u7684\\u4E8B\\u4EF6\\u6C34\\u6676\\u7403\",children:(0,e.jsx)(l.a,{href:\"#12-\\u6D4F\\u89C8\\u5668\\u7684\\u4E8B\\u4EF6\\u6C34\\u6676\\u7403\",children:\"1.2 \\u6D4F\\u89C8\\u5668\\u7684\\u4E8B\\u4EF6\\u300C\\u6C34\\u6676\\u7403\\u300D\"})}),`\n`,(0,e.jsx)(l.p,{children:\"\\u6D4F\\u89C8\\u5668\\u63D0\\u4F9B\\u4E86\\u4E24\\u79CD\\u300C\\u9884\\u8A00\\u300D\\u8FDB\\u5EA6\\u7684\\u65B9\\u5F0F\\uFF1A\"}),`\n`,(0,e.jsx)(l.h4,{id:\"\\u65B9\\u6848-axmlhttprequest-\\u7684\\u5360\\u535C\\u672F\",children:(0,e.jsx)(l.a,{href:\"#\\u65B9\\u6848-axmlhttprequest-\\u7684\\u5360\\u535C\\u672F\",children:\"\\u65B9\\u6848 A\\uFF1AXMLHttpRequest \\u7684\\u300C\\u5360\\u535C\\u672F\\u300D\"})}),`\n`,(0,e.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,e.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" xhr\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" XMLHttpRequest\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"xhr.upload.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"addEventListener\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'progress'\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", (\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"e\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  if\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (e.lengthComputable) {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" percent\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (e.loaded \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"/\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" e.total) \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"*\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 100\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    console.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"`\\u5F53\\u524D\\u8FDB\\u5EA6\\uFF1A${\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"percent\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"toFixed\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"2\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"}%`\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})}),`\n`,(0,e.jsx)(l.h4,{id:\"\\u65B9\\u6848-bfetch-api-\\u7684\\u73B0\\u4EE3\\u5DEB\\u672F\",children:(0,e.jsx)(l.a,{href:\"#\\u65B9\\u6848-bfetch-api-\\u7684\\u73B0\\u4EE3\\u5DEB\\u672F\",children:\"\\u65B9\\u6848 B\\uFF1AFetch API \\u7684\\u300C\\u73B0\\u4EE3\\u5DEB\\u672F\\u300D\"})}),`\n`,(0,e.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,e.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" response\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" fetch\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(url, {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  method: \"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'POST'\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  body: formData,\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  signal: controller.signal\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"});\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" reader\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" response.body.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"getReader\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"while\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"true\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" { \"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"done\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"value\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" } \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" reader.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"read\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  if\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (done) \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"break\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  console.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'\\u6536\\u5230\\u6570\\u636E\\u5757:'\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", value);\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})}),`\n`,(0,e.jsxs)(l.p,{children:[(0,e.jsx)(l.strong,{children:\"\\u26A1 \\u5B9E\\u6218\\u5C0F\\u8D34\\u58EB\"}),\"\\uFF1A\",(0,e.jsx)(l.br,{}),`\n`,\"\\u4F7F\\u7528 \",(0,e.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{children:\"performance.now()\"})})})}),\" \\u8BB0\\u5F55\\u65F6\\u95F4\\u6233\\uFF0C\\u53EF\\u4EE5\\u8BA1\\u7B97\\u5B9E\\u65F6\\u4E0A\\u4F20\\u901F\\u5EA6\\uFF1A\"]}),`\n`,(0,e.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,e.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"let\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" lastLoaded \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 0\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"let\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" lastTime \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" performance.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"now\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"function\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" calculateSpeed\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"currentLoaded\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" deltaTime\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (performance.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"now\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"() \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" lastTime) \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"/\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 1000\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" speed\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (currentLoaded \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" lastLoaded) \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"/\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" deltaTime; \"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  lastLoaded \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" currentLoaded;\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  lastTime \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" performance.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"now\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\" `${\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"speed\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" /\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 1024\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\").\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"toFixed\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"2\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"} KB/s`\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})}),`\n`,(0,e.jsx)(l.h2,{id:\"\\u4E8C\\u5206\\u5757\\u4E0A\\u4F20\\u7684\\u7A7A\\u95F4\\u9B54\\u6CD5\\u5B9E\\u8DF5\",children:(0,e.jsx)(l.a,{href:\"#\\u4E8C\\u5206\\u5757\\u4E0A\\u4F20\\u7684\\u7A7A\\u95F4\\u9B54\\u6CD5\\u5B9E\\u8DF5\",children:\"\\u4E8C\\u3001\\u5206\\u5757\\u4E0A\\u4F20\\u7684\\u300C\\u7A7A\\u95F4\\u9B54\\u6CD5\\u300D\\u5B9E\\u8DF5\"})}),`\n`,(0,e.jsx)(l.h3,{id:\"21-\\u5927\\u6587\\u4EF6\\u5206\\u5757\\u4F20\\u8F93\\u534F\\u8BAE\",children:(0,e.jsx)(l.a,{href:\"#21-\\u5927\\u6587\\u4EF6\\u5206\\u5757\\u4F20\\u8F93\\u534F\\u8BAE\",children:\"2.1 \\u5927\\u6587\\u4EF6\\u5206\\u5757\\u4F20\\u8F93\\u534F\\u8BAE\"})}),`\n`,(0,e.jsx)(l.p,{children:\"\\u5F53\\u4E0A\\u4F20 2GB \\u7684\\u8BBE\\u8BA1\\u7A3F\\u65F6\\uFF0C\\u76F4\\u63A5\\u4F20\\u9001\\u5C31\\u50CF\\u7528\\u72EC\\u6728\\u821F\\u6A2A\\u6E21\\u592A\\u5E73\\u6D0B\\u26F5\\u3002\\u5206\\u5757\\u4E0A\\u4F20\\u5C06\\u6587\\u4EF6\\u5207\\u5206\\u4E3A\\u591A\\u4E2A\\u5C0F\\u8239\\u961F\\uFF1A\"}),`\n`,(0,e.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,e.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" CHUNK_SIZE\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 5\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" *\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 1024\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" *\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 1024\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"; \"}),(0,e.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// 5MB\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"let\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" offset \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 0\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"while\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (offset \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"<\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" file.size) {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" chunk\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" file.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"slice\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(offset, offset \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"+\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" CHUNK_SIZE\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  uploadChunk\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(chunk);\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  offset \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"+=\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" CHUNK_SIZE\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"async\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" function\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" uploadChunk\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"chunk\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" formData\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" FormData\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  formData.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"append\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'chunk'\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", chunk);\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  formData.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"append\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'chunkIndex'\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", currentChunk);\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  await\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" fetch\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'/upload-chunk'\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", { method: \"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'POST'\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", body: formData });\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})}),`\n`,(0,e.jsx)(l.h3,{id:\"22-\\u5E76\\u53D1\\u63A7\\u5236\\u7684\\u591A\\u91CD\\u5F71\\u5206\\u8EAB\",children:(0,e.jsx)(l.a,{href:\"#22-\\u5E76\\u53D1\\u63A7\\u5236\\u7684\\u591A\\u91CD\\u5F71\\u5206\\u8EAB\",children:\"2.2 \\u5E76\\u53D1\\u63A7\\u5236\\u7684\\u300C\\u591A\\u91CD\\u5F71\\u5206\\u8EAB\\u300D\"})}),`\n`,(0,e.jsx)(l.p,{children:\"\\u901A\\u8FC7 Promise.all \\u5B9E\\u73B0\\u5E76\\u884C\\u4E0A\\u4F20\\uFF0C\\u5C31\\u50CF\\u6D3E\\u51FA\\u591A\\u4E2A\\u5FEB\\u9012\\u5458\\u540C\\u65F6\\u9001\\u8D27\\uFF1A\"}),`\n`,(0,e.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,e.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" MAX_CONCURRENT\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 3\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"; \"}),(0,e.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u6700\\u5927\\u5E76\\u53D1\\u6570\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" chunksQueue\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" [];\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"for\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"let\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" i \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 0\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"; i \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"<\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" totalChunks; i\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"++\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  if\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (chunksQueue.\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"length\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" <\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" MAX_CONCURRENT\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    chunksQueue.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"push\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"uploadChunk\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(i));\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  } \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"else\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    await\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" Promise\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"race\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(chunksQueue);\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    chunksQueue.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"push\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"uploadChunk\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(i));\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"await\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" Promise\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"all\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(chunksQueue);\"})]})]})})}),`\n`,(0,e.jsxs)(l.p,{children:[(0,e.jsx)(l.strong,{children:\"\\u{1F525} \\u9AD8\\u9636\\u6280\\u5DE7\"}),\"\\uFF1A\",(0,e.jsx)(l.br,{}),`\n`,\"\\u4F7F\\u7528 Web Worker \\u5904\\u7406\\u52A0\\u5BC6/\\u538B\\u7F29\\uFF0C\\u907F\\u514D\\u963B\\u585E\\u4E3B\\u7EBF\\u7A0B\\uFF1A\"]}),`\n`,(0,e.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,e.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u5728\\u4E3B\\u7EBF\\u7A0B\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" worker\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Worker\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'crypto-worker.js'\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"worker.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"postMessage\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({ file: chunk });\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u5728 Worker \\u4E2D\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"self.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"onmessage\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"e\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" encrypted\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" encryptChunk\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(e.data.file);\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  self.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"postMessage\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(encrypted);\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"};\"})})]})})}),`\n`,(0,e.jsx)(l.h2,{id:\"\\u4E09\\u8FDB\\u5EA6\\u6761\\u7684\\u89C6\\u89C9\\u9B54\\u6CD5\\u4F18\\u5316\",children:(0,e.jsx)(l.a,{href:\"#\\u4E09\\u8FDB\\u5EA6\\u6761\\u7684\\u89C6\\u89C9\\u9B54\\u6CD5\\u4F18\\u5316\",children:\"\\u4E09\\u3001\\u8FDB\\u5EA6\\u6761\\u7684\\u300C\\u89C6\\u89C9\\u9B54\\u6CD5\\u300D\\u4F18\\u5316\"})}),`\n`,(0,e.jsx)(l.h3,{id:\"31-\\u6297\\u6296\\u52A8\\u5E73\\u6ED1\\u7B97\\u6CD5\",children:(0,e.jsx)(l.a,{href:\"#31-\\u6297\\u6296\\u52A8\\u5E73\\u6ED1\\u7B97\\u6CD5\",children:\"3.1 \\u6297\\u6296\\u52A8\\u5E73\\u6ED1\\u7B97\\u6CD5\"})}),`\n`,(0,e.jsx)(l.p,{children:\"\\u539F\\u59CB\\u8FDB\\u5EA6\\u4E8B\\u4EF6\\u50CF\\u5FC3\\u7535\\u56FE\\u822C\\u6296\\u52A8\\uFF0C\\u6211\\u4EEC\\u9700\\u8981\\u6DFB\\u52A0\\u300C\\u7A33\\u5B9A\\u5242\\u300D\\uFF1A\"}),`\n`,(0,e.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,e.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"let\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" lastUpdate \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 0\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" SMOOTH_INTERVAL\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 200\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"; \"}),(0,e.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// 200ms \\u66F4\\u65B0\\u4E00\\u6B21\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"function\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" updateProgress\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"current\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" now\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" Date.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"now\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  if\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (now \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" lastUpdate \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\">\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" SMOOTH_INTERVAL\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"    renderProgress\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(current);\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    lastUpdate \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" now;\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})}),`\n`,(0,e.jsx)(l.h3,{id:\"32-\\u8FDB\\u5EA6\\u9884\\u6D4B\\u7684\\u5148\\u77E5\\u7B97\\u6CD5\",children:(0,e.jsx)(l.a,{href:\"#32-\\u8FDB\\u5EA6\\u9884\\u6D4B\\u7684\\u5148\\u77E5\\u7B97\\u6CD5\",children:\"3.2 \\u8FDB\\u5EA6\\u9884\\u6D4B\\u7684\\u300C\\u5148\\u77E5\\u7B97\\u6CD5\\u300D\"})}),`\n`,(0,e.jsx)(l.p,{children:\"\\u57FA\\u4E8E\\u5269\\u4F59\\u65F6\\u95F4\\u548C\\u901F\\u5EA6\\u9884\\u6D4B\\uFF0C\\u8BA9\\u7528\\u6237\\u5FC3\\u4E2D\\u6709\\u6570\\uFF1A\"}),`\n`,(0,e.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,e.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"function\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" calculateETA\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"total\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"loaded\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"speed\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" remainingBytes\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" total \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" loaded;\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" seconds\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" remainingBytes \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"/\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" speed;\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  \"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  if\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (seconds \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\">\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 3600\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    return\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\" `${\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"seconds\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"/\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"3600\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\").\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"toFixed\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"} \\u5C0F\\u65F6`\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  } \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"else\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" if\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (seconds \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\">\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 60\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    return\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\" `${\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"seconds\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"/\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"60\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\").\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"toFixed\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"} \\u5206\\u949F`\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\" `${\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"Math\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"ceil\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"seconds\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"} \\u79D2`\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})}),`\n`,(0,e.jsxs)(l.p,{children:[(0,e.jsx)(l.strong,{children:\"\\u{1F3A8} \\u52A8\\u753B\\u9ED1\\u9B54\\u6CD5\"}),\"\\uFF1A\",(0,e.jsx)(l.br,{}),`\n`,\"\\u4F7F\\u7528 CSS Transition \\u5B9E\\u73B0\\u4E1D\\u6ED1\\u52A8\\u753B\\uFF1A\"]}),`\n`,(0,e.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"css\",\"data-theme\":\"github-dark\",children:(0,e.jsxs)(l.code,{\"data-language\":\"css\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\".progress-bar\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"  transition\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\": width \"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"0.3\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"s\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" cubic-bezier\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"0.4\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"0.2\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})}),`\n`,(0,e.jsx)(l.h2,{id:\"\\u56DB\\u9632\\u5FA1\\u6027\\u9B54\\u6CD5\\u6700\\u4F73\\u5B9E\\u8DF5\",children:(0,e.jsx)(l.a,{href:\"#\\u56DB\\u9632\\u5FA1\\u6027\\u9B54\\u6CD5\\u6700\\u4F73\\u5B9E\\u8DF5\",children:\"\\u56DB\\u3001\\u300C\\u9632\\u5FA1\\u6027\\u9B54\\u6CD5\\u300D\\u6700\\u4F73\\u5B9E\\u8DF5\"})}),`\n`,(0,e.jsx)(l.h3,{id:\"41-\\u65AD\\u70B9\\u7EED\\u4F20\\u5B9E\\u73B0\",children:(0,e.jsx)(l.a,{href:\"#41-\\u65AD\\u70B9\\u7EED\\u4F20\\u5B9E\\u73B0\",children:\"4.1 \\u65AD\\u70B9\\u7EED\\u4F20\\u5B9E\\u73B0\"})}),`\n`,(0,e.jsx)(l.p,{children:\"\\u4E3A\\u6BCF\\u4E2A\\u5206\\u5757\\u751F\\u6210\\u552F\\u4E00\\u6307\\u7EB9\\uFF0C\\u652F\\u6301\\u4ECE\\u65AD\\u70B9\\u6062\\u590D\\uFF1A\"}),`\n`,(0,e.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,e.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"async\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" function\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" resumeUpload\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" res\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" fetch\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'/upload-status'\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" { \"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"uploadedChunks\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" } \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" res.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"json\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  \"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  chunks.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"forEach\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"_\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"index\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    if\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"!\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"uploadedChunks.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"includes\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(index)) {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"      uploadChunk\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(index);\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  });\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})}),`\n`,(0,e.jsx)(l.h3,{id:\"42-\\u9519\\u8BEF\\u91CD\\u8BD5\\u673A\\u5236\",children:(0,e.jsx)(l.a,{href:\"#42-\\u9519\\u8BEF\\u91CD\\u8BD5\\u673A\\u5236\",children:\"4.2 \\u9519\\u8BEF\\u91CD\\u8BD5\\u673A\\u5236\"})}),`\n`,(0,e.jsx)(l.p,{children:\"\\u4E3A\\u4E0A\\u4F20\\u64CD\\u4F5C\\u6DFB\\u52A0\\u81EA\\u52A8\\u590D\\u6D3B\\u672F\\uFF1A\"}),`\n`,(0,e.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,e.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"async\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" function\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" retryWrapper\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"fn\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"maxRetries\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 3\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  let\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" retries \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 0\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  \"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  while\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (retries \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"<\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" maxRetries) {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    try\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      return\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" fn\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    } \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"catch\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (err) {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      retries\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"++\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      await\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" Promise\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"r\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =>\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" setTimeout\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(r, \"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"1000\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" *\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" retries));\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  throw\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Error\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'\\u4E0A\\u4F20\\u5931\\u8D25'\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u4F7F\\u7528\\u793A\\u4F8B\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"await\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" retryWrapper\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(() \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" uploadChunk\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"5\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"));\"})]})]})})}),`\n`,(0,e.jsx)(l.h2,{id:\"\\u4E94\\u524D\\u6CBF\\u9ED1\\u9B54\\u6CD5\\u6280\\u672F\\u62D3\\u5C55\",children:(0,e.jsx)(l.a,{href:\"#\\u4E94\\u524D\\u6CBF\\u9ED1\\u9B54\\u6CD5\\u6280\\u672F\\u62D3\\u5C55\",children:\"\\u4E94\\u3001\\u524D\\u6CBF\\u300C\\u9ED1\\u9B54\\u6CD5\\u300D\\u6280\\u672F\\u62D3\\u5C55\"})}),`\n`,(0,e.jsx)(l.h3,{id:\"51-websocket-\\u5B9E\\u65F6\\u8FDB\\u5EA6\",children:(0,e.jsx)(l.a,{href:\"#51-websocket-\\u5B9E\\u65F6\\u8FDB\\u5EA6\",children:\"5.1 WebSocket \\u5B9E\\u65F6\\u8FDB\\u5EA6\"})}),`\n`,(0,e.jsx)(l.p,{children:\"\\u5EFA\\u7ACB\\u53CC\\u5411\\u901A\\u4FE1\\u901A\\u9053\\uFF0C\\u5B9E\\u73B0\\u79D2\\u7EA7\\u8FDB\\u5EA6\\u540C\\u6B65\\uFF1A\"}),`\n`,(0,e.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,e.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" ws\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" WebSocket\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'wss://api.example.com/upload'\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"ws.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"onmessage\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"event\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" data\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" JSON\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"parse\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(event.data);\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  if\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (data.type \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"===\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\" 'progress'\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"    updateProgress\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(data.percent);\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"};\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u53D1\\u9001\\u5206\\u5757\\u5B8C\\u6210\\u901A\\u77E5\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"function\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" onChunkUploaded\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"index\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  ws.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"send\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"JSON\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"stringify\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({ type: \"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'chunk'\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", index }));\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})}),`\n`,(0,e.jsx)(l.h3,{id:\"52-wasm-\\u52A0\\u901F\\u52A0\\u5BC6\",children:(0,e.jsx)(l.a,{href:\"#52-wasm-\\u52A0\\u901F\\u52A0\\u5BC6\",children:\"5.2 WASM \\u52A0\\u901F\\u52A0\\u5BC6\"})}),`\n`,(0,e.jsx)(l.p,{children:\"\\u4F7F\\u7528 WebAssembly \\u8FDB\\u884C\\u9AD8\\u6027\\u80FD\\u52A0\\u5BC6\\uFF1A\"}),`\n`,(0,e.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"rust\",\"data-theme\":\"github-dark\",children:(0,e.jsxs)(l.code,{\"data-language\":\"rust\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// lib.rs\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"#[wasm_bindgen]\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"pub\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" fn\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" encrypt_chunk\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(data\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" &\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"[\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"u8\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"]) \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"->\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Vec\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"u8\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"> {\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"  // AES \\u52A0\\u5BC6\\u903B\\u8F91\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})}),`\n`,(0,e.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,e.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u5728\\u524D\\u7AEF\\u8C03\\u7528\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" wasmModule\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" import\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'./encrypt.wasm'\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" encrypted\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" wasmModule.\"}),(0,e.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"encrypt_chunk\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(chunkData);\"})]})]})})}),`\n`,(0,e.jsx)(l.h2,{id:\"\\u516D\\u9B54\\u6CD5\\u5B9E\\u9A8C\\u5BA4\\u6700\\u4F73\\u5B9E\\u8DF5\\u6E05\\u5355\",children:(0,e.jsx)(l.a,{href:\"#\\u516D\\u9B54\\u6CD5\\u5B9E\\u9A8C\\u5BA4\\u6700\\u4F73\\u5B9E\\u8DF5\\u6E05\\u5355\",children:\"\\u516D\\u3001\\u9B54\\u6CD5\\u5B9E\\u9A8C\\u5BA4\\uFF08\\u6700\\u4F73\\u5B9E\\u8DF5\\u6E05\\u5355\\uFF09\"})}),`\n`,(0,e.jsxs)(l.p,{children:[\"\\u{1F52E} \",(0,e.jsx)(l.strong,{children:\"\\u5B9E\\u6218\\u5492\\u8BED\\u6E05\\u5355\"}),\"\\uFF1A\"]}),`\n`,(0,e.jsxs)(l.ol,{children:[`\n`,(0,e.jsxs)(l.li,{children:[\"\\u59CB\\u7EC8\\u8BBE\\u7F6E \",(0,e.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{children:\"Content-Length\"})})})}),\" \\u5934\\u90E8\"]}),`\n`,(0,e.jsx)(l.li,{children:\"\\u4F7F\\u7528\\u5206\\u5757\\u4E0A\\u4F20\\u5904\\u7406\\u5927\\u6587\\u4EF6\\uFF08>50MB\\uFF09\"}),`\n`,(0,e.jsx)(l.li,{children:\"\\u4E3A\\u79FB\\u52A8\\u7AEF\\u589E\\u52A0 20% \\u7684\\u8FDB\\u5EA6\\u7F13\\u51B2\"}),`\n`,(0,e.jsx)(l.li,{children:\"\\u91C7\\u7528\\u6307\\u6570\\u9000\\u907F\\u91CD\\u8BD5\\u7B56\\u7565\"}),`\n`,(0,e.jsxs)(l.li,{children:[\"\\u901A\\u8FC7 \",(0,e.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{children:\"navigator.connection\"})})})}),\" \\u9002\\u914D\\u7F51\\u7EDC\\u7C7B\\u578B\"]}),`\n`,(0,e.jsx)(l.li,{children:\"\\u6DFB\\u52A0\\u6682\\u505C/\\u6062\\u590D\\u529F\\u80FD\"}),`\n`,(0,e.jsx)(l.li,{children:\"\\u4F7F\\u7528 Web Vitals \\u76D1\\u63A7\\u4E0A\\u4F20\\u6027\\u80FD\"}),`\n`]}),`\n`,(0,e.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,e.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u7F51\\u7EDC\\u7C7B\\u578B\\u9002\\u914D\\u793A\\u4F8B\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"if\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (navigator.connection.effectiveType \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"===\"}),(0,e.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\" '4g'\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"  MAX_CONCURRENT\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 5\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"} \"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\"else\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"  MAX_CONCURRENT\"}),(0,e.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 2\"}),(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})}),`\n`,(0,e.jsx)(l.h2,{id:\"\\u7ED3\\u8BED\\u9B54\\u6CD5\\u5E08\\u7684\\u81EA\\u6211\\u4FEE\\u517B\",children:(0,e.jsx)(l.a,{href:\"#\\u7ED3\\u8BED\\u9B54\\u6CD5\\u5E08\\u7684\\u81EA\\u6211\\u4FEE\\u517B\",children:\"\\u7ED3\\u8BED\\uFF1A\\u9B54\\u6CD5\\u5E08\\u7684\\u81EA\\u6211\\u4FEE\\u517B\"})}),`\n`,(0,e.jsx)(l.p,{children:\"\\u6587\\u4EF6\\u4E0A\\u4F20\\u8FDB\\u5EA6\\u6761\\u7684\\u9B54\\u6CD5\\u4E16\\u754C\\u8FDC\\u4E0D\\u6B62\\u4E8E\\u6B64\\uFF0C\\u968F\\u7740 WebTransport\\u3001WebRTC \\u7B49\\u65B0\\u6280\\u672F\\u7684\\u53D1\\u5C55\\uFF0C\\u672A\\u6765\\u6211\\u4EEC\\u751A\\u81F3\\u53EF\\u4EE5\\u5B9E\\u73B0 P2P \\u6587\\u4EF6\\u4F20\\u8F93\\u3002\\u8BB0\\u4F4F\\uFF0C\\u4F18\\u79C0\\u7684\\u9B54\\u6CD5\\u5E08\\u4E0D\\u4EC5\\u8981\\u638C\\u63E1\\u5492\\u8BED\\uFF0C\\u66F4\\u8981\\u7406\\u89E3\\u80CC\\u540E\\u7684\\u5965\\u672F\\u539F\\u7406\\u3002\\u4E0B\\u6B21\\u5F53\\u7528\\u6237\\u60CA\\u53F9\\u4E8E\\u4E1D\\u6ED1\\u7684\\u8FDB\\u5EA6\\u6761\\u65F6\\uFF0C\\u4F60\\u53EF\\u4EE5\\u5FAE\\u5FAE\\u4E00\\u7B11\\u2014\\u2014\\u8FD9\\u53EF\\u662F\\u524D\\u7AEF\\u9B54\\u6CD5\\u5E08\\u7684\\u72EC\\u5BB6\\u79D8\\u6280\\uFF01\\u2728\"}),`\n`,(0,e.jsxs)(l.blockquote,{children:[`\n`,(0,e.jsx)(l.p,{children:'\"\\u4EFB\\u4F55\\u8DB3\\u591F\\u5148\\u8FDB\\u7684\\u79D1\\u6280\\uFF0C\\u7686\\u4E0E\\u9B54\\u6CD5\\u65E0\\u5F02\\u3002\" \\u2014\\u2014 \\u4E9A\\u745F\\xB7C\\xB7\\u514B\\u62C9\\u514B'}),`\n`]}),`\n`,(0,e.jsx)(l.hr,{}),`\n`,(0,e.jsxs)(l.p,{children:[(0,e.jsx)(l.strong,{children:\"\\u{1F4DA} \\u6269\\u5C55\\u9605\\u8BFB\"}),\"\\uFF1A\"]}),`\n`,(0,e.jsxs)(l.ul,{children:[`\n`,(0,e.jsx)(l.li,{children:(0,e.jsx)(l.a,{href:\"https://web.dev/streams/\",children:\"Streams API \\u5B9E\\u6218\\u6307\\u5357\"})}),`\n`,(0,e.jsx)(l.li,{children:(0,e.jsx)(l.a,{href:\"https://rustwasm.github.io/\",children:\"WebAssembly \\u6027\\u80FD\\u4F18\\u5316\\u6848\\u4F8B\"})}),`\n`,(0,e.jsx)(l.li,{children:(0,e.jsx)(l.a,{href:\"https://http3-explained.haxx.se/\",children:\"HTTP/3 \\u5BF9\\u6587\\u4EF6\\u4E0A\\u4F20\\u7684\\u5F71\\u54CD\"})}),`\n`]})]})}function h(n={}){let{wrapper:l}=n.components||{};return l?(0,e.jsx)(l,{...n,children:(0,e.jsx)(t,{...n})}):t(n)}return m(k);})();\n;return Component;"
  },
  "_id": "å‰ç«¯æŠ€æœ¯/æ­ç§˜æ–‡ä»¶ä¸Šä¼ è¿›åº¦æ¡çš„èƒŒåé»‘é­”æ³•.mdx",
  "_raw": {
    "sourceFilePath": "å‰ç«¯æŠ€æœ¯/æ­ç§˜æ–‡ä»¶ä¸Šä¼ è¿›åº¦æ¡çš„èƒŒåé»‘é­”æ³•.mdx",
    "sourceFileName": "æ­ç§˜æ–‡ä»¶ä¸Šä¼ è¿›åº¦æ¡çš„èƒŒåé»‘é­”æ³•.mdx",
    "sourceFileDir": "å‰ç«¯æŠ€æœ¯",
    "contentType": "mdx",
    "flattenedPath": "å‰ç«¯æŠ€æœ¯/æ­ç§˜æ–‡ä»¶ä¸Šä¼ è¿›åº¦æ¡çš„èƒŒåé»‘é­”æ³•"
  },
  "type": "Post",
  "url": "/blog/å‰ç«¯æŠ€æœ¯/æ­ç§˜æ–‡ä»¶ä¸Šä¼ è¿›åº¦æ¡çš„èƒŒåé»‘é­”æ³•"
}