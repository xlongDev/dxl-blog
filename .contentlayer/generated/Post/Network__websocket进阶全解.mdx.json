{
  "title": "WebSocket è¿›é˜¶å…¨è§£",
  "date": "2024-04-10T00:00:00.000Z",
  "description": "æ·±å…¥æŽ¢ç´¢ WebSocket çš„æ ¸å¿ƒåŽŸç†ã€å®žçŽ°æœºåˆ¶ã€åº”ç”¨åœºæ™¯ä¸Žæœ€ä½³å®žè·µï¼Œä¸“ä¸ºå‰ç«¯å¼€å‘è€…æ‰“é€ ï¼Œå…¼å…·æŠ€æœ¯æ·±åº¦ä¸Žæž¶æž„è§†é‡Žã€‚",
  "keywords": "WebSocket, å®žæ—¶é€šä¿¡, å‰ç«¯å¼€å‘, ç½‘ç»œåè®®, æž¶æž„è®¾è®¡, æ€§èƒ½ä¼˜åŒ–, åŒå‘é€šä¿¡",
  "author": "æ™“é¾™",
  "image": "/images/hero/websocket.jpg",
  "tags": [
    "WebSocket",
    "å®žæ—¶é€šä¿¡",
    "å‰ç«¯å¼€å‘",
    "ç½‘ç»œåè®®"
  ],
  "views": 0,
  "likes": 0,
  "category": "Network",
  "body": {
    "raw": "\n> â€œå®žæ—¶é€šä¿¡å¦‚é£Žï¼Œçž¬æ¯ä¸‡å˜ï¼›æž¶æž„å¦‚å±±ï¼Œç¨³è‹¥ç£çŸ³ã€‚â€ â€”â€” æ”¹ç¼–è‡ªã€Šè¯—ç»Â·å°é›…Â·é¹¤é¸£ã€‹\n\nWebSocketï¼Œè¿™ä¸ªè®©æ— æ•°å‰ç«¯å¼€å‘è€…æ—¢çˆ±åˆâ€œæ¨â€çš„æŠ€æœ¯ï¼Œæ—©å·²ä¸æ˜¯ç®€å•çš„â€œé•¿è¿žæŽ¥â€ä»£åè¯ã€‚å®ƒæ˜¯çŽ°ä»£ Web åº”ç”¨å®žæ—¶é€šä¿¡çš„åŸºçŸ³ï¼Œä»ŽèŠå¤©å®¤åˆ°ååŒç¼–è¾‘ï¼Œä»Žå®žæ—¶è‚¡ç¥¨è¡Œæƒ…åˆ°åœ¨çº¿æ¸¸æˆï¼Œæ— å¤„ä¸åœ¨ã€‚ðŸ”¥ ä½†å®ƒçš„é­…åŠ›è¿œä¸æ­¢äºŽæ­¤â€”â€”WebSocket ä¸ä»…æ˜¯ä¸€é¡¹æŠ€æœ¯ï¼Œæ›´æ˜¯ä¸€ç§è®¾è®¡å“²å­¦çš„ä½“çŽ°ï¼Œæ˜¯å¯¹â€œè¿žæŽ¥â€ä¸Žâ€œå³æ—¶â€çš„æ·±åˆ»è¯ é‡Šã€‚\n\nä½œä¸ºä¸€åå‰ç«¯å¼€å‘è€…ï¼Œä½ å¯èƒ½å·²ç»ç”¨è¿‡ WebSocketï¼Œç”šè‡³å†™è¿‡å‡ ä¸ª `onopen` å’Œ `onmessage` çš„å›žè°ƒã€‚ä½†ä½ æ˜¯å¦æ·±å…¥æ€è€ƒè¿‡å®ƒçš„å†…éƒ¨æœºåˆ¶ï¼Ÿæ˜¯å¦é‡åˆ°è¿‡è¿žæŽ¥æ–­å¼€ã€æ¶ˆæ¯ä¸¢å¤±æˆ–æ€§èƒ½ç“¶é¢ˆçš„å›°æ‰°ï¼Ÿæ˜¯å¦æƒ³è¿‡å¦‚ä½•åœ¨æž¶æž„å±‚é¢ä¼˜é›…åœ°é›†æˆ WebSocketï¼Ÿæœ¬æ–‡å°†å¸¦ä½ ä»ŽåŽŸç†åˆ°å®žè·µï¼Œä»Žä»£ç åˆ°æž¶æž„ï¼Œæ·±å…¥ WebSocket çš„æ¯ä¸€ä¸ªè§’è½ï¼Œè§£é”å®ƒçš„å…¨éƒ¨æ½œåŠ›ã€‚ðŸŒŸ\n\nè¿™ä¸ä»…æ˜¯ä¸€ç¯‡æŠ€æœ¯åšå®¢ï¼Œæ›´æ˜¯ä¸€åœºå…³äºŽå®žæ—¶é€šä¿¡çš„æ€ç»´ä¹‹æ—…ã€‚æˆ‘ä»¬å°†ç”¨æ¸…æ™°çš„è¡¨æ ¼ã€ä¸°å¯Œçš„ç¤ºä¾‹ã€å¹½é»˜çš„ç¬”è§¦ï¼Œä»¥åŠä¸€äº›è¯—æ„çš„ç‚¹ç¼€ï¼Œå¸¦ä½ é¢†ç•¥ WebSocket çš„æŠ€æœ¯ç¾Žå­¦ã€‚å‡†å¤‡å¥½äº†å—ï¼Ÿè®©æˆ‘ä»¬å¼€å§‹è¿™åœºâ€œåŒå‘å¥”èµ´â€çš„å†’é™©å§ï¼ðŸš€\n\n## ä¸€ã€WebSocket æ˜¯ä»€ä¹ˆï¼Ÿä»Ž HTTP çš„â€œå•å‘è¡—â€åˆ°åŒå‘é€šä¿¡\n\n### 1.1 HTTP çš„å±€é™ä¸Ž WebSocket çš„è¯žç”Ÿ\n\nHTTP æ˜¯ä¸€ä¸ªâ€œè¯·æ±‚-å“åº”â€æ¨¡åž‹ï¼Œåƒæžäº†å¤ä»£çš„ä¹¦ä¿¡å¾€æ¥ï¼šä½ å†™ä¸€å°ä¿¡ï¼ˆè¯·æ±‚ï¼‰ï¼Œå¯¹æ–¹å›žä¸€å°ï¼ˆå“åº”ï¼‰ï¼Œç„¶åŽå†å†™ä¸‹ä¸€å°ã€‚ðŸ“œ è¿™ç§æ¨¡å¼åœ¨é™æ€ç½‘é¡µæ—¶ä»£ç»°ç»°æœ‰ä½™ï¼Œä½†åœ¨å®žæ—¶æ€§è¦æ±‚é«˜çš„åœºæ™¯ä¸‹ï¼ˆå¦‚èŠå¤©ã€å®žæ—¶åä½œï¼‰ï¼ŒHTTP å°±æ˜¾å¾—åŠ›ä¸ä»Žå¿ƒäº†ã€‚\n\nä¸ºäº†å¼¥è¡¥ HTTP çš„ä¸è¶³ï¼Œå‰ç«¯å¼€å‘è€…ä»¬å°è¯•äº†å„ç§â€œé»‘ç§‘æŠ€â€ï¼š\n\n- **è½®è¯¢ï¼ˆPollingï¼‰**ï¼šå®¢æˆ·ç«¯æ¯éš”å‡ ç§’é—®æœåŠ¡å™¨ï¼šâ€œæœ‰æ–°æ¶ˆæ¯å—ï¼Ÿâ€ æœåŠ¡å™¨è¦ä¹ˆè¯´â€œæœ‰â€ï¼Œè¦ä¹ˆè¯´â€œæ²¡æœ‰â€ã€‚è¿™ç§æ–¹å¼åƒæ˜¯ä¸€ä¸ªç„¦è™‘çš„æ‹äººä¸åœåœ°æ‰“ç”µè¯ç¡®è®¤å¯¹æ–¹æ˜¯å¦è¿˜çˆ±è‡ªå·±ï¼Œæ•ˆçŽ‡ä½Žä¸‹ä¸”æµªè´¹èµ„æºã€‚ðŸ˜…\n- **é•¿è½®è¯¢ï¼ˆLong Pollingï¼‰**ï¼šå®¢æˆ·ç«¯å‘èµ·è¯·æ±‚ï¼ŒæœåŠ¡å™¨â€œåŠç€â€ä¸ç«‹å³å“åº”ï¼Œç›´åˆ°æœ‰æ–°æ•°æ®ã€‚è¿™ç§æ–¹å¼ç¨å¾®ä¼˜åŒ–äº†è½®è¯¢ï¼Œä½†ä»ç„¶æ˜¯â€œè¢«åŠ¨ç­‰å¾…â€ï¼Œè€Œä¸”è¿žæŽ¥é¢‘ç¹æ–­å¼€é‡è¿žï¼ŒæœåŠ¡å™¨åŽ‹åŠ›ä¸å°ã€‚\n- **Server-Sent Eventsï¼ˆSSEï¼‰**ï¼šæœåŠ¡å™¨å¯ä»¥ä¸»åŠ¨æŽ¨é€æ•°æ®ï¼Œä½†ä»…é™å•å‘é€šä¿¡ï¼Œå®¢æˆ·ç«¯æ— æ³•ä¸»åŠ¨å‘é€æ¶ˆæ¯ï¼Œåƒæ˜¯æ”¶éŸ³æœºå¹¿æ’­ï¼Œé€‚åˆå®žæ—¶é€šçŸ¥ä½†ä¸é€‚åˆåŒå‘äº¤äº’ã€‚\n\nWebSocket çš„å‡ºçŽ°ï¼Œå½»åº•æ”¹å˜äº†æ¸¸æˆè§„åˆ™ã€‚ðŸŒ å®ƒåŸºäºŽ TCP åè®®ï¼Œé€šè¿‡ä¸€æ¬¡æ¡æ‰‹å»ºç«‹æŒä¹…è¿žæŽ¥ï¼Œå…è®¸å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨è‡ªç”±â€œå¯¹è¯â€ï¼Œæ— éœ€åå¤æ¡æ‰‹ã€‚è¿™ç§åŒå‘ã€å…¨åŒå·¥çš„é€šä¿¡æ¨¡å¼ï¼Œå°±åƒä»Žâ€œä¹¦ä¿¡â€å‡çº§åˆ°â€œç”µè¯â€ï¼Œç”šè‡³æ˜¯â€œè§†é¢‘é€šè¯â€ã€‚ðŸŽ¥\n\n> *â€œä¸–äººä¹‹å¿ƒï¼Œçž¬æ¯ä¸‡å˜ï¼ŒWebSocket å¦‚æ¸…é£Žï¼Œè¿žæŽ¥æ— é—´ã€‚â€*  \n> â€”â€” çµæ„Ÿæºè‡ªæŽç™½ã€Šå°†è¿›é…’ã€‹\n\n*Tipsï¼š**åœ¨é€‰æ‹©é€šä¿¡æ–¹å¼æ—¶ï¼Œä¼˜å…ˆè€ƒè™‘åº”ç”¨åœºæ™¯ã€‚å¦‚æžœåªéœ€è¦æœåŠ¡å™¨å•å‘æŽ¨é€ï¼ˆå¦‚å®žæ—¶é€šçŸ¥ï¼‰ï¼ŒSSE å¯èƒ½æ˜¯æ›´è½»é‡çš„é€‰æ‹©ï¼›å¦‚æžœéœ€è¦åŒå‘äº¤äº’ï¼ŒWebSocket æ˜¯æœ€ä½³æ‹æ¡£ã€‚*\n\n### 1.2 WebSocket çš„æ ¸å¿ƒç‰¹æ€§\n\nWebSocket çš„è®¾è®¡å“²å­¦å¯ä»¥ç”¨â€œç®€æ´ã€é«˜æ•ˆã€å®žæ—¶â€æ¥æ¦‚æ‹¬ã€‚ä»¥ä¸‹æ˜¯å®ƒçš„æ ¸å¿ƒç‰¹æ€§ï¼Œé…ä»¥ä¸€å¼ æ¸…æ™°çš„è¡¨æ ¼å¯¹æ¯” HTTP å’Œ WebSocketï¼š\n\n| **ç‰¹æ€§**                | **HTTP**                              | **WebSocket**                        |\n|-------------------------|---------------------------------------|--------------------------------------|\n| **é€šä¿¡æ¨¡å¼**            | è¯·æ±‚-å“åº”ï¼Œå•å‘                     | åŒå‘ã€å…¨åŒå·¥                        |\n| **è¿žæŽ¥æ–¹å¼**            | çŸ­è¿žæŽ¥ï¼ˆæ¯æ¬¡è¯·æ±‚æ–°å»ºè¿žæŽ¥ï¼‰          | é•¿è¿žæŽ¥ï¼ˆä¸€æ¬¡æ¡æ‰‹ï¼ŒæŒç»­é€šä¿¡ï¼‰        |\n| **åè®®**                | HTTP/1.1 æˆ– HTTP/2                  | ws:// æˆ– wss://ï¼ˆåŸºäºŽ TCPï¼‰         |\n| **æ•°æ®æ ¼å¼**            | æ–‡æœ¬ã€JSONã€è¡¨å•ç­‰                  | æ–‡æœ¬ã€äºŒè¿›åˆ¶ï¼ˆçµæ´»æ€§æ›´é«˜ï¼‰          |\n| **å®žæ—¶æ€§**              | ä¾èµ–è½®è¯¢æˆ–é•¿è½®è¯¢ï¼Œå»¶è¿Ÿè¾ƒé«˜          | æŽ¥è¿‘å®žæ—¶ï¼Œå»¶è¿Ÿæžä½Ž                  |\n| **æœåŠ¡å™¨èµ„æºå ç”¨**      | é¢‘ç¹å»ºç«‹/å…³é—­è¿žæŽ¥ï¼Œèµ„æºæ¶ˆè€—å¤§       | å•ä¸€é•¿è¿žæŽ¥ï¼Œèµ„æºå ç”¨ä½Ž              |\n| **é€‚ç”¨åœºæ™¯**            | é™æ€é¡µé¢ã€è¡¨å•æäº¤                 | èŠå¤©ã€åä½œå·¥å…·ã€å®žæ—¶æ•°æ®æŽ¨é€        |\n\n*Tipsï¼š**WebSocket çš„ wss:// åè®®ä½¿ç”¨ TLS åŠ å¯†ï¼Œç±»ä¼¼ HTTPSï¼Œç”Ÿäº§çŽ¯å¢ƒä¸­åŠ¡å¿…ä½¿ç”¨ wss:// ä»¥ç¡®ä¿å®‰å…¨æ€§ã€‚*\n\n### 1.3 WebSocket çš„åè®®ä¸Žæ¡æ‰‹è¿‡ç¨‹\n\nWebSocket åè®®ï¼ˆRFC 6455ï¼‰åŸºäºŽ TCPï¼Œä½†å®ƒå¹¶ä¸æ˜¯â€œè£¸ TCPâ€ã€‚å®ƒåœ¨ TCP ä¹‹ä¸Šå®šä¹‰äº†ä¸€å¥—è½»é‡çº§çš„åè®®ï¼Œåˆ†ä¸º**æ¡æ‰‹é˜¶æ®µ**å’Œ**æ•°æ®ä¼ è¾“é˜¶æ®µ**ã€‚\n\n#### æ¡æ‰‹é˜¶æ®µ\n\nWebSocket çš„æ¡æ‰‹æ˜¯é€šè¿‡ HTTP å®Œæˆçš„ï¼ˆæ˜¯çš„ï¼Œä½ æ²¡çœ‹é”™ï¼ŒWebSocket ç¦»ä¸å¼€ HTTP çš„â€œåŠ©æ”»â€ï¼‰ã€‚å®¢æˆ·ç«¯å‘é€ä¸€ä¸ª HTTP è¯·æ±‚ï¼ŒåŒ…å«ç‰¹å®šçš„å¤´ä¿¡æ¯ï¼š\n\n```http\nGET /chat HTTP/1.1\nHost: server.example.com\nUpgrade: websocket\nConnection: Upgrade\nSec-WebSocket-Key: x3JJHMbDL1EzLkh9GBhXDw==\nSec-WebSocket-Version: 13\n```\n\næœåŠ¡å™¨å“åº”ä¸€ä¸ªçŠ¶æ€ç ä¸º `101 Switching Protocols` çš„ HTTP å“åº”ï¼Œè¡¨ç¤ºåè®®åˆ‡æ¢ï¼š\n\n```http\nHTTP/1.1 101 Switching Protocols\nUpgrade: websocket\nConnection: Upgrade\nSec-WebSocket-Accept: HSmrc0sMlYUkAGmm5OPpG2HaGWk=\n```\n\nè¿™ä¸ªè¿‡ç¨‹å°±åƒä¸€åœºâ€œç§˜å¯†æ¡æ‰‹â€ï¼šå®¢æˆ·ç«¯è¯´â€œæˆ‘æƒ³ç”¨ WebSocketâ€ï¼ŒæœåŠ¡å™¨è¯´â€œå¥½ï¼Œåˆ‡æ¢åè®®å§â€ã€‚ðŸ”’\n\n#### æ•°æ®ä¼ è¾“é˜¶æ®µ\n\næ¡æ‰‹å®ŒæˆåŽï¼Œè¿žæŽ¥è¿›å…¥æ•°æ®ä¼ è¾“é˜¶æ®µã€‚WebSocket ä½¿ç”¨**å¸§ï¼ˆFrameï¼‰**ä½œä¸ºæ•°æ®ä¼ è¾“å•ä½ï¼Œæ¯å¸§åŒ…å«ï¼š\n\n- **æ“ä½œç ï¼ˆOpcodeï¼‰**ï¼šæŒ‡ç¤ºæ•°æ®ç±»åž‹ï¼ˆå¦‚æ–‡æœ¬ã€äºŒè¿›åˆ¶ã€å…³é—­è¿žæŽ¥ç­‰ï¼‰ã€‚\n- **æœ‰æ•ˆè½½è·ï¼ˆPayloadï¼‰**ï¼šå®žé™…ä¼ è¾“çš„æ•°æ®ã€‚\n- **æŽ©ç ï¼ˆMaskingï¼‰**ï¼šå®¢æˆ·ç«¯å‘é€çš„æ•°æ®éœ€è¦æŽ©ç å¤„ç†ï¼Œä»¥é˜²æ­¢æ¶æ„è„šæœ¬æ”»å‡»ã€‚\n\n*Tipsï¼š**è°ƒè¯• WebSocket æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·ï¼ˆNetwork é¢æ¿ï¼‰æŸ¥çœ‹æ¡æ‰‹è¯·æ±‚å’Œå¸§æ•°æ®ï¼Œæˆ–è€…ä½¿ç”¨å·¥å…·å¦‚ Postman æˆ– WebSocket Kingã€‚*\n\n## äºŒã€WebSocket çš„å®žçŽ°ï¼šä»Žæµè§ˆå™¨åˆ°æœåŠ¡å™¨\n\n### 2.1 æµè§ˆå™¨ä¸­çš„ WebSocket API\n\nå‰ç«¯å¼€å‘è€…æœ€å¸¸æŽ¥è§¦çš„æ˜¯æµè§ˆå™¨æä¾›çš„ `WebSocket` å¯¹è±¡ã€‚å®ƒçš„ API ç®€å•åˆ°ä»¤äººæ„ŸåŠ¨ï¼Œä½†åŠŸèƒ½å¼ºå¤§åˆ°è®©äººæ•¬ç•ã€‚ðŸ˜ ä»¥ä¸‹æ˜¯ä¸€ä¸ªåŸºæœ¬çš„ WebSocket è¿žæŽ¥ç¤ºä¾‹ï¼š\n\n```mdx\nconst socket = new WebSocket('ws://localhost:8080');\n\nsocket.onopen = () => {\n  console.log('ðŸŽ‰ è¿žæŽ¥æˆåŠŸï¼');\n  socket.send('Hello, Server!');\n};\n\nsocket.onmessage = (event) => {\n  console.log('ðŸ“© æ”¶åˆ°æ¶ˆæ¯ï¼š', event.data);\n};\n\nsocket.onerror = (error) => {\n  console.error('ðŸ˜µ è¿žæŽ¥å‡ºé”™ï¼š', error);\n};\n\nsocket.onclose = () => {\n  console.log('ðŸ˜¢ è¿žæŽ¥å…³é—­');\n};\n```\n\nè¿™æ®µä»£ç å°±åƒä¸€ä¸ªâ€œåˆæ¬¡çº¦ä¼šâ€çš„å‰§æœ¬ï¼šå»ºç«‹è¿žæŽ¥ï¼ˆ`onopen`ï¼‰ã€å‘é€æ¶ˆæ¯ï¼ˆ`send`ï¼‰ã€æŽ¥æ”¶æ¶ˆæ¯ï¼ˆ`onmessage`ï¼‰ã€å¤„ç†é”™è¯¯ï¼ˆ`onerror`ï¼‰å’Œå‘Šåˆ«ï¼ˆ`onclose`ï¼‰ã€‚ðŸ’Œ\n\n*Tipsï¼š**å§‹ç»ˆç›‘å¬ `onerror` å’Œ `onclose` äº‹ä»¶ï¼Œè®°å½•é”™è¯¯ä¿¡æ¯å¹¶åˆ¶å®šé‡è¿žç­–ç•¥ï¼Œä»¥æå‡ç”¨æˆ·ä½“éªŒã€‚*\n\n### 2.2 æœåŠ¡å™¨ç«¯çš„ WebSocket å®žçŽ°\n\nWebSocket çš„æœåŠ¡å™¨ç«¯å®žçŽ°å¯ä»¥é€‰æ‹©å¤šç§è¯­è¨€å’Œæ¡†æž¶ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨ Node.js å’Œ `ws` åº“çš„ç®€å•ç¤ºä¾‹ï¼š\n\n```javascript\nconst WebSocket = require('ws');\nconst server = new WebSocket.Server({ port: 8080 });\n\nserver.on('connection', (ws) => {\n  console.log('ðŸŽ‰ æ–°å®¢æˆ·ç«¯è¿žæŽ¥ï¼');\n\n  ws.on('message', (message) => {\n    console.log('ðŸ“© æ”¶åˆ°æ¶ˆæ¯ï¼š', message.toString());\n    ws.send(`æœåŠ¡å™¨å›žå¤ï¼š${message}`);\n  });\n\n  ws.on('close', () => {\n    console.log('ðŸ˜¢ å®¢æˆ·ç«¯æ–­å¼€è¿žæŽ¥');\n  });\n});\n\nconsole.log('ðŸš€ WebSocket æœåŠ¡å™¨è¿è¡Œåœ¨ ws://localhost:8080');\n```\n\nè¿™ä¸ªæœåŠ¡å™¨åƒä¸€ä¸ªçƒ­æƒ…çš„â€œå®¢æœâ€ï¼Œéšæ—¶å“åº”å®¢æˆ·ç«¯çš„æ¶ˆæ¯ï¼Œå¹¶åŽŸæ ·å›žä¼ ã€‚ðŸŽ¤\n\n*Tipsï¼š**ç”Ÿäº§çŽ¯å¢ƒä¸­ï¼Œå»ºè®®ä½¿ç”¨ Nginx æˆ–å…¶ä»–åå‘ä»£ç†æ¥å¤„ç† WebSocket è¿žæŽ¥ï¼Œè®¾ç½®åˆç†çš„è¶…æ—¶å’Œå¿ƒè·³æœºåˆ¶ã€‚*\n\n### 2.3 WebSocket çš„æ¶ˆæ¯æ ¼å¼ä¸ŽäºŒè¿›åˆ¶æ”¯æŒ\n\nWebSocket æ”¯æŒä¸¤ç§ä¸»è¦æ•°æ®æ ¼å¼ï¼š\n\n- **æ–‡æœ¬**ï¼šé€šå¸¸æ˜¯å­—ç¬¦ä¸²æˆ– JSONï¼Œé€‚åˆç»“æž„åŒ–æ•°æ®ã€‚\n- **äºŒè¿›åˆ¶**ï¼šåŒ…æ‹¬ `ArrayBuffer` å’Œ `Blob`ï¼Œé€‚åˆä¼ è¾“å›¾ç‰‡ã€éŸ³é¢‘æˆ–è§†é¢‘ã€‚\n\nä»¥ä¸‹æ˜¯ä¸€ä¸ªå‘é€äºŒè¿›åˆ¶æ•°æ®çš„ç¤ºä¾‹ï¼š\n\n```javascript\nconst socket = new WebSocket('ws://localhost:8080');\n\nsocket.onopen = () => {\n  const buffer = new ArrayBuffer(8);\n  const view = new DataView(buffer);\n  view.setInt32(0, 12345);\n  socket.send(buffer);\n  console.log('ðŸ“¦ å‘é€äºŒè¿›åˆ¶æ•°æ®');\n};\n\nsocket.onmessage = (event) => {\n  if (event.data instanceof Blob) {\n    event.data.arrayBuffer().then((buffer) => {\n      const view = new DataView(buffer);\n      console.log('ðŸ“¥ æ”¶åˆ°äºŒè¿›åˆ¶æ•°æ®ï¼š', view.getInt32(0));\n    });\n  }\n};\n```\n\n*Tipsï¼š**å¤„ç†äºŒè¿›åˆ¶æ•°æ®æ—¶ï¼Œæ³¨æ„æµè§ˆå™¨å¯¹ `Blob` å’Œ `ArrayBuffer` çš„æ”¯æŒï¼Œä¼˜å…ˆä½¿ç”¨ `ArrayBuffer` ä»¥èŽ·å¾—æ›´é«˜çš„æ€§èƒ½ã€‚*\n\n## ä¸‰ã€WebSocket çš„è¿›é˜¶å®žè·µ\n\n### 3.1 å¿ƒè·³æœºåˆ¶ï¼šè®©è¿žæŽ¥â€œæ°¸è‘†é’æ˜¥â€ ðŸ’“\n\nWebSocket è¿žæŽ¥å¯èƒ½å› ç½‘ç»œä¸ç¨³å®šæˆ–æœåŠ¡å™¨è¶…æ—¶è€Œæ–­å¼€ã€‚ä¸ºäº†ä¿æŒè¿žæŽ¥çš„â€œæ´»åŠ›â€ï¼Œæˆ‘ä»¬éœ€è¦å®žçŽ°å¿ƒè·³æœºåˆ¶ï¼šå®¢æˆ·ç«¯å®šæœŸå‘é€â€œpingâ€æ¶ˆæ¯ï¼ŒæœåŠ¡å™¨å›žå¤â€œpongâ€æ¶ˆæ¯ã€‚\n\nä»¥ä¸‹æ˜¯ä¸€ä¸ªå¿ƒè·³æœºåˆ¶çš„å®žçŽ°ï¼š\n\n```javascript\nclass WebSocketWithHeartbeat {\n  constructor(url) {\n    this.socket = new WebSocket(url);\n    this.heartbeatInterval = null;\n    this.init();\n  }\n\n  init() {\n    this.socket.onopen = () => {\n      console.log('ðŸŽ‰ è¿žæŽ¥æˆåŠŸ');\n      this.startHeartbeat();\n    };\n\n    this.socket.onmessage = (event) => {\n      if (event.data === 'pong') {\n        console.log('ðŸ’“ æ”¶åˆ°å¿ƒè·³å“åº”');\n      } else {\n        console.log('ðŸ“© æ”¶åˆ°æ¶ˆæ¯ï¼š', event.data);\n      }\n    };\n\n    this.socket.onclose = () => {\n      console.log('ðŸ˜¢ è¿žæŽ¥å…³é—­ï¼Œå°è¯•é‡è¿ž');\n      this.stopHeartbeat();\n      setTimeout(() => this.init(), 5000);\n    };\n  }\n\n  startHeartbeat() {\n    this.heartbeatInterval = setInterval(() => {\n      if (this.socket.readyState === WebSocket.OPEN) {\n        this.socket.send('ping');\n        console.log('ðŸ’“ å‘é€å¿ƒè·³');\n      }\n    }, 30000);\n  }\n\n  stopHeartbeat() {\n    clearInterval(this.heartbeatInterval);\n  }\n}\n\nconst ws = new WebSocketWithHeartbeat('ws://localhost:8080');\n```\n\nè¿™ä¸ªå¿ƒè·³æœºåˆ¶å°±åƒç»™ WebSocket è£…äº†ä¸€ä¸ªâ€œå¿ƒè„èµ·æå™¨â€ï¼Œç¡®ä¿å®ƒæ—¶åˆ»â€œæ´»ç€â€ã€‚âš¡ï¸\n\n*Tipsï¼š**å¿ƒè·³é—´éš”ä¸€èˆ¬è®¾ä¸º 30 ç§’åˆ° 60 ç§’ï¼Œè¿‡çŸ­ä¼šå¢žåŠ æœåŠ¡å™¨è´Ÿæ‹…ï¼Œè¿‡é•¿å¯èƒ½æ— æ³•åŠæ—¶æ£€æµ‹æ–­å¼€ã€‚*\n\n### 3.2 é‡è¿žæœºåˆ¶ï¼šä»Žâ€œæ–­çº¿â€åˆ°â€œå†ç»­å‰ç¼˜â€\n\nç½‘ç»œä¸–ç•Œæ— å¸¸ï¼ŒWebSocket è¿žæŽ¥éšæ—¶å¯èƒ½â€œå¤±è”â€ã€‚ä¸€ä¸ªå¥å£®çš„ WebSocket å®¢æˆ·ç«¯éœ€è¦å®žçŽ°è‡ªåŠ¨é‡è¿žé€»è¾‘ï¼Œé€šå¸¸ç»“åˆæŒ‡æ•°é€€é¿ï¼ˆExponential Backoffï¼‰ç®—æ³•ä»¥é¿å…é¢‘ç¹é‡è¯•ã€‚\n\nä»¥ä¸‹æ˜¯ä¸€ä¸ªå¸¦é‡è¿žçš„ WebSocket å°è£…ï¼š\n\n```javascript\nclass WebSocketWithReconnect {\n  constructor(url, maxRetries = 5) {\n    this.url = url;\n    this.maxRetries = maxRetries;\n    this.retryCount = 0;\n    this.socket = null;\n    this.connect();\n  }\n\n  connect() {\n    this.socket = new WebSocket(this.url);\n\n    this.socket.onopen = () => {\n      console.log('ðŸŽ‰ è¿žæŽ¥æˆåŠŸ');\n      this.retryCount = 0;\n    };\n\n    this.socket.onclose = () => {\n      console.log('ðŸ˜¢ è¿žæŽ¥å…³é—­');\n      this.handleReconnect();\n    };\n\n    this.socket.onerror = () => {\n      console.log('ðŸ˜µ è¿žæŽ¥é”™è¯¯');\n    };\n  }\n\n  handleReconnect() {\n    if (this.retryCount < this.maxRetries) {\n      const delay = Math.pow(2, this.retryCount) * 1000; // æŒ‡æ•°é€€é¿\n      console.log(`â³ ç¬¬ ${this.retryCount + 1} æ¬¡é‡è¯•ï¼Œç­‰å¾… ${delay}ms`);\n      setTimeout(() => {\n        this.retryCount++;\n        this.connect();\n      }, delay);\n    } else {\n      console.log('ðŸ˜ž é‡è¯•æ¬¡æ•°å·²è¾¾ä¸Šé™ï¼Œæ”¾å¼ƒé‡è¿ž');\n    }\n  }\n\n  send(message) {\n    if (this.socket.readyState === WebSocket.OPEN) {\n      this.socket.send(message);\n    } else {\n      console.log('âš ï¸ è¿žæŽ¥æœªå°±ç»ªï¼Œæ¶ˆæ¯æœªå‘é€');\n    }\n  }\n}\n\nconst ws = new WebSocketWithReconnect('ws://localhost:8080');\nws.send('Hello, Server!');\n```\n\nè¿™ä¸ªé‡è¿žé€»è¾‘å°±åƒä¸€ä¸ªæ‰§ç€çš„â€œè¿½æ¢¦äººâ€ï¼Œæ— è®ºé‡åˆ°å¤šå°‘æŒ«æŠ˜ï¼Œéƒ½ä¼šä»¥æ›´è°¨æ…Žçš„æ­¥ä¼å†æ¬¡å°è¯•ã€‚ðŸŒˆ\n\n*Tipsï¼š**æŒ‡æ•°é€€é¿çš„åŸºæ•°å’Œæœ€å¤§é‡è¯•æ¬¡æ•°éœ€è¦æ ¹æ®ä¸šåŠ¡åœºæ™¯è°ƒæ•´ï¼Œå»ºè®®è®°å½•é‡è¿žæ—¥å¿—ä»¥ä¾¿è°ƒè¯•ã€‚*\n\n### 3.3 æ¶ˆæ¯é˜Ÿåˆ—ï¼šé¿å…â€œæ¶ˆæ¯æ´ªæ°´â€ ðŸŒŠ\n\nåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œå®¢æˆ·ç«¯å¯èƒ½çŸ­æ—¶é—´å†…å‘é€å¤§é‡æ¶ˆæ¯ï¼Œå¯¼è‡´æœåŠ¡å™¨è¿‡è½½ã€‚å®žçŽ°ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—å¯ä»¥æœ‰æ•ˆæŽ§åˆ¶å‘é€é€ŸçŽ‡ï¼š\n\n```javascript\nclass WebSocketWithQueue {\n  constructor(url) {\n    this.socket = new WebSocket(url);\n    this.messageQueue = [];\n    this.isSending = false;\n    this.init();\n  }\n\n  init() {\n    this.socket.onopen = () => {\n      console.log('ðŸŽ‰ è¿žæŽ¥æˆåŠŸ');\n      this.processQueue();\n    };\n  }\n\n  send(message) {\n    this.messageQueue.push(message);\n    this.processQueue();\n  }\n\n  processQueue() {\n    if (this.isSending || this.messageQueue.length === 0 || this.socket.readyState !== WebSocket.OPEN) {\n      return;\n    }\n\n    this.isSending = true;\n    const message = this.messageQueue.shift();\n    this.socket.send(message);\n    console.log('ðŸ“¤ å‘é€æ¶ˆæ¯ï¼š', message);\n\n    setTimeout(() => {\n      this.isSending = false;\n      this.processQueue();\n    }, 100); // æŽ§åˆ¶å‘é€é€ŸçŽ‡\n  }\n}\n\nconst ws = new WebSocketWithQueue('ws://localhost:8080');\nws.send('æ¶ˆæ¯1');\nws.send('æ¶ˆæ¯2');\n```\n\næ¶ˆæ¯é˜Ÿåˆ—å°±åƒä¸€ä¸ªâ€œäº¤é€šæŒ‡æŒ¥å®˜â€ï¼Œç¡®ä¿æ¶ˆæ¯æŒ‰åºã€æœ‰èŠ‚åˆ¶åœ°å‘é€ï¼Œé¿å…â€œé“è·¯æ‹¥å µâ€ã€‚ðŸš¦\n\n*Tipsï¼š**æ ¹æ®æœåŠ¡å™¨æ€§èƒ½è°ƒæ•´å‘é€é—´éš”ï¼Œè¿‡çŸ­å¯èƒ½å¯¼è‡´æœåŠ¡å™¨åŽ‹åŠ›ï¼Œè¿‡é•¿å¯èƒ½å½±å“å®žæ—¶æ€§ã€‚*\n\n## å››ã€WebSocket çš„æ€§èƒ½ä¼˜åŒ–ä¸Žæž¶æž„è®¾è®¡\n\n### 4.1 æ€§èƒ½ä¼˜åŒ–ï¼šè®© WebSocket è·‘å¾—æ›´å¿« ðŸŽï¸\n\nWebSocket çš„æ€§èƒ½ä¼˜åŒ–å¯ä»¥ä»Žä»¥ä¸‹å‡ ä¸ªæ–¹é¢å…¥æ‰‹ï¼š\n\n#### 4.1.1 åŽ‹ç¼©æ¶ˆæ¯\n\nWebSocket æ”¯æŒ `permessage-deflate` æ‰©å±•ï¼Œå¯ä»¥åŽ‹ç¼©æ¶ˆæ¯ä»¥å‡å°‘å¸¦å®½å ç”¨ã€‚ä»¥ä¸‹æ˜¯å¯ç”¨åŽ‹ç¼©çš„ Node.js ç¤ºä¾‹ï¼š\n\n```javascript\nconst WebSocket = require('ws');\nconst server = new WebSocket.Server({\n  port: 8080,\n  perMessageDeflate: {\n    zlibDeflateOptions: {\n      chunkSize: 1024,\n      memLevel: 7,\n      level: 3,\n    },\n    zlibInflateOptions: {\n      chunkSize: 10 * 1024,\n    },\n  },\n});\n\nserver.on('connection', (ws) => {\n  ws.on('message', (message) => {\n    console.log('ðŸ“© æ”¶åˆ°æ¶ˆæ¯ï¼š', message.toString());\n    ws.send(message);\n  });\n});\n```\n\n*Tipsï¼š**åŽ‹ç¼©ä¼šå¢žåŠ  CPU è´Ÿè½½ï¼Œå»ºè®®æ ¹æ®æ¶ˆæ¯å¤§å°å’Œé¢‘çŽ‡æƒè¡¡æ˜¯å¦å¯ç”¨ã€‚*\n\n#### 4.1.2 å‡å°‘ä¸å¿…è¦çš„å¿ƒè·³\n\nå¿ƒè·³æ¶ˆæ¯è™½ç„¶é‡è¦ï¼Œä½†è¿‡äºŽé¢‘ç¹ä¼šå¢žåŠ å¸¦å®½å’ŒæœåŠ¡å™¨è´Ÿæ‹…ã€‚å¯ä»¥æ ¹æ®ç½‘ç»œçŠ¶å†µåŠ¨æ€è°ƒæ•´å¿ƒè·³é—´éš”ï¼Œæˆ–è€…åœ¨å®¢æˆ·ç«¯æ£€æµ‹åˆ°ç”¨æˆ·ä¸æ´»è·ƒæ—¶æš‚åœå¿ƒè·³ã€‚\n\n*Tipsï¼š**ç»“åˆæµè§ˆå™¨çš„ `visibilitychange` äº‹ä»¶ï¼Œåœ¨é¡µé¢éšè—æ—¶æš‚åœå¿ƒè·³ä»¥èŠ‚çœèµ„æºã€‚*\n\n#### 4.1.3 ä½¿ç”¨äºŒè¿›åˆ¶ä»£æ›¿ JSON\n\nJSON æ˜¯ WebSocket å¸¸ç”¨çš„æ•°æ®æ ¼å¼ï¼Œä½†å®ƒçš„åºåˆ—åŒ–å’Œè§£æžå¼€é”€è¾ƒå¤§ã€‚åœ¨æ€§èƒ½æ•æ„Ÿçš„åœºæ™¯ä¸‹ï¼Œå¯ä»¥ä½¿ç”¨äºŒè¿›åˆ¶æ ¼å¼ï¼ˆå¦‚ Protocol Buffers æˆ– MessagePackï¼‰ã€‚\n\n*Tipsï¼š**äºŒè¿›åˆ¶æ ¼å¼éœ€è¦å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åå•†ä¸€è‡´ï¼Œå»ºè®®åœ¨å¼€å‘åˆæœŸå®šä¹‰å¥½åè®®ã€‚*\n\n### 4.2 æž¶æž„è®¾è®¡ï¼šä»Žå•ç‚¹åˆ°åˆ†å¸ƒå¼\n\nWebSocket çš„æž¶æž„è®¾è®¡éœ€è¦è€ƒè™‘ä»¥ä¸‹å‡ ä¸ªå±‚é¢ï¼š\n\n#### 4.2.1 å•æœºéƒ¨ç½²\n\nåœ¨å°åž‹åº”ç”¨ä¸­ï¼Œå•å°æœåŠ¡å™¨è¶³ä»¥åº”å¯¹ WebSocket è¿žæŽ¥ã€‚ä½†éœ€è¦æ³¨æ„ï¼š\n\n- **è¿žæŽ¥æ•°é™åˆ¶**ï¼šå•å°æœåŠ¡å™¨çš„ TCP è¿žæŽ¥æ•°å—é™äºŽæ“ä½œç³»ç»Ÿå’Œç¡¬ä»¶ã€‚\n- **å†…å­˜ç®¡ç†**ï¼šæ¯ä¸ª WebSocket è¿žæŽ¥ä¼šå ç”¨ä¸€å®šå†…å­˜ï¼Œéœ€ç›‘æŽ§å†…å­˜ä½¿ç”¨æƒ…å†µã€‚\n\n*Tipsï¼š**ä½¿ç”¨ `ulimit` è°ƒæ•´æœåŠ¡å™¨çš„æ–‡ä»¶æè¿°ç¬¦ä¸Šé™ï¼Œä»¥æ”¯æŒæ›´å¤šè¿žæŽ¥ã€‚*\n\n#### 4.2.2 åˆ†å¸ƒå¼éƒ¨ç½²\n\nåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œå•å°æœåŠ¡å™¨å¯èƒ½æˆä¸ºç“¶é¢ˆã€‚åˆ†å¸ƒå¼ WebSocket æž¶æž„é€šå¸¸åŒ…æ‹¬ï¼š\n\n- **è´Ÿè½½å‡è¡¡**ï¼šä½¿ç”¨ Nginx æˆ– HAProxy å°† WebSocket è¿žæŽ¥åˆ†å‘åˆ°å¤šå°åŽç«¯æœåŠ¡å™¨ã€‚\n- **æ¶ˆæ¯å¹¿æ’­**ï¼šé€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆå¦‚ Redis æˆ– Kafkaï¼‰å®žçŽ°è·¨æœåŠ¡å™¨çš„æ¶ˆæ¯åŒæ­¥ã€‚\n- **çŠ¶æ€ç®¡ç†**ï¼šä½¿ç”¨ Redis æˆ–æ•°æ®åº“å­˜å‚¨ç”¨æˆ·å’Œè¿žæŽ¥çš„çŠ¶æ€ä¿¡æ¯ã€‚\n\nä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„åˆ†å¸ƒå¼ WebSocket æž¶æž„å›¾ï¼ˆMarkdown æ ¼å¼ï¼‰ï¼š\n\n```mermaid\ngraph TD\n    A[å®¢æˆ·ç«¯] -->|WebSocket| B[Nginx è´Ÿè½½å‡è¡¡]\n    B --> C[WebSocket æœåŠ¡å™¨ 1]\n    B --> D[WebSocket æœåŠ¡å™¨ 2]\n    C --> E[Redis æ¶ˆæ¯é˜Ÿåˆ—]\n    D --> E\n    E --> F[æ•°æ®åº“]\n```\n\n*Tipsï¼š**åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œç¡®ä¿æ¶ˆæ¯é˜Ÿåˆ—çš„é«˜å¯ç”¨æ€§ï¼Œé¿å…å•ç‚¹æ•…éšœã€‚*\n\n### 4.3 é”™è¯¯å¤„ç†ä¸Žç›‘æŽ§\n\nä¸€ä¸ªå¥å£®çš„ WebSocket ç³»ç»Ÿéœ€è¦å®Œå–„çš„é”™è¯¯å¤„ç†å’Œç›‘æŽ§æœºåˆ¶ï¼š\n\n- **é”™è¯¯åˆ†ç±»**ï¼šå°†é”™è¯¯åˆ†ä¸ºç½‘ç»œé”™è¯¯ã€åè®®é”™è¯¯å’Œä¸šåŠ¡é”™è¯¯ï¼Œåˆ†åˆ«å¤„ç†ã€‚\n- **æ—¥å¿—è®°å½•**ï¼šè®°å½•è¿žæŽ¥ã€æ–­å¼€ã€é”™è¯¯å’Œæ¶ˆæ¯çš„è¯¦ç»†ä¿¡æ¯ï¼Œæ–¹ä¾¿æŽ’æŸ¥é—®é¢˜ã€‚\n- **ç›‘æŽ§å‘Šè­¦**ï¼šä½¿ç”¨ Prometheus å’Œ Grafana ç›‘æŽ§è¿žæŽ¥æ•°ã€æ¶ˆæ¯åžåé‡å’Œé”™è¯¯çŽ‡ã€‚\n\n*Tipsï¼š**ä¸ºæ¯ä¸ª WebSocket è¿žæŽ¥åˆ†é…ä¸€ä¸ªå”¯ä¸€ IDï¼Œä¾¿äºŽè¿½è¸ªå’Œè°ƒè¯•ã€‚*\n\n## äº”ã€WebSocket çš„åº”ç”¨åœºæ™¯ä¸Žæ¡ˆä¾‹åˆ†æž\n\n### 5.1 å®žæ—¶èŠå¤©åº”ç”¨\n\nå®žæ—¶èŠå¤©æ˜¯ WebSocket çš„ç»å…¸åº”ç”¨åœºæ™¯ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€åŒ–çš„èŠå¤©å®¤å®žçŽ°ï¼š\n\n```javascript\nconst WebSocket = require('ws');\nconst server = new WebSocket.Server({ port: 8080 });\nconst clients = new Set();\n\nserver.on('connection', (ws) => {\n  clients.add(ws);\n  console.log('ðŸŽ‰ æ–°ç”¨æˆ·åŠ å…¥');\n\n  ws.on('message', (message) => {\n    const msg = JSON.stringify({\n      user: 'åŒ¿åç”¨æˆ·',\n      content: message.toString(),\n      timestamp: new Date().toISOString(),\n    });\n    clients.forEach((client) => {\n      if (client.readyState === WebSocket.OPEN) {\n        client.send(msg);\n      }\n    });\n  });\n\n  ws.on('close', () => {\n    clients.delete(ws);\n    console.log('ðŸ˜¢ ç”¨æˆ·ç¦»å¼€');\n  });\n});\n```\n\nè¿™ä¸ªèŠå¤©å®¤åƒä¸€ä¸ªâ€œæ•°å­—ç¯ç«â€ï¼Œç”¨æˆ·å›´åä¸€åœˆï¼Œç•…æ‰€æ¬²è¨€ã€‚ðŸ”¥\n\n*Tipsï¼š**ä¸ºèŠå¤©æ¶ˆæ¯æ·»åŠ åºåˆ—å·ï¼Œé˜²æ­¢å®¢æˆ·ç«¯å› ç½‘ç»œå»¶è¿Ÿæ”¶åˆ°ä¹±åºæ¶ˆæ¯ã€‚*\n\n### 5.2 ååŒç¼–è¾‘å·¥å…·\n\nååŒç¼–è¾‘å·¥å…·ï¼ˆå¦‚ Google Docsï¼‰éœ€è¦å®žæ—¶åŒæ­¥å¤šä¸ªç”¨æˆ·çš„æ“ä½œã€‚WebSocket é…åˆæ“ä½œè½¬æ¢ï¼ˆOperational Transformation, OTï¼‰æˆ–å†²çªè§£å†³ï¼ˆCRDTï¼‰ç®—æ³•ï¼Œå¯ä»¥å®žçŽ°é«˜æ•ˆçš„å¤šäººåä½œã€‚\n\n*Tipsï¼š**åœ¨ååŒç¼–è¾‘åœºæ™¯ä¸­ï¼Œå»ºè®®ä½¿ç”¨äºŒè¿›åˆ¶æ ¼å¼ä¼ è¾“æ“ä½œæ—¥å¿—ï¼Œä»¥å‡å°‘å¸¦å®½å ç”¨ã€‚*\n\n### 5.3 å®žæ—¶æ•°æ®å¯è§†åŒ–\n\nåœ¨é‡‘èžã€ç‰©è”ç½‘æˆ–ç›‘æŽ§ç³»ç»Ÿä¸­ï¼ŒWebSocket å¯ä»¥æŽ¨é€å®žæ—¶æ•°æ®åˆ°å‰ç«¯ï¼Œç”¨äºŽåŠ¨æ€å›¾è¡¨æ›´æ–°ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„è‚¡ç¥¨ä»·æ ¼æŽ¨é€ç¤ºä¾‹ï¼š\n\n```javascript\nconst WebSocket = require('ws');\nconst server = new WebSocket.Server({ port: 8080 });\n\nsetInterval(() => {\n  const price = (Math.random() * 1000).toFixed(2);\n  server.clients.forEach((client) => {\n    if (client.readyState === WebSocket.OPEN) {\n      client.send(JSON.stringify({ symbol: 'AAPL', price }));\n    }\n  });\n}, 1000);\n```\n\n*Tipsï¼š**ä¸ºå®žæ—¶æ•°æ®è®¾ç½®åˆç†çš„æŽ¨é€é¢‘çŽ‡ï¼Œé¿å…å‰ç«¯æ¸²æŸ“åŽ‹åŠ›è¿‡å¤§ã€‚*\n\n## å…­ã€WebSocket çš„æœªæ¥ä¸Žå“²å­¦æ€è€ƒ\n\n### 6.1 WebSocket ä¸Ž WebRTC çš„å¯¹æ¯”\n\nWebSocket æ“…é•¿ç»“æž„åŒ–æ•°æ®çš„å®žæ—¶ä¼ è¾“ï¼Œè€Œ WebRTC æ›´é€‚åˆéŸ³è§†é¢‘æµã€‚ä¸¤è€…å„æœ‰åƒç§‹ï¼Œä½†åœ¨æŸäº›åœºæ™¯ä¸‹å¯ä»¥ç»“åˆä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œåœ¨è§†é¢‘ä¼šè®®ä¸­ï¼ŒWebSocket å¯ä»¥ä¼ è¾“èŠå¤©æ¶ˆæ¯å’ŒæŽ§åˆ¶ä¿¡ä»¤ï¼ŒWebRTC è´Ÿè´£éŸ³è§†é¢‘æµã€‚\n\n*Tipsï¼š**è¯„ä¼°å®žæ—¶éœ€æ±‚æ—¶ï¼Œæ˜Žç¡®æ•°æ®ç±»åž‹å’Œå»¶è¿Ÿè¦æ±‚ï¼Œé€‰æ‹©åˆé€‚çš„åè®®ç»„åˆã€‚*\n\n### 6.2 ä»Ž WebSocket çœ‹æž¶æž„è®¾è®¡\n\nWebSocket çš„è®¾è®¡å“²å­¦å¯å‘æˆ‘ä»¬æ€è€ƒæž¶æž„çš„å‡ ä¸ªå…³é”®é—®é¢˜ï¼š\n\n- **æ¾è€¦åˆ**ï¼šå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨é€šè¿‡è½»é‡åè®®é€šä¿¡ï¼Œå‡å°‘ä¾èµ–ã€‚\n- **é«˜å¯ç”¨**ï¼šé€šè¿‡å¿ƒè·³å’Œé‡è¿žæœºåˆ¶ï¼Œç¡®ä¿ç³»ç»Ÿå¥å£®æ€§ã€‚\n- **å¯æ‰©å±•**ï¼šæ”¯æŒä»Žå•æœºåˆ°åˆ†å¸ƒå¼çš„å¹³æ»‘è¿‡æ¸¡ã€‚\n\n> *â€œå‡¡äº‹é¢„åˆ™ç«‹ï¼Œä¸é¢„åˆ™åºŸã€‚â€*  \n> â€”â€” ã€Š homebrew: https://brew.sh/2024/03/14/how-to-install-python-on-linux-macos-and-windows/  \n\nWebSocket çš„æˆåŠŸï¼ŒæºäºŽå…¶å¯¹å®žæ—¶é€šä¿¡çš„æ·±åˆ»æ´žå¯Ÿå’Œå¯¹ç”¨æˆ·ä½“éªŒçš„æžè‡´è¿½æ±‚ã€‚è¿™ä¸ä»…æ˜¯æŠ€æœ¯çš„èƒœåˆ©ï¼Œæ›´æ˜¯è®¾è®¡çš„èƒœåˆ©ã€‚\n\n### 6.3 å®žæ—¶é€šä¿¡çš„æœªæ¥\n\néšç€ 5G å’Œè¾¹ç¼˜è®¡ç®—çš„æ™®åŠï¼Œå®žæ—¶é€šä¿¡å°†è¿Žæ¥æ–°çš„æœºé‡ã€‚WebSocket å¯èƒ½ä¸Žæ–°å…´æŠ€æœ¯ï¼ˆå¦‚ gRPC-Web æˆ– QUICï¼‰ç»“åˆï¼Œåˆ›é€ æ›´é«˜æ•ˆçš„é€šä¿¡æ¨¡å¼ã€‚\n\n> *â€œé—®æ¸ é‚£å¾—æ¸…å¦‚è®¸ï¼Ÿä¸ºæœ‰æºå¤´æ´»æ°´æ¥ã€‚â€*  \n> â€”â€” æœ±ç†¹ã€Šè§‚ä¹¦æœ‰æ„Ÿã€‹\n\nå®žæ—¶é€šä¿¡çš„â€œæºå¤´æ´»æ°´â€ï¼Œæ­£æ˜¯æŠ€æœ¯çš„ä¸æ–­åˆ›æ–°ã€‚WebSocket åªæ˜¯è¿™æ¡é•¿æ²³ä¸­çš„ä¸€ç«™ï¼Œæœªæ¥è¿˜æœ‰æ›´å¤šå¯èƒ½ç­‰å¾…æˆ‘ä»¬æŽ¢ç´¢ã€‚\n\n## ä¸ƒã€æ€»ç»“ä¸Žå¯„è¯­\n\nWebSocket ä¸ä»…æ˜¯ä¸€é¡¹æŠ€æœ¯ï¼Œæ›´æ˜¯ä¸€ç§è¿žæŽ¥ä¸–ç•Œçš„æ€ç»´æ–¹å¼ã€‚å®ƒè®©æˆ‘ä»¬çœ‹åˆ°ï¼ŒæŠ€æœ¯çš„æœ¬è´¨æ˜¯ä¸ºäººç±»åˆ›é€ æ›´ç´§å¯†ã€æ›´å³æ—¶çš„è”ç³»ã€‚ðŸŒ\n\nä½œä¸ºå‰ç«¯å¼€å‘è€…ï¼ŒæŽŒæ¡ WebSocket ä¸ä»…æ˜¯ä¸ºäº†å†™å‡ºæ›´å¥½çš„ä»£ç ï¼Œæ›´æ˜¯ä¸ºäº†åœ¨çž¬æ¯ä¸‡å˜çš„æŠ€æœ¯ä¸–ç•Œä¸­ï¼Œæ‰¾åˆ°å±žäºŽè‡ªå·±çš„èŠ‚å¥å’Œæ–¹å‘ã€‚æ„¿ä½ åœ¨è¿™åœº WebSocket çš„å†’é™©ä¸­ï¼Œæ”¶èŽ·æŠ€æœ¯ã€çµæ„Ÿå’Œæˆé•¿ã€‚\n\n> *â€œè·¯æ¼«æ¼«å…¶ä¿®è¿œå…®ï¼Œå¾å°†ä¸Šä¸‹è€Œæ±‚ç´¢ã€‚â€*  \n> â€”â€” å±ˆåŽŸã€Šç¦»éªšã€‹\n\næ„¿ä½ çš„ä»£ç å¦‚è¯—ï¼Œæž¶æž„å¦‚ç”»ï¼Œå®žæ—¶é€šä¿¡å¦‚é£Žï¼Œå¹éä¸–ç•Œçš„æ¯ä¸€ä¸ªè§’è½ã€‚ðŸŒŸ\n\n---",
    "code": "var Component=(()=>{var p=Object.create;var s=Object.defineProperty;var E=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var F=Object.getPrototypeOf,B=Object.prototype.hasOwnProperty;var g=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),b=(n,e)=>{for(var r in e)s(n,r,{get:e[r],enumerable:!0})},o=(n,e,r,a)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of y(e))!B.call(n,c)&&c!==r&&s(n,c,{get:()=>e[c],enumerable:!(a=E(e,c))||a.enumerable});return n};var k=(n,e,r)=>(r=n!=null?p(F(n)):{},o(e||!n||!n.__esModule?s(r,\"default\",{value:n,enumerable:!0}):r,n)),u=n=>o(s({},\"__esModule\",{value:!0}),n);var i=g((W,d)=>{d.exports=_jsx_runtime});var m={};b(m,{default:()=>h,frontmatter:()=>S});var l=k(i()),S={type:\"Post\",title:\"WebSocket \\u8FDB\\u9636\\u5168\\u89E3\",date:\"2024-04-10\",description:\"\\u6DF1\\u5165\\u63A2\\u7D22 WebSocket \\u7684\\u6838\\u5FC3\\u539F\\u7406\\u3001\\u5B9E\\u73B0\\u673A\\u5236\\u3001\\u5E94\\u7528\\u573A\\u666F\\u4E0E\\u6700\\u4F73\\u5B9E\\u8DF5\\uFF0C\\u4E13\\u4E3A\\u524D\\u7AEF\\u5F00\\u53D1\\u8005\\u6253\\u9020\\uFF0C\\u517C\\u5177\\u6280\\u672F\\u6DF1\\u5EA6\\u4E0E\\u67B6\\u6784\\u89C6\\u91CE\\u3002\",keywords:\"WebSocket, \\u5B9E\\u65F6\\u901A\\u4FE1, \\u524D\\u7AEF\\u5F00\\u53D1, \\u7F51\\u7EDC\\u534F\\u8BAE, \\u67B6\\u6784\\u8BBE\\u8BA1, \\u6027\\u80FD\\u4F18\\u5316, \\u53CC\\u5411\\u901A\\u4FE1\",author:\"\\u6653\\u9F99\",image:\"/images/hero/websocket.jpg\",tags:[\"WebSocket\",\"\\u5B9E\\u65F6\\u901A\\u4FE1\",\"\\u524D\\u7AEF\\u5F00\\u53D1\",\"\\u7F51\\u7EDC\\u534F\\u8BAE\"],category:\"Network\"};function t(n){let e={a:\"a\",blockquote:\"blockquote\",br:\"br\",code:\"code\",em:\"em\",figure:\"figure\",h2:\"h2\",h3:\"h3\",h4:\"h4\",hr:\"hr\",li:\"li\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",table:\"table\",tbody:\"tbody\",td:\"td\",th:\"th\",thead:\"thead\",tr:\"tr\",ul:\"ul\",...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(e.blockquote,{children:[`\n`,(0,l.jsx)(e.p,{children:\"\\u201C\\u5B9E\\u65F6\\u901A\\u4FE1\\u5982\\u98CE\\uFF0C\\u77AC\\u606F\\u4E07\\u53D8\\uFF1B\\u67B6\\u6784\\u5982\\u5C71\\uFF0C\\u7A33\\u82E5\\u78D0\\u77F3\\u3002\\u201D \\u2014\\u2014 \\u6539\\u7F16\\u81EA\\u300A\\u8BD7\\u7ECF\\xB7\\u5C0F\\u96C5\\xB7\\u9E64\\u9E23\\u300B\"}),`\n`]}),`\n`,(0,l.jsx)(e.p,{children:\"WebSocket\\uFF0C\\u8FD9\\u4E2A\\u8BA9\\u65E0\\u6570\\u524D\\u7AEF\\u5F00\\u53D1\\u8005\\u65E2\\u7231\\u53C8\\u201C\\u6068\\u201D\\u7684\\u6280\\u672F\\uFF0C\\u65E9\\u5DF2\\u4E0D\\u662F\\u7B80\\u5355\\u7684\\u201C\\u957F\\u8FDE\\u63A5\\u201D\\u4EE3\\u540D\\u8BCD\\u3002\\u5B83\\u662F\\u73B0\\u4EE3 Web \\u5E94\\u7528\\u5B9E\\u65F6\\u901A\\u4FE1\\u7684\\u57FA\\u77F3\\uFF0C\\u4ECE\\u804A\\u5929\\u5BA4\\u5230\\u534F\\u540C\\u7F16\\u8F91\\uFF0C\\u4ECE\\u5B9E\\u65F6\\u80A1\\u7968\\u884C\\u60C5\\u5230\\u5728\\u7EBF\\u6E38\\u620F\\uFF0C\\u65E0\\u5904\\u4E0D\\u5728\\u3002\\u{1F525} \\u4F46\\u5B83\\u7684\\u9B45\\u529B\\u8FDC\\u4E0D\\u6B62\\u4E8E\\u6B64\\u2014\\u2014WebSocket \\u4E0D\\u4EC5\\u662F\\u4E00\\u9879\\u6280\\u672F\\uFF0C\\u66F4\\u662F\\u4E00\\u79CD\\u8BBE\\u8BA1\\u54F2\\u5B66\\u7684\\u4F53\\u73B0\\uFF0C\\u662F\\u5BF9\\u201C\\u8FDE\\u63A5\\u201D\\u4E0E\\u201C\\u5373\\u65F6\\u201D\\u7684\\u6DF1\\u523B\\u8BE0\\u91CA\\u3002\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u4F5C\\u4E3A\\u4E00\\u540D\\u524D\\u7AEF\\u5F00\\u53D1\\u8005\\uFF0C\\u4F60\\u53EF\\u80FD\\u5DF2\\u7ECF\\u7528\\u8FC7 WebSocket\\uFF0C\\u751A\\u81F3\\u5199\\u8FC7\\u51E0\\u4E2A \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"onopen\"})})})}),\" \\u548C \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"onmessage\"})})})}),\" \\u7684\\u56DE\\u8C03\\u3002\\u4F46\\u4F60\\u662F\\u5426\\u6DF1\\u5165\\u601D\\u8003\\u8FC7\\u5B83\\u7684\\u5185\\u90E8\\u673A\\u5236\\uFF1F\\u662F\\u5426\\u9047\\u5230\\u8FC7\\u8FDE\\u63A5\\u65AD\\u5F00\\u3001\\u6D88\\u606F\\u4E22\\u5931\\u6216\\u6027\\u80FD\\u74F6\\u9888\\u7684\\u56F0\\u6270\\uFF1F\\u662F\\u5426\\u60F3\\u8FC7\\u5982\\u4F55\\u5728\\u67B6\\u6784\\u5C42\\u9762\\u4F18\\u96C5\\u5730\\u96C6\\u6210 WebSocket\\uFF1F\\u672C\\u6587\\u5C06\\u5E26\\u4F60\\u4ECE\\u539F\\u7406\\u5230\\u5B9E\\u8DF5\\uFF0C\\u4ECE\\u4EE3\\u7801\\u5230\\u67B6\\u6784\\uFF0C\\u6DF1\\u5165 WebSocket \\u7684\\u6BCF\\u4E00\\u4E2A\\u89D2\\u843D\\uFF0C\\u89E3\\u9501\\u5B83\\u7684\\u5168\\u90E8\\u6F5C\\u529B\\u3002\\u{1F31F}\"]}),`\n`,(0,l.jsx)(e.p,{children:\"\\u8FD9\\u4E0D\\u4EC5\\u662F\\u4E00\\u7BC7\\u6280\\u672F\\u535A\\u5BA2\\uFF0C\\u66F4\\u662F\\u4E00\\u573A\\u5173\\u4E8E\\u5B9E\\u65F6\\u901A\\u4FE1\\u7684\\u601D\\u7EF4\\u4E4B\\u65C5\\u3002\\u6211\\u4EEC\\u5C06\\u7528\\u6E05\\u6670\\u7684\\u8868\\u683C\\u3001\\u4E30\\u5BCC\\u7684\\u793A\\u4F8B\\u3001\\u5E7D\\u9ED8\\u7684\\u7B14\\u89E6\\uFF0C\\u4EE5\\u53CA\\u4E00\\u4E9B\\u8BD7\\u610F\\u7684\\u70B9\\u7F00\\uFF0C\\u5E26\\u4F60\\u9886\\u7565 WebSocket \\u7684\\u6280\\u672F\\u7F8E\\u5B66\\u3002\\u51C6\\u5907\\u597D\\u4E86\\u5417\\uFF1F\\u8BA9\\u6211\\u4EEC\\u5F00\\u59CB\\u8FD9\\u573A\\u201C\\u53CC\\u5411\\u5954\\u8D74\\u201D\\u7684\\u5192\\u9669\\u5427\\uFF01\\u{1F680}\"}),`\n`,(0,l.jsx)(e.h2,{id:\"\\u4E00websocket-\\u662F\\u4EC0\\u4E48\\u4ECE-http-\\u7684\\u5355\\u5411\\u8857\\u5230\\u53CC\\u5411\\u901A\\u4FE1\",children:(0,l.jsx)(e.a,{href:\"#\\u4E00websocket-\\u662F\\u4EC0\\u4E48\\u4ECE-http-\\u7684\\u5355\\u5411\\u8857\\u5230\\u53CC\\u5411\\u901A\\u4FE1\",children:\"\\u4E00\\u3001WebSocket \\u662F\\u4EC0\\u4E48\\uFF1F\\u4ECE HTTP \\u7684\\u201C\\u5355\\u5411\\u8857\\u201D\\u5230\\u53CC\\u5411\\u901A\\u4FE1\"})}),`\n`,(0,l.jsx)(e.h3,{id:\"11-http-\\u7684\\u5C40\\u9650\\u4E0E-websocket-\\u7684\\u8BDE\\u751F\",children:(0,l.jsx)(e.a,{href:\"#11-http-\\u7684\\u5C40\\u9650\\u4E0E-websocket-\\u7684\\u8BDE\\u751F\",children:\"1.1 HTTP \\u7684\\u5C40\\u9650\\u4E0E WebSocket \\u7684\\u8BDE\\u751F\"})}),`\n`,(0,l.jsx)(e.p,{children:\"HTTP \\u662F\\u4E00\\u4E2A\\u201C\\u8BF7\\u6C42-\\u54CD\\u5E94\\u201D\\u6A21\\u578B\\uFF0C\\u50CF\\u6781\\u4E86\\u53E4\\u4EE3\\u7684\\u4E66\\u4FE1\\u5F80\\u6765\\uFF1A\\u4F60\\u5199\\u4E00\\u5C01\\u4FE1\\uFF08\\u8BF7\\u6C42\\uFF09\\uFF0C\\u5BF9\\u65B9\\u56DE\\u4E00\\u5C01\\uFF08\\u54CD\\u5E94\\uFF09\\uFF0C\\u7136\\u540E\\u518D\\u5199\\u4E0B\\u4E00\\u5C01\\u3002\\u{1F4DC} \\u8FD9\\u79CD\\u6A21\\u5F0F\\u5728\\u9759\\u6001\\u7F51\\u9875\\u65F6\\u4EE3\\u7EF0\\u7EF0\\u6709\\u4F59\\uFF0C\\u4F46\\u5728\\u5B9E\\u65F6\\u6027\\u8981\\u6C42\\u9AD8\\u7684\\u573A\\u666F\\u4E0B\\uFF08\\u5982\\u804A\\u5929\\u3001\\u5B9E\\u65F6\\u534F\\u4F5C\\uFF09\\uFF0CHTTP \\u5C31\\u663E\\u5F97\\u529B\\u4E0D\\u4ECE\\u5FC3\\u4E86\\u3002\"}),`\n`,(0,l.jsx)(e.p,{children:\"\\u4E3A\\u4E86\\u5F25\\u8865 HTTP \\u7684\\u4E0D\\u8DB3\\uFF0C\\u524D\\u7AEF\\u5F00\\u53D1\\u8005\\u4EEC\\u5C1D\\u8BD5\\u4E86\\u5404\\u79CD\\u201C\\u9ED1\\u79D1\\u6280\\u201D\\uFF1A\"}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"\\u8F6E\\u8BE2\\uFF08Polling\\uFF09\"}),\"\\uFF1A\\u5BA2\\u6237\\u7AEF\\u6BCF\\u9694\\u51E0\\u79D2\\u95EE\\u670D\\u52A1\\u5668\\uFF1A\\u201C\\u6709\\u65B0\\u6D88\\u606F\\u5417\\uFF1F\\u201D \\u670D\\u52A1\\u5668\\u8981\\u4E48\\u8BF4\\u201C\\u6709\\u201D\\uFF0C\\u8981\\u4E48\\u8BF4\\u201C\\u6CA1\\u6709\\u201D\\u3002\\u8FD9\\u79CD\\u65B9\\u5F0F\\u50CF\\u662F\\u4E00\\u4E2A\\u7126\\u8651\\u7684\\u604B\\u4EBA\\u4E0D\\u505C\\u5730\\u6253\\u7535\\u8BDD\\u786E\\u8BA4\\u5BF9\\u65B9\\u662F\\u5426\\u8FD8\\u7231\\u81EA\\u5DF1\\uFF0C\\u6548\\u7387\\u4F4E\\u4E0B\\u4E14\\u6D6A\\u8D39\\u8D44\\u6E90\\u3002\\u{1F605}\"]}),`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"\\u957F\\u8F6E\\u8BE2\\uFF08Long Polling\\uFF09\"}),\"\\uFF1A\\u5BA2\\u6237\\u7AEF\\u53D1\\u8D77\\u8BF7\\u6C42\\uFF0C\\u670D\\u52A1\\u5668\\u201C\\u540A\\u7740\\u201D\\u4E0D\\u7ACB\\u5373\\u54CD\\u5E94\\uFF0C\\u76F4\\u5230\\u6709\\u65B0\\u6570\\u636E\\u3002\\u8FD9\\u79CD\\u65B9\\u5F0F\\u7A0D\\u5FAE\\u4F18\\u5316\\u4E86\\u8F6E\\u8BE2\\uFF0C\\u4F46\\u4ECD\\u7136\\u662F\\u201C\\u88AB\\u52A8\\u7B49\\u5F85\\u201D\\uFF0C\\u800C\\u4E14\\u8FDE\\u63A5\\u9891\\u7E41\\u65AD\\u5F00\\u91CD\\u8FDE\\uFF0C\\u670D\\u52A1\\u5668\\u538B\\u529B\\u4E0D\\u5C0F\\u3002\"]}),`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"Server-Sent Events\\uFF08SSE\\uFF09\"}),\"\\uFF1A\\u670D\\u52A1\\u5668\\u53EF\\u4EE5\\u4E3B\\u52A8\\u63A8\\u9001\\u6570\\u636E\\uFF0C\\u4F46\\u4EC5\\u9650\\u5355\\u5411\\u901A\\u4FE1\\uFF0C\\u5BA2\\u6237\\u7AEF\\u65E0\\u6CD5\\u4E3B\\u52A8\\u53D1\\u9001\\u6D88\\u606F\\uFF0C\\u50CF\\u662F\\u6536\\u97F3\\u673A\\u5E7F\\u64AD\\uFF0C\\u9002\\u5408\\u5B9E\\u65F6\\u901A\\u77E5\\u4F46\\u4E0D\\u9002\\u5408\\u53CC\\u5411\\u4EA4\\u4E92\\u3002\"]}),`\n`]}),`\n`,(0,l.jsx)(e.p,{children:\"WebSocket \\u7684\\u51FA\\u73B0\\uFF0C\\u5F7B\\u5E95\\u6539\\u53D8\\u4E86\\u6E38\\u620F\\u89C4\\u5219\\u3002\\u{1F30D} \\u5B83\\u57FA\\u4E8E TCP \\u534F\\u8BAE\\uFF0C\\u901A\\u8FC7\\u4E00\\u6B21\\u63E1\\u624B\\u5EFA\\u7ACB\\u6301\\u4E45\\u8FDE\\u63A5\\uFF0C\\u5141\\u8BB8\\u5BA2\\u6237\\u7AEF\\u548C\\u670D\\u52A1\\u5668\\u81EA\\u7531\\u201C\\u5BF9\\u8BDD\\u201D\\uFF0C\\u65E0\\u9700\\u53CD\\u590D\\u63E1\\u624B\\u3002\\u8FD9\\u79CD\\u53CC\\u5411\\u3001\\u5168\\u53CC\\u5DE5\\u7684\\u901A\\u4FE1\\u6A21\\u5F0F\\uFF0C\\u5C31\\u50CF\\u4ECE\\u201C\\u4E66\\u4FE1\\u201D\\u5347\\u7EA7\\u5230\\u201C\\u7535\\u8BDD\\u201D\\uFF0C\\u751A\\u81F3\\u662F\\u201C\\u89C6\\u9891\\u901A\\u8BDD\\u201D\\u3002\\u{1F3A5}\"}),`\n`,(0,l.jsxs)(e.blockquote,{children:[`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.em,{children:\"\\u201C\\u4E16\\u4EBA\\u4E4B\\u5FC3\\uFF0C\\u77AC\\u606F\\u4E07\\u53D8\\uFF0CWebSocket \\u5982\\u6E05\\u98CE\\uFF0C\\u8FDE\\u63A5\\u65E0\\u95F4\\u3002\\u201D\"}),(0,l.jsx)(e.br,{}),`\n`,\"\\u2014\\u2014 \\u7075\\u611F\\u6E90\\u81EA\\u674E\\u767D\\u300A\\u5C06\\u8FDB\\u9152\\u300B\"]}),`\n`]}),`\n`,(0,l.jsxs)(e.p,{children:[\"*Tips\\uFF1A*\",(0,l.jsx)(e.em,{children:\"\\u5728\\u9009\\u62E9\\u901A\\u4FE1\\u65B9\\u5F0F\\u65F6\\uFF0C\\u4F18\\u5148\\u8003\\u8651\\u5E94\\u7528\\u573A\\u666F\\u3002\\u5982\\u679C\\u53EA\\u9700\\u8981\\u670D\\u52A1\\u5668\\u5355\\u5411\\u63A8\\u9001\\uFF08\\u5982\\u5B9E\\u65F6\\u901A\\u77E5\\uFF09\\uFF0CSSE \\u53EF\\u80FD\\u662F\\u66F4\\u8F7B\\u91CF\\u7684\\u9009\\u62E9\\uFF1B\\u5982\\u679C\\u9700\\u8981\\u53CC\\u5411\\u4EA4\\u4E92\\uFF0CWebSocket \\u662F\\u6700\\u4F73\\u62CD\\u6863\\u3002\"})]}),`\n`,(0,l.jsx)(e.h3,{id:\"12-websocket-\\u7684\\u6838\\u5FC3\\u7279\\u6027\",children:(0,l.jsx)(e.a,{href:\"#12-websocket-\\u7684\\u6838\\u5FC3\\u7279\\u6027\",children:\"1.2 WebSocket \\u7684\\u6838\\u5FC3\\u7279\\u6027\"})}),`\n`,(0,l.jsx)(e.p,{children:\"WebSocket \\u7684\\u8BBE\\u8BA1\\u54F2\\u5B66\\u53EF\\u4EE5\\u7528\\u201C\\u7B80\\u6D01\\u3001\\u9AD8\\u6548\\u3001\\u5B9E\\u65F6\\u201D\\u6765\\u6982\\u62EC\\u3002\\u4EE5\\u4E0B\\u662F\\u5B83\\u7684\\u6838\\u5FC3\\u7279\\u6027\\uFF0C\\u914D\\u4EE5\\u4E00\\u5F20\\u6E05\\u6670\\u7684\\u8868\\u683C\\u5BF9\\u6BD4 HTTP \\u548C WebSocket\\uFF1A\"}),`\n`,(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:(0,l.jsx)(e.strong,{children:\"\\u7279\\u6027\"})}),(0,l.jsx)(e.th,{children:(0,l.jsx)(e.strong,{children:\"HTTP\"})}),(0,l.jsx)(e.th,{children:(0,l.jsx)(e.strong,{children:\"WebSocket\"})})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.strong,{children:\"\\u901A\\u4FE1\\u6A21\\u5F0F\"})}),(0,l.jsx)(e.td,{children:\"\\u8BF7\\u6C42-\\u54CD\\u5E94\\uFF0C\\u5355\\u5411\"}),(0,l.jsx)(e.td,{children:\"\\u53CC\\u5411\\u3001\\u5168\\u53CC\\u5DE5\"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.strong,{children:\"\\u8FDE\\u63A5\\u65B9\\u5F0F\"})}),(0,l.jsx)(e.td,{children:\"\\u77ED\\u8FDE\\u63A5\\uFF08\\u6BCF\\u6B21\\u8BF7\\u6C42\\u65B0\\u5EFA\\u8FDE\\u63A5\\uFF09\"}),(0,l.jsx)(e.td,{children:\"\\u957F\\u8FDE\\u63A5\\uFF08\\u4E00\\u6B21\\u63E1\\u624B\\uFF0C\\u6301\\u7EED\\u901A\\u4FE1\\uFF09\"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.strong,{children:\"\\u534F\\u8BAE\"})}),(0,l.jsx)(e.td,{children:\"HTTP/1.1 \\u6216 HTTP/2\"}),(0,l.jsx)(e.td,{children:\"ws:// \\u6216 wss://\\uFF08\\u57FA\\u4E8E TCP\\uFF09\"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.strong,{children:\"\\u6570\\u636E\\u683C\\u5F0F\"})}),(0,l.jsx)(e.td,{children:\"\\u6587\\u672C\\u3001JSON\\u3001\\u8868\\u5355\\u7B49\"}),(0,l.jsx)(e.td,{children:\"\\u6587\\u672C\\u3001\\u4E8C\\u8FDB\\u5236\\uFF08\\u7075\\u6D3B\\u6027\\u66F4\\u9AD8\\uFF09\"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.strong,{children:\"\\u5B9E\\u65F6\\u6027\"})}),(0,l.jsx)(e.td,{children:\"\\u4F9D\\u8D56\\u8F6E\\u8BE2\\u6216\\u957F\\u8F6E\\u8BE2\\uFF0C\\u5EF6\\u8FDF\\u8F83\\u9AD8\"}),(0,l.jsx)(e.td,{children:\"\\u63A5\\u8FD1\\u5B9E\\u65F6\\uFF0C\\u5EF6\\u8FDF\\u6781\\u4F4E\"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.strong,{children:\"\\u670D\\u52A1\\u5668\\u8D44\\u6E90\\u5360\\u7528\"})}),(0,l.jsx)(e.td,{children:\"\\u9891\\u7E41\\u5EFA\\u7ACB/\\u5173\\u95ED\\u8FDE\\u63A5\\uFF0C\\u8D44\\u6E90\\u6D88\\u8017\\u5927\"}),(0,l.jsx)(e.td,{children:\"\\u5355\\u4E00\\u957F\\u8FDE\\u63A5\\uFF0C\\u8D44\\u6E90\\u5360\\u7528\\u4F4E\"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.strong,{children:\"\\u9002\\u7528\\u573A\\u666F\"})}),(0,l.jsx)(e.td,{children:\"\\u9759\\u6001\\u9875\\u9762\\u3001\\u8868\\u5355\\u63D0\\u4EA4\"}),(0,l.jsx)(e.td,{children:\"\\u804A\\u5929\\u3001\\u534F\\u4F5C\\u5DE5\\u5177\\u3001\\u5B9E\\u65F6\\u6570\\u636E\\u63A8\\u9001\"})]})]})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"*Tips\\uFF1A*\",(0,l.jsx)(e.em,{children:\"WebSocket \\u7684 wss:// \\u534F\\u8BAE\\u4F7F\\u7528 TLS \\u52A0\\u5BC6\\uFF0C\\u7C7B\\u4F3C HTTPS\\uFF0C\\u751F\\u4EA7\\u73AF\\u5883\\u4E2D\\u52A1\\u5FC5\\u4F7F\\u7528 wss:// \\u4EE5\\u786E\\u4FDD\\u5B89\\u5168\\u6027\\u3002\"})]}),`\n`,(0,l.jsx)(e.h3,{id:\"13-websocket-\\u7684\\u534F\\u8BAE\\u4E0E\\u63E1\\u624B\\u8FC7\\u7A0B\",children:(0,l.jsx)(e.a,{href:\"#13-websocket-\\u7684\\u534F\\u8BAE\\u4E0E\\u63E1\\u624B\\u8FC7\\u7A0B\",children:\"1.3 WebSocket \\u7684\\u534F\\u8BAE\\u4E0E\\u63E1\\u624B\\u8FC7\\u7A0B\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"WebSocket \\u534F\\u8BAE\\uFF08RFC 6455\\uFF09\\u57FA\\u4E8E TCP\\uFF0C\\u4F46\\u5B83\\u5E76\\u4E0D\\u662F\\u201C\\u88F8 TCP\\u201D\\u3002\\u5B83\\u5728 TCP \\u4E4B\\u4E0A\\u5B9A\\u4E49\\u4E86\\u4E00\\u5957\\u8F7B\\u91CF\\u7EA7\\u7684\\u534F\\u8BAE\\uFF0C\\u5206\\u4E3A\",(0,l.jsx)(e.strong,{children:\"\\u63E1\\u624B\\u9636\\u6BB5\"}),\"\\u548C\",(0,l.jsx)(e.strong,{children:\"\\u6570\\u636E\\u4F20\\u8F93\\u9636\\u6BB5\"}),\"\\u3002\"]}),`\n`,(0,l.jsx)(e.h4,{id:\"\\u63E1\\u624B\\u9636\\u6BB5\",children:(0,l.jsx)(e.a,{href:\"#\\u63E1\\u624B\\u9636\\u6BB5\",children:\"\\u63E1\\u624B\\u9636\\u6BB5\"})}),`\n`,(0,l.jsx)(e.p,{children:\"WebSocket \\u7684\\u63E1\\u624B\\u662F\\u901A\\u8FC7 HTTP \\u5B8C\\u6210\\u7684\\uFF08\\u662F\\u7684\\uFF0C\\u4F60\\u6CA1\\u770B\\u9519\\uFF0CWebSocket \\u79BB\\u4E0D\\u5F00 HTTP \\u7684\\u201C\\u52A9\\u653B\\u201D\\uFF09\\u3002\\u5BA2\\u6237\\u7AEF\\u53D1\\u9001\\u4E00\\u4E2A HTTP \\u8BF7\\u6C42\\uFF0C\\u5305\\u542B\\u7279\\u5B9A\\u7684\\u5934\\u4FE1\\u606F\\uFF1A\"}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"http\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"http\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"GET\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" /chat \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"HTTP\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"/\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1.1\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"Host\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" server.example.com\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"Upgrade\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" websocket\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"Connection\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" Upgrade\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"Sec-WebSocket-Key\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" x3JJHMbDL1EzLkh9GBhXDw==\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"Sec-WebSocket-Version\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" 13\"})]})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u670D\\u52A1\\u5668\\u54CD\\u5E94\\u4E00\\u4E2A\\u72B6\\u6001\\u7801\\u4E3A \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"101 Switching Protocols\"})})})}),\" \\u7684 HTTP \\u54CD\\u5E94\\uFF0C\\u8868\\u793A\\u534F\\u8BAE\\u5207\\u6362\\uFF1A\"]}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"http\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"http\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"HTTP\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"/\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1.1\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 101\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" Switching Protocols\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"Upgrade\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" websocket\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"Connection\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" Upgrade\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"Sec-WebSocket-Accept\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" HSmrc0sMlYUkAGmm5OPpG2HaGWk=\"})]})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u8FD9\\u4E2A\\u8FC7\\u7A0B\\u5C31\\u50CF\\u4E00\\u573A\\u201C\\u79D8\\u5BC6\\u63E1\\u624B\\u201D\\uFF1A\\u5BA2\\u6237\\u7AEF\\u8BF4\\u201C\\u6211\\u60F3\\u7528 WebSocket\\u201D\\uFF0C\\u670D\\u52A1\\u5668\\u8BF4\\u201C\\u597D\\uFF0C\\u5207\\u6362\\u534F\\u8BAE\\u5427\\u201D\\u3002\\u{1F512}\"}),`\n`,(0,l.jsx)(e.h4,{id:\"\\u6570\\u636E\\u4F20\\u8F93\\u9636\\u6BB5\",children:(0,l.jsx)(e.a,{href:\"#\\u6570\\u636E\\u4F20\\u8F93\\u9636\\u6BB5\",children:\"\\u6570\\u636E\\u4F20\\u8F93\\u9636\\u6BB5\"})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u63E1\\u624B\\u5B8C\\u6210\\u540E\\uFF0C\\u8FDE\\u63A5\\u8FDB\\u5165\\u6570\\u636E\\u4F20\\u8F93\\u9636\\u6BB5\\u3002WebSocket \\u4F7F\\u7528**\\u5E27\\uFF08Frame\\uFF09**\\u4F5C\\u4E3A\\u6570\\u636E\\u4F20\\u8F93\\u5355\\u4F4D\\uFF0C\\u6BCF\\u5E27\\u5305\\u542B\\uFF1A\"}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"\\u64CD\\u4F5C\\u7801\\uFF08Opcode\\uFF09\"}),\"\\uFF1A\\u6307\\u793A\\u6570\\u636E\\u7C7B\\u578B\\uFF08\\u5982\\u6587\\u672C\\u3001\\u4E8C\\u8FDB\\u5236\\u3001\\u5173\\u95ED\\u8FDE\\u63A5\\u7B49\\uFF09\\u3002\"]}),`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"\\u6709\\u6548\\u8F7D\\u8377\\uFF08Payload\\uFF09\"}),\"\\uFF1A\\u5B9E\\u9645\\u4F20\\u8F93\\u7684\\u6570\\u636E\\u3002\"]}),`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"\\u63A9\\u7801\\uFF08Masking\\uFF09\"}),\"\\uFF1A\\u5BA2\\u6237\\u7AEF\\u53D1\\u9001\\u7684\\u6570\\u636E\\u9700\\u8981\\u63A9\\u7801\\u5904\\u7406\\uFF0C\\u4EE5\\u9632\\u6B62\\u6076\\u610F\\u811A\\u672C\\u653B\\u51FB\\u3002\"]}),`\n`]}),`\n`,(0,l.jsxs)(e.p,{children:[\"*Tips\\uFF1A*\",(0,l.jsx)(e.em,{children:\"\\u8C03\\u8BD5 WebSocket \\u65F6\\uFF0C\\u53EF\\u4EE5\\u4F7F\\u7528\\u6D4F\\u89C8\\u5668\\u7684\\u5F00\\u53D1\\u8005\\u5DE5\\u5177\\uFF08Network \\u9762\\u677F\\uFF09\\u67E5\\u770B\\u63E1\\u624B\\u8BF7\\u6C42\\u548C\\u5E27\\u6570\\u636E\\uFF0C\\u6216\\u8005\\u4F7F\\u7528\\u5DE5\\u5177\\u5982 Postman \\u6216 WebSocket King\\u3002\"})]}),`\n`,(0,l.jsx)(e.h2,{id:\"\\u4E8Cwebsocket-\\u7684\\u5B9E\\u73B0\\u4ECE\\u6D4F\\u89C8\\u5668\\u5230\\u670D\\u52A1\\u5668\",children:(0,l.jsx)(e.a,{href:\"#\\u4E8Cwebsocket-\\u7684\\u5B9E\\u73B0\\u4ECE\\u6D4F\\u89C8\\u5668\\u5230\\u670D\\u52A1\\u5668\",children:\"\\u4E8C\\u3001WebSocket \\u7684\\u5B9E\\u73B0\\uFF1A\\u4ECE\\u6D4F\\u89C8\\u5668\\u5230\\u670D\\u52A1\\u5668\"})}),`\n`,(0,l.jsx)(e.h3,{id:\"21-\\u6D4F\\u89C8\\u5668\\u4E2D\\u7684-websocket-api\",children:(0,l.jsx)(e.a,{href:\"#21-\\u6D4F\\u89C8\\u5668\\u4E2D\\u7684-websocket-api\",children:\"2.1 \\u6D4F\\u89C8\\u5668\\u4E2D\\u7684 WebSocket API\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u524D\\u7AEF\\u5F00\\u53D1\\u8005\\u6700\\u5E38\\u63A5\\u89E6\\u7684\\u662F\\u6D4F\\u89C8\\u5668\\u63D0\\u4F9B\\u7684 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"WebSocket\"})})})}),\" \\u5BF9\\u8C61\\u3002\\u5B83\\u7684 API \\u7B80\\u5355\\u5230\\u4EE4\\u4EBA\\u611F\\u52A8\\uFF0C\\u4F46\\u529F\\u80FD\\u5F3A\\u5927\\u5230\\u8BA9\\u4EBA\\u656C\\u754F\\u3002\\u{1F60D} \\u4EE5\\u4E0B\\u662F\\u4E00\\u4E2A\\u57FA\\u672C\\u7684 WebSocket \\u8FDE\\u63A5\\u793A\\u4F8B\\uFF1A\"]}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"mdx\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"mdx\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"const socket = new WebSocket('ws://localhost:8080');\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"socket.onopen = () => \"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"{\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  console.log('\\u{1F389} \\u8FDE\\u63A5\\u6210\\u529F\\uFF01');\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  socket.send('Hello, Server!');\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"};\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"socket.onmessage = (event) => \"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"{\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  console.log('\\u{1F4E9} \\u6536\\u5230\\u6D88\\u606F\\uFF1A', event.data);\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"};\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"socket.onerror = (error) => \"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"{\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  console.error('\\u{1F635} \\u8FDE\\u63A5\\u51FA\\u9519\\uFF1A', error);\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"};\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"socket.onclose = () => \"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"{\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  console.log('\\u{1F622} \\u8FDE\\u63A5\\u5173\\u95ED');\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"};\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u8FD9\\u6BB5\\u4EE3\\u7801\\u5C31\\u50CF\\u4E00\\u4E2A\\u201C\\u521D\\u6B21\\u7EA6\\u4F1A\\u201D\\u7684\\u5267\\u672C\\uFF1A\\u5EFA\\u7ACB\\u8FDE\\u63A5\\uFF08\",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"onopen\"})})})}),\"\\uFF09\\u3001\\u53D1\\u9001\\u6D88\\u606F\\uFF08\",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"send\"})})})}),\"\\uFF09\\u3001\\u63A5\\u6536\\u6D88\\u606F\\uFF08\",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"onmessage\"})})})}),\"\\uFF09\\u3001\\u5904\\u7406\\u9519\\u8BEF\\uFF08\",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"onerror\"})})})}),\"\\uFF09\\u548C\\u544A\\u522B\\uFF08\",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"onclose\"})})})}),\"\\uFF09\\u3002\\u{1F48C}\"]}),`\n`,(0,l.jsxs)(e.p,{children:[\"*Tips\\uFF1A*\",(0,l.jsxs)(e.em,{children:[\"\\u59CB\\u7EC8\\u76D1\\u542C \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"onerror\"})})})}),\" \\u548C \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"onclose\"})})})}),\" \\u4E8B\\u4EF6\\uFF0C\\u8BB0\\u5F55\\u9519\\u8BEF\\u4FE1\\u606F\\u5E76\\u5236\\u5B9A\\u91CD\\u8FDE\\u7B56\\u7565\\uFF0C\\u4EE5\\u63D0\\u5347\\u7528\\u6237\\u4F53\\u9A8C\\u3002\"]})]}),`\n`,(0,l.jsx)(e.h3,{id:\"22-\\u670D\\u52A1\\u5668\\u7AEF\\u7684-websocket-\\u5B9E\\u73B0\",children:(0,l.jsx)(e.a,{href:\"#22-\\u670D\\u52A1\\u5668\\u7AEF\\u7684-websocket-\\u5B9E\\u73B0\",children:\"2.2 \\u670D\\u52A1\\u5668\\u7AEF\\u7684 WebSocket \\u5B9E\\u73B0\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"WebSocket \\u7684\\u670D\\u52A1\\u5668\\u7AEF\\u5B9E\\u73B0\\u53EF\\u4EE5\\u9009\\u62E9\\u591A\\u79CD\\u8BED\\u8A00\\u548C\\u6846\\u67B6\\u3002\\u4EE5\\u4E0B\\u662F\\u4E00\\u4E2A\\u4F7F\\u7528 Node.js \\u548C \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"ws\"})})})}),\" \\u5E93\\u7684\\u7B80\\u5355\\u793A\\u4F8B\\uFF1A\"]}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" WebSocket\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" require\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'ws'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" server\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" WebSocket.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"Server\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"({ port: \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"8080\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" });\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"server.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"on\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'connection'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"ws\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  console.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u{1F389} \\u65B0\\u5BA2\\u6237\\u7AEF\\u8FDE\\u63A5\\uFF01'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  ws.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"on\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'message'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"message\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    console.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u{1F4E9} \\u6536\\u5230\\u6D88\\u606F\\uFF1A'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", message.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"toString\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"());\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    ws.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"send\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"`\\u670D\\u52A1\\u5668\\u56DE\\u590D\\uFF1A${\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"message\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"}`\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  });\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  ws.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"on\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'close'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", () \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    console.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u{1F622} \\u5BA2\\u6237\\u7AEF\\u65AD\\u5F00\\u8FDE\\u63A5'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  });\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"console.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u{1F680} WebSocket \\u670D\\u52A1\\u5668\\u8FD0\\u884C\\u5728 ws://localhost:8080'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u8FD9\\u4E2A\\u670D\\u52A1\\u5668\\u50CF\\u4E00\\u4E2A\\u70ED\\u60C5\\u7684\\u201C\\u5BA2\\u670D\\u201D\\uFF0C\\u968F\\u65F6\\u54CD\\u5E94\\u5BA2\\u6237\\u7AEF\\u7684\\u6D88\\u606F\\uFF0C\\u5E76\\u539F\\u6837\\u56DE\\u4F20\\u3002\\u{1F3A4}\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"*Tips\\uFF1A*\",(0,l.jsx)(e.em,{children:\"\\u751F\\u4EA7\\u73AF\\u5883\\u4E2D\\uFF0C\\u5EFA\\u8BAE\\u4F7F\\u7528 Nginx \\u6216\\u5176\\u4ED6\\u53CD\\u5411\\u4EE3\\u7406\\u6765\\u5904\\u7406 WebSocket \\u8FDE\\u63A5\\uFF0C\\u8BBE\\u7F6E\\u5408\\u7406\\u7684\\u8D85\\u65F6\\u548C\\u5FC3\\u8DF3\\u673A\\u5236\\u3002\"})]}),`\n`,(0,l.jsx)(e.h3,{id:\"23-websocket-\\u7684\\u6D88\\u606F\\u683C\\u5F0F\\u4E0E\\u4E8C\\u8FDB\\u5236\\u652F\\u6301\",children:(0,l.jsx)(e.a,{href:\"#23-websocket-\\u7684\\u6D88\\u606F\\u683C\\u5F0F\\u4E0E\\u4E8C\\u8FDB\\u5236\\u652F\\u6301\",children:\"2.3 WebSocket \\u7684\\u6D88\\u606F\\u683C\\u5F0F\\u4E0E\\u4E8C\\u8FDB\\u5236\\u652F\\u6301\"})}),`\n`,(0,l.jsx)(e.p,{children:\"WebSocket \\u652F\\u6301\\u4E24\\u79CD\\u4E3B\\u8981\\u6570\\u636E\\u683C\\u5F0F\\uFF1A\"}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"\\u6587\\u672C\"}),\"\\uFF1A\\u901A\\u5E38\\u662F\\u5B57\\u7B26\\u4E32\\u6216 JSON\\uFF0C\\u9002\\u5408\\u7ED3\\u6784\\u5316\\u6570\\u636E\\u3002\"]}),`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"\\u4E8C\\u8FDB\\u5236\"}),\"\\uFF1A\\u5305\\u62EC \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"ArrayBuffer\"})})})}),\" \\u548C \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"Blob\"})})})}),\"\\uFF0C\\u9002\\u5408\\u4F20\\u8F93\\u56FE\\u7247\\u3001\\u97F3\\u9891\\u6216\\u89C6\\u9891\\u3002\"]}),`\n`]}),`\n`,(0,l.jsx)(e.p,{children:\"\\u4EE5\\u4E0B\\u662F\\u4E00\\u4E2A\\u53D1\\u9001\\u4E8C\\u8FDB\\u5236\\u6570\\u636E\\u7684\\u793A\\u4F8B\\uFF1A\"}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" socket\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" WebSocket\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'ws://localhost:8080'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"socket.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"onopen\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" buffer\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" ArrayBuffer\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"8\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" view\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" DataView\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(buffer);\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  view.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"setInt32\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"12345\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  socket.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"send\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(buffer);\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  console.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u{1F4E6} \\u53D1\\u9001\\u4E8C\\u8FDB\\u5236\\u6570\\u636E'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"};\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"socket.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"onmessage\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"event\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  if\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (event.data \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"instanceof\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" Blob\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    event.data.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"arrayBuffer\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"().\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"buffer\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"      const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" view\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" DataView\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(buffer);\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      console.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u{1F4E5} \\u6536\\u5230\\u4E8C\\u8FDB\\u5236\\u6570\\u636E\\uFF1A'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", view.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"getInt32\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"));\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    });\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"};\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"*Tips\\uFF1A*\",(0,l.jsxs)(e.em,{children:[\"\\u5904\\u7406\\u4E8C\\u8FDB\\u5236\\u6570\\u636E\\u65F6\\uFF0C\\u6CE8\\u610F\\u6D4F\\u89C8\\u5668\\u5BF9 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"Blob\"})})})}),\" \\u548C \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"ArrayBuffer\"})})})}),\" \\u7684\\u652F\\u6301\\uFF0C\\u4F18\\u5148\\u4F7F\\u7528 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"ArrayBuffer\"})})})}),\" \\u4EE5\\u83B7\\u5F97\\u66F4\\u9AD8\\u7684\\u6027\\u80FD\\u3002\"]})]}),`\n`,(0,l.jsx)(e.h2,{id:\"\\u4E09websocket-\\u7684\\u8FDB\\u9636\\u5B9E\\u8DF5\",children:(0,l.jsx)(e.a,{href:\"#\\u4E09websocket-\\u7684\\u8FDB\\u9636\\u5B9E\\u8DF5\",children:\"\\u4E09\\u3001WebSocket \\u7684\\u8FDB\\u9636\\u5B9E\\u8DF5\"})}),`\n`,(0,l.jsx)(e.h3,{id:\"31-\\u5FC3\\u8DF3\\u673A\\u5236\\u8BA9\\u8FDE\\u63A5\\u6C38\\u8446\\u9752\\u6625-\",children:(0,l.jsx)(e.a,{href:\"#31-\\u5FC3\\u8DF3\\u673A\\u5236\\u8BA9\\u8FDE\\u63A5\\u6C38\\u8446\\u9752\\u6625-\",children:\"3.1 \\u5FC3\\u8DF3\\u673A\\u5236\\uFF1A\\u8BA9\\u8FDE\\u63A5\\u201C\\u6C38\\u8446\\u9752\\u6625\\u201D \\u{1F493}\"})}),`\n`,(0,l.jsx)(e.p,{children:\"WebSocket \\u8FDE\\u63A5\\u53EF\\u80FD\\u56E0\\u7F51\\u7EDC\\u4E0D\\u7A33\\u5B9A\\u6216\\u670D\\u52A1\\u5668\\u8D85\\u65F6\\u800C\\u65AD\\u5F00\\u3002\\u4E3A\\u4E86\\u4FDD\\u6301\\u8FDE\\u63A5\\u7684\\u201C\\u6D3B\\u529B\\u201D\\uFF0C\\u6211\\u4EEC\\u9700\\u8981\\u5B9E\\u73B0\\u5FC3\\u8DF3\\u673A\\u5236\\uFF1A\\u5BA2\\u6237\\u7AEF\\u5B9A\\u671F\\u53D1\\u9001\\u201Cping\\u201D\\u6D88\\u606F\\uFF0C\\u670D\\u52A1\\u5668\\u56DE\\u590D\\u201Cpong\\u201D\\u6D88\\u606F\\u3002\"}),`\n`,(0,l.jsx)(e.p,{children:\"\\u4EE5\\u4E0B\\u662F\\u4E00\\u4E2A\\u5FC3\\u8DF3\\u673A\\u5236\\u7684\\u5B9E\\u73B0\\uFF1A\"}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"class\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" WebSocketWithHeartbeat\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  constructor\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"url\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".socket \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" WebSocket\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(url);\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".heartbeatInterval \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" null\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"init\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"  init\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".socket.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"onopen\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      console.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u{1F389} \\u8FDE\\u63A5\\u6210\\u529F'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"      this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"startHeartbeat\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    };\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".socket.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"onmessage\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"event\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"      if\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (event.data \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"===\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" 'pong'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        console.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u{1F493} \\u6536\\u5230\\u5FC3\\u8DF3\\u54CD\\u5E94'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      } \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"else\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        console.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u{1F4E9} \\u6536\\u5230\\u6D88\\u606F\\uFF1A'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", event.data);\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      }\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    };\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".socket.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"onclose\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      console.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u{1F622} \\u8FDE\\u63A5\\u5173\\u95ED\\uFF0C\\u5C1D\\u8BD5\\u91CD\\u8FDE'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"      this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"stopHeartbeat\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"      setTimeout\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(() \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"init\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(), \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"5000\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    };\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"  startHeartbeat\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".heartbeatInterval \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" setInterval\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(() \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"      if\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".socket.readyState \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"===\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" WebSocket.\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"OPEN\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"        this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".socket.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"send\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'ping'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        console.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u{1F493} \\u53D1\\u9001\\u5FC3\\u8DF3'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      }\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    }, \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"30000\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"  stopHeartbeat\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"    clearInterval\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".heartbeatInterval);\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" ws\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" WebSocketWithHeartbeat\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'ws://localhost:8080'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u8FD9\\u4E2A\\u5FC3\\u8DF3\\u673A\\u5236\\u5C31\\u50CF\\u7ED9 WebSocket \\u88C5\\u4E86\\u4E00\\u4E2A\\u201C\\u5FC3\\u810F\\u8D77\\u640F\\u5668\\u201D\\uFF0C\\u786E\\u4FDD\\u5B83\\u65F6\\u523B\\u201C\\u6D3B\\u7740\\u201D\\u3002\\u26A1\\uFE0F\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"*Tips\\uFF1A*\",(0,l.jsx)(e.em,{children:\"\\u5FC3\\u8DF3\\u95F4\\u9694\\u4E00\\u822C\\u8BBE\\u4E3A 30 \\u79D2\\u5230 60 \\u79D2\\uFF0C\\u8FC7\\u77ED\\u4F1A\\u589E\\u52A0\\u670D\\u52A1\\u5668\\u8D1F\\u62C5\\uFF0C\\u8FC7\\u957F\\u53EF\\u80FD\\u65E0\\u6CD5\\u53CA\\u65F6\\u68C0\\u6D4B\\u65AD\\u5F00\\u3002\"})]}),`\n`,(0,l.jsx)(e.h3,{id:\"32-\\u91CD\\u8FDE\\u673A\\u5236\\u4ECE\\u65AD\\u7EBF\\u5230\\u518D\\u7EED\\u524D\\u7F18\",children:(0,l.jsx)(e.a,{href:\"#32-\\u91CD\\u8FDE\\u673A\\u5236\\u4ECE\\u65AD\\u7EBF\\u5230\\u518D\\u7EED\\u524D\\u7F18\",children:\"3.2 \\u91CD\\u8FDE\\u673A\\u5236\\uFF1A\\u4ECE\\u201C\\u65AD\\u7EBF\\u201D\\u5230\\u201C\\u518D\\u7EED\\u524D\\u7F18\\u201D\"})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u7F51\\u7EDC\\u4E16\\u754C\\u65E0\\u5E38\\uFF0CWebSocket \\u8FDE\\u63A5\\u968F\\u65F6\\u53EF\\u80FD\\u201C\\u5931\\u8054\\u201D\\u3002\\u4E00\\u4E2A\\u5065\\u58EE\\u7684 WebSocket \\u5BA2\\u6237\\u7AEF\\u9700\\u8981\\u5B9E\\u73B0\\u81EA\\u52A8\\u91CD\\u8FDE\\u903B\\u8F91\\uFF0C\\u901A\\u5E38\\u7ED3\\u5408\\u6307\\u6570\\u9000\\u907F\\uFF08Exponential Backoff\\uFF09\\u7B97\\u6CD5\\u4EE5\\u907F\\u514D\\u9891\\u7E41\\u91CD\\u8BD5\\u3002\"}),`\n`,(0,l.jsx)(e.p,{children:\"\\u4EE5\\u4E0B\\u662F\\u4E00\\u4E2A\\u5E26\\u91CD\\u8FDE\\u7684 WebSocket \\u5C01\\u88C5\\uFF1A\"}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"class\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" WebSocketWithReconnect\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  constructor\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"url\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"maxRetries\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 5\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".url \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" url;\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".maxRetries \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" maxRetries;\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".retryCount \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".socket \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" null\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"connect\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"  connect\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".socket \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" WebSocket\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".url);\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".socket.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"onopen\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      console.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u{1F389} \\u8FDE\\u63A5\\u6210\\u529F'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"      this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".retryCount \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    };\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".socket.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"onclose\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      console.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u{1F622} \\u8FDE\\u63A5\\u5173\\u95ED'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"      this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"handleReconnect\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    };\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".socket.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"onerror\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      console.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u{1F635} \\u8FDE\\u63A5\\u9519\\u8BEF'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    };\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"  handleReconnect\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    if\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".retryCount \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".maxRetries) {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"      const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" delay\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" Math.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"pow\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"2\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".retryCount) \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"*\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1000\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"; \"}),(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u6307\\u6570\\u9000\\u907F\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      console.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"`\\u23F3 \\u7B2C ${\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"this\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"retryCount\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" +\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"} \\u6B21\\u91CD\\u8BD5\\uFF0C\\u7B49\\u5F85 ${\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"delay\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"}ms`\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"      setTimeout\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(() \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"        this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".retryCount\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"++\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"        this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"connect\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      }, delay);\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    } \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"else\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      console.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u{1F61E} \\u91CD\\u8BD5\\u6B21\\u6570\\u5DF2\\u8FBE\\u4E0A\\u9650\\uFF0C\\u653E\\u5F03\\u91CD\\u8FDE'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"  send\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"message\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    if\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".socket.readyState \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"===\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" WebSocket.\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"OPEN\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"      this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".socket.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"send\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(message);\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    } \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"else\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      console.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u26A0\\uFE0F \\u8FDE\\u63A5\\u672A\\u5C31\\u7EEA\\uFF0C\\u6D88\\u606F\\u672A\\u53D1\\u9001'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" ws\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" WebSocketWithReconnect\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'ws://localhost:8080'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"ws.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"send\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'Hello, Server!'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u8FD9\\u4E2A\\u91CD\\u8FDE\\u903B\\u8F91\\u5C31\\u50CF\\u4E00\\u4E2A\\u6267\\u7740\\u7684\\u201C\\u8FFD\\u68A6\\u4EBA\\u201D\\uFF0C\\u65E0\\u8BBA\\u9047\\u5230\\u591A\\u5C11\\u632B\\u6298\\uFF0C\\u90FD\\u4F1A\\u4EE5\\u66F4\\u8C28\\u614E\\u7684\\u6B65\\u4F10\\u518D\\u6B21\\u5C1D\\u8BD5\\u3002\\u{1F308}\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"*Tips\\uFF1A*\",(0,l.jsx)(e.em,{children:\"\\u6307\\u6570\\u9000\\u907F\\u7684\\u57FA\\u6570\\u548C\\u6700\\u5927\\u91CD\\u8BD5\\u6B21\\u6570\\u9700\\u8981\\u6839\\u636E\\u4E1A\\u52A1\\u573A\\u666F\\u8C03\\u6574\\uFF0C\\u5EFA\\u8BAE\\u8BB0\\u5F55\\u91CD\\u8FDE\\u65E5\\u5FD7\\u4EE5\\u4FBF\\u8C03\\u8BD5\\u3002\"})]}),`\n`,(0,l.jsx)(e.h3,{id:\"33-\\u6D88\\u606F\\u961F\\u5217\\u907F\\u514D\\u6D88\\u606F\\u6D2A\\u6C34-\",children:(0,l.jsx)(e.a,{href:\"#33-\\u6D88\\u606F\\u961F\\u5217\\u907F\\u514D\\u6D88\\u606F\\u6D2A\\u6C34-\",children:\"3.3 \\u6D88\\u606F\\u961F\\u5217\\uFF1A\\u907F\\u514D\\u201C\\u6D88\\u606F\\u6D2A\\u6C34\\u201D \\u{1F30A}\"})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u5728\\u9AD8\\u5E76\\u53D1\\u573A\\u666F\\u4E0B\\uFF0C\\u5BA2\\u6237\\u7AEF\\u53EF\\u80FD\\u77ED\\u65F6\\u95F4\\u5185\\u53D1\\u9001\\u5927\\u91CF\\u6D88\\u606F\\uFF0C\\u5BFC\\u81F4\\u670D\\u52A1\\u5668\\u8FC7\\u8F7D\\u3002\\u5B9E\\u73B0\\u4E00\\u4E2A\\u6D88\\u606F\\u961F\\u5217\\u53EF\\u4EE5\\u6709\\u6548\\u63A7\\u5236\\u53D1\\u9001\\u901F\\u7387\\uFF1A\"}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"class\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" WebSocketWithQueue\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  constructor\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"url\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".socket \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" WebSocket\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(url);\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".messageQueue \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" [];\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".isSending \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" false\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"init\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"  init\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".socket.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"onopen\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      console.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u{1F389} \\u8FDE\\u63A5\\u6210\\u529F'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"      this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"processQueue\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    };\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"  send\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"message\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".messageQueue.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"push\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(message);\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"processQueue\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"  processQueue\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    if\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".isSending \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"||\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".messageQueue.\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"length\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" ===\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 0\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" ||\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".socket.readyState \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"!==\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" WebSocket.\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"OPEN\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"      return\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".isSending \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" true\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" message\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".messageQueue.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"shift\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".socket.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"send\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(message);\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    console.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u{1F4E4} \\u53D1\\u9001\\u6D88\\u606F\\uFF1A'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", message);\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"    setTimeout\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(() \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"      this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".isSending \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" false\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"      this\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"processQueue\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    }, \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"100\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"); \"}),(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u63A7\\u5236\\u53D1\\u9001\\u901F\\u7387\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" ws\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" WebSocketWithQueue\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'ws://localhost:8080'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"ws.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"send\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u6D88\\u606F1'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"ws.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"send\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u6D88\\u606F2'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u6D88\\u606F\\u961F\\u5217\\u5C31\\u50CF\\u4E00\\u4E2A\\u201C\\u4EA4\\u901A\\u6307\\u6325\\u5B98\\u201D\\uFF0C\\u786E\\u4FDD\\u6D88\\u606F\\u6309\\u5E8F\\u3001\\u6709\\u8282\\u5236\\u5730\\u53D1\\u9001\\uFF0C\\u907F\\u514D\\u201C\\u9053\\u8DEF\\u62E5\\u5835\\u201D\\u3002\\u{1F6A6}\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"*Tips\\uFF1A*\",(0,l.jsx)(e.em,{children:\"\\u6839\\u636E\\u670D\\u52A1\\u5668\\u6027\\u80FD\\u8C03\\u6574\\u53D1\\u9001\\u95F4\\u9694\\uFF0C\\u8FC7\\u77ED\\u53EF\\u80FD\\u5BFC\\u81F4\\u670D\\u52A1\\u5668\\u538B\\u529B\\uFF0C\\u8FC7\\u957F\\u53EF\\u80FD\\u5F71\\u54CD\\u5B9E\\u65F6\\u6027\\u3002\"})]}),`\n`,(0,l.jsx)(e.h2,{id:\"\\u56DBwebsocket-\\u7684\\u6027\\u80FD\\u4F18\\u5316\\u4E0E\\u67B6\\u6784\\u8BBE\\u8BA1\",children:(0,l.jsx)(e.a,{href:\"#\\u56DBwebsocket-\\u7684\\u6027\\u80FD\\u4F18\\u5316\\u4E0E\\u67B6\\u6784\\u8BBE\\u8BA1\",children:\"\\u56DB\\u3001WebSocket \\u7684\\u6027\\u80FD\\u4F18\\u5316\\u4E0E\\u67B6\\u6784\\u8BBE\\u8BA1\"})}),`\n`,(0,l.jsx)(e.h3,{id:\"41-\\u6027\\u80FD\\u4F18\\u5316\\u8BA9-websocket-\\u8DD1\\u5F97\\u66F4\\u5FEB-\\uFE0F\",children:(0,l.jsx)(e.a,{href:\"#41-\\u6027\\u80FD\\u4F18\\u5316\\u8BA9-websocket-\\u8DD1\\u5F97\\u66F4\\u5FEB-\\uFE0F\",children:\"4.1 \\u6027\\u80FD\\u4F18\\u5316\\uFF1A\\u8BA9 WebSocket \\u8DD1\\u5F97\\u66F4\\u5FEB \\u{1F3CE}\\uFE0F\"})}),`\n`,(0,l.jsx)(e.p,{children:\"WebSocket \\u7684\\u6027\\u80FD\\u4F18\\u5316\\u53EF\\u4EE5\\u4ECE\\u4EE5\\u4E0B\\u51E0\\u4E2A\\u65B9\\u9762\\u5165\\u624B\\uFF1A\"}),`\n`,(0,l.jsx)(e.h4,{id:\"411-\\u538B\\u7F29\\u6D88\\u606F\",children:(0,l.jsx)(e.a,{href:\"#411-\\u538B\\u7F29\\u6D88\\u606F\",children:\"4.1.1 \\u538B\\u7F29\\u6D88\\u606F\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"WebSocket \\u652F\\u6301 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"permessage-deflate\"})})})}),\" \\u6269\\u5C55\\uFF0C\\u53EF\\u4EE5\\u538B\\u7F29\\u6D88\\u606F\\u4EE5\\u51CF\\u5C11\\u5E26\\u5BBD\\u5360\\u7528\\u3002\\u4EE5\\u4E0B\\u662F\\u542F\\u7528\\u538B\\u7F29\\u7684 Node.js \\u793A\\u4F8B\\uFF1A\"]}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" WebSocket\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" require\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'ws'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" server\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" WebSocket.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"Server\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  port: \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"8080\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  perMessageDeflate: {\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    zlibDeflateOptions: {\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      chunkSize: \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1024\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      memLevel: \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"7\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      level: \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"3\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    },\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    zlibInflateOptions: {\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      chunkSize: \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"10\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" *\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1024\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    },\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  },\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"server.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"on\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'connection'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"ws\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  ws.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"on\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'message'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"message\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    console.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u{1F4E9} \\u6536\\u5230\\u6D88\\u606F\\uFF1A'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", message.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"toString\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"());\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    ws.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"send\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(message);\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  });\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"*Tips\\uFF1A*\",(0,l.jsx)(e.em,{children:\"\\u538B\\u7F29\\u4F1A\\u589E\\u52A0 CPU \\u8D1F\\u8F7D\\uFF0C\\u5EFA\\u8BAE\\u6839\\u636E\\u6D88\\u606F\\u5927\\u5C0F\\u548C\\u9891\\u7387\\u6743\\u8861\\u662F\\u5426\\u542F\\u7528\\u3002\"})]}),`\n`,(0,l.jsx)(e.h4,{id:\"412-\\u51CF\\u5C11\\u4E0D\\u5FC5\\u8981\\u7684\\u5FC3\\u8DF3\",children:(0,l.jsx)(e.a,{href:\"#412-\\u51CF\\u5C11\\u4E0D\\u5FC5\\u8981\\u7684\\u5FC3\\u8DF3\",children:\"4.1.2 \\u51CF\\u5C11\\u4E0D\\u5FC5\\u8981\\u7684\\u5FC3\\u8DF3\"})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u5FC3\\u8DF3\\u6D88\\u606F\\u867D\\u7136\\u91CD\\u8981\\uFF0C\\u4F46\\u8FC7\\u4E8E\\u9891\\u7E41\\u4F1A\\u589E\\u52A0\\u5E26\\u5BBD\\u548C\\u670D\\u52A1\\u5668\\u8D1F\\u62C5\\u3002\\u53EF\\u4EE5\\u6839\\u636E\\u7F51\\u7EDC\\u72B6\\u51B5\\u52A8\\u6001\\u8C03\\u6574\\u5FC3\\u8DF3\\u95F4\\u9694\\uFF0C\\u6216\\u8005\\u5728\\u5BA2\\u6237\\u7AEF\\u68C0\\u6D4B\\u5230\\u7528\\u6237\\u4E0D\\u6D3B\\u8DC3\\u65F6\\u6682\\u505C\\u5FC3\\u8DF3\\u3002\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"*Tips\\uFF1A*\",(0,l.jsxs)(e.em,{children:[\"\\u7ED3\\u5408\\u6D4F\\u89C8\\u5668\\u7684 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"visibilitychange\"})})})}),\" \\u4E8B\\u4EF6\\uFF0C\\u5728\\u9875\\u9762\\u9690\\u85CF\\u65F6\\u6682\\u505C\\u5FC3\\u8DF3\\u4EE5\\u8282\\u7701\\u8D44\\u6E90\\u3002\"]})]}),`\n`,(0,l.jsx)(e.h4,{id:\"413-\\u4F7F\\u7528\\u4E8C\\u8FDB\\u5236\\u4EE3\\u66FF-json\",children:(0,l.jsx)(e.a,{href:\"#413-\\u4F7F\\u7528\\u4E8C\\u8FDB\\u5236\\u4EE3\\u66FF-json\",children:\"4.1.3 \\u4F7F\\u7528\\u4E8C\\u8FDB\\u5236\\u4EE3\\u66FF JSON\"})}),`\n`,(0,l.jsx)(e.p,{children:\"JSON \\u662F WebSocket \\u5E38\\u7528\\u7684\\u6570\\u636E\\u683C\\u5F0F\\uFF0C\\u4F46\\u5B83\\u7684\\u5E8F\\u5217\\u5316\\u548C\\u89E3\\u6790\\u5F00\\u9500\\u8F83\\u5927\\u3002\\u5728\\u6027\\u80FD\\u654F\\u611F\\u7684\\u573A\\u666F\\u4E0B\\uFF0C\\u53EF\\u4EE5\\u4F7F\\u7528\\u4E8C\\u8FDB\\u5236\\u683C\\u5F0F\\uFF08\\u5982 Protocol Buffers \\u6216 MessagePack\\uFF09\\u3002\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"*Tips\\uFF1A*\",(0,l.jsx)(e.em,{children:\"\\u4E8C\\u8FDB\\u5236\\u683C\\u5F0F\\u9700\\u8981\\u5BA2\\u6237\\u7AEF\\u548C\\u670D\\u52A1\\u5668\\u534F\\u5546\\u4E00\\u81F4\\uFF0C\\u5EFA\\u8BAE\\u5728\\u5F00\\u53D1\\u521D\\u671F\\u5B9A\\u4E49\\u597D\\u534F\\u8BAE\\u3002\"})]}),`\n`,(0,l.jsx)(e.h3,{id:\"42-\\u67B6\\u6784\\u8BBE\\u8BA1\\u4ECE\\u5355\\u70B9\\u5230\\u5206\\u5E03\\u5F0F\",children:(0,l.jsx)(e.a,{href:\"#42-\\u67B6\\u6784\\u8BBE\\u8BA1\\u4ECE\\u5355\\u70B9\\u5230\\u5206\\u5E03\\u5F0F\",children:\"4.2 \\u67B6\\u6784\\u8BBE\\u8BA1\\uFF1A\\u4ECE\\u5355\\u70B9\\u5230\\u5206\\u5E03\\u5F0F\"})}),`\n`,(0,l.jsx)(e.p,{children:\"WebSocket \\u7684\\u67B6\\u6784\\u8BBE\\u8BA1\\u9700\\u8981\\u8003\\u8651\\u4EE5\\u4E0B\\u51E0\\u4E2A\\u5C42\\u9762\\uFF1A\"}),`\n`,(0,l.jsx)(e.h4,{id:\"421-\\u5355\\u673A\\u90E8\\u7F72\",children:(0,l.jsx)(e.a,{href:\"#421-\\u5355\\u673A\\u90E8\\u7F72\",children:\"4.2.1 \\u5355\\u673A\\u90E8\\u7F72\"})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u5728\\u5C0F\\u578B\\u5E94\\u7528\\u4E2D\\uFF0C\\u5355\\u53F0\\u670D\\u52A1\\u5668\\u8DB3\\u4EE5\\u5E94\\u5BF9 WebSocket \\u8FDE\\u63A5\\u3002\\u4F46\\u9700\\u8981\\u6CE8\\u610F\\uFF1A\"}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"\\u8FDE\\u63A5\\u6570\\u9650\\u5236\"}),\"\\uFF1A\\u5355\\u53F0\\u670D\\u52A1\\u5668\\u7684 TCP \\u8FDE\\u63A5\\u6570\\u53D7\\u9650\\u4E8E\\u64CD\\u4F5C\\u7CFB\\u7EDF\\u548C\\u786C\\u4EF6\\u3002\"]}),`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"\\u5185\\u5B58\\u7BA1\\u7406\"}),\"\\uFF1A\\u6BCF\\u4E2A WebSocket \\u8FDE\\u63A5\\u4F1A\\u5360\\u7528\\u4E00\\u5B9A\\u5185\\u5B58\\uFF0C\\u9700\\u76D1\\u63A7\\u5185\\u5B58\\u4F7F\\u7528\\u60C5\\u51B5\\u3002\"]}),`\n`]}),`\n`,(0,l.jsxs)(e.p,{children:[\"*Tips\\uFF1A*\",(0,l.jsxs)(e.em,{children:[\"\\u4F7F\\u7528 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"ulimit\"})})})}),\" \\u8C03\\u6574\\u670D\\u52A1\\u5668\\u7684\\u6587\\u4EF6\\u63CF\\u8FF0\\u7B26\\u4E0A\\u9650\\uFF0C\\u4EE5\\u652F\\u6301\\u66F4\\u591A\\u8FDE\\u63A5\\u3002\"]})]}),`\n`,(0,l.jsx)(e.h4,{id:\"422-\\u5206\\u5E03\\u5F0F\\u90E8\\u7F72\",children:(0,l.jsx)(e.a,{href:\"#422-\\u5206\\u5E03\\u5F0F\\u90E8\\u7F72\",children:\"4.2.2 \\u5206\\u5E03\\u5F0F\\u90E8\\u7F72\"})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u5728\\u9AD8\\u5E76\\u53D1\\u573A\\u666F\\u4E0B\\uFF0C\\u5355\\u53F0\\u670D\\u52A1\\u5668\\u53EF\\u80FD\\u6210\\u4E3A\\u74F6\\u9888\\u3002\\u5206\\u5E03\\u5F0F WebSocket \\u67B6\\u6784\\u901A\\u5E38\\u5305\\u62EC\\uFF1A\"}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"\\u8D1F\\u8F7D\\u5747\\u8861\"}),\"\\uFF1A\\u4F7F\\u7528 Nginx \\u6216 HAProxy \\u5C06 WebSocket \\u8FDE\\u63A5\\u5206\\u53D1\\u5230\\u591A\\u53F0\\u540E\\u7AEF\\u670D\\u52A1\\u5668\\u3002\"]}),`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"\\u6D88\\u606F\\u5E7F\\u64AD\"}),\"\\uFF1A\\u901A\\u8FC7\\u6D88\\u606F\\u961F\\u5217\\uFF08\\u5982 Redis \\u6216 Kafka\\uFF09\\u5B9E\\u73B0\\u8DE8\\u670D\\u52A1\\u5668\\u7684\\u6D88\\u606F\\u540C\\u6B65\\u3002\"]}),`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"\\u72B6\\u6001\\u7BA1\\u7406\"}),\"\\uFF1A\\u4F7F\\u7528 Redis \\u6216\\u6570\\u636E\\u5E93\\u5B58\\u50A8\\u7528\\u6237\\u548C\\u8FDE\\u63A5\\u7684\\u72B6\\u6001\\u4FE1\\u606F\\u3002\"]}),`\n`]}),`\n`,(0,l.jsx)(e.p,{children:\"\\u4EE5\\u4E0B\\u662F\\u4E00\\u4E2A\\u7B80\\u5355\\u7684\\u5206\\u5E03\\u5F0F WebSocket \\u67B6\\u6784\\u56FE\\uFF08Markdown \\u683C\\u5F0F\\uFF09\\uFF1A\"}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"mermaid\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"mermaid\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"graph TD\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    A[\\u5BA2\\u6237\\u7AEF] -->|WebSocket| B[Nginx \\u8D1F\\u8F7D\\u5747\\u8861]\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    B --> C[WebSocket \\u670D\\u52A1\\u5668 1]\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    B --> D[WebSocket \\u670D\\u52A1\\u5668 2]\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    C --> E[Redis \\u6D88\\u606F\\u961F\\u5217]\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    D --> E\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    E --> F[\\u6570\\u636E\\u5E93]\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"*Tips\\uFF1A*\",(0,l.jsx)(e.em,{children:\"\\u5728\\u5206\\u5E03\\u5F0F\\u7CFB\\u7EDF\\u4E2D\\uFF0C\\u786E\\u4FDD\\u6D88\\u606F\\u961F\\u5217\\u7684\\u9AD8\\u53EF\\u7528\\u6027\\uFF0C\\u907F\\u514D\\u5355\\u70B9\\u6545\\u969C\\u3002\"})]}),`\n`,(0,l.jsx)(e.h3,{id:\"43-\\u9519\\u8BEF\\u5904\\u7406\\u4E0E\\u76D1\\u63A7\",children:(0,l.jsx)(e.a,{href:\"#43-\\u9519\\u8BEF\\u5904\\u7406\\u4E0E\\u76D1\\u63A7\",children:\"4.3 \\u9519\\u8BEF\\u5904\\u7406\\u4E0E\\u76D1\\u63A7\"})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u4E00\\u4E2A\\u5065\\u58EE\\u7684 WebSocket \\u7CFB\\u7EDF\\u9700\\u8981\\u5B8C\\u5584\\u7684\\u9519\\u8BEF\\u5904\\u7406\\u548C\\u76D1\\u63A7\\u673A\\u5236\\uFF1A\"}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"\\u9519\\u8BEF\\u5206\\u7C7B\"}),\"\\uFF1A\\u5C06\\u9519\\u8BEF\\u5206\\u4E3A\\u7F51\\u7EDC\\u9519\\u8BEF\\u3001\\u534F\\u8BAE\\u9519\\u8BEF\\u548C\\u4E1A\\u52A1\\u9519\\u8BEF\\uFF0C\\u5206\\u522B\\u5904\\u7406\\u3002\"]}),`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"\\u65E5\\u5FD7\\u8BB0\\u5F55\"}),\"\\uFF1A\\u8BB0\\u5F55\\u8FDE\\u63A5\\u3001\\u65AD\\u5F00\\u3001\\u9519\\u8BEF\\u548C\\u6D88\\u606F\\u7684\\u8BE6\\u7EC6\\u4FE1\\u606F\\uFF0C\\u65B9\\u4FBF\\u6392\\u67E5\\u95EE\\u9898\\u3002\"]}),`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"\\u76D1\\u63A7\\u544A\\u8B66\"}),\"\\uFF1A\\u4F7F\\u7528 Prometheus \\u548C Grafana \\u76D1\\u63A7\\u8FDE\\u63A5\\u6570\\u3001\\u6D88\\u606F\\u541E\\u5410\\u91CF\\u548C\\u9519\\u8BEF\\u7387\\u3002\"]}),`\n`]}),`\n`,(0,l.jsxs)(e.p,{children:[\"*Tips\\uFF1A*\",(0,l.jsx)(e.em,{children:\"\\u4E3A\\u6BCF\\u4E2A WebSocket \\u8FDE\\u63A5\\u5206\\u914D\\u4E00\\u4E2A\\u552F\\u4E00 ID\\uFF0C\\u4FBF\\u4E8E\\u8FFD\\u8E2A\\u548C\\u8C03\\u8BD5\\u3002\"})]}),`\n`,(0,l.jsx)(e.h2,{id:\"\\u4E94websocket-\\u7684\\u5E94\\u7528\\u573A\\u666F\\u4E0E\\u6848\\u4F8B\\u5206\\u6790\",children:(0,l.jsx)(e.a,{href:\"#\\u4E94websocket-\\u7684\\u5E94\\u7528\\u573A\\u666F\\u4E0E\\u6848\\u4F8B\\u5206\\u6790\",children:\"\\u4E94\\u3001WebSocket \\u7684\\u5E94\\u7528\\u573A\\u666F\\u4E0E\\u6848\\u4F8B\\u5206\\u6790\"})}),`\n`,(0,l.jsx)(e.h3,{id:\"51-\\u5B9E\\u65F6\\u804A\\u5929\\u5E94\\u7528\",children:(0,l.jsx)(e.a,{href:\"#51-\\u5B9E\\u65F6\\u804A\\u5929\\u5E94\\u7528\",children:\"5.1 \\u5B9E\\u65F6\\u804A\\u5929\\u5E94\\u7528\"})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u5B9E\\u65F6\\u804A\\u5929\\u662F WebSocket \\u7684\\u7ECF\\u5178\\u5E94\\u7528\\u573A\\u666F\\u3002\\u4EE5\\u4E0B\\u662F\\u4E00\\u4E2A\\u7B80\\u5316\\u7684\\u804A\\u5929\\u5BA4\\u5B9E\\u73B0\\uFF1A\"}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" WebSocket\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" require\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'ws'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" server\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" WebSocket.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"Server\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"({ port: \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"8080\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" });\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" clients\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" Set\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"server.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"on\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'connection'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"ws\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  clients.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"add\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(ws);\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  console.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u{1F389} \\u65B0\\u7528\\u6237\\u52A0\\u5165'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  ws.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"on\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'message'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"message\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" msg\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" JSON\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"stringify\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      user: \"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u533F\\u540D\\u7528\\u6237'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      content: message.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"toString\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(),\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      timestamp: \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"new\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" Date\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"().\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"toISOString\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(),\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    });\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    clients.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"forEach\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"client\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"      if\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (client.readyState \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"===\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" WebSocket.\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"OPEN\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        client.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"send\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(msg);\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      }\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    });\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  });\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  ws.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"on\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'close'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", () \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    clients.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"delete\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(ws);\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    console.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u{1F622} \\u7528\\u6237\\u79BB\\u5F00'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  });\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u8FD9\\u4E2A\\u804A\\u5929\\u5BA4\\u50CF\\u4E00\\u4E2A\\u201C\\u6570\\u5B57\\u7BDD\\u706B\\u201D\\uFF0C\\u7528\\u6237\\u56F4\\u5750\\u4E00\\u5708\\uFF0C\\u7545\\u6240\\u6B32\\u8A00\\u3002\\u{1F525}\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"*Tips\\uFF1A*\",(0,l.jsx)(e.em,{children:\"\\u4E3A\\u804A\\u5929\\u6D88\\u606F\\u6DFB\\u52A0\\u5E8F\\u5217\\u53F7\\uFF0C\\u9632\\u6B62\\u5BA2\\u6237\\u7AEF\\u56E0\\u7F51\\u7EDC\\u5EF6\\u8FDF\\u6536\\u5230\\u4E71\\u5E8F\\u6D88\\u606F\\u3002\"})]}),`\n`,(0,l.jsx)(e.h3,{id:\"52-\\u534F\\u540C\\u7F16\\u8F91\\u5DE5\\u5177\",children:(0,l.jsx)(e.a,{href:\"#52-\\u534F\\u540C\\u7F16\\u8F91\\u5DE5\\u5177\",children:\"5.2 \\u534F\\u540C\\u7F16\\u8F91\\u5DE5\\u5177\"})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u534F\\u540C\\u7F16\\u8F91\\u5DE5\\u5177\\uFF08\\u5982 Google Docs\\uFF09\\u9700\\u8981\\u5B9E\\u65F6\\u540C\\u6B65\\u591A\\u4E2A\\u7528\\u6237\\u7684\\u64CD\\u4F5C\\u3002WebSocket \\u914D\\u5408\\u64CD\\u4F5C\\u8F6C\\u6362\\uFF08Operational Transformation, OT\\uFF09\\u6216\\u51B2\\u7A81\\u89E3\\u51B3\\uFF08CRDT\\uFF09\\u7B97\\u6CD5\\uFF0C\\u53EF\\u4EE5\\u5B9E\\u73B0\\u9AD8\\u6548\\u7684\\u591A\\u4EBA\\u534F\\u4F5C\\u3002\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"*Tips\\uFF1A*\",(0,l.jsx)(e.em,{children:\"\\u5728\\u534F\\u540C\\u7F16\\u8F91\\u573A\\u666F\\u4E2D\\uFF0C\\u5EFA\\u8BAE\\u4F7F\\u7528\\u4E8C\\u8FDB\\u5236\\u683C\\u5F0F\\u4F20\\u8F93\\u64CD\\u4F5C\\u65E5\\u5FD7\\uFF0C\\u4EE5\\u51CF\\u5C11\\u5E26\\u5BBD\\u5360\\u7528\\u3002\"})]}),`\n`,(0,l.jsx)(e.h3,{id:\"53-\\u5B9E\\u65F6\\u6570\\u636E\\u53EF\\u89C6\\u5316\",children:(0,l.jsx)(e.a,{href:\"#53-\\u5B9E\\u65F6\\u6570\\u636E\\u53EF\\u89C6\\u5316\",children:\"5.3 \\u5B9E\\u65F6\\u6570\\u636E\\u53EF\\u89C6\\u5316\"})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u5728\\u91D1\\u878D\\u3001\\u7269\\u8054\\u7F51\\u6216\\u76D1\\u63A7\\u7CFB\\u7EDF\\u4E2D\\uFF0CWebSocket \\u53EF\\u4EE5\\u63A8\\u9001\\u5B9E\\u65F6\\u6570\\u636E\\u5230\\u524D\\u7AEF\\uFF0C\\u7528\\u4E8E\\u52A8\\u6001\\u56FE\\u8868\\u66F4\\u65B0\\u3002\\u4EE5\\u4E0B\\u662F\\u4E00\\u4E2A\\u7B80\\u5355\\u7684\\u80A1\\u7968\\u4EF7\\u683C\\u63A8\\u9001\\u793A\\u4F8B\\uFF1A\"}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" WebSocket\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" require\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'ws'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" server\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" WebSocket.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"Server\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"({ port: \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"8080\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" });\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"setInterval\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(() \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" price\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (Math.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"random\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"() \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"*\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1000\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\").\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"toFixed\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"2\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  server.clients.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"forEach\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"client\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    if\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (client.readyState \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"===\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" WebSocket.\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"OPEN\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      client.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"send\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"JSON\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"stringify\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"({ symbol: \"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'AAPL'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", price }));\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  });\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}, \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1000\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"*Tips\\uFF1A*\",(0,l.jsx)(e.em,{children:\"\\u4E3A\\u5B9E\\u65F6\\u6570\\u636E\\u8BBE\\u7F6E\\u5408\\u7406\\u7684\\u63A8\\u9001\\u9891\\u7387\\uFF0C\\u907F\\u514D\\u524D\\u7AEF\\u6E32\\u67D3\\u538B\\u529B\\u8FC7\\u5927\\u3002\"})]}),`\n`,(0,l.jsx)(e.h2,{id:\"\\u516Dwebsocket-\\u7684\\u672A\\u6765\\u4E0E\\u54F2\\u5B66\\u601D\\u8003\",children:(0,l.jsx)(e.a,{href:\"#\\u516Dwebsocket-\\u7684\\u672A\\u6765\\u4E0E\\u54F2\\u5B66\\u601D\\u8003\",children:\"\\u516D\\u3001WebSocket \\u7684\\u672A\\u6765\\u4E0E\\u54F2\\u5B66\\u601D\\u8003\"})}),`\n`,(0,l.jsx)(e.h3,{id:\"61-websocket-\\u4E0E-webrtc-\\u7684\\u5BF9\\u6BD4\",children:(0,l.jsx)(e.a,{href:\"#61-websocket-\\u4E0E-webrtc-\\u7684\\u5BF9\\u6BD4\",children:\"6.1 WebSocket \\u4E0E WebRTC \\u7684\\u5BF9\\u6BD4\"})}),`\n`,(0,l.jsx)(e.p,{children:\"WebSocket \\u64C5\\u957F\\u7ED3\\u6784\\u5316\\u6570\\u636E\\u7684\\u5B9E\\u65F6\\u4F20\\u8F93\\uFF0C\\u800C WebRTC \\u66F4\\u9002\\u5408\\u97F3\\u89C6\\u9891\\u6D41\\u3002\\u4E24\\u8005\\u5404\\u6709\\u5343\\u79CB\\uFF0C\\u4F46\\u5728\\u67D0\\u4E9B\\u573A\\u666F\\u4E0B\\u53EF\\u4EE5\\u7ED3\\u5408\\u4F7F\\u7528\\u3002\\u4F8B\\u5982\\uFF0C\\u5728\\u89C6\\u9891\\u4F1A\\u8BAE\\u4E2D\\uFF0CWebSocket \\u53EF\\u4EE5\\u4F20\\u8F93\\u804A\\u5929\\u6D88\\u606F\\u548C\\u63A7\\u5236\\u4FE1\\u4EE4\\uFF0CWebRTC \\u8D1F\\u8D23\\u97F3\\u89C6\\u9891\\u6D41\\u3002\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"*Tips\\uFF1A*\",(0,l.jsx)(e.em,{children:\"\\u8BC4\\u4F30\\u5B9E\\u65F6\\u9700\\u6C42\\u65F6\\uFF0C\\u660E\\u786E\\u6570\\u636E\\u7C7B\\u578B\\u548C\\u5EF6\\u8FDF\\u8981\\u6C42\\uFF0C\\u9009\\u62E9\\u5408\\u9002\\u7684\\u534F\\u8BAE\\u7EC4\\u5408\\u3002\"})]}),`\n`,(0,l.jsx)(e.h3,{id:\"62-\\u4ECE-websocket-\\u770B\\u67B6\\u6784\\u8BBE\\u8BA1\",children:(0,l.jsx)(e.a,{href:\"#62-\\u4ECE-websocket-\\u770B\\u67B6\\u6784\\u8BBE\\u8BA1\",children:\"6.2 \\u4ECE WebSocket \\u770B\\u67B6\\u6784\\u8BBE\\u8BA1\"})}),`\n`,(0,l.jsx)(e.p,{children:\"WebSocket \\u7684\\u8BBE\\u8BA1\\u54F2\\u5B66\\u542F\\u53D1\\u6211\\u4EEC\\u601D\\u8003\\u67B6\\u6784\\u7684\\u51E0\\u4E2A\\u5173\\u952E\\u95EE\\u9898\\uFF1A\"}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"\\u677E\\u8026\\u5408\"}),\"\\uFF1A\\u5BA2\\u6237\\u7AEF\\u548C\\u670D\\u52A1\\u5668\\u901A\\u8FC7\\u8F7B\\u91CF\\u534F\\u8BAE\\u901A\\u4FE1\\uFF0C\\u51CF\\u5C11\\u4F9D\\u8D56\\u3002\"]}),`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"\\u9AD8\\u53EF\\u7528\"}),\"\\uFF1A\\u901A\\u8FC7\\u5FC3\\u8DF3\\u548C\\u91CD\\u8FDE\\u673A\\u5236\\uFF0C\\u786E\\u4FDD\\u7CFB\\u7EDF\\u5065\\u58EE\\u6027\\u3002\"]}),`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"\\u53EF\\u6269\\u5C55\"}),\"\\uFF1A\\u652F\\u6301\\u4ECE\\u5355\\u673A\\u5230\\u5206\\u5E03\\u5F0F\\u7684\\u5E73\\u6ED1\\u8FC7\\u6E21\\u3002\"]}),`\n`]}),`\n`,(0,l.jsxs)(e.blockquote,{children:[`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.em,{children:\"\\u201C\\u51E1\\u4E8B\\u9884\\u5219\\u7ACB\\uFF0C\\u4E0D\\u9884\\u5219\\u5E9F\\u3002\\u201D\"}),(0,l.jsx)(e.br,{}),`\n`,\"\\u2014\\u2014 \\u300A homebrew: \",(0,l.jsx)(e.a,{href:\"https://brew.sh/2024/03/14/how-to-install-python-on-linux-macos-and-windows/\",children:\"https://brew.sh/2024/03/14/how-to-install-python-on-linux-macos-and-windows/\"})]}),`\n`]}),`\n`,(0,l.jsx)(e.p,{children:\"WebSocket \\u7684\\u6210\\u529F\\uFF0C\\u6E90\\u4E8E\\u5176\\u5BF9\\u5B9E\\u65F6\\u901A\\u4FE1\\u7684\\u6DF1\\u523B\\u6D1E\\u5BDF\\u548C\\u5BF9\\u7528\\u6237\\u4F53\\u9A8C\\u7684\\u6781\\u81F4\\u8FFD\\u6C42\\u3002\\u8FD9\\u4E0D\\u4EC5\\u662F\\u6280\\u672F\\u7684\\u80DC\\u5229\\uFF0C\\u66F4\\u662F\\u8BBE\\u8BA1\\u7684\\u80DC\\u5229\\u3002\"}),`\n`,(0,l.jsx)(e.h3,{id:\"63-\\u5B9E\\u65F6\\u901A\\u4FE1\\u7684\\u672A\\u6765\",children:(0,l.jsx)(e.a,{href:\"#63-\\u5B9E\\u65F6\\u901A\\u4FE1\\u7684\\u672A\\u6765\",children:\"6.3 \\u5B9E\\u65F6\\u901A\\u4FE1\\u7684\\u672A\\u6765\"})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u968F\\u7740 5G \\u548C\\u8FB9\\u7F18\\u8BA1\\u7B97\\u7684\\u666E\\u53CA\\uFF0C\\u5B9E\\u65F6\\u901A\\u4FE1\\u5C06\\u8FCE\\u6765\\u65B0\\u7684\\u673A\\u9047\\u3002WebSocket \\u53EF\\u80FD\\u4E0E\\u65B0\\u5174\\u6280\\u672F\\uFF08\\u5982 gRPC-Web \\u6216 QUIC\\uFF09\\u7ED3\\u5408\\uFF0C\\u521B\\u9020\\u66F4\\u9AD8\\u6548\\u7684\\u901A\\u4FE1\\u6A21\\u5F0F\\u3002\"}),`\n`,(0,l.jsxs)(e.blockquote,{children:[`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.em,{children:\"\\u201C\\u95EE\\u6E20\\u90A3\\u5F97\\u6E05\\u5982\\u8BB8\\uFF1F\\u4E3A\\u6709\\u6E90\\u5934\\u6D3B\\u6C34\\u6765\\u3002\\u201D\"}),(0,l.jsx)(e.br,{}),`\n`,\"\\u2014\\u2014 \\u6731\\u71B9\\u300A\\u89C2\\u4E66\\u6709\\u611F\\u300B\"]}),`\n`]}),`\n`,(0,l.jsx)(e.p,{children:\"\\u5B9E\\u65F6\\u901A\\u4FE1\\u7684\\u201C\\u6E90\\u5934\\u6D3B\\u6C34\\u201D\\uFF0C\\u6B63\\u662F\\u6280\\u672F\\u7684\\u4E0D\\u65AD\\u521B\\u65B0\\u3002WebSocket \\u53EA\\u662F\\u8FD9\\u6761\\u957F\\u6CB3\\u4E2D\\u7684\\u4E00\\u7AD9\\uFF0C\\u672A\\u6765\\u8FD8\\u6709\\u66F4\\u591A\\u53EF\\u80FD\\u7B49\\u5F85\\u6211\\u4EEC\\u63A2\\u7D22\\u3002\"}),`\n`,(0,l.jsx)(e.h2,{id:\"\\u4E03\\u603B\\u7ED3\\u4E0E\\u5BC4\\u8BED\",children:(0,l.jsx)(e.a,{href:\"#\\u4E03\\u603B\\u7ED3\\u4E0E\\u5BC4\\u8BED\",children:\"\\u4E03\\u3001\\u603B\\u7ED3\\u4E0E\\u5BC4\\u8BED\"})}),`\n`,(0,l.jsx)(e.p,{children:\"WebSocket \\u4E0D\\u4EC5\\u662F\\u4E00\\u9879\\u6280\\u672F\\uFF0C\\u66F4\\u662F\\u4E00\\u79CD\\u8FDE\\u63A5\\u4E16\\u754C\\u7684\\u601D\\u7EF4\\u65B9\\u5F0F\\u3002\\u5B83\\u8BA9\\u6211\\u4EEC\\u770B\\u5230\\uFF0C\\u6280\\u672F\\u7684\\u672C\\u8D28\\u662F\\u4E3A\\u4EBA\\u7C7B\\u521B\\u9020\\u66F4\\u7D27\\u5BC6\\u3001\\u66F4\\u5373\\u65F6\\u7684\\u8054\\u7CFB\\u3002\\u{1F30D}\"}),`\n`,(0,l.jsx)(e.p,{children:\"\\u4F5C\\u4E3A\\u524D\\u7AEF\\u5F00\\u53D1\\u8005\\uFF0C\\u638C\\u63E1 WebSocket \\u4E0D\\u4EC5\\u662F\\u4E3A\\u4E86\\u5199\\u51FA\\u66F4\\u597D\\u7684\\u4EE3\\u7801\\uFF0C\\u66F4\\u662F\\u4E3A\\u4E86\\u5728\\u77AC\\u606F\\u4E07\\u53D8\\u7684\\u6280\\u672F\\u4E16\\u754C\\u4E2D\\uFF0C\\u627E\\u5230\\u5C5E\\u4E8E\\u81EA\\u5DF1\\u7684\\u8282\\u594F\\u548C\\u65B9\\u5411\\u3002\\u613F\\u4F60\\u5728\\u8FD9\\u573A WebSocket \\u7684\\u5192\\u9669\\u4E2D\\uFF0C\\u6536\\u83B7\\u6280\\u672F\\u3001\\u7075\\u611F\\u548C\\u6210\\u957F\\u3002\"}),`\n`,(0,l.jsxs)(e.blockquote,{children:[`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.em,{children:\"\\u201C\\u8DEF\\u6F2B\\u6F2B\\u5176\\u4FEE\\u8FDC\\u516E\\uFF0C\\u543E\\u5C06\\u4E0A\\u4E0B\\u800C\\u6C42\\u7D22\\u3002\\u201D\"}),(0,l.jsx)(e.br,{}),`\n`,\"\\u2014\\u2014 \\u5C48\\u539F\\u300A\\u79BB\\u9A9A\\u300B\"]}),`\n`]}),`\n`,(0,l.jsx)(e.p,{children:\"\\u613F\\u4F60\\u7684\\u4EE3\\u7801\\u5982\\u8BD7\\uFF0C\\u67B6\\u6784\\u5982\\u753B\\uFF0C\\u5B9E\\u65F6\\u901A\\u4FE1\\u5982\\u98CE\\uFF0C\\u5439\\u904D\\u4E16\\u754C\\u7684\\u6BCF\\u4E00\\u4E2A\\u89D2\\u843D\\u3002\\u{1F31F}\"}),`\n`,(0,l.jsx)(e.hr,{})]})}function h(n={}){let{wrapper:e}=n.components||{};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(t,{...n})}):t(n)}return u(m);})();\n;return Component;"
  },
  "_id": "Network/websocketè¿›é˜¶å…¨è§£.mdx",
  "_raw": {
    "sourceFilePath": "Network/websocketè¿›é˜¶å…¨è§£.mdx",
    "sourceFileName": "websocketè¿›é˜¶å…¨è§£.mdx",
    "sourceFileDir": "Network",
    "contentType": "mdx",
    "flattenedPath": "Network/websocketè¿›é˜¶å…¨è§£"
  },
  "type": "Post",
  "url": "/blog/Network/websocketè¿›é˜¶å…¨è§£"
}