{
  "title": "聊聊 React Fiber 调度调和流程原理",
  "date": "2024-10-17T00:00:00.000Z",
  "description": "深入剖析 React Fiber 的调度与调和流程，从源码层面揭示其工作原理，包含核心概念、实现细节与实例解析。",
  "keywords": "React Fiber, 调度, 调和, 虚拟 DOM, 源码解析, React 性能优化, 前端开发",
  "author": "晓龙",
  "image": "/images/hero/react-fiber.jpg",
  "tags": [
    "React",
    "前端开发",
    "JavaScript"
  ],
  "views": 0,
  "likes": 0,
  "category": "React",
  "body": {
    "raw": "\n在我们开发大型 React 应用时，经常会遇到一个棘手的问题：当状态更新导致大量组件重新渲染时，主线程被长时间占用，造成页面卡顿，用户交互无法及时响应。这个问题在 React 16 之前尤为明显。为了彻底解决这个性能瓶颈，React 团队在 v16 版本中引入了革命性的 Fiber 架构。通过调度（Scheduling）和增量渲染（Incremental Rendering）机制，Fiber 让 React 具备了\"智能\"调度的能力 —— 它能够将渲染工作分解成小块，按优先级执行，并在必要时中断和恢复。本文将深入探讨 Fiber 架构的工作原理，从实际开发痛点出发，结合源码和典型案例，帮助你真正理解这个强大特性。\n\n## 什么是 React Fiber？\n\n在深入理解 Fiber 之前，我们先回顾下 React 16 之前的架构。早期 React 使用递归的方式（Stack Reconciler）处理虚拟 DOM 的更新，这种方式一旦开始就无法中断，直到整棵组件树都完成更新。在我经手的一个大型电商项目中，当用户在商品列表页快速切换筛选条件时，由于需要同时更新上千个商品组件，经常会出现页面卡死的情况。\n\nFiber 架构从根本上改变了这一点。它将 React 的更新过程重新设计为基于链表的可中断任务系统。在这个系统中，每个组件不再是简单的虚拟 DOM 节点，而是一个包含更多信息的 Fiber 节点，这些节点通过 child、sibling、return 等属性连接，形成一个灵活的链表结构。这种设计让渲染过程变得可控 —— React 能够在处理完一个节点后保存现场，按需决定是继续处理下一个节点，还是暂停让位给更重要的任务。\n\n### Fiber 核心特性与实践价值\n\n在我们的实际项目中，Fiber 的几个核心特性为性能优化提供了强大支持：\n\n1. **增量渲染**：将耗时的渲染任务切片执行。在我们的后台管理系统中，渲染包含上万条记录的表格时，Fiber 会将这个任务分解成多个小块，每次只处理一部分数据，避免长时间阻塞主线程。\n\n2. **任务优先级调度**：智能分配执行顺序。比如用户在快速输入搜索关键词时，Fiber 会确保输入框的响应优先于搜索结果的更新，保证操作流畅度。\n\n3. **可中断与恢复**：灵活让出执行权。在处理大量数据可视化更新时，如果用户进行了交互操作，Fiber 能够立即暂停当前更新，处理完交互后再继续之前的工作。\n\n4. **错误边界增强**：更精确的错误定位和恢复。在微前端架构中，某个子应用的错误不会导致整个应用崩溃，Fiber 的错误边界机制帮助我们实现了更可靠的错误隔离。\n\n## Fiber 的调度与调和流程\n\nReact Fiber 的工作流程主要分为两个阶段：**调度（Scheduling）** 和 **调和（Reconciliation）**，最终通过 **提交（Commit）** 阶段将变更应用到真实 DOM。\n\n### 1. 调度阶段（Scheduling）\n\n调度阶段的目标是确定哪些更新任务需要执行，并为它们分配优先级。React 通过 `Scheduler` 包（独立于 React 核心库）管理任务调度。\n\n#### Scheduler 的核心逻辑\n\n在源码中，调度器位于 `scheduler` 包中，核心文件如 `scheduler/src/Scheduler.js`。以下是调度流程的关键点：\n\n- **任务优先级**：React 使用 `Lane` 模型表示优先级，例如同步任务（Sync Lane）、交互任务（Interactive Lane）和低优先级任务（Default Lane）。\n- **时间分片（Time Slicing）**：调度器根据浏览器帧时间（通常 16ms）分配任务执行时间，避免阻塞主线程。\n\n```javascript\n// 源码片段：Scheduler 的 performWorkUntilDeadline\nfunction performWorkUntilDeadline() {\n  const currentTime = getCurrentTime();\n  let hasMoreWork = true;\n  while (hasMoreWork && !shouldYieldToHost()) {\n    hasMoreWork = workLoop(currentTime);\n  }\n  if (hasMoreWork) {\n    scheduleCallback(performWorkUntilDeadline);\n  }\n}\n```\n\n在这个循环中，`shouldYieldToHost` 会检查当前帧是否还有剩余时间。如果时间耗尽，任务会被暂停并推迟到下一帧。\n\n#### 示例：优先级调度\n\n假设一个输入框的 `onChange` 事件触发了状态更新，同时一个低优先级的动画也在运行。React 会优先处理用户输入（高优先级），而动画更新（低优先级）会被推迟。\n\n```javascript\nfunction App() {\n  const [text, setText] = useState(\"\");\n  const [count, setCount] = useState(0);\n\n  useEffect(() => {\n    // 低优先级任务\n    const id = setInterval(() => setCount((c) => c + 1), 1000);\n    return () => clearInterval(id);\n  }, []);\n\n  return (\n    <div>\n      <input value={text} onChange={(e) => setText(e.target.value)} />\n      <p>Count: {count}</p>\n    </div>\n  );\n}\n```\n\n在 Fiber 中，`setText` 的更新会被赋予高优先级，而 `setCount` 的更新则可能被延迟到下一帧。\n\n### 2. 调和阶段（Reconciliation）\n\n调和阶段是 React 根据组件状态和 props 生成新的 Fiber 树的过程。这一阶段分为 **render 阶段** 和 **commit 阶段**。\n\n#### Render 阶段\n\n在 `react-reconciler` 包中，`workLoopSync` 和 `workLoopConcurrent` 是调和的核心函数。它们会遍历 Fiber 树，执行以下步骤：\n\n1. **构建 Fiber 节点**：为每个组件创建或更新 Fiber 对象。\n2. **Diff 算法**：比较新旧 Fiber 树，标记需要更新的节点（effectTag）。\n3. **副作用收集**：将 DOM 操作（如插入、删除）记录到 Fiber 的 effect list 中。\n\n```javascript\n// 源码片段：performUnitOfWork\nfunction performUnitOfWork(fiber) {\n  if (!fiber.return && fiber.child) {\n    // 开始处理子节点\n    return fiber.child;\n  }\n  // 完成当前节点，寻找下一个兄弟节点或返回父节点\n  while (fiber) {\n    if (fiber.sibling) return fiber.sibling;\n    fiber = fiber.return;\n  }\n  return null;\n}\n```\n\n#### Diff 算法的优化\n\nReact 的 Diff 算法在 Fiber 中得到了增强：\n\n- **单链表遍历**：通过 `child` 和 `sibling` 属性遍历子节点，避免递归带来的栈溢出。\n- **key 的作用**：借助 `key` 属性快速定位需要更新的节点。\n\n例如，假设有一个列表组件：\n\n```javascript\nfunction List() {\n  const [items, setItems] = useState([\"A\", \"B\", \"C\"]);\n  return (\n    <ul>\n      {items.map((item) => (\n        <li key={item}>{item}</li>\n      ))}\n    </ul>\n  );\n}\n```\n\n如果将 `items` 更新为 `[\"A\", \"C\", \"B\"]`，React 会通过 `key` 识别出只需要调整顺序，而无需重新渲染所有节点。\n\n#### 示例：条件渲染的调和\n\n考虑以下代码：\n\n```javascript\nfunction ToggleComponent({ show }) {\n  return show ? <h1>Hello</h1> : <p>Goodbye</p>;\n}\n```\n\n当 `show` 从 `true` 变为 `false` 时，React 会：\n\n1. 标记 `<h1>` 的 Fiber 节点为删除（`Deletion` effectTag）。\n2. 创建 `<p>` 的新 Fiber 节点并标记为插入（`Placement` effectTag）。\n3. 将这些副作用记录到 effect list 中。\n\n### 3. 提交阶段（Commit）\n\n提交阶段将 render 阶段生成的副作用应用到真实 DOM。这一阶段是同步的，无法中断，确保 DOM 更新的一致性。\n\n#### 源码解析：commitRoot\n\n在 `react-reconciler/src/ReactFiberWorkLoop.js` 中，`commitRoot` 函数负责提交变更：\n\n```javascript\nfunction commitRoot(root) {\n  const finishedWork = root.finishedWork;\n  if (finishedWork === null) return;\n  // 提交副作用\n  commitMutationEffects(finishedWork);\n  // 更新 Fiber 树\n  root.current = finishedWork;\n}\n```\n\n#### 示例：DOM 更新\n\n对于前面的 `ToggleComponent`，提交阶段会：\n\n1. 从 DOM 中移除 `<h1>`。\n2. 将 `<p>` 插入 DOM。\n3. 更新 `current` Fiber 树为新的 Fiber 树。\n\n## Fiber 的性能优势\n\n### 实战中的性能优化实践\n\n在我们的一个大型后台管理系统中，Fiber 的性能优势体现得尤为明显。以下是几个典型的优化案例：\n\n#### 1. 虚拟列表与时间分片\n\n当需要展示包含上万条记录的表格数据时，我们结合虚拟列表和 Fiber 的时间分片特性，实现了流畅的用户体验：\n\n```javascript\nfunction VirtualTable({ data, itemHeight = 40 }) {\n  const [visibleRange, setVisibleRange] = useState({ start: 0, end: 20 });\n  const containerRef = useRef(null);\n\n  const onScroll = useCallback(() => {\n    const { scrollTop, clientHeight } = containerRef.current;\n    const start = Math.floor(scrollTop / itemHeight);\n    const end = Math.min(\n      start + Math.ceil(clientHeight / itemHeight),\n      data.length\n    );\n\n    // 利用 Fiber 的时间分片，避免频繁更新导致的卡顿\n    setVisibleRange({ start, end });\n  }, [data.length, itemHeight]);\n\n  return (\n    <div\n      ref={containerRef}\n      style={{ height: \"400px\", overflow: \"auto\" }}\n      onScroll={onScroll}\n    >\n      <div\n        style={{\n          height: `${data.length * itemHeight}px`,\n          position: \"relative\",\n        }}\n      >\n        {data.slice(visibleRange.start, visibleRange.end).map((row, index) => (\n          <div\n            key={row.id}\n            style={{\n              position: \"absolute\",\n              top: `${(index + visibleRange.start) * itemHeight}px`,\n              height: `${itemHeight}px`,\n            }}\n          >\n            {row.content}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n```\n\n#### 2. 并发渲染与用户交互\n\n在处理复杂的数据可视化场景时，我们充分利用了 Fiber 的并发特性。比如在一个实时数据监控面板中：\n\n```javascript\nfunction DataMonitor({ data, onFilter }) {\n  const [filterText, setFilterText] = useState(\"\");\n  const [filteredData, setFilteredData] = useState(data);\n\n  // 使用 useDeferredValue 让数据过滤的优先级低于用户输入\n  const deferredText = useDeferredValue(filterText);\n\n  useEffect(() => {\n    // 复杂的数据过滤逻辑\n    const filtered = data.filter((item) =>\n      item.name.toLowerCase().includes(deferredText.toLowerCase())\n    );\n    setFilteredData(filtered);\n    onFilter(filtered);\n  }, [deferredText, data, onFilter]);\n\n  return (\n    <div>\n      <input\n        type=\"text\"\n        value={filterText}\n        onChange={(e) => setFilterText(e.target.value)}\n        placeholder=\"实时过滤数据...\"\n      />\n      <DataVisualization data={filteredData} />\n    </div>\n  );\n}\n```\n\n这种设计确保了即使在处理大量数据时，用户的输入响应也不会受到影响。Fiber 会自动调度数据过滤的优先级，在用户停止输入后才进行复杂的计算和渲染更新。\n\n## 源码中的关键数据结构\n\n### Fiber 节点\n\n每个 Fiber 节点是一个对象，包含以下关键属性：\n\n```javascript\nconst fiber = {\n  tag: HostComponent, // 节点类型（如 DOM 元素、类组件）\n  key: null, // 用于 Diff 的标识\n  stateNode: null, // 对应的真实 DOM 或组件实例\n  return: null, // 父节点\n  child: null, // 第一个子节点\n  sibling: null, // 下一个兄弟节点\n  effectTag: NoEffect, // 副作用标记\n  nextEffect: null, // 下一个副作用节点\n  memoizedState: null, // 保存的状态\n  memoizedProps: null, // 保存的 props\n  updateQueue: null, // 更新队列\n};\n```\n\n### Lane 模型\n\n`Lane` 是 React 用于表示优先级的位运算模型。例如：\n\n```javascript\nconst SyncLane = 0b0001;\nconst InputContinuousLane = 0b0010;\nconst DefaultLane = 0b0100;\n```\n\n通过位运算，React 可以高效判断任务优先级并合并更新。\n\n## 总结\n\nReact Fiber 的调度与调和流程是其性能优化的核心。通过将渲染任务拆分为可中断的单元，并结合优先级调度和高效的 Diff 算法，Fiber 实现了对复杂应用的精细控制。从源码层面看，Fiber 的设计体现了模块化、可扩展和高性能的特点。\n\n希望本文的深度解析和实例能帮助你更好地理解 React Fiber 的工作原理。如果你有更多问题或想探讨某个细节，欢迎留言交流！\n\n---\n",
    "code": "var Component=(()=>{var p=Object.create;var c=Object.defineProperty;var E=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var F=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var u=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),f=(n,e)=>{for(var r in e)c(n,r,{get:e[r],enumerable:!0})},d=(n,e,r,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let a of y(e))!g.call(n,a)&&a!==r&&c(n,a,{get:()=>e[a],enumerable:!(i=E(e,a))||i.enumerable});return n};var B=(n,e,r)=>(r=n!=null?p(F(n)):{},d(e||!n||!n.__esModule?c(r,\"default\",{value:n,enumerable:!0}):r,n)),b=n=>d(c({},\"__esModule\",{value:!0}),n);var t=u((x,s)=>{s.exports=_jsx_runtime});var k={};f(k,{default:()=>h,frontmatter:()=>m});var l=B(t()),m={type:\"Post\",title:\"\\u804A\\u804A React Fiber \\u8C03\\u5EA6\\u8C03\\u548C\\u6D41\\u7A0B\\u539F\\u7406\",date:\"2024-10-17\",description:\"\\u6DF1\\u5165\\u5256\\u6790 React Fiber \\u7684\\u8C03\\u5EA6\\u4E0E\\u8C03\\u548C\\u6D41\\u7A0B\\uFF0C\\u4ECE\\u6E90\\u7801\\u5C42\\u9762\\u63ED\\u793A\\u5176\\u5DE5\\u4F5C\\u539F\\u7406\\uFF0C\\u5305\\u542B\\u6838\\u5FC3\\u6982\\u5FF5\\u3001\\u5B9E\\u73B0\\u7EC6\\u8282\\u4E0E\\u5B9E\\u4F8B\\u89E3\\u6790\\u3002\",keywords:\"React Fiber, \\u8C03\\u5EA6, \\u8C03\\u548C, \\u865A\\u62DF DOM, \\u6E90\\u7801\\u89E3\\u6790, React \\u6027\\u80FD\\u4F18\\u5316, \\u524D\\u7AEF\\u5F00\\u53D1\",author:\"\\u6653\\u9F99\",image:\"/images/hero/react-fiber.jpg\",tags:[\"React\",\"\\u524D\\u7AEF\\u5F00\\u53D1\",\"JavaScript\"],category:\"React\"};function o(n){let e={a:\"a\",code:\"code\",figure:\"figure\",h2:\"h2\",h3:\"h3\",h4:\"h4\",hr:\"hr\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.p,{children:'\\u5728\\u6211\\u4EEC\\u5F00\\u53D1\\u5927\\u578B React \\u5E94\\u7528\\u65F6\\uFF0C\\u7ECF\\u5E38\\u4F1A\\u9047\\u5230\\u4E00\\u4E2A\\u68D8\\u624B\\u7684\\u95EE\\u9898\\uFF1A\\u5F53\\u72B6\\u6001\\u66F4\\u65B0\\u5BFC\\u81F4\\u5927\\u91CF\\u7EC4\\u4EF6\\u91CD\\u65B0\\u6E32\\u67D3\\u65F6\\uFF0C\\u4E3B\\u7EBF\\u7A0B\\u88AB\\u957F\\u65F6\\u95F4\\u5360\\u7528\\uFF0C\\u9020\\u6210\\u9875\\u9762\\u5361\\u987F\\uFF0C\\u7528\\u6237\\u4EA4\\u4E92\\u65E0\\u6CD5\\u53CA\\u65F6\\u54CD\\u5E94\\u3002\\u8FD9\\u4E2A\\u95EE\\u9898\\u5728 React 16 \\u4E4B\\u524D\\u5C24\\u4E3A\\u660E\\u663E\\u3002\\u4E3A\\u4E86\\u5F7B\\u5E95\\u89E3\\u51B3\\u8FD9\\u4E2A\\u6027\\u80FD\\u74F6\\u9888\\uFF0CReact \\u56E2\\u961F\\u5728 v16 \\u7248\\u672C\\u4E2D\\u5F15\\u5165\\u4E86\\u9769\\u547D\\u6027\\u7684 Fiber \\u67B6\\u6784\\u3002\\u901A\\u8FC7\\u8C03\\u5EA6\\uFF08Scheduling\\uFF09\\u548C\\u589E\\u91CF\\u6E32\\u67D3\\uFF08Incremental Rendering\\uFF09\\u673A\\u5236\\uFF0CFiber \\u8BA9 React \\u5177\\u5907\\u4E86\"\\u667A\\u80FD\"\\u8C03\\u5EA6\\u7684\\u80FD\\u529B \\u2014\\u2014 \\u5B83\\u80FD\\u591F\\u5C06\\u6E32\\u67D3\\u5DE5\\u4F5C\\u5206\\u89E3\\u6210\\u5C0F\\u5757\\uFF0C\\u6309\\u4F18\\u5148\\u7EA7\\u6267\\u884C\\uFF0C\\u5E76\\u5728\\u5FC5\\u8981\\u65F6\\u4E2D\\u65AD\\u548C\\u6062\\u590D\\u3002\\u672C\\u6587\\u5C06\\u6DF1\\u5165\\u63A2\\u8BA8 Fiber \\u67B6\\u6784\\u7684\\u5DE5\\u4F5C\\u539F\\u7406\\uFF0C\\u4ECE\\u5B9E\\u9645\\u5F00\\u53D1\\u75DB\\u70B9\\u51FA\\u53D1\\uFF0C\\u7ED3\\u5408\\u6E90\\u7801\\u548C\\u5178\\u578B\\u6848\\u4F8B\\uFF0C\\u5E2E\\u52A9\\u4F60\\u771F\\u6B63\\u7406\\u89E3\\u8FD9\\u4E2A\\u5F3A\\u5927\\u7279\\u6027\\u3002'}),`\n`,(0,l.jsx)(e.h2,{id:\"\\u4EC0\\u4E48\\u662F-react-fiber\",children:(0,l.jsx)(e.a,{href:\"#\\u4EC0\\u4E48\\u662F-react-fiber\",children:\"\\u4EC0\\u4E48\\u662F React Fiber\\uFF1F\"})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u5728\\u6DF1\\u5165\\u7406\\u89E3 Fiber \\u4E4B\\u524D\\uFF0C\\u6211\\u4EEC\\u5148\\u56DE\\u987E\\u4E0B React 16 \\u4E4B\\u524D\\u7684\\u67B6\\u6784\\u3002\\u65E9\\u671F React \\u4F7F\\u7528\\u9012\\u5F52\\u7684\\u65B9\\u5F0F\\uFF08Stack Reconciler\\uFF09\\u5904\\u7406\\u865A\\u62DF DOM \\u7684\\u66F4\\u65B0\\uFF0C\\u8FD9\\u79CD\\u65B9\\u5F0F\\u4E00\\u65E6\\u5F00\\u59CB\\u5C31\\u65E0\\u6CD5\\u4E2D\\u65AD\\uFF0C\\u76F4\\u5230\\u6574\\u68F5\\u7EC4\\u4EF6\\u6811\\u90FD\\u5B8C\\u6210\\u66F4\\u65B0\\u3002\\u5728\\u6211\\u7ECF\\u624B\\u7684\\u4E00\\u4E2A\\u5927\\u578B\\u7535\\u5546\\u9879\\u76EE\\u4E2D\\uFF0C\\u5F53\\u7528\\u6237\\u5728\\u5546\\u54C1\\u5217\\u8868\\u9875\\u5FEB\\u901F\\u5207\\u6362\\u7B5B\\u9009\\u6761\\u4EF6\\u65F6\\uFF0C\\u7531\\u4E8E\\u9700\\u8981\\u540C\\u65F6\\u66F4\\u65B0\\u4E0A\\u5343\\u4E2A\\u5546\\u54C1\\u7EC4\\u4EF6\\uFF0C\\u7ECF\\u5E38\\u4F1A\\u51FA\\u73B0\\u9875\\u9762\\u5361\\u6B7B\\u7684\\u60C5\\u51B5\\u3002\"}),`\n`,(0,l.jsx)(e.p,{children:\"Fiber \\u67B6\\u6784\\u4ECE\\u6839\\u672C\\u4E0A\\u6539\\u53D8\\u4E86\\u8FD9\\u4E00\\u70B9\\u3002\\u5B83\\u5C06 React \\u7684\\u66F4\\u65B0\\u8FC7\\u7A0B\\u91CD\\u65B0\\u8BBE\\u8BA1\\u4E3A\\u57FA\\u4E8E\\u94FE\\u8868\\u7684\\u53EF\\u4E2D\\u65AD\\u4EFB\\u52A1\\u7CFB\\u7EDF\\u3002\\u5728\\u8FD9\\u4E2A\\u7CFB\\u7EDF\\u4E2D\\uFF0C\\u6BCF\\u4E2A\\u7EC4\\u4EF6\\u4E0D\\u518D\\u662F\\u7B80\\u5355\\u7684\\u865A\\u62DF DOM \\u8282\\u70B9\\uFF0C\\u800C\\u662F\\u4E00\\u4E2A\\u5305\\u542B\\u66F4\\u591A\\u4FE1\\u606F\\u7684 Fiber \\u8282\\u70B9\\uFF0C\\u8FD9\\u4E9B\\u8282\\u70B9\\u901A\\u8FC7 child\\u3001sibling\\u3001return \\u7B49\\u5C5E\\u6027\\u8FDE\\u63A5\\uFF0C\\u5F62\\u6210\\u4E00\\u4E2A\\u7075\\u6D3B\\u7684\\u94FE\\u8868\\u7ED3\\u6784\\u3002\\u8FD9\\u79CD\\u8BBE\\u8BA1\\u8BA9\\u6E32\\u67D3\\u8FC7\\u7A0B\\u53D8\\u5F97\\u53EF\\u63A7 \\u2014\\u2014 React \\u80FD\\u591F\\u5728\\u5904\\u7406\\u5B8C\\u4E00\\u4E2A\\u8282\\u70B9\\u540E\\u4FDD\\u5B58\\u73B0\\u573A\\uFF0C\\u6309\\u9700\\u51B3\\u5B9A\\u662F\\u7EE7\\u7EED\\u5904\\u7406\\u4E0B\\u4E00\\u4E2A\\u8282\\u70B9\\uFF0C\\u8FD8\\u662F\\u6682\\u505C\\u8BA9\\u4F4D\\u7ED9\\u66F4\\u91CD\\u8981\\u7684\\u4EFB\\u52A1\\u3002\"}),`\n`,(0,l.jsx)(e.h3,{id:\"fiber-\\u6838\\u5FC3\\u7279\\u6027\\u4E0E\\u5B9E\\u8DF5\\u4EF7\\u503C\",children:(0,l.jsx)(e.a,{href:\"#fiber-\\u6838\\u5FC3\\u7279\\u6027\\u4E0E\\u5B9E\\u8DF5\\u4EF7\\u503C\",children:\"Fiber \\u6838\\u5FC3\\u7279\\u6027\\u4E0E\\u5B9E\\u8DF5\\u4EF7\\u503C\"})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u5728\\u6211\\u4EEC\\u7684\\u5B9E\\u9645\\u9879\\u76EE\\u4E2D\\uFF0CFiber \\u7684\\u51E0\\u4E2A\\u6838\\u5FC3\\u7279\\u6027\\u4E3A\\u6027\\u80FD\\u4F18\\u5316\\u63D0\\u4F9B\\u4E86\\u5F3A\\u5927\\u652F\\u6301\\uFF1A\"}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"\\u589E\\u91CF\\u6E32\\u67D3\"}),\"\\uFF1A\\u5C06\\u8017\\u65F6\\u7684\\u6E32\\u67D3\\u4EFB\\u52A1\\u5207\\u7247\\u6267\\u884C\\u3002\\u5728\\u6211\\u4EEC\\u7684\\u540E\\u53F0\\u7BA1\\u7406\\u7CFB\\u7EDF\\u4E2D\\uFF0C\\u6E32\\u67D3\\u5305\\u542B\\u4E0A\\u4E07\\u6761\\u8BB0\\u5F55\\u7684\\u8868\\u683C\\u65F6\\uFF0CFiber \\u4F1A\\u5C06\\u8FD9\\u4E2A\\u4EFB\\u52A1\\u5206\\u89E3\\u6210\\u591A\\u4E2A\\u5C0F\\u5757\\uFF0C\\u6BCF\\u6B21\\u53EA\\u5904\\u7406\\u4E00\\u90E8\\u5206\\u6570\\u636E\\uFF0C\\u907F\\u514D\\u957F\\u65F6\\u95F4\\u963B\\u585E\\u4E3B\\u7EBF\\u7A0B\\u3002\"]}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"\\u4EFB\\u52A1\\u4F18\\u5148\\u7EA7\\u8C03\\u5EA6\"}),\"\\uFF1A\\u667A\\u80FD\\u5206\\u914D\\u6267\\u884C\\u987A\\u5E8F\\u3002\\u6BD4\\u5982\\u7528\\u6237\\u5728\\u5FEB\\u901F\\u8F93\\u5165\\u641C\\u7D22\\u5173\\u952E\\u8BCD\\u65F6\\uFF0CFiber \\u4F1A\\u786E\\u4FDD\\u8F93\\u5165\\u6846\\u7684\\u54CD\\u5E94\\u4F18\\u5148\\u4E8E\\u641C\\u7D22\\u7ED3\\u679C\\u7684\\u66F4\\u65B0\\uFF0C\\u4FDD\\u8BC1\\u64CD\\u4F5C\\u6D41\\u7545\\u5EA6\\u3002\"]}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"\\u53EF\\u4E2D\\u65AD\\u4E0E\\u6062\\u590D\"}),\"\\uFF1A\\u7075\\u6D3B\\u8BA9\\u51FA\\u6267\\u884C\\u6743\\u3002\\u5728\\u5904\\u7406\\u5927\\u91CF\\u6570\\u636E\\u53EF\\u89C6\\u5316\\u66F4\\u65B0\\u65F6\\uFF0C\\u5982\\u679C\\u7528\\u6237\\u8FDB\\u884C\\u4E86\\u4EA4\\u4E92\\u64CD\\u4F5C\\uFF0CFiber \\u80FD\\u591F\\u7ACB\\u5373\\u6682\\u505C\\u5F53\\u524D\\u66F4\\u65B0\\uFF0C\\u5904\\u7406\\u5B8C\\u4EA4\\u4E92\\u540E\\u518D\\u7EE7\\u7EED\\u4E4B\\u524D\\u7684\\u5DE5\\u4F5C\\u3002\"]}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"\\u9519\\u8BEF\\u8FB9\\u754C\\u589E\\u5F3A\"}),\"\\uFF1A\\u66F4\\u7CBE\\u786E\\u7684\\u9519\\u8BEF\\u5B9A\\u4F4D\\u548C\\u6062\\u590D\\u3002\\u5728\\u5FAE\\u524D\\u7AEF\\u67B6\\u6784\\u4E2D\\uFF0C\\u67D0\\u4E2A\\u5B50\\u5E94\\u7528\\u7684\\u9519\\u8BEF\\u4E0D\\u4F1A\\u5BFC\\u81F4\\u6574\\u4E2A\\u5E94\\u7528\\u5D29\\u6E83\\uFF0CFiber \\u7684\\u9519\\u8BEF\\u8FB9\\u754C\\u673A\\u5236\\u5E2E\\u52A9\\u6211\\u4EEC\\u5B9E\\u73B0\\u4E86\\u66F4\\u53EF\\u9760\\u7684\\u9519\\u8BEF\\u9694\\u79BB\\u3002\"]}),`\n`]}),`\n`]}),`\n`,(0,l.jsx)(e.h2,{id:\"fiber-\\u7684\\u8C03\\u5EA6\\u4E0E\\u8C03\\u548C\\u6D41\\u7A0B\",children:(0,l.jsx)(e.a,{href:\"#fiber-\\u7684\\u8C03\\u5EA6\\u4E0E\\u8C03\\u548C\\u6D41\\u7A0B\",children:\"Fiber \\u7684\\u8C03\\u5EA6\\u4E0E\\u8C03\\u548C\\u6D41\\u7A0B\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"React Fiber \\u7684\\u5DE5\\u4F5C\\u6D41\\u7A0B\\u4E3B\\u8981\\u5206\\u4E3A\\u4E24\\u4E2A\\u9636\\u6BB5\\uFF1A\",(0,l.jsx)(e.strong,{children:\"\\u8C03\\u5EA6\\uFF08Scheduling\\uFF09\"}),\" \\u548C \",(0,l.jsx)(e.strong,{children:\"\\u8C03\\u548C\\uFF08Reconciliation\\uFF09\"}),\"\\uFF0C\\u6700\\u7EC8\\u901A\\u8FC7 \",(0,l.jsx)(e.strong,{children:\"\\u63D0\\u4EA4\\uFF08Commit\\uFF09\"}),\" \\u9636\\u6BB5\\u5C06\\u53D8\\u66F4\\u5E94\\u7528\\u5230\\u771F\\u5B9E DOM\\u3002\"]}),`\n`,(0,l.jsx)(e.h3,{id:\"1-\\u8C03\\u5EA6\\u9636\\u6BB5scheduling\",children:(0,l.jsx)(e.a,{href:\"#1-\\u8C03\\u5EA6\\u9636\\u6BB5scheduling\",children:\"1. \\u8C03\\u5EA6\\u9636\\u6BB5\\uFF08Scheduling\\uFF09\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u8C03\\u5EA6\\u9636\\u6BB5\\u7684\\u76EE\\u6807\\u662F\\u786E\\u5B9A\\u54EA\\u4E9B\\u66F4\\u65B0\\u4EFB\\u52A1\\u9700\\u8981\\u6267\\u884C\\uFF0C\\u5E76\\u4E3A\\u5B83\\u4EEC\\u5206\\u914D\\u4F18\\u5148\\u7EA7\\u3002React \\u901A\\u8FC7 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"Scheduler\"})})})}),\" \\u5305\\uFF08\\u72EC\\u7ACB\\u4E8E React \\u6838\\u5FC3\\u5E93\\uFF09\\u7BA1\\u7406\\u4EFB\\u52A1\\u8C03\\u5EA6\\u3002\"]}),`\n`,(0,l.jsx)(e.h4,{id:\"scheduler-\\u7684\\u6838\\u5FC3\\u903B\\u8F91\",children:(0,l.jsx)(e.a,{href:\"#scheduler-\\u7684\\u6838\\u5FC3\\u903B\\u8F91\",children:\"Scheduler \\u7684\\u6838\\u5FC3\\u903B\\u8F91\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u5728\\u6E90\\u7801\\u4E2D\\uFF0C\\u8C03\\u5EA6\\u5668\\u4F4D\\u4E8E \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"scheduler\"})})})}),\" \\u5305\\u4E2D\\uFF0C\\u6838\\u5FC3\\u6587\\u4EF6\\u5982 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"scheduler/src/Scheduler.js\"})})})}),\"\\u3002\\u4EE5\\u4E0B\\u662F\\u8C03\\u5EA6\\u6D41\\u7A0B\\u7684\\u5173\\u952E\\u70B9\\uFF1A\"]}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"\\u4EFB\\u52A1\\u4F18\\u5148\\u7EA7\"}),\"\\uFF1AReact \\u4F7F\\u7528 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"Lane\"})})})}),\" \\u6A21\\u578B\\u8868\\u793A\\u4F18\\u5148\\u7EA7\\uFF0C\\u4F8B\\u5982\\u540C\\u6B65\\u4EFB\\u52A1\\uFF08Sync Lane\\uFF09\\u3001\\u4EA4\\u4E92\\u4EFB\\u52A1\\uFF08Interactive Lane\\uFF09\\u548C\\u4F4E\\u4F18\\u5148\\u7EA7\\u4EFB\\u52A1\\uFF08Default Lane\\uFF09\\u3002\"]}),`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"\\u65F6\\u95F4\\u5206\\u7247\\uFF08Time Slicing\\uFF09\"}),\"\\uFF1A\\u8C03\\u5EA6\\u5668\\u6839\\u636E\\u6D4F\\u89C8\\u5668\\u5E27\\u65F6\\u95F4\\uFF08\\u901A\\u5E38 16ms\\uFF09\\u5206\\u914D\\u4EFB\\u52A1\\u6267\\u884C\\u65F6\\u95F4\\uFF0C\\u907F\\u514D\\u963B\\u585E\\u4E3B\\u7EBF\\u7A0B\\u3002\"]}),`\n`]}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u6E90\\u7801\\u7247\\u6BB5\\uFF1AScheduler \\u7684 performWorkUntilDeadline\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"function\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" performWorkUntilDeadline\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" currentTime\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" getCurrentTime\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  let\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" hasMoreWork \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" true\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  while\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (hasMoreWork \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"&&\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" !\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"shouldYieldToHost\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"()) {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    hasMoreWork \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" workLoop\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(currentTime);\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  if\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (hasMoreWork) {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"    scheduleCallback\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(performWorkUntilDeadline);\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u5728\\u8FD9\\u4E2A\\u5FAA\\u73AF\\u4E2D\\uFF0C\",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"shouldYieldToHost\"})})})}),\" \\u4F1A\\u68C0\\u67E5\\u5F53\\u524D\\u5E27\\u662F\\u5426\\u8FD8\\u6709\\u5269\\u4F59\\u65F6\\u95F4\\u3002\\u5982\\u679C\\u65F6\\u95F4\\u8017\\u5C3D\\uFF0C\\u4EFB\\u52A1\\u4F1A\\u88AB\\u6682\\u505C\\u5E76\\u63A8\\u8FDF\\u5230\\u4E0B\\u4E00\\u5E27\\u3002\"]}),`\n`,(0,l.jsx)(e.h4,{id:\"\\u793A\\u4F8B\\u4F18\\u5148\\u7EA7\\u8C03\\u5EA6\",children:(0,l.jsx)(e.a,{href:\"#\\u793A\\u4F8B\\u4F18\\u5148\\u7EA7\\u8C03\\u5EA6\",children:\"\\u793A\\u4F8B\\uFF1A\\u4F18\\u5148\\u7EA7\\u8C03\\u5EA6\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u5047\\u8BBE\\u4E00\\u4E2A\\u8F93\\u5165\\u6846\\u7684 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"onChange\"})})})}),\" \\u4E8B\\u4EF6\\u89E6\\u53D1\\u4E86\\u72B6\\u6001\\u66F4\\u65B0\\uFF0C\\u540C\\u65F6\\u4E00\\u4E2A\\u4F4E\\u4F18\\u5148\\u7EA7\\u7684\\u52A8\\u753B\\u4E5F\\u5728\\u8FD0\\u884C\\u3002React \\u4F1A\\u4F18\\u5148\\u5904\\u7406\\u7528\\u6237\\u8F93\\u5165\\uFF08\\u9AD8\\u4F18\\u5148\\u7EA7\\uFF09\\uFF0C\\u800C\\u52A8\\u753B\\u66F4\\u65B0\\uFF08\\u4F4E\\u4F18\\u5148\\u7EA7\\uFF09\\u4F1A\\u88AB\\u63A8\\u8FDF\\u3002\"]}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"function\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" App\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" [\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"text\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"setText\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" useState\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"\"'}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" [\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"count\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"setCount\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" useState\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"  useEffect\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(() \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"    // \\u4F4E\\u4F18\\u5148\\u7EA7\\u4EFB\\u52A1\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" id\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" setInterval\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(() \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" setCount\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"c\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" c \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"+\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"), \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1000\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    return\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" clearInterval\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(id);\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }, []);\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    <\"}),(0,l.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"div\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      <\"}),(0,l.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"input\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" value\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{text} \"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"onChange\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"e\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" setText\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(e.target.value)} />\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      <\"}),(0,l.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"p\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\">Count: {count}</\"}),(0,l.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"p\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    </\"}),(0,l.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"div\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  );\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u5728 Fiber \\u4E2D\\uFF0C\",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"setText\"})})})}),\" \\u7684\\u66F4\\u65B0\\u4F1A\\u88AB\\u8D4B\\u4E88\\u9AD8\\u4F18\\u5148\\u7EA7\\uFF0C\\u800C \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"setCount\"})})})}),\" \\u7684\\u66F4\\u65B0\\u5219\\u53EF\\u80FD\\u88AB\\u5EF6\\u8FDF\\u5230\\u4E0B\\u4E00\\u5E27\\u3002\"]}),`\n`,(0,l.jsx)(e.h3,{id:\"2-\\u8C03\\u548C\\u9636\\u6BB5reconciliation\",children:(0,l.jsx)(e.a,{href:\"#2-\\u8C03\\u548C\\u9636\\u6BB5reconciliation\",children:\"2. \\u8C03\\u548C\\u9636\\u6BB5\\uFF08Reconciliation\\uFF09\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u8C03\\u548C\\u9636\\u6BB5\\u662F React \\u6839\\u636E\\u7EC4\\u4EF6\\u72B6\\u6001\\u548C props \\u751F\\u6210\\u65B0\\u7684 Fiber \\u6811\\u7684\\u8FC7\\u7A0B\\u3002\\u8FD9\\u4E00\\u9636\\u6BB5\\u5206\\u4E3A \",(0,l.jsx)(e.strong,{children:\"render \\u9636\\u6BB5\"}),\" \\u548C \",(0,l.jsx)(e.strong,{children:\"commit \\u9636\\u6BB5\"}),\"\\u3002\"]}),`\n`,(0,l.jsx)(e.h4,{id:\"render-\\u9636\\u6BB5\",children:(0,l.jsx)(e.a,{href:\"#render-\\u9636\\u6BB5\",children:\"Render \\u9636\\u6BB5\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u5728 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"react-reconciler\"})})})}),\" \\u5305\\u4E2D\\uFF0C\",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"workLoopSync\"})})})}),\" \\u548C \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"workLoopConcurrent\"})})})}),\" \\u662F\\u8C03\\u548C\\u7684\\u6838\\u5FC3\\u51FD\\u6570\\u3002\\u5B83\\u4EEC\\u4F1A\\u904D\\u5386 Fiber \\u6811\\uFF0C\\u6267\\u884C\\u4EE5\\u4E0B\\u6B65\\u9AA4\\uFF1A\"]}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"\\u6784\\u5EFA Fiber \\u8282\\u70B9\"}),\"\\uFF1A\\u4E3A\\u6BCF\\u4E2A\\u7EC4\\u4EF6\\u521B\\u5EFA\\u6216\\u66F4\\u65B0 Fiber \\u5BF9\\u8C61\\u3002\"]}),`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"Diff \\u7B97\\u6CD5\"}),\"\\uFF1A\\u6BD4\\u8F83\\u65B0\\u65E7 Fiber \\u6811\\uFF0C\\u6807\\u8BB0\\u9700\\u8981\\u66F4\\u65B0\\u7684\\u8282\\u70B9\\uFF08effectTag\\uFF09\\u3002\"]}),`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"\\u526F\\u4F5C\\u7528\\u6536\\u96C6\"}),\"\\uFF1A\\u5C06 DOM \\u64CD\\u4F5C\\uFF08\\u5982\\u63D2\\u5165\\u3001\\u5220\\u9664\\uFF09\\u8BB0\\u5F55\\u5230 Fiber \\u7684 effect list \\u4E2D\\u3002\"]}),`\n`]}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u6E90\\u7801\\u7247\\u6BB5\\uFF1AperformUnitOfWork\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"function\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" performUnitOfWork\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"fiber\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  if\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"!\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"fiber.return \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"&&\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" fiber.child) {\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"    // \\u5F00\\u59CB\\u5904\\u7406\\u5B50\\u8282\\u70B9\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    return\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" fiber.child;\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"  // \\u5B8C\\u6210\\u5F53\\u524D\\u8282\\u70B9\\uFF0C\\u5BFB\\u627E\\u4E0B\\u4E00\\u4E2A\\u5144\\u5F1F\\u8282\\u70B9\\u6216\\u8FD4\\u56DE\\u7236\\u8282\\u70B9\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  while\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (fiber) {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    if\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (fiber.sibling) \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"return\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" fiber.sibling;\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    fiber \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" fiber.return;\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" null\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})}),`\n`,(0,l.jsx)(e.h4,{id:\"diff-\\u7B97\\u6CD5\\u7684\\u4F18\\u5316\",children:(0,l.jsx)(e.a,{href:\"#diff-\\u7B97\\u6CD5\\u7684\\u4F18\\u5316\",children:\"Diff \\u7B97\\u6CD5\\u7684\\u4F18\\u5316\"})}),`\n`,(0,l.jsx)(e.p,{children:\"React \\u7684 Diff \\u7B97\\u6CD5\\u5728 Fiber \\u4E2D\\u5F97\\u5230\\u4E86\\u589E\\u5F3A\\uFF1A\"}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"\\u5355\\u94FE\\u8868\\u904D\\u5386\"}),\"\\uFF1A\\u901A\\u8FC7 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"child\"})})})}),\" \\u548C \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"sibling\"})})})}),\" \\u5C5E\\u6027\\u904D\\u5386\\u5B50\\u8282\\u70B9\\uFF0C\\u907F\\u514D\\u9012\\u5F52\\u5E26\\u6765\\u7684\\u6808\\u6EA2\\u51FA\\u3002\"]}),`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"key \\u7684\\u4F5C\\u7528\"}),\"\\uFF1A\\u501F\\u52A9 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"key\"})})})}),\" \\u5C5E\\u6027\\u5FEB\\u901F\\u5B9A\\u4F4D\\u9700\\u8981\\u66F4\\u65B0\\u7684\\u8282\\u70B9\\u3002\"]}),`\n`]}),`\n`,(0,l.jsx)(e.p,{children:\"\\u4F8B\\u5982\\uFF0C\\u5047\\u8BBE\\u6709\\u4E00\\u4E2A\\u5217\\u8868\\u7EC4\\u4EF6\\uFF1A\"}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"function\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" List\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" [\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"items\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"setItems\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" useState\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"([\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"A\"'}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"B\"'}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"C\"'}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"]);\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    <\"}),(0,l.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"ul\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      {items.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"map\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"item\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        <\"}),(0,l.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"li\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" key\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{item}>{item}</\"}),(0,l.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"li\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      ))}\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    </\"}),(0,l.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"ul\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  );\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u5982\\u679C\\u5C06 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"items\"})})})}),\" \\u66F4\\u65B0\\u4E3A \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:'[\"A\", \"C\", \"B\"]'})})})}),\"\\uFF0CReact \\u4F1A\\u901A\\u8FC7 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"key\"})})})}),\" \\u8BC6\\u522B\\u51FA\\u53EA\\u9700\\u8981\\u8C03\\u6574\\u987A\\u5E8F\\uFF0C\\u800C\\u65E0\\u9700\\u91CD\\u65B0\\u6E32\\u67D3\\u6240\\u6709\\u8282\\u70B9\\u3002\"]}),`\n`,(0,l.jsx)(e.h4,{id:\"\\u793A\\u4F8B\\u6761\\u4EF6\\u6E32\\u67D3\\u7684\\u8C03\\u548C\",children:(0,l.jsx)(e.a,{href:\"#\\u793A\\u4F8B\\u6761\\u4EF6\\u6E32\\u67D3\\u7684\\u8C03\\u548C\",children:\"\\u793A\\u4F8B\\uFF1A\\u6761\\u4EF6\\u6E32\\u67D3\\u7684\\u8C03\\u548C\"})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u8003\\u8651\\u4EE5\\u4E0B\\u4EE3\\u7801\\uFF1A\"}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"function\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" ToggleComponent\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"({ \"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"show\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" }) {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" show \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"?\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" <\"}),(0,l.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"h1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\">Hello</\"}),(0,l.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"h1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"> \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" <\"}),(0,l.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"p\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\">Goodbye</\"}),(0,l.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"p\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\">;\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u5F53 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"show\"})})})}),\" \\u4ECE \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"true\"})})})}),\" \\u53D8\\u4E3A \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"false\"})})})}),\" \\u65F6\\uFF0CReact \\u4F1A\\uFF1A\"]}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsxs)(e.li,{children:[\"\\u6807\\u8BB0 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"<h1>\"})})})}),\" \\u7684 Fiber \\u8282\\u70B9\\u4E3A\\u5220\\u9664\\uFF08\",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"Deletion\"})})})}),\" effectTag\\uFF09\\u3002\"]}),`\n`,(0,l.jsxs)(e.li,{children:[\"\\u521B\\u5EFA \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"<p>\"})})})}),\" \\u7684\\u65B0 Fiber \\u8282\\u70B9\\u5E76\\u6807\\u8BB0\\u4E3A\\u63D2\\u5165\\uFF08\",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"Placement\"})})})}),\" effectTag\\uFF09\\u3002\"]}),`\n`,(0,l.jsx)(e.li,{children:\"\\u5C06\\u8FD9\\u4E9B\\u526F\\u4F5C\\u7528\\u8BB0\\u5F55\\u5230 effect list \\u4E2D\\u3002\"}),`\n`]}),`\n`,(0,l.jsx)(e.h3,{id:\"3-\\u63D0\\u4EA4\\u9636\\u6BB5commit\",children:(0,l.jsx)(e.a,{href:\"#3-\\u63D0\\u4EA4\\u9636\\u6BB5commit\",children:\"3. \\u63D0\\u4EA4\\u9636\\u6BB5\\uFF08Commit\\uFF09\"})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u63D0\\u4EA4\\u9636\\u6BB5\\u5C06 render \\u9636\\u6BB5\\u751F\\u6210\\u7684\\u526F\\u4F5C\\u7528\\u5E94\\u7528\\u5230\\u771F\\u5B9E DOM\\u3002\\u8FD9\\u4E00\\u9636\\u6BB5\\u662F\\u540C\\u6B65\\u7684\\uFF0C\\u65E0\\u6CD5\\u4E2D\\u65AD\\uFF0C\\u786E\\u4FDD DOM \\u66F4\\u65B0\\u7684\\u4E00\\u81F4\\u6027\\u3002\"}),`\n`,(0,l.jsx)(e.h4,{id:\"\\u6E90\\u7801\\u89E3\\u6790commitroot\",children:(0,l.jsx)(e.a,{href:\"#\\u6E90\\u7801\\u89E3\\u6790commitroot\",children:\"\\u6E90\\u7801\\u89E3\\u6790\\uFF1AcommitRoot\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u5728 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"react-reconciler/src/ReactFiberWorkLoop.js\"})})})}),\" \\u4E2D\\uFF0C\",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"commitRoot\"})})})}),\" \\u51FD\\u6570\\u8D1F\\u8D23\\u63D0\\u4EA4\\u53D8\\u66F4\\uFF1A\"]}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"function\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" commitRoot\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"root\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" finishedWork\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" root.finishedWork;\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  if\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (finishedWork \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"===\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" null\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"return\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"  // \\u63D0\\u4EA4\\u526F\\u4F5C\\u7528\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"  commitMutationEffects\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(finishedWork);\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"  // \\u66F4\\u65B0 Fiber \\u6811\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  root.current \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" finishedWork;\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})}),`\n`,(0,l.jsx)(e.h4,{id:\"\\u793A\\u4F8Bdom-\\u66F4\\u65B0\",children:(0,l.jsx)(e.a,{href:\"#\\u793A\\u4F8Bdom-\\u66F4\\u65B0\",children:\"\\u793A\\u4F8B\\uFF1ADOM \\u66F4\\u65B0\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u5BF9\\u4E8E\\u524D\\u9762\\u7684 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"ToggleComponent\"})})})}),\"\\uFF0C\\u63D0\\u4EA4\\u9636\\u6BB5\\u4F1A\\uFF1A\"]}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsxs)(e.li,{children:[\"\\u4ECE DOM \\u4E2D\\u79FB\\u9664 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"<h1>\"})})})}),\"\\u3002\"]}),`\n`,(0,l.jsxs)(e.li,{children:[\"\\u5C06 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"<p>\"})})})}),\" \\u63D2\\u5165 DOM\\u3002\"]}),`\n`,(0,l.jsxs)(e.li,{children:[\"\\u66F4\\u65B0 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"current\"})})})}),\" Fiber \\u6811\\u4E3A\\u65B0\\u7684 Fiber \\u6811\\u3002\"]}),`\n`]}),`\n`,(0,l.jsx)(e.h2,{id:\"fiber-\\u7684\\u6027\\u80FD\\u4F18\\u52BF\",children:(0,l.jsx)(e.a,{href:\"#fiber-\\u7684\\u6027\\u80FD\\u4F18\\u52BF\",children:\"Fiber \\u7684\\u6027\\u80FD\\u4F18\\u52BF\"})}),`\n`,(0,l.jsx)(e.h3,{id:\"\\u5B9E\\u6218\\u4E2D\\u7684\\u6027\\u80FD\\u4F18\\u5316\\u5B9E\\u8DF5\",children:(0,l.jsx)(e.a,{href:\"#\\u5B9E\\u6218\\u4E2D\\u7684\\u6027\\u80FD\\u4F18\\u5316\\u5B9E\\u8DF5\",children:\"\\u5B9E\\u6218\\u4E2D\\u7684\\u6027\\u80FD\\u4F18\\u5316\\u5B9E\\u8DF5\"})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u5728\\u6211\\u4EEC\\u7684\\u4E00\\u4E2A\\u5927\\u578B\\u540E\\u53F0\\u7BA1\\u7406\\u7CFB\\u7EDF\\u4E2D\\uFF0CFiber \\u7684\\u6027\\u80FD\\u4F18\\u52BF\\u4F53\\u73B0\\u5F97\\u5C24\\u4E3A\\u660E\\u663E\\u3002\\u4EE5\\u4E0B\\u662F\\u51E0\\u4E2A\\u5178\\u578B\\u7684\\u4F18\\u5316\\u6848\\u4F8B\\uFF1A\"}),`\n`,(0,l.jsx)(e.h4,{id:\"1-\\u865A\\u62DF\\u5217\\u8868\\u4E0E\\u65F6\\u95F4\\u5206\\u7247\",children:(0,l.jsx)(e.a,{href:\"#1-\\u865A\\u62DF\\u5217\\u8868\\u4E0E\\u65F6\\u95F4\\u5206\\u7247\",children:\"1. \\u865A\\u62DF\\u5217\\u8868\\u4E0E\\u65F6\\u95F4\\u5206\\u7247\"})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u5F53\\u9700\\u8981\\u5C55\\u793A\\u5305\\u542B\\u4E0A\\u4E07\\u6761\\u8BB0\\u5F55\\u7684\\u8868\\u683C\\u6570\\u636E\\u65F6\\uFF0C\\u6211\\u4EEC\\u7ED3\\u5408\\u865A\\u62DF\\u5217\\u8868\\u548C Fiber \\u7684\\u65F6\\u95F4\\u5206\\u7247\\u7279\\u6027\\uFF0C\\u5B9E\\u73B0\\u4E86\\u6D41\\u7545\\u7684\\u7528\\u6237\\u4F53\\u9A8C\\uFF1A\"}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"function\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" VirtualTable\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"({ \"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"data\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"itemHeight\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 40\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" }) {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" [\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"visibleRange\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"setVisibleRange\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" useState\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"({ start: \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", end: \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"20\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" });\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" containerRef\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" useRef\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"null\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" onScroll\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" useCallback\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(() \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" { \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"scrollTop\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"clientHeight\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" } \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" containerRef.current;\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" start\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" Math.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"floor\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(scrollTop \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"/\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" itemHeight);\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" end\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" Math.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"min\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      start \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"+\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" Math.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"ceil\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(clientHeight \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"/\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" itemHeight),\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      data.\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"length\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    );\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"    // \\u5229\\u7528 Fiber \\u7684\\u65F6\\u95F4\\u5206\\u7247\\uFF0C\\u907F\\u514D\\u9891\\u7E41\\u66F4\\u65B0\\u5BFC\\u81F4\\u7684\\u5361\\u987F\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"    setVisibleRange\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"({ start, end });\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }, [data.\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"length\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", itemHeight]);\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    <\"}),(0,l.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"div\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"      ref\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{containerRef}\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"      style\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{{ height: \"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"400px\"'}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", overflow: \"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"auto\"'}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" }}\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"      onScroll\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{onScroll}\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    >\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      <\"}),(0,l.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"div\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"        style\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{{\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"          height: \"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"`${\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"data\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"length\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" *\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" itemHeight\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"}px`\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"          position: \"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"relative\"'}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        }}\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      >\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        {data.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"slice\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(visibleRange.start, visibleRange.end).\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"map\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"row\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"index\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"          <\"}),(0,l.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"div\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"            key\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{row.id}\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"            style\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{{\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"              position: \"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"absolute\"'}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"              top: \"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"`${\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"index\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" +\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" visibleRange\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"start\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"*\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" itemHeight\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"}px`\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"              height: \"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"`${\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"itemHeight\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"}px`\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"            }}\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"          >\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"            {row.content}\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"          </\"}),(0,l.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"div\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        ))}\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      </\"}),(0,l.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"div\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    </\"}),(0,l.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"div\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  );\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})}),`\n`,(0,l.jsx)(e.h4,{id:\"2-\\u5E76\\u53D1\\u6E32\\u67D3\\u4E0E\\u7528\\u6237\\u4EA4\\u4E92\",children:(0,l.jsx)(e.a,{href:\"#2-\\u5E76\\u53D1\\u6E32\\u67D3\\u4E0E\\u7528\\u6237\\u4EA4\\u4E92\",children:\"2. \\u5E76\\u53D1\\u6E32\\u67D3\\u4E0E\\u7528\\u6237\\u4EA4\\u4E92\"})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u5728\\u5904\\u7406\\u590D\\u6742\\u7684\\u6570\\u636E\\u53EF\\u89C6\\u5316\\u573A\\u666F\\u65F6\\uFF0C\\u6211\\u4EEC\\u5145\\u5206\\u5229\\u7528\\u4E86 Fiber \\u7684\\u5E76\\u53D1\\u7279\\u6027\\u3002\\u6BD4\\u5982\\u5728\\u4E00\\u4E2A\\u5B9E\\u65F6\\u6570\\u636E\\u76D1\\u63A7\\u9762\\u677F\\u4E2D\\uFF1A\"}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"function\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" DataMonitor\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"({ \"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"data\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"onFilter\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" }) {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" [\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"filterText\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"setFilterText\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" useState\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"\"'}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" [\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"filteredData\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"setFilteredData\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" useState\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(data);\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"  // \\u4F7F\\u7528 useDeferredValue \\u8BA9\\u6570\\u636E\\u8FC7\\u6EE4\\u7684\\u4F18\\u5148\\u7EA7\\u4F4E\\u4E8E\\u7528\\u6237\\u8F93\\u5165\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" deferredText\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" useDeferredValue\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(filterText);\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"  useEffect\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(() \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"    // \\u590D\\u6742\\u7684\\u6570\\u636E\\u8FC7\\u6EE4\\u903B\\u8F91\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" filtered\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" data.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"filter\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"item\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      item.name.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"toLowerCase\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"().\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"includes\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(deferredText.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"toLowerCase\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"())\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    );\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"    setFilteredData\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(filtered);\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"    onFilter\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(filtered);\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }, [deferredText, data, onFilter]);\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    <\"}),(0,l.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"div\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      <\"}),(0,l.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"input\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"        type\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"text\"'})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"        value\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{filterText}\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"        onChange\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"e\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" setFilterText\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(e.target.value)}\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"        placeholder\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"\\u5B9E\\u65F6\\u8FC7\\u6EE4\\u6570\\u636E...\"'})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      />\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      <\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"DataVisualization\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" data\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{filteredData} />\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    </\"}),(0,l.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"div\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  );\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u8FD9\\u79CD\\u8BBE\\u8BA1\\u786E\\u4FDD\\u4E86\\u5373\\u4F7F\\u5728\\u5904\\u7406\\u5927\\u91CF\\u6570\\u636E\\u65F6\\uFF0C\\u7528\\u6237\\u7684\\u8F93\\u5165\\u54CD\\u5E94\\u4E5F\\u4E0D\\u4F1A\\u53D7\\u5230\\u5F71\\u54CD\\u3002Fiber \\u4F1A\\u81EA\\u52A8\\u8C03\\u5EA6\\u6570\\u636E\\u8FC7\\u6EE4\\u7684\\u4F18\\u5148\\u7EA7\\uFF0C\\u5728\\u7528\\u6237\\u505C\\u6B62\\u8F93\\u5165\\u540E\\u624D\\u8FDB\\u884C\\u590D\\u6742\\u7684\\u8BA1\\u7B97\\u548C\\u6E32\\u67D3\\u66F4\\u65B0\\u3002\"}),`\n`,(0,l.jsx)(e.h2,{id:\"\\u6E90\\u7801\\u4E2D\\u7684\\u5173\\u952E\\u6570\\u636E\\u7ED3\\u6784\",children:(0,l.jsx)(e.a,{href:\"#\\u6E90\\u7801\\u4E2D\\u7684\\u5173\\u952E\\u6570\\u636E\\u7ED3\\u6784\",children:\"\\u6E90\\u7801\\u4E2D\\u7684\\u5173\\u952E\\u6570\\u636E\\u7ED3\\u6784\"})}),`\n`,(0,l.jsx)(e.h3,{id:\"fiber-\\u8282\\u70B9\",children:(0,l.jsx)(e.a,{href:\"#fiber-\\u8282\\u70B9\",children:\"Fiber \\u8282\\u70B9\"})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u6BCF\\u4E2A Fiber \\u8282\\u70B9\\u662F\\u4E00\\u4E2A\\u5BF9\\u8C61\\uFF0C\\u5305\\u542B\\u4EE5\\u4E0B\\u5173\\u952E\\u5C5E\\u6027\\uFF1A\"}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" fiber\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  tag: HostComponent, \"}),(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u8282\\u70B9\\u7C7B\\u578B\\uFF08\\u5982 DOM \\u5143\\u7D20\\u3001\\u7C7B\\u7EC4\\u4EF6\\uFF09\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  key: \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"null\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u7528\\u4E8E Diff \\u7684\\u6807\\u8BC6\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  stateNode: \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"null\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u5BF9\\u5E94\\u7684\\u771F\\u5B9E DOM \\u6216\\u7EC4\\u4EF6\\u5B9E\\u4F8B\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  return: \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"null\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u7236\\u8282\\u70B9\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  child: \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"null\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u7B2C\\u4E00\\u4E2A\\u5B50\\u8282\\u70B9\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  sibling: \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"null\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u4E0B\\u4E00\\u4E2A\\u5144\\u5F1F\\u8282\\u70B9\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  effectTag: NoEffect, \"}),(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u526F\\u4F5C\\u7528\\u6807\\u8BB0\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  nextEffect: \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"null\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u4E0B\\u4E00\\u4E2A\\u526F\\u4F5C\\u7528\\u8282\\u70B9\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  memoizedState: \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"null\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u4FDD\\u5B58\\u7684\\u72B6\\u6001\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  memoizedProps: \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"null\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u4FDD\\u5B58\\u7684 props\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  updateQueue: \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"null\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u66F4\\u65B0\\u961F\\u5217\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"};\"})})]})})}),`\n`,(0,l.jsx)(e.h3,{id:\"lane-\\u6A21\\u578B\",children:(0,l.jsx)(e.a,{href:\"#lane-\\u6A21\\u578B\",children:\"Lane \\u6A21\\u578B\"})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"Lane\"})})})}),\" \\u662F React \\u7528\\u4E8E\\u8868\\u793A\\u4F18\\u5148\\u7EA7\\u7684\\u4F4D\\u8FD0\\u7B97\\u6A21\\u578B\\u3002\\u4F8B\\u5982\\uFF1A\"]}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" SyncLane\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 0b0001\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" InputContinuousLane\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 0b0010\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" DefaultLane\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 0b0100\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u901A\\u8FC7\\u4F4D\\u8FD0\\u7B97\\uFF0CReact \\u53EF\\u4EE5\\u9AD8\\u6548\\u5224\\u65AD\\u4EFB\\u52A1\\u4F18\\u5148\\u7EA7\\u5E76\\u5408\\u5E76\\u66F4\\u65B0\\u3002\"}),`\n`,(0,l.jsx)(e.h2,{id:\"\\u603B\\u7ED3\",children:(0,l.jsx)(e.a,{href:\"#\\u603B\\u7ED3\",children:\"\\u603B\\u7ED3\"})}),`\n`,(0,l.jsx)(e.p,{children:\"React Fiber \\u7684\\u8C03\\u5EA6\\u4E0E\\u8C03\\u548C\\u6D41\\u7A0B\\u662F\\u5176\\u6027\\u80FD\\u4F18\\u5316\\u7684\\u6838\\u5FC3\\u3002\\u901A\\u8FC7\\u5C06\\u6E32\\u67D3\\u4EFB\\u52A1\\u62C6\\u5206\\u4E3A\\u53EF\\u4E2D\\u65AD\\u7684\\u5355\\u5143\\uFF0C\\u5E76\\u7ED3\\u5408\\u4F18\\u5148\\u7EA7\\u8C03\\u5EA6\\u548C\\u9AD8\\u6548\\u7684 Diff \\u7B97\\u6CD5\\uFF0CFiber \\u5B9E\\u73B0\\u4E86\\u5BF9\\u590D\\u6742\\u5E94\\u7528\\u7684\\u7CBE\\u7EC6\\u63A7\\u5236\\u3002\\u4ECE\\u6E90\\u7801\\u5C42\\u9762\\u770B\\uFF0CFiber \\u7684\\u8BBE\\u8BA1\\u4F53\\u73B0\\u4E86\\u6A21\\u5757\\u5316\\u3001\\u53EF\\u6269\\u5C55\\u548C\\u9AD8\\u6027\\u80FD\\u7684\\u7279\\u70B9\\u3002\"}),`\n`,(0,l.jsx)(e.p,{children:\"\\u5E0C\\u671B\\u672C\\u6587\\u7684\\u6DF1\\u5EA6\\u89E3\\u6790\\u548C\\u5B9E\\u4F8B\\u80FD\\u5E2E\\u52A9\\u4F60\\u66F4\\u597D\\u5730\\u7406\\u89E3 React Fiber \\u7684\\u5DE5\\u4F5C\\u539F\\u7406\\u3002\\u5982\\u679C\\u4F60\\u6709\\u66F4\\u591A\\u95EE\\u9898\\u6216\\u60F3\\u63A2\\u8BA8\\u67D0\\u4E2A\\u7EC6\\u8282\\uFF0C\\u6B22\\u8FCE\\u7559\\u8A00\\u4EA4\\u6D41\\uFF01\"}),`\n`,(0,l.jsx)(e.hr,{})]})}function h(n={}){let{wrapper:e}=n.components||{};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(o,{...n})}):o(n)}return b(k);})();\n;return Component;"
  },
  "_id": "React/React-Fiber调度调和流程原理.mdx",
  "_raw": {
    "sourceFilePath": "React/React-Fiber调度调和流程原理.mdx",
    "sourceFileName": "React-Fiber调度调和流程原理.mdx",
    "sourceFileDir": "React",
    "contentType": "mdx",
    "flattenedPath": "React/React-Fiber调度调和流程原理"
  },
  "type": "Post",
  "url": "/blog/React/React-Fiber调度调和流程原理"
}