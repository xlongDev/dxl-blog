{
  "title": "å‰ç«¯å¦‚ä½•å®ç°å›¾ç‰‡ä¸Šä¼ åŠå‹ç¼©åŠŸèƒ½ï¼Ÿ",
  "date": "2023-11-25T00:00:00.000Z",
  "description": "ä»é›¶åˆ°ä¸€å¸¦ä½ æå®šå‰ç«¯å›¾ç‰‡ä¸Šä¼ ä¸å‹ç¼©ï¼Œæ·±å…¥åŸç†ï¼Œå¸¦ä»£ç ç¤ºä¾‹ï¼Œé™„ä¸Šæœ€ä½³å®è·µï¼Œè®©ä½ çš„å›¾ç‰‡å¤„ç†ä¸æ»‘åˆé«˜æ•ˆï¼",
  "keywords": "å›¾ç‰‡ä¸Šä¼ , å›¾ç‰‡å‹ç¼©, å‰ç«¯å¼€å‘, JavaScript, Canvas, File API, æ€§èƒ½ä¼˜åŒ–",
  "author": "æ™“é¾™",
  "image": "/images/hero/image-upload-compress.jpg",
  "tags": [
    "å‰ç«¯å¼€å‘",
    "JavaScript",
    "æ€§èƒ½ä¼˜åŒ–"
  ],
  "views": 0,
  "likes": 0,
  "category": "å‰ç«¯æŠ€æœ¯",
  "body": {
    "raw": "\nå—¨ï¼Œå„ä½å‰ç«¯ä¾ å®¢ï¼ä»Šå¤©æˆ‘ä»¬æ¥èŠèŠå‰ç«¯å¼€å‘ä¸­çš„ä¸€ä¸ªå¸¸è§éœ€æ±‚â€”â€”**å›¾ç‰‡ä¸Šä¼ ä¸å‹ç¼©**ã€‚è¿™ç©æ„å„¿å¬èµ·æ¥ç®€å•ï¼Œä¸å°±æ˜¯è®©ç”¨æˆ·é€‰ä¸ªæ–‡ä»¶ç„¶åä¼ åˆ°æœåŠ¡å™¨å˜›ï¼Ÿä½†å®é™…ä¸Šï¼Œå®ƒè—ç€ä¸å°‘å‘å’Œå­¦é—®ã€‚ä»ç”¨æˆ·ä½“éªŒåˆ°æ€§èƒ½ä¼˜åŒ–ï¼Œä»æµè§ˆå™¨å…¼å®¹æ€§åˆ°æ–‡ä»¶å¤„ç†åŸç†ï¼Œå’±ä»¬å¾—æŠŠè¿™å—å•ƒå¾—é€é€çš„ï¼Œæ‰èƒ½å†™å‡ºä¼˜é›…åˆé«˜æ•ˆçš„ä»£ç ã€‚åˆ«æ€¥ï¼Œæˆ‘ä¼šå¸¦ä½ ä»å¤´åˆ°å°¾æ‹ä¸€éï¼Œé™„ä¸Šä»£ç ã€åŸç†å’Œä¸€äº›â€œé¿å‘æŒ‡å—â€ï¼Œè¿˜æœ‰ç‚¹å°å¹½é»˜è°ƒå‰‚ä¸€ä¸‹ï¼ˆæ¯•ç«Ÿå†™ä»£ç ä¸èƒ½è€æ˜¯æ¿ç€è„¸ï¼Œå¯¹å§ ğŸ˜‚ï¼‰ã€‚\n\n## ä¸ºä»€ä¹ˆéœ€è¦å›¾ç‰‡ä¸Šä¼ å’Œå‹ç¼©ï¼Ÿ\n\nå…ˆè¯´è¯´ä¸ºå•¥è¿™äº‹å„¿å€¼å¾—æˆ‘ä»¬è´¹å¿ƒã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œç”¨æˆ·å…´å†²å†²åœ°ä¸Šä¼ ä¸€å¼ åˆšç”¨å•åæ‹çš„ 10MB å¤§å›¾ï¼Œç»“æœæœåŠ¡å™¨å¡äº†ï¼Œæµé‡æ²¡äº†ï¼Œç”¨æˆ·è¿˜ä¸€è„¸æ‡µâ€”â€”â€œæˆ‘ç…§ç‰‡å‘¢ï¼Ÿâ€ã€‚è¿™ä¸ä»…æµªè´¹å¸¦å®½ï¼Œè¿˜å¯èƒ½è®©åç«¯å°å“¥å“¥å°å§å§æŠ“ç‹‚ã€‚æ›´åˆ«æç§»åŠ¨ç«¯ç”¨æˆ·äº†ï¼Œæµé‡æ¯”é‡‘å­è¿˜è´µï¼Œè°æ„¿æ„ä¸ºäº†ä¸€å¼ å›¾æŠŠå½“æœˆå¥—é¤ç”¨å…‰ï¼Ÿ\n\næ‰€ä»¥ï¼Œå›¾ç‰‡å‹ç¼©å°±æˆäº†å‰ç«¯çš„â€œæ•‘å‘½ç¨»è‰â€ã€‚é€šè¿‡åœ¨å®¢æˆ·ç«¯å¤„ç†å›¾ç‰‡ï¼Œæˆ‘ä»¬å¯ä»¥ï¼š\n- **å‡å°‘æ–‡ä»¶å¤§å°**ï¼šä¼˜åŒ–ä¸Šä¼ é€Ÿåº¦ï¼ŒèŠ‚çœå¸¦å®½ã€‚\n- **æå‡ç”¨æˆ·ä½“éªŒ**ï¼šä¸ç”¨è®©ç”¨æˆ·æ‰‹åŠ¨å‹ç¼©ï¼Œçœå¿ƒåˆé«˜æ•ˆã€‚\n- **å‡è½»æœåŠ¡å™¨å‹åŠ›**ï¼šåç«¯åªéœ€è¦å®‰å¿ƒå­˜å‚¨ï¼Œä¸ç”¨å†æ“å¿ƒè½¬æ¢ã€‚\n\nå¥½äº†ï¼Œéœ€æ±‚æ˜ç¡®äº†ï¼Œæ¥ä¸‹æ¥å’±ä»¬å¼€å¹²ï¼\n\n## æ ¸å¿ƒå·¥å…·ï¼šFile API å’Œ Canvas\n\nè¦å®ç°å›¾ç‰‡ä¸Šä¼ å’Œå‹ç¼©ï¼Œå‰ç«¯ä¸»è¦ä¾èµ–ä¸¤ä¸ªâ€œç¥å™¨â€ï¼š\n1. **File API**ï¼šç”¨æ¥è¯»å–ç”¨æˆ·ä¸Šä¼ çš„æ–‡ä»¶ã€‚\n2. **Canvas API**ï¼šç”¨æ¥å¤„ç†å›¾ç‰‡ï¼Œåƒä¸ªç”»æ¿ä¸€æ ·ï¼Œèƒ½è£å‰ªã€ç¼©æ”¾ã€è°ƒæ•´è´¨é‡ã€‚\n\nè¿™ä¿©å·¥å…·å°±åƒä½ çš„å·¦å³æ‰‹ï¼Œä¸€ä¸ªè´Ÿè´£â€œæ‹¿æ¥â€ï¼Œä¸€ä¸ªè´Ÿè´£â€œåŠ å·¥â€ã€‚ä¸‹é¢æˆ‘ä»¬ä¸€æ­¥æ­¥æ‹†è§£ã€‚\n\n### ç¬¬ä¸€æ­¥ï¼šå›¾ç‰‡ä¸Šä¼ çš„å®ç°\n\nä¸Šä¼ å›¾ç‰‡çš„ç¬¬ä¸€æ­¥æ˜¯è®©ç”¨æˆ·é€‰æ‹©æ–‡ä»¶ã€‚é€šå¸¸æˆ‘ä»¬ä¼šç”¨ `<input type=\"file\">`ï¼Œç®€å•ç²—æš´ï¼Œä½†åŠŸèƒ½å¼ºå¤§ã€‚\n\n```html\n<input type=\"file\" id=\"uploadInput\" accept=\"image/*\" />\n```\n\n`accept=\"image/*\"` æ˜¯ä¸ºäº†é™åˆ¶åªé€‰å›¾ç‰‡ï¼Œå…å¾—ç”¨æˆ·æ‰‹æŠ–ä¼ äº†ä¸ª MP4 è¿‡æ¥ï¼ˆè™½ç„¶è¿™ä¹ŸæŒºå¥½ç©ï¼Œä½†ä¸åœ¨å’±ä»¬ä»Šå¤©çš„è®¨è®ºèŒƒå›´ ğŸ˜‚ï¼‰ã€‚\n\næ¥ç€ï¼Œç”¨ JavaScript ç›‘å¬æ–‡ä»¶é€‰æ‹©äº‹ä»¶ï¼Œæ‹¿åˆ°ç”¨æˆ·ä¸Šä¼ çš„æ–‡ä»¶ï¼š\n\n```javascript\nconst uploadInput = document.getElementById('uploadInput');\nuploadInput.addEventListener('change', (event) => {\n  const file = event.target.files[0]; // æ‹¿åˆ°ç¬¬ä¸€ä¸ªæ–‡ä»¶\n  if (!file) {\n    alert('è¯·å…ˆé€‰ä¸ªå›¾ç‰‡å§ï¼Œå…„å¼Ÿï¼');\n    return;\n  }\n  console.log('æ–‡ä»¶å¤§å°ï¼š', file.size / 1024 / 1024, 'MB'); // çœ‹çœ‹å¤šå¤§\n  console.log('æ–‡ä»¶ç±»å‹ï¼š', file.type); // image/png, image/jpeg ä¹‹ç±»\n});\n```\n\nè¿™é‡Œç”¨åˆ°äº† `FileList` å¯¹è±¡ï¼ˆ`event.target.files`ï¼‰ï¼Œå®ƒæ˜¯æµè§ˆå™¨æä¾›çš„åŸç”Ÿ APIï¼Œèƒ½æ‹¿åˆ°ç”¨æˆ·é€‰æ‹©çš„æ‰€æœ‰æ–‡ä»¶ã€‚æˆ‘ä»¬åªå–ç¬¬ä¸€ä¸ªï¼ˆ`files[0]`ï¼‰ï¼Œå› ä¸ºä»Šå¤©ä¸æå¤šæ–‡ä»¶ä¸Šä¼ çš„å¤æ‚ç©æ³•ã€‚\n\n#### å°æ’æ›²ï¼šFile å¯¹è±¡æ˜¯ä¸ªå•¥ï¼Ÿ\n`File` å¯¹è±¡æ˜¯ä¸ªè½»é‡çº§çš„æ•°æ®ç»“æ„ï¼ŒåŒ…å«æ–‡ä»¶åã€å¤§å°ã€ç±»å‹ç­‰ä¿¡æ¯ã€‚å®ƒç»§æ‰¿è‡ª `Blob`ï¼Œå¯ä»¥ç›´æ¥è¢«è¯»å–æˆ–æ“ä½œã€‚æ¯”å¦‚ï¼Œä½ å¯ä»¥ç”¨ `file.size` æ£€æŸ¥æ–‡ä»¶å¤§å°ï¼Œè¶…è¿‡æŸä¸ªé˜ˆå€¼ï¼ˆæ¯”å¦‚ 5MBï¼‰å°±æé†’ç”¨æˆ·ï¼šâ€œè¿™å›¾å¤ªå¤§äº†ï¼Œå’±å…ˆå‹ä¸€å‹ï¼Ÿâ€\n\n### ç¬¬äºŒæ­¥ï¼šè¯»å–å›¾ç‰‡å†…å®¹\n\nå…‰æ‹¿åˆ° `File` å¯¹è±¡è¿˜ä¸å¤Ÿï¼Œæˆ‘ä»¬å¾—æŠŠå®ƒâ€œçœ‹â€å‡ºæ¥ã€‚è¿™æ—¶å€™éœ€è¦ `FileReader`ï¼Œå®ƒèƒ½æŠŠæ–‡ä»¶è½¬æˆå¯ç”¨çš„æ•°æ®æ ¼å¼ï¼Œæ¯”å¦‚ Base64 å­—ç¬¦ä¸²ã€‚\n\n```javascript\nconst reader = new FileReader();\nreader.onload = (e) => {\n  const imgData = e.target.result; // Base64 æ ¼å¼\n  const img = new Image();\n  img.src = imgData;\n  img.onload = () => {\n    console.log('å›¾ç‰‡å®½é«˜ï¼š', img.width, 'x', img.height);\n    // ä¸‹ä¸€æ­¥ï¼šå‹ç¼©ï¼\n  };\n};\nreader.readAsDataURL(file); // å¼€å§‹è¯»å–\n```\n\n`readAsDataURL` ä¼šæŠŠæ–‡ä»¶è½¬æˆ `data:image/jpeg;base64,xxxx` è¿™æ ·çš„å­—ç¬¦ä¸²ï¼Œæ–¹ä¾¿æˆ‘ä»¬åœ¨æµè§ˆå™¨é‡Œæ˜¾ç¤ºæˆ–åŠ å·¥ã€‚è¯»å–å®Œåï¼Œé€šè¿‡ `Image` å¯¹è±¡åŠ è½½å›¾ç‰‡ï¼Œæ‹¿åˆ°å®½é«˜ä¿¡æ¯ï¼Œä¸ºåç»­å‹ç¼©åšå‡†å¤‡ã€‚\n\n#### åŸç†æµ…æ\nä¸ºå•¥ç”¨ Base64ï¼Ÿå› ä¸ºå®ƒæ˜¯ä¸ªé€šç”¨çš„æ•°æ®æ ¼å¼ï¼Œæµè§ˆå™¨èƒ½ç›´æ¥è¯†åˆ«ï¼ŒCanvas ä¹Ÿèƒ½ç”¨å®ƒç”»å›¾ã€‚ä¸è¿‡ç¼ºç‚¹æ˜¯ Base64 æ¯”åŸå§‹äºŒè¿›åˆ¶å¤§ 33% å·¦å³ï¼ˆç¼–ç è†¨èƒ€ï¼‰ï¼Œæ‰€ä»¥åªæ˜¯ä¸ªä¸­é—´æ€ï¼Œå‹ç¼©åæˆ‘ä»¬ä¼šå†è½¬å›äºŒè¿›åˆ¶ã€‚\n\n### ç¬¬ä¸‰æ­¥ï¼šå›¾ç‰‡å‹ç¼©çš„é­”æ³•â€”â€”Canvas\n\né‡å¤´æˆæ¥äº†ï¼æˆ‘ä»¬è¦ç”¨ Canvas æŠŠå›¾ç‰‡â€œæâ€å°ã€‚Canvas å°±åƒä¸ªæ•°å­—ç”»æ¿ï¼Œèƒ½éšæ„è°ƒæ•´å›¾ç‰‡çš„å°ºå¯¸å’Œè´¨é‡ã€‚\n\n#### åŸºæœ¬å‹ç¼©æ€è·¯\n1. **ç¼©æ”¾å°ºå¯¸**ï¼šæŠŠå›¾ç‰‡ç”»åˆ° Canvas ä¸Šï¼Œè°ƒæ•´å®½é«˜ã€‚\n2. **è°ƒæ•´è´¨é‡**ï¼šå¯¼å‡ºæ—¶æ§åˆ¶å‹ç¼©ç‡ï¼ˆæ¯”å¦‚ JPEG çš„ quality å‚æ•°ï¼‰ã€‚\n\nä»£ç å¦‚ä¸‹ï¼š\n\n```javascript\nfunction compressImage(file, maxWidth = 800, quality = 0.7) {\n  const reader = new FileReader();\n  reader.onload = (e) => {\n    const img = new Image();\n    img.src = e.target.result;\n    img.onload = () => {\n      const canvas = document.createElement('canvas');\n      const ctx = canvas.getContext('2d');\n\n      // è®¡ç®—ç¼©æ”¾åçš„å°ºå¯¸ï¼Œä¿æŒå®½é«˜æ¯”\n      let width = img.width;\n      let height = img.height;\n      if (width > maxWidth) {\n        height = (maxWidth / width) * height;\n        width = maxWidth;\n      }\n\n      canvas.width = width;\n      canvas.height = height;\n\n      // ç”»åˆ° Canvas ä¸Š\n      ctx.drawImage(img, 0, 0, width, height);\n\n      // å¯¼å‡ºå‹ç¼©åçš„å›¾ç‰‡\n      canvas.toBlob(\n        (blob) => {\n          console.log('å‹ç¼©åå¤§å°ï¼š', blob.size / 1024 / 1024, 'MB');\n          // å¯ä»¥ä¸Šä¼  blobï¼Œæˆ–è€…è½¬æˆ Base64 æ˜¾ç¤º\n          const compressedUrl = URL.createObjectURL(blob);\n          document.body.innerHTML += `<img src=\"${compressedUrl}\" />`;\n        },\n        'image/jpeg', // æ ¼å¼\n        quality // è´¨é‡ï¼Œ0-1 ä¹‹é—´\n      );\n    };\n  };\n  reader.readAsDataURL(file);\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nuploadInput.addEventListener('change', (e) => {\n  const file = e.target.files[0];\n  if (file) compressImage(file, 800, 0.7);\n});\n```\n\n#### ä»£ç æ‹†è§£\n- **`drawImage`**ï¼šæŠŠåŸå§‹å›¾ç‰‡æŒ‰æ¯”ä¾‹ç¼©æ”¾åˆ° Canvas ä¸Šã€‚\n- **`toBlob`**ï¼šå¯¼å‡ºå‹ç¼©åçš„æ–‡ä»¶ï¼Œ`quality` å‚æ•°æ§åˆ¶ JPEG çš„å‹ç¼©ç¨‹åº¦ï¼ˆ0-1ï¼Œ1 æ˜¯æ— æŸï¼‰ã€‚\n- **å®½é«˜æ¯”**ï¼šé€šè¿‡ç®€å•çš„æ•°å­¦è®¡ç®—ï¼ˆ`maxWidth / width`ï¼‰ï¼Œç¡®ä¿å›¾ç‰‡ä¸ä¼šè¢«æ‹‰ä¼¸å˜å½¢ã€‚\n\nè¿è¡Œä¸€ä¸‹ï¼Œ10MB çš„å¤§å›¾å¯èƒ½ç¬é—´å˜æˆå‡ ç™¾ KBï¼Œæ•ˆæœæ æ çš„ï¼ğŸ‰\n\n#### æ·±å…¥åŸç†ï¼šJPEG å‹ç¼©æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿ\nJPEG å‹ç¼©å±äº**æœ‰æŸå‹ç¼©**ï¼Œé€šè¿‡ä¸¢å¼ƒäººçœ¼ä¸æ•æ„Ÿçš„é«˜é¢‘ä¿¡æ¯ï¼ˆæ¯”å¦‚ç»†å¾®çš„é¢œè‰²è¿‡æ¸¡ï¼‰æ¥å‡å°æ–‡ä»¶å¤§å°ã€‚`quality` è¶Šä½ï¼Œä¸¢çš„æ•°æ®è¶Šå¤šï¼Œå›¾ç‰‡å°±è¶Šâ€œç³Šâ€ï¼Œä½†æ–‡ä»¶ä¹Ÿè¶Šå°ã€‚è¿™å°±åƒç»™å›¾ç‰‡â€œå‡è‚¥â€ï¼Œå¾—æ‰¾ä¸ªå¹³è¡¡ç‚¹ï¼Œæ—¢ç˜¦èº«åˆä¸èƒ½ç˜¦æˆâ€œæ’éª¨ç²¾â€ã€‚\n\n### ç¬¬å››æ­¥ï¼šä¸Šä¼ åˆ°æœåŠ¡å™¨\n\nå‹ç¼©å®Œçš„ `blob` å¯ä»¥ç›´æ¥ä¸¢ç»™åç«¯ã€‚ç”¨ `FormData` åŒ…èµ·æ¥ï¼Œå‘ä¸ª POST è¯·æ±‚å°±è¡Œäº†ï¼š\n\n```javascript\ncanvas.toBlob((blob) => {\n  const formData = new FormData();\n  formData.append('image', blob, 'compressed-image.jpg');\n\n  fetch('/upload', {\n    method: 'POST',\n    body: formData,\n  })\n    .then((res) => res.json())\n    .then((data) => console.log('ä¸Šä¼ æˆåŠŸï¼š', data))\n    .catch((err) => console.error('ä¸Šä¼ å¤±è´¥ï¼š', err));\n}, 'image/jpeg', 0.7);\n```\n\nåç«¯æ”¶åˆ°åç›´æ¥å­˜ç›˜ï¼Œå‰ç«¯ä»»åŠ¡å°±å®Œæˆäº†ã€‚ç®€å•å§ï¼Ÿå°±åƒå¿«é€’å‘˜æŠŠåŒ…è£¹é€åˆ°ï¼Œä½ å°±ä¸ç”¨ç®¡å®ƒåé¢å’‹å¤„ç†äº†ã€‚\n\n## æœ€ä½³å®è·µä¸é¿å‘æŒ‡å—\n\nå…‰ä¼šå†™ä»£ç è¿˜ä¸å¤Ÿï¼Œå’±ä»¬å¾—æ•´å¾—æ›´ä¸“ä¸šäº›ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å®æˆ˜ç»éªŒï¼š\n\n### 1. åŠ¨æ€è°ƒæ•´å‹ç¼©å‚æ•°\nåˆ«ä¸€è‚¡è„‘å„¿æŠŠæ‰€æœ‰å›¾ç‰‡éƒ½å‹åˆ° 0.7 çš„è´¨é‡ã€‚å¯ä»¥ç”¨æ–‡ä»¶å¤§å°å’Œç±»å‹åŠ¨æ€è°ƒæ•´ï¼š\n```javascript\nconst quality = file.size > 5 * 1024 * 1024 ? 0.5 : 0.8; // å¤§äº 5MB æ›´ç‹ ç‚¹\ncompressImage(file, 800, quality);\n```\n\n### 2. å¤„ç†é€æ˜èƒŒæ™¯ï¼ˆPNGï¼‰\nJPEG ä¸æ”¯æŒé€æ˜åº¦ï¼Œå¦‚æœç”¨æˆ·ä¸Šä¼  PNGï¼Œå¾—åˆ¤æ–­æ˜¯å¦éœ€è¦ä¿ç•™é€æ˜ï¼š\n```javascript\nif (file.type === 'image/png') {\n  canvas.toBlob(blob => {}, 'image/png', 1); // PNG æ— è´¨é‡å‚æ•°\n} else {\n  canvas.toBlob(blob => {}, 'image/jpeg', 0.7);\n}\n```\n\n### 3. é¢„è§ˆä¼˜åŒ–\nåˆ«ç›´æ¥æŠŠå¤§å›¾å¡åˆ° DOM é‡Œï¼Œå¯èƒ½ä¼šå¡é¡¿ã€‚å…ˆå‹ç¼©åå†æ˜¾ç¤ºï¼š\n```javascript\nconst previewImg = document.createElement('img');\npreviewImg.src = URL.createObjectURL(blob);\ndocument.body.appendChild(previewImg);\n```\n\n### 4. å¼‚å¸¸å¤„ç†\nç”¨æˆ·å¯èƒ½ä¼šä¼ ä¸ªâ€œå‡å›¾ç‰‡â€ï¼ˆæ¯”å¦‚æ”¹äº†åç¼€çš„æ–‡æœ¬æ–‡ä»¶ï¼‰ï¼Œå¾—åŠ ä¸ªæ ¡éªŒï¼š\n```javascript\nif (!file.type.startsWith('image/')) {\n  alert('è¿™ä¸æ˜¯å›¾ç‰‡å•Šï¼Œå…„å¼Ÿï¼Œåˆ«é€—æˆ‘ï¼');\n  return;\n}\n```\n\n### 5. æ€§èƒ½ä¼˜åŒ–ï¼šWeb Worker\nå¦‚æœå›¾ç‰‡å¾ˆå¤§ï¼Œå‹ç¼©å¯èƒ½ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚å¯ä»¥ç”¨ Web Worker æŠŠè®¡ç®—ä¸¢åˆ°åå°ï¼š\n```javascript\nconst worker = new Worker('compressWorker.js');\nworker.postMessage({ file, maxWidth: 800, quality: 0.7 });\nworker.onmessage = (e) => {\n  const blob = e.data;\n  // å¤„ç† blob\n};\n```\n\n`compressWorker.js` é‡Œæ”¾å‹ç¼©é€»è¾‘ï¼Œä¸»çº¿ç¨‹å°±è§£æ”¾äº†ï¼Œåƒä¸ªç”©æ‰‹æŒæŸœä¸€æ ·è½»æ¾ ğŸ˜ã€‚\n\n## å¹½é»˜å°å½©è›‹\næœ‰æ¬¡æˆ‘å¿˜äº†åŠ ç±»å‹æ ¡éªŒï¼Œç»“æœç”¨æˆ·ä¸Šä¼ äº†ä¸ª 50MB çš„ PDFï¼ŒCanvas ç›´æ¥â€œç½¢å·¥â€ï¼Œæµè§ˆå™¨å¡æˆ PPTã€‚åæ¥æˆ‘åŠ äº†ä¸ªæç¤ºï¼šâ€œæœ‹å‹ï¼Œè¿™ä¸æ˜¯å›¾ç‰‡ï¼Œæ˜¯ä½ çš„äººç”Ÿå›å¿†å½•å—ï¼Ÿâ€ ç”¨æˆ·ä½“éªŒç¬é—´æå‡ï¼Œå“ˆå“ˆï¼\n\n## æ€»ç»“\n\nå›¾ç‰‡ä¸Šä¼ å’Œå‹ç¼©çœ‹ä¼¼ç®€å•ï¼Œä½†ç»†èŠ‚å¤šå¾—åƒä¸ªâ€œä¿„ç½—æ–¯å¥—å¨ƒâ€ã€‚é€šè¿‡ File API è¯»å–æ–‡ä»¶ã€Canvas åŠ å·¥å›¾ç‰‡ï¼Œå†åŠ ä¸ŠåŠ¨æ€å‚æ•°å’Œå¼‚å¸¸å¤„ç†ï¼Œä½ å°±èƒ½æ‰“é€ ä¸€ä¸ªä¸æ»‘åˆé«˜æ•ˆçš„åŠŸèƒ½ã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®ä½ åœ¨ä¸‹ä¸ªé¡¹ç›®é‡Œå¤§å±•èº«æ‰‹ï¼Œå°‘è¸©å‘ï¼Œå¤šå‡ºå½©ï¼\n\næœ‰ä»€ä¹ˆé—®é¢˜æˆ–è€…æ›´å¥½çš„æ€è·¯ï¼Œæ¬¢è¿ç•™è¨€è®¨è®ºï¼å’±ä»¬ä¸€èµ·æŠŠå‰ç«¯ç©å‡ºèŠ±å„¿æ¥ï¼ğŸŒŸ\n\n--- ",
    "code": "var Component=(()=>{var p=Object.create;var c=Object.defineProperty;var E=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var F=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var u=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),B=(n,e)=>{for(var r in e)c(n,r,{get:e[r],enumerable:!0})},d=(n,e,r,s)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let a of y(e))!g.call(n,a)&&a!==r&&c(n,a,{get:()=>e[a],enumerable:!(s=E(e,a))||s.enumerable});return n};var m=(n,e,r)=>(r=n!=null?p(F(n)):{},d(e||!n||!n.__esModule?c(r,\"default\",{value:n,enumerable:!0}):r,n)),f=n=>d(c({},\"__esModule\",{value:!0}),n);var o=u((k,i)=>{i.exports=_jsx_runtime});var v={};B(v,{default:()=>h,frontmatter:()=>b});var l=m(o()),b={type:\"Post\",title:\"\\u524D\\u7AEF\\u5982\\u4F55\\u5B9E\\u73B0\\u56FE\\u7247\\u4E0A\\u4F20\\u53CA\\u538B\\u7F29\\u529F\\u80FD\\uFF1F\",date:\"2023-11-25\",description:\"\\u4ECE\\u96F6\\u5230\\u4E00\\u5E26\\u4F60\\u641E\\u5B9A\\u524D\\u7AEF\\u56FE\\u7247\\u4E0A\\u4F20\\u4E0E\\u538B\\u7F29\\uFF0C\\u6DF1\\u5165\\u539F\\u7406\\uFF0C\\u5E26\\u4EE3\\u7801\\u793A\\u4F8B\\uFF0C\\u9644\\u4E0A\\u6700\\u4F73\\u5B9E\\u8DF5\\uFF0C\\u8BA9\\u4F60\\u7684\\u56FE\\u7247\\u5904\\u7406\\u4E1D\\u6ED1\\u53C8\\u9AD8\\u6548\\uFF01\",keywords:\"\\u56FE\\u7247\\u4E0A\\u4F20, \\u56FE\\u7247\\u538B\\u7F29, \\u524D\\u7AEF\\u5F00\\u53D1, JavaScript, Canvas, File API, \\u6027\\u80FD\\u4F18\\u5316\",author:\"\\u6653\\u9F99\",image:\"/images/hero/image-upload-compress.jpg\",tags:[\"\\u524D\\u7AEF\\u5F00\\u53D1\",\"JavaScript\",\"\\u6027\\u80FD\\u4F18\\u5316\"],category:\"\\u524D\\u7AEF\\u6280\\u672F\"};function t(n){let e={a:\"a\",code:\"code\",figure:\"figure\",h2:\"h2\",h3:\"h3\",h4:\"h4\",hr:\"hr\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(e.p,{children:[\"\\u55E8\\uFF0C\\u5404\\u4F4D\\u524D\\u7AEF\\u4FA0\\u5BA2\\uFF01\\u4ECA\\u5929\\u6211\\u4EEC\\u6765\\u804A\\u804A\\u524D\\u7AEF\\u5F00\\u53D1\\u4E2D\\u7684\\u4E00\\u4E2A\\u5E38\\u89C1\\u9700\\u6C42\\u2014\\u2014\",(0,l.jsx)(e.strong,{children:\"\\u56FE\\u7247\\u4E0A\\u4F20\\u4E0E\\u538B\\u7F29\"}),\"\\u3002\\u8FD9\\u73A9\\u610F\\u513F\\u542C\\u8D77\\u6765\\u7B80\\u5355\\uFF0C\\u4E0D\\u5C31\\u662F\\u8BA9\\u7528\\u6237\\u9009\\u4E2A\\u6587\\u4EF6\\u7136\\u540E\\u4F20\\u5230\\u670D\\u52A1\\u5668\\u561B\\uFF1F\\u4F46\\u5B9E\\u9645\\u4E0A\\uFF0C\\u5B83\\u85CF\\u7740\\u4E0D\\u5C11\\u5751\\u548C\\u5B66\\u95EE\\u3002\\u4ECE\\u7528\\u6237\\u4F53\\u9A8C\\u5230\\u6027\\u80FD\\u4F18\\u5316\\uFF0C\\u4ECE\\u6D4F\\u89C8\\u5668\\u517C\\u5BB9\\u6027\\u5230\\u6587\\u4EF6\\u5904\\u7406\\u539F\\u7406\\uFF0C\\u54B1\\u4EEC\\u5F97\\u628A\\u8FD9\\u5757\\u5543\\u5F97\\u900F\\u900F\\u7684\\uFF0C\\u624D\\u80FD\\u5199\\u51FA\\u4F18\\u96C5\\u53C8\\u9AD8\\u6548\\u7684\\u4EE3\\u7801\\u3002\\u522B\\u6025\\uFF0C\\u6211\\u4F1A\\u5E26\\u4F60\\u4ECE\\u5934\\u5230\\u5C3E\\u634B\\u4E00\\u904D\\uFF0C\\u9644\\u4E0A\\u4EE3\\u7801\\u3001\\u539F\\u7406\\u548C\\u4E00\\u4E9B\\u201C\\u907F\\u5751\\u6307\\u5357\\u201D\\uFF0C\\u8FD8\\u6709\\u70B9\\u5C0F\\u5E7D\\u9ED8\\u8C03\\u5242\\u4E00\\u4E0B\\uFF08\\u6BD5\\u7ADF\\u5199\\u4EE3\\u7801\\u4E0D\\u80FD\\u8001\\u662F\\u677F\\u7740\\u8138\\uFF0C\\u5BF9\\u5427 \\u{1F602}\\uFF09\\u3002\"]}),`\n`,(0,l.jsx)(e.h2,{id:\"\\u4E3A\\u4EC0\\u4E48\\u9700\\u8981\\u56FE\\u7247\\u4E0A\\u4F20\\u548C\\u538B\\u7F29\",children:(0,l.jsx)(e.a,{href:\"#\\u4E3A\\u4EC0\\u4E48\\u9700\\u8981\\u56FE\\u7247\\u4E0A\\u4F20\\u548C\\u538B\\u7F29\",children:\"\\u4E3A\\u4EC0\\u4E48\\u9700\\u8981\\u56FE\\u7247\\u4E0A\\u4F20\\u548C\\u538B\\u7F29\\uFF1F\"})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u5148\\u8BF4\\u8BF4\\u4E3A\\u5565\\u8FD9\\u4E8B\\u513F\\u503C\\u5F97\\u6211\\u4EEC\\u8D39\\u5FC3\\u3002\\u60F3\\u8C61\\u4E00\\u4E0B\\uFF0C\\u7528\\u6237\\u5174\\u51B2\\u51B2\\u5730\\u4E0A\\u4F20\\u4E00\\u5F20\\u521A\\u7528\\u5355\\u53CD\\u62CD\\u7684 10MB \\u5927\\u56FE\\uFF0C\\u7ED3\\u679C\\u670D\\u52A1\\u5668\\u5361\\u4E86\\uFF0C\\u6D41\\u91CF\\u6CA1\\u4E86\\uFF0C\\u7528\\u6237\\u8FD8\\u4E00\\u8138\\u61F5\\u2014\\u2014\\u201C\\u6211\\u7167\\u7247\\u5462\\uFF1F\\u201D\\u3002\\u8FD9\\u4E0D\\u4EC5\\u6D6A\\u8D39\\u5E26\\u5BBD\\uFF0C\\u8FD8\\u53EF\\u80FD\\u8BA9\\u540E\\u7AEF\\u5C0F\\u54E5\\u54E5\\u5C0F\\u59D0\\u59D0\\u6293\\u72C2\\u3002\\u66F4\\u522B\\u63D0\\u79FB\\u52A8\\u7AEF\\u7528\\u6237\\u4E86\\uFF0C\\u6D41\\u91CF\\u6BD4\\u91D1\\u5B50\\u8FD8\\u8D35\\uFF0C\\u8C01\\u613F\\u610F\\u4E3A\\u4E86\\u4E00\\u5F20\\u56FE\\u628A\\u5F53\\u6708\\u5957\\u9910\\u7528\\u5149\\uFF1F\"}),`\n`,(0,l.jsx)(e.p,{children:\"\\u6240\\u4EE5\\uFF0C\\u56FE\\u7247\\u538B\\u7F29\\u5C31\\u6210\\u4E86\\u524D\\u7AEF\\u7684\\u201C\\u6551\\u547D\\u7A3B\\u8349\\u201D\\u3002\\u901A\\u8FC7\\u5728\\u5BA2\\u6237\\u7AEF\\u5904\\u7406\\u56FE\\u7247\\uFF0C\\u6211\\u4EEC\\u53EF\\u4EE5\\uFF1A\"}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"\\u51CF\\u5C11\\u6587\\u4EF6\\u5927\\u5C0F\"}),\"\\uFF1A\\u4F18\\u5316\\u4E0A\\u4F20\\u901F\\u5EA6\\uFF0C\\u8282\\u7701\\u5E26\\u5BBD\\u3002\"]}),`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"\\u63D0\\u5347\\u7528\\u6237\\u4F53\\u9A8C\"}),\"\\uFF1A\\u4E0D\\u7528\\u8BA9\\u7528\\u6237\\u624B\\u52A8\\u538B\\u7F29\\uFF0C\\u7701\\u5FC3\\u53C8\\u9AD8\\u6548\\u3002\"]}),`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"\\u51CF\\u8F7B\\u670D\\u52A1\\u5668\\u538B\\u529B\"}),\"\\uFF1A\\u540E\\u7AEF\\u53EA\\u9700\\u8981\\u5B89\\u5FC3\\u5B58\\u50A8\\uFF0C\\u4E0D\\u7528\\u518D\\u64CD\\u5FC3\\u8F6C\\u6362\\u3002\"]}),`\n`]}),`\n`,(0,l.jsx)(e.p,{children:\"\\u597D\\u4E86\\uFF0C\\u9700\\u6C42\\u660E\\u786E\\u4E86\\uFF0C\\u63A5\\u4E0B\\u6765\\u54B1\\u4EEC\\u5F00\\u5E72\\uFF01\"}),`\n`,(0,l.jsx)(e.h2,{id:\"\\u6838\\u5FC3\\u5DE5\\u5177file-api-\\u548C-canvas\",children:(0,l.jsx)(e.a,{href:\"#\\u6838\\u5FC3\\u5DE5\\u5177file-api-\\u548C-canvas\",children:\"\\u6838\\u5FC3\\u5DE5\\u5177\\uFF1AFile API \\u548C Canvas\"})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u8981\\u5B9E\\u73B0\\u56FE\\u7247\\u4E0A\\u4F20\\u548C\\u538B\\u7F29\\uFF0C\\u524D\\u7AEF\\u4E3B\\u8981\\u4F9D\\u8D56\\u4E24\\u4E2A\\u201C\\u795E\\u5668\\u201D\\uFF1A\"}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"File API\"}),\"\\uFF1A\\u7528\\u6765\\u8BFB\\u53D6\\u7528\\u6237\\u4E0A\\u4F20\\u7684\\u6587\\u4EF6\\u3002\"]}),`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"Canvas API\"}),\"\\uFF1A\\u7528\\u6765\\u5904\\u7406\\u56FE\\u7247\\uFF0C\\u50CF\\u4E2A\\u753B\\u677F\\u4E00\\u6837\\uFF0C\\u80FD\\u88C1\\u526A\\u3001\\u7F29\\u653E\\u3001\\u8C03\\u6574\\u8D28\\u91CF\\u3002\"]}),`\n`]}),`\n`,(0,l.jsx)(e.p,{children:\"\\u8FD9\\u4FE9\\u5DE5\\u5177\\u5C31\\u50CF\\u4F60\\u7684\\u5DE6\\u53F3\\u624B\\uFF0C\\u4E00\\u4E2A\\u8D1F\\u8D23\\u201C\\u62FF\\u6765\\u201D\\uFF0C\\u4E00\\u4E2A\\u8D1F\\u8D23\\u201C\\u52A0\\u5DE5\\u201D\\u3002\\u4E0B\\u9762\\u6211\\u4EEC\\u4E00\\u6B65\\u6B65\\u62C6\\u89E3\\u3002\"}),`\n`,(0,l.jsx)(e.h3,{id:\"\\u7B2C\\u4E00\\u6B65\\u56FE\\u7247\\u4E0A\\u4F20\\u7684\\u5B9E\\u73B0\",children:(0,l.jsx)(e.a,{href:\"#\\u7B2C\\u4E00\\u6B65\\u56FE\\u7247\\u4E0A\\u4F20\\u7684\\u5B9E\\u73B0\",children:\"\\u7B2C\\u4E00\\u6B65\\uFF1A\\u56FE\\u7247\\u4E0A\\u4F20\\u7684\\u5B9E\\u73B0\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u4E0A\\u4F20\\u56FE\\u7247\\u7684\\u7B2C\\u4E00\\u6B65\\u662F\\u8BA9\\u7528\\u6237\\u9009\\u62E9\\u6587\\u4EF6\\u3002\\u901A\\u5E38\\u6211\\u4EEC\\u4F1A\\u7528 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:'<input type=\"file\">'})})})}),\"\\uFF0C\\u7B80\\u5355\\u7C97\\u66B4\\uFF0C\\u4F46\\u529F\\u80FD\\u5F3A\\u5927\\u3002\"]}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"html\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.code,{\"data-language\":\"html\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#85E89D\"},children:\"input\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" type\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"file\"'}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" id\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"uploadInput\"'}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" accept\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"image/*\"'}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" />\"})]})})})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:'accept=\"image/*\"'})})})}),\" \\u662F\\u4E3A\\u4E86\\u9650\\u5236\\u53EA\\u9009\\u56FE\\u7247\\uFF0C\\u514D\\u5F97\\u7528\\u6237\\u624B\\u6296\\u4F20\\u4E86\\u4E2A MP4 \\u8FC7\\u6765\\uFF08\\u867D\\u7136\\u8FD9\\u4E5F\\u633A\\u597D\\u73A9\\uFF0C\\u4F46\\u4E0D\\u5728\\u54B1\\u4EEC\\u4ECA\\u5929\\u7684\\u8BA8\\u8BBA\\u8303\\u56F4 \\u{1F602}\\uFF09\\u3002\"]}),`\n`,(0,l.jsx)(e.p,{children:\"\\u63A5\\u7740\\uFF0C\\u7528 JavaScript \\u76D1\\u542C\\u6587\\u4EF6\\u9009\\u62E9\\u4E8B\\u4EF6\\uFF0C\\u62FF\\u5230\\u7528\\u6237\\u4E0A\\u4F20\\u7684\\u6587\\u4EF6\\uFF1A\"}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" uploadInput\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" document.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"getElementById\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'uploadInput'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"uploadInput.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"addEventListener\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'change'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"event\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" file\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" event.target.files[\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"]; \"}),(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u62FF\\u5230\\u7B2C\\u4E00\\u4E2A\\u6587\\u4EF6\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  if\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"!\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"file) {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"    alert\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u8BF7\\u5148\\u9009\\u4E2A\\u56FE\\u7247\\u5427\\uFF0C\\u5144\\u5F1F\\uFF01'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    return\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  console.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u6587\\u4EF6\\u5927\\u5C0F\\uFF1A'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", file.size \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"/\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1024\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" /\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1024\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'MB'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"); \"}),(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u770B\\u770B\\u591A\\u5927\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  console.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u6587\\u4EF6\\u7C7B\\u578B\\uFF1A'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", file.type); \"}),(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// image/png, image/jpeg \\u4E4B\\u7C7B\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u8FD9\\u91CC\\u7528\\u5230\\u4E86 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"FileList\"})})})}),\" \\u5BF9\\u8C61\\uFF08\",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"event.target.files\"})})})}),\"\\uFF09\\uFF0C\\u5B83\\u662F\\u6D4F\\u89C8\\u5668\\u63D0\\u4F9B\\u7684\\u539F\\u751F API\\uFF0C\\u80FD\\u62FF\\u5230\\u7528\\u6237\\u9009\\u62E9\\u7684\\u6240\\u6709\\u6587\\u4EF6\\u3002\\u6211\\u4EEC\\u53EA\\u53D6\\u7B2C\\u4E00\\u4E2A\\uFF08\",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"files[0]\"})})})}),\"\\uFF09\\uFF0C\\u56E0\\u4E3A\\u4ECA\\u5929\\u4E0D\\u641E\\u591A\\u6587\\u4EF6\\u4E0A\\u4F20\\u7684\\u590D\\u6742\\u73A9\\u6CD5\\u3002\"]}),`\n`,(0,l.jsx)(e.h4,{id:\"\\u5C0F\\u63D2\\u66F2file-\\u5BF9\\u8C61\\u662F\\u4E2A\\u5565\",children:(0,l.jsx)(e.a,{href:\"#\\u5C0F\\u63D2\\u66F2file-\\u5BF9\\u8C61\\u662F\\u4E2A\\u5565\",children:\"\\u5C0F\\u63D2\\u66F2\\uFF1AFile \\u5BF9\\u8C61\\u662F\\u4E2A\\u5565\\uFF1F\"})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"File\"})})})}),\" \\u5BF9\\u8C61\\u662F\\u4E2A\\u8F7B\\u91CF\\u7EA7\\u7684\\u6570\\u636E\\u7ED3\\u6784\\uFF0C\\u5305\\u542B\\u6587\\u4EF6\\u540D\\u3001\\u5927\\u5C0F\\u3001\\u7C7B\\u578B\\u7B49\\u4FE1\\u606F\\u3002\\u5B83\\u7EE7\\u627F\\u81EA \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"Blob\"})})})}),\"\\uFF0C\\u53EF\\u4EE5\\u76F4\\u63A5\\u88AB\\u8BFB\\u53D6\\u6216\\u64CD\\u4F5C\\u3002\\u6BD4\\u5982\\uFF0C\\u4F60\\u53EF\\u4EE5\\u7528 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"file.size\"})})})}),\" \\u68C0\\u67E5\\u6587\\u4EF6\\u5927\\u5C0F\\uFF0C\\u8D85\\u8FC7\\u67D0\\u4E2A\\u9608\\u503C\\uFF08\\u6BD4\\u5982 5MB\\uFF09\\u5C31\\u63D0\\u9192\\u7528\\u6237\\uFF1A\\u201C\\u8FD9\\u56FE\\u592A\\u5927\\u4E86\\uFF0C\\u54B1\\u5148\\u538B\\u4E00\\u538B\\uFF1F\\u201D\"]}),`\n`,(0,l.jsx)(e.h3,{id:\"\\u7B2C\\u4E8C\\u6B65\\u8BFB\\u53D6\\u56FE\\u7247\\u5185\\u5BB9\",children:(0,l.jsx)(e.a,{href:\"#\\u7B2C\\u4E8C\\u6B65\\u8BFB\\u53D6\\u56FE\\u7247\\u5185\\u5BB9\",children:\"\\u7B2C\\u4E8C\\u6B65\\uFF1A\\u8BFB\\u53D6\\u56FE\\u7247\\u5185\\u5BB9\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u5149\\u62FF\\u5230 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"File\"})})})}),\" \\u5BF9\\u8C61\\u8FD8\\u4E0D\\u591F\\uFF0C\\u6211\\u4EEC\\u5F97\\u628A\\u5B83\\u201C\\u770B\\u201D\\u51FA\\u6765\\u3002\\u8FD9\\u65F6\\u5019\\u9700\\u8981 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"FileReader\"})})})}),\"\\uFF0C\\u5B83\\u80FD\\u628A\\u6587\\u4EF6\\u8F6C\\u6210\\u53EF\\u7528\\u7684\\u6570\\u636E\\u683C\\u5F0F\\uFF0C\\u6BD4\\u5982 Base64 \\u5B57\\u7B26\\u4E32\\u3002\"]}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" reader\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" FileReader\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"reader.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"onload\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"e\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" imgData\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" e.target.result; \"}),(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// Base64 \\u683C\\u5F0F\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" img\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" Image\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  img.src \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" imgData;\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  img.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"onload\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    console.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u56FE\\u7247\\u5BBD\\u9AD8\\uFF1A'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", img.width, \"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'x'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", img.height);\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"    // \\u4E0B\\u4E00\\u6B65\\uFF1A\\u538B\\u7F29\\uFF01\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  };\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"};\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"reader.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"readAsDataURL\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(file); \"}),(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u5F00\\u59CB\\u8BFB\\u53D6\"})]})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"readAsDataURL\"})})})}),\" \\u4F1A\\u628A\\u6587\\u4EF6\\u8F6C\\u6210 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"data:image/jpeg;base64,xxxx\"})})})}),\" \\u8FD9\\u6837\\u7684\\u5B57\\u7B26\\u4E32\\uFF0C\\u65B9\\u4FBF\\u6211\\u4EEC\\u5728\\u6D4F\\u89C8\\u5668\\u91CC\\u663E\\u793A\\u6216\\u52A0\\u5DE5\\u3002\\u8BFB\\u53D6\\u5B8C\\u540E\\uFF0C\\u901A\\u8FC7 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"Image\"})})})}),\" \\u5BF9\\u8C61\\u52A0\\u8F7D\\u56FE\\u7247\\uFF0C\\u62FF\\u5230\\u5BBD\\u9AD8\\u4FE1\\u606F\\uFF0C\\u4E3A\\u540E\\u7EED\\u538B\\u7F29\\u505A\\u51C6\\u5907\\u3002\"]}),`\n`,(0,l.jsx)(e.h4,{id:\"\\u539F\\u7406\\u6D45\\u6790\",children:(0,l.jsx)(e.a,{href:\"#\\u539F\\u7406\\u6D45\\u6790\",children:\"\\u539F\\u7406\\u6D45\\u6790\"})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u4E3A\\u5565\\u7528 Base64\\uFF1F\\u56E0\\u4E3A\\u5B83\\u662F\\u4E2A\\u901A\\u7528\\u7684\\u6570\\u636E\\u683C\\u5F0F\\uFF0C\\u6D4F\\u89C8\\u5668\\u80FD\\u76F4\\u63A5\\u8BC6\\u522B\\uFF0CCanvas \\u4E5F\\u80FD\\u7528\\u5B83\\u753B\\u56FE\\u3002\\u4E0D\\u8FC7\\u7F3A\\u70B9\\u662F Base64 \\u6BD4\\u539F\\u59CB\\u4E8C\\u8FDB\\u5236\\u5927 33% \\u5DE6\\u53F3\\uFF08\\u7F16\\u7801\\u81A8\\u80C0\\uFF09\\uFF0C\\u6240\\u4EE5\\u53EA\\u662F\\u4E2A\\u4E2D\\u95F4\\u6001\\uFF0C\\u538B\\u7F29\\u540E\\u6211\\u4EEC\\u4F1A\\u518D\\u8F6C\\u56DE\\u4E8C\\u8FDB\\u5236\\u3002\"}),`\n`,(0,l.jsx)(e.h3,{id:\"\\u7B2C\\u4E09\\u6B65\\u56FE\\u7247\\u538B\\u7F29\\u7684\\u9B54\\u6CD5canvas\",children:(0,l.jsx)(e.a,{href:\"#\\u7B2C\\u4E09\\u6B65\\u56FE\\u7247\\u538B\\u7F29\\u7684\\u9B54\\u6CD5canvas\",children:\"\\u7B2C\\u4E09\\u6B65\\uFF1A\\u56FE\\u7247\\u538B\\u7F29\\u7684\\u9B54\\u6CD5\\u2014\\u2014Canvas\"})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u91CD\\u5934\\u620F\\u6765\\u4E86\\uFF01\\u6211\\u4EEC\\u8981\\u7528 Canvas \\u628A\\u56FE\\u7247\\u201C\\u634F\\u201D\\u5C0F\\u3002Canvas \\u5C31\\u50CF\\u4E2A\\u6570\\u5B57\\u753B\\u677F\\uFF0C\\u80FD\\u968F\\u610F\\u8C03\\u6574\\u56FE\\u7247\\u7684\\u5C3A\\u5BF8\\u548C\\u8D28\\u91CF\\u3002\"}),`\n`,(0,l.jsx)(e.h4,{id:\"\\u57FA\\u672C\\u538B\\u7F29\\u601D\\u8DEF\",children:(0,l.jsx)(e.a,{href:\"#\\u57FA\\u672C\\u538B\\u7F29\\u601D\\u8DEF\",children:\"\\u57FA\\u672C\\u538B\\u7F29\\u601D\\u8DEF\"})}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"\\u7F29\\u653E\\u5C3A\\u5BF8\"}),\"\\uFF1A\\u628A\\u56FE\\u7247\\u753B\\u5230 Canvas \\u4E0A\\uFF0C\\u8C03\\u6574\\u5BBD\\u9AD8\\u3002\"]}),`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"\\u8C03\\u6574\\u8D28\\u91CF\"}),\"\\uFF1A\\u5BFC\\u51FA\\u65F6\\u63A7\\u5236\\u538B\\u7F29\\u7387\\uFF08\\u6BD4\\u5982 JPEG \\u7684 quality \\u53C2\\u6570\\uFF09\\u3002\"]}),`\n`]}),`\n`,(0,l.jsx)(e.p,{children:\"\\u4EE3\\u7801\\u5982\\u4E0B\\uFF1A\"}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"function\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" compressImage\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"file\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"maxWidth\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 800\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"quality\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 0.7\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" reader\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" FileReader\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  reader.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"onload\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"e\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" img\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" Image\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    img.src \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" e.target.result;\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    img.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"onload\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"      const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" canvas\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" document.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"createElement\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'canvas'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"      const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" ctx\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" canvas.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"getContext\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'2d'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"      // \\u8BA1\\u7B97\\u7F29\\u653E\\u540E\\u7684\\u5C3A\\u5BF8\\uFF0C\\u4FDD\\u6301\\u5BBD\\u9AD8\\u6BD4\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"      let\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" width \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" img.width;\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"      let\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" height \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" img.height;\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"      if\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (width \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\">\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" maxWidth) {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        height \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (maxWidth \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"/\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" width) \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"*\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" height;\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        width \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" maxWidth;\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      }\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      canvas.width \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" width;\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      canvas.height \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" height;\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"      // \\u753B\\u5230 Canvas \\u4E0A\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      ctx.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"drawImage\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(img, \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", width, height);\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"      // \\u5BFC\\u51FA\\u538B\\u7F29\\u540E\\u7684\\u56FE\\u7247\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      canvas.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"toBlob\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"blob\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"          console.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u538B\\u7F29\\u540E\\u5927\\u5C0F\\uFF1A'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", blob.size \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"/\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1024\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" /\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1024\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'MB'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"          // \\u53EF\\u4EE5\\u4E0A\\u4F20 blob\\uFF0C\\u6216\\u8005\\u8F6C\\u6210 Base64 \\u663E\\u793A\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"          const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" compressedUrl\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" URL\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"createObjectURL\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(blob);\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"          document.body.innerHTML \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"+=\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:' `<img src=\"${'}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"compressedUrl\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'}\" />`'}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        },\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"        'image/jpeg'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u683C\\u5F0F\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"        quality \"}),(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u8D28\\u91CF\\uFF0C0-1 \\u4E4B\\u95F4\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      );\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    };\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  };\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  reader.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"readAsDataURL\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(file);\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u4F7F\\u7528\\u793A\\u4F8B\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"uploadInput.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"addEventListener\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'change'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"e\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" file\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" e.target.files[\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"];\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  if\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (file) \"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"compressImage\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(file, \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"800\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0.7\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})}),`\n`,(0,l.jsx)(e.h4,{id:\"\\u4EE3\\u7801\\u62C6\\u89E3\",children:(0,l.jsx)(e.a,{href:\"#\\u4EE3\\u7801\\u62C6\\u89E3\",children:\"\\u4EE3\\u7801\\u62C6\\u89E3\"})}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"drawImage\"})})})})}),\"\\uFF1A\\u628A\\u539F\\u59CB\\u56FE\\u7247\\u6309\\u6BD4\\u4F8B\\u7F29\\u653E\\u5230 Canvas \\u4E0A\\u3002\"]}),`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"toBlob\"})})})})}),\"\\uFF1A\\u5BFC\\u51FA\\u538B\\u7F29\\u540E\\u7684\\u6587\\u4EF6\\uFF0C\",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"quality\"})})})}),\" \\u53C2\\u6570\\u63A7\\u5236 JPEG \\u7684\\u538B\\u7F29\\u7A0B\\u5EA6\\uFF080-1\\uFF0C1 \\u662F\\u65E0\\u635F\\uFF09\\u3002\"]}),`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"\\u5BBD\\u9AD8\\u6BD4\"}),\"\\uFF1A\\u901A\\u8FC7\\u7B80\\u5355\\u7684\\u6570\\u5B66\\u8BA1\\u7B97\\uFF08\",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"maxWidth / width\"})})})}),\"\\uFF09\\uFF0C\\u786E\\u4FDD\\u56FE\\u7247\\u4E0D\\u4F1A\\u88AB\\u62C9\\u4F38\\u53D8\\u5F62\\u3002\"]}),`\n`]}),`\n`,(0,l.jsx)(e.p,{children:\"\\u8FD0\\u884C\\u4E00\\u4E0B\\uFF0C10MB \\u7684\\u5927\\u56FE\\u53EF\\u80FD\\u77AC\\u95F4\\u53D8\\u6210\\u51E0\\u767E KB\\uFF0C\\u6548\\u679C\\u6760\\u6760\\u7684\\uFF01\\u{1F389}\"}),`\n`,(0,l.jsx)(e.h4,{id:\"\\u6DF1\\u5165\\u539F\\u7406jpeg-\\u538B\\u7F29\\u662F\\u600E\\u4E48\\u56DE\\u4E8B\",children:(0,l.jsx)(e.a,{href:\"#\\u6DF1\\u5165\\u539F\\u7406jpeg-\\u538B\\u7F29\\u662F\\u600E\\u4E48\\u56DE\\u4E8B\",children:\"\\u6DF1\\u5165\\u539F\\u7406\\uFF1AJPEG \\u538B\\u7F29\\u662F\\u600E\\u4E48\\u56DE\\u4E8B\\uFF1F\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"JPEG \\u538B\\u7F29\\u5C5E\\u4E8E\",(0,l.jsx)(e.strong,{children:\"\\u6709\\u635F\\u538B\\u7F29\"}),\"\\uFF0C\\u901A\\u8FC7\\u4E22\\u5F03\\u4EBA\\u773C\\u4E0D\\u654F\\u611F\\u7684\\u9AD8\\u9891\\u4FE1\\u606F\\uFF08\\u6BD4\\u5982\\u7EC6\\u5FAE\\u7684\\u989C\\u8272\\u8FC7\\u6E21\\uFF09\\u6765\\u51CF\\u5C0F\\u6587\\u4EF6\\u5927\\u5C0F\\u3002\",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"quality\"})})})}),\" \\u8D8A\\u4F4E\\uFF0C\\u4E22\\u7684\\u6570\\u636E\\u8D8A\\u591A\\uFF0C\\u56FE\\u7247\\u5C31\\u8D8A\\u201C\\u7CCA\\u201D\\uFF0C\\u4F46\\u6587\\u4EF6\\u4E5F\\u8D8A\\u5C0F\\u3002\\u8FD9\\u5C31\\u50CF\\u7ED9\\u56FE\\u7247\\u201C\\u51CF\\u80A5\\u201D\\uFF0C\\u5F97\\u627E\\u4E2A\\u5E73\\u8861\\u70B9\\uFF0C\\u65E2\\u7626\\u8EAB\\u53C8\\u4E0D\\u80FD\\u7626\\u6210\\u201C\\u6392\\u9AA8\\u7CBE\\u201D\\u3002\"]}),`\n`,(0,l.jsx)(e.h3,{id:\"\\u7B2C\\u56DB\\u6B65\\u4E0A\\u4F20\\u5230\\u670D\\u52A1\\u5668\",children:(0,l.jsx)(e.a,{href:\"#\\u7B2C\\u56DB\\u6B65\\u4E0A\\u4F20\\u5230\\u670D\\u52A1\\u5668\",children:\"\\u7B2C\\u56DB\\u6B65\\uFF1A\\u4E0A\\u4F20\\u5230\\u670D\\u52A1\\u5668\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u538B\\u7F29\\u5B8C\\u7684 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"blob\"})})})}),\" \\u53EF\\u4EE5\\u76F4\\u63A5\\u4E22\\u7ED9\\u540E\\u7AEF\\u3002\\u7528 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"FormData\"})})})}),\" \\u5305\\u8D77\\u6765\\uFF0C\\u53D1\\u4E2A POST \\u8BF7\\u6C42\\u5C31\\u884C\\u4E86\\uFF1A\"]}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"canvas.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"toBlob\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"blob\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" formData\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" FormData\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  formData.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"append\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'image'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", blob, \"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'compressed-image.jpg'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"  fetch\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'/upload'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    method: \"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'POST'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    body: formData,\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  })\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    .\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"res\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" res.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"json\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"())\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    .\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"data\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" console.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u4E0A\\u4F20\\u6210\\u529F\\uFF1A'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", data))\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    .\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"catch\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"err\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" console.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"error\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u4E0A\\u4F20\\u5931\\u8D25\\uFF1A'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", err));\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}, \"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'image/jpeg'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0.7\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u540E\\u7AEF\\u6536\\u5230\\u540E\\u76F4\\u63A5\\u5B58\\u76D8\\uFF0C\\u524D\\u7AEF\\u4EFB\\u52A1\\u5C31\\u5B8C\\u6210\\u4E86\\u3002\\u7B80\\u5355\\u5427\\uFF1F\\u5C31\\u50CF\\u5FEB\\u9012\\u5458\\u628A\\u5305\\u88F9\\u9001\\u5230\\uFF0C\\u4F60\\u5C31\\u4E0D\\u7528\\u7BA1\\u5B83\\u540E\\u9762\\u548B\\u5904\\u7406\\u4E86\\u3002\"}),`\n`,(0,l.jsx)(e.h2,{id:\"\\u6700\\u4F73\\u5B9E\\u8DF5\\u4E0E\\u907F\\u5751\\u6307\\u5357\",children:(0,l.jsx)(e.a,{href:\"#\\u6700\\u4F73\\u5B9E\\u8DF5\\u4E0E\\u907F\\u5751\\u6307\\u5357\",children:\"\\u6700\\u4F73\\u5B9E\\u8DF5\\u4E0E\\u907F\\u5751\\u6307\\u5357\"})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u5149\\u4F1A\\u5199\\u4EE3\\u7801\\u8FD8\\u4E0D\\u591F\\uFF0C\\u54B1\\u4EEC\\u5F97\\u6574\\u5F97\\u66F4\\u4E13\\u4E1A\\u4E9B\\u3002\\u4EE5\\u4E0B\\u662F\\u4E00\\u4E9B\\u5B9E\\u6218\\u7ECF\\u9A8C\\uFF1A\"}),`\n`,(0,l.jsx)(e.h3,{id:\"1-\\u52A8\\u6001\\u8C03\\u6574\\u538B\\u7F29\\u53C2\\u6570\",children:(0,l.jsx)(e.a,{href:\"#1-\\u52A8\\u6001\\u8C03\\u6574\\u538B\\u7F29\\u53C2\\u6570\",children:\"1. \\u52A8\\u6001\\u8C03\\u6574\\u538B\\u7F29\\u53C2\\u6570\"})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u522B\\u4E00\\u80A1\\u8111\\u513F\\u628A\\u6240\\u6709\\u56FE\\u7247\\u90FD\\u538B\\u5230 0.7 \\u7684\\u8D28\\u91CF\\u3002\\u53EF\\u4EE5\\u7528\\u6587\\u4EF6\\u5927\\u5C0F\\u548C\\u7C7B\\u578B\\u52A8\\u6001\\u8C03\\u6574\\uFF1A\"}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" quality\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" file.size \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\">\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 5\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" *\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1024\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" *\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1024\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" ?\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 0.5\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" :\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 0.8\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"; \"}),(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u5927\\u4E8E 5MB \\u66F4\\u72E0\\u70B9\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"compressImage\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(file, \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"800\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", quality);\"})]})]})})}),`\n`,(0,l.jsx)(e.h3,{id:\"2-\\u5904\\u7406\\u900F\\u660E\\u80CC\\u666Fpng\",children:(0,l.jsx)(e.a,{href:\"#2-\\u5904\\u7406\\u900F\\u660E\\u80CC\\u666Fpng\",children:\"2. \\u5904\\u7406\\u900F\\u660E\\u80CC\\u666F\\uFF08PNG\\uFF09\"})}),`\n`,(0,l.jsx)(e.p,{children:\"JPEG \\u4E0D\\u652F\\u6301\\u900F\\u660E\\u5EA6\\uFF0C\\u5982\\u679C\\u7528\\u6237\\u4E0A\\u4F20 PNG\\uFF0C\\u5F97\\u5224\\u65AD\\u662F\\u5426\\u9700\\u8981\\u4FDD\\u7559\\u900F\\u660E\\uFF1A\"}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"if\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (file.type \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"===\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" 'image/png'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  canvas.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"toBlob\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"blob\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {}, \"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'image/png'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"); \"}),(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// PNG \\u65E0\\u8D28\\u91CF\\u53C2\\u6570\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"} \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"else\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  canvas.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"toBlob\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"blob\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {}, \"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'image/jpeg'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0.7\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})}),`\n`,(0,l.jsx)(e.h3,{id:\"3-\\u9884\\u89C8\\u4F18\\u5316\",children:(0,l.jsx)(e.a,{href:\"#3-\\u9884\\u89C8\\u4F18\\u5316\",children:\"3. \\u9884\\u89C8\\u4F18\\u5316\"})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u522B\\u76F4\\u63A5\\u628A\\u5927\\u56FE\\u585E\\u5230 DOM \\u91CC\\uFF0C\\u53EF\\u80FD\\u4F1A\\u5361\\u987F\\u3002\\u5148\\u538B\\u7F29\\u540E\\u518D\\u663E\\u793A\\uFF1A\"}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" previewImg\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" document.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"createElement\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'img'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"previewImg.src \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" URL\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"createObjectURL\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(blob);\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"document.body.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"appendChild\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(previewImg);\"})]})]})})}),`\n`,(0,l.jsx)(e.h3,{id:\"4-\\u5F02\\u5E38\\u5904\\u7406\",children:(0,l.jsx)(e.a,{href:\"#4-\\u5F02\\u5E38\\u5904\\u7406\",children:\"4. \\u5F02\\u5E38\\u5904\\u7406\"})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u7528\\u6237\\u53EF\\u80FD\\u4F1A\\u4F20\\u4E2A\\u201C\\u5047\\u56FE\\u7247\\u201D\\uFF08\\u6BD4\\u5982\\u6539\\u4E86\\u540E\\u7F00\\u7684\\u6587\\u672C\\u6587\\u4EF6\\uFF09\\uFF0C\\u5F97\\u52A0\\u4E2A\\u6821\\u9A8C\\uFF1A\"}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"if\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"!\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"file.type.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"startsWith\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'image/'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\")) {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"  alert\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u8FD9\\u4E0D\\u662F\\u56FE\\u7247\\u554A\\uFF0C\\u5144\\u5F1F\\uFF0C\\u522B\\u9017\\u6211\\uFF01'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})}),`\n`,(0,l.jsx)(e.h3,{id:\"5-\\u6027\\u80FD\\u4F18\\u5316web-worker\",children:(0,l.jsx)(e.a,{href:\"#5-\\u6027\\u80FD\\u4F18\\u5316web-worker\",children:\"5. \\u6027\\u80FD\\u4F18\\u5316\\uFF1AWeb Worker\"})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u5982\\u679C\\u56FE\\u7247\\u5F88\\u5927\\uFF0C\\u538B\\u7F29\\u53EF\\u80FD\\u4F1A\\u963B\\u585E\\u4E3B\\u7EBF\\u7A0B\\u3002\\u53EF\\u4EE5\\u7528 Web Worker \\u628A\\u8BA1\\u7B97\\u4E22\\u5230\\u540E\\u53F0\\uFF1A\"}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" worker\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" Worker\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'compressWorker.js'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"worker.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"postMessage\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"({ file, maxWidth: \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"800\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", quality: \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0.7\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" });\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"worker.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"onmessage\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"e\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" blob\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" e.data;\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"  // \\u5904\\u7406 blob\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"};\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"compressWorker.js\"})})})}),\" \\u91CC\\u653E\\u538B\\u7F29\\u903B\\u8F91\\uFF0C\\u4E3B\\u7EBF\\u7A0B\\u5C31\\u89E3\\u653E\\u4E86\\uFF0C\\u50CF\\u4E2A\\u7529\\u624B\\u638C\\u67DC\\u4E00\\u6837\\u8F7B\\u677E \\u{1F60E}\\u3002\"]}),`\n`,(0,l.jsx)(e.h2,{id:\"\\u5E7D\\u9ED8\\u5C0F\\u5F69\\u86CB\",children:(0,l.jsx)(e.a,{href:\"#\\u5E7D\\u9ED8\\u5C0F\\u5F69\\u86CB\",children:\"\\u5E7D\\u9ED8\\u5C0F\\u5F69\\u86CB\"})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u6709\\u6B21\\u6211\\u5FD8\\u4E86\\u52A0\\u7C7B\\u578B\\u6821\\u9A8C\\uFF0C\\u7ED3\\u679C\\u7528\\u6237\\u4E0A\\u4F20\\u4E86\\u4E2A 50MB \\u7684 PDF\\uFF0CCanvas \\u76F4\\u63A5\\u201C\\u7F62\\u5DE5\\u201D\\uFF0C\\u6D4F\\u89C8\\u5668\\u5361\\u6210 PPT\\u3002\\u540E\\u6765\\u6211\\u52A0\\u4E86\\u4E2A\\u63D0\\u793A\\uFF1A\\u201C\\u670B\\u53CB\\uFF0C\\u8FD9\\u4E0D\\u662F\\u56FE\\u7247\\uFF0C\\u662F\\u4F60\\u7684\\u4EBA\\u751F\\u56DE\\u5FC6\\u5F55\\u5417\\uFF1F\\u201D \\u7528\\u6237\\u4F53\\u9A8C\\u77AC\\u95F4\\u63D0\\u5347\\uFF0C\\u54C8\\u54C8\\uFF01\"}),`\n`,(0,l.jsx)(e.h2,{id:\"\\u603B\\u7ED3\",children:(0,l.jsx)(e.a,{href:\"#\\u603B\\u7ED3\",children:\"\\u603B\\u7ED3\"})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u56FE\\u7247\\u4E0A\\u4F20\\u548C\\u538B\\u7F29\\u770B\\u4F3C\\u7B80\\u5355\\uFF0C\\u4F46\\u7EC6\\u8282\\u591A\\u5F97\\u50CF\\u4E2A\\u201C\\u4FC4\\u7F57\\u65AF\\u5957\\u5A03\\u201D\\u3002\\u901A\\u8FC7 File API \\u8BFB\\u53D6\\u6587\\u4EF6\\u3001Canvas \\u52A0\\u5DE5\\u56FE\\u7247\\uFF0C\\u518D\\u52A0\\u4E0A\\u52A8\\u6001\\u53C2\\u6570\\u548C\\u5F02\\u5E38\\u5904\\u7406\\uFF0C\\u4F60\\u5C31\\u80FD\\u6253\\u9020\\u4E00\\u4E2A\\u4E1D\\u6ED1\\u53C8\\u9AD8\\u6548\\u7684\\u529F\\u80FD\\u3002\\u5E0C\\u671B\\u8FD9\\u7BC7\\u6587\\u7AE0\\u80FD\\u5E2E\\u4F60\\u5728\\u4E0B\\u4E2A\\u9879\\u76EE\\u91CC\\u5927\\u5C55\\u8EAB\\u624B\\uFF0C\\u5C11\\u8E29\\u5751\\uFF0C\\u591A\\u51FA\\u5F69\\uFF01\"}),`\n`,(0,l.jsx)(e.p,{children:\"\\u6709\\u4EC0\\u4E48\\u95EE\\u9898\\u6216\\u8005\\u66F4\\u597D\\u7684\\u601D\\u8DEF\\uFF0C\\u6B22\\u8FCE\\u7559\\u8A00\\u8BA8\\u8BBA\\uFF01\\u54B1\\u4EEC\\u4E00\\u8D77\\u628A\\u524D\\u7AEF\\u73A9\\u51FA\\u82B1\\u513F\\u6765\\uFF01\\u{1F31F}\"}),`\n`,(0,l.jsx)(e.hr,{})]})}function h(n={}){let{wrapper:e}=n.components||{};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(t,{...n})}):t(n)}return f(v);})();\n;return Component;"
  },
  "_id": "å‰ç«¯æŠ€æœ¯/å‰ç«¯å¦‚ä½•å®ç°å›¾ç‰‡ä¸Šä¼ åŠå‹ç¼©åŠŸèƒ½.mdx",
  "_raw": {
    "sourceFilePath": "å‰ç«¯æŠ€æœ¯/å‰ç«¯å¦‚ä½•å®ç°å›¾ç‰‡ä¸Šä¼ åŠå‹ç¼©åŠŸèƒ½.mdx",
    "sourceFileName": "å‰ç«¯å¦‚ä½•å®ç°å›¾ç‰‡ä¸Šä¼ åŠå‹ç¼©åŠŸèƒ½.mdx",
    "sourceFileDir": "å‰ç«¯æŠ€æœ¯",
    "contentType": "mdx",
    "flattenedPath": "å‰ç«¯æŠ€æœ¯/å‰ç«¯å¦‚ä½•å®ç°å›¾ç‰‡ä¸Šä¼ åŠå‹ç¼©åŠŸèƒ½"
  },
  "type": "Post",
  "url": "/blog/å‰ç«¯æŠ€æœ¯/å‰ç«¯å¦‚ä½•å®ç°å›¾ç‰‡ä¸Šä¼ åŠå‹ç¼©åŠŸèƒ½"
}