{
  "title": "å‰ç«¯é˜Ÿåˆ—è¯·æ±‚è®¾è®¡ï¼šä»æ··æ²Œåˆ°ä¼˜é›…çš„è¯·æ±‚è‰ºæœ¯ ğŸ¨",
  "date": "2024-06-13T00:00:00.000Z",
  "description": "æ·±å…¥æ¢è®¨å‰ç«¯é˜Ÿåˆ—è¯·æ±‚çš„è®¾è®¡åŸç†ä¸å®è·µï¼Œæ¶µç›–é˜Ÿåˆ—æœºåˆ¶ã€å¹¶å‘æ§åˆ¶ã€é‡è¯•ç­–ç•¥ã€ä¼˜å…ˆçº§ç®¡ç†ç­‰ï¼ŒåŠ©åŠ›å¼€å‘è€…æ‰“é€ å¥å£®ã€é«˜æ•ˆçš„ç½‘ç»œè¯·æ±‚ç³»ç»Ÿã€‚",
  "keywords": "å‰ç«¯å¼€å‘, é˜Ÿåˆ—è¯·æ±‚, å¹¶å‘æ§åˆ¶, è¯·æ±‚ä¼˜åŒ–, é‡è¯•æœºåˆ¶, ä¼˜å…ˆçº§é˜Ÿåˆ—, JavaScript, TypeScript, ç½‘ç»œè¯·æ±‚",
  "author": "æ™“é¾™",
  "image": "/images/hero/queue-request-design.jpg",
  "tags": [
    "Frontend",
    "JavaScript",
    "TypeScript",
    "Network"
  ],
  "views": 0,
  "likes": 0,
  "category": "å‰ç«¯æŠ€æœ¯",
  "body": {
    "raw": "\n> â€œå‰ç«¯è¯·æ±‚å°±åƒä¸€åœºäº¤å“ä¹ï¼šæ²¡æœ‰æŒ‡æŒ¥å®¶ï¼Œä¹æ‰‹ä»¬å„è‡ªä¹±å¥ï¼Œç»“æœåªèƒ½æ˜¯å™ªéŸ³ï¼›æœ‰äº†é˜Ÿåˆ—è®¾è®¡ï¼Œè¯·æ±‚æ‰èƒ½å¥å‡ºå’Œè°çš„ä¹ç« ã€‚â€ â€”â€” æŸä¸æ„¿é€éœ²å§“åçš„å‰ç«¯å¼€å‘è€…ï¼ˆå¯èƒ½æ˜¯æˆ‘ï¼‰\n\nåœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œç½‘ç»œè¯·æ±‚æ˜¯ä¸å¯é¿å…çš„æ ¸å¿ƒç¯èŠ‚ã€‚æ— è®ºæ˜¯æ‹‰å–ç”¨æˆ·æ•°æ®ã€ä¸Šä¼ æ–‡ä»¶ï¼Œè¿˜æ˜¯å®æ—¶åŒæ­¥æ¶ˆæ¯ï¼Œè¯·æ±‚çš„æ€§èƒ½ä¸ç¨³å®šæ€§ç›´æ¥å½±å“ç”¨æˆ·ä½“éªŒã€‚ç„¶è€Œï¼Œå½“è¯·æ±‚æ•°é‡æ¿€å¢ã€åœºæ™¯å¤æ‚åŒ–æ—¶ï¼Œå¼€å‘è€…å¸¸å¸¸ä¼šé™·å…¥ä¸€ç§â€œè¯·æ±‚æ··æ²Œâ€ï¼šæ¥å£è¶…è½½ã€å“åº”å»¶è¿Ÿã€å¤±è´¥é‡è¯•å¤±æ§â€¦â€¦å°±åƒä¸€ä¸ªæ²¡æœ‰çº¢ç»¿ç¯çš„åå­—è·¯å£ï¼Œè½¦è¾†ï¼ˆè¯·æ±‚ï¼‰æŒ¤æˆä¸€å›¢ï¼Œè°ä¹ŸåŠ¨ä¸äº†ã€‚ğŸ˜“\n\nä¸ºäº†è®©è¯·æ±‚ä»â€œæ··æ²Œâ€èµ°å‘â€œä¼˜é›…â€ï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥**é˜Ÿåˆ—è¯·æ±‚è®¾è®¡**ã€‚è¿™ä¸ä»…æ˜¯ä¸€ä¸ªæŠ€æœ¯é—®é¢˜ï¼Œæ›´æ˜¯ä¸€é—¨è‰ºæœ¯ï¼šå¦‚ä½•åœ¨æœ‰é™çš„èµ„æºä¸‹ï¼Œè®©æ¯ä¸ªè¯·æ±‚éƒ½äº•ç„¶æœ‰åºã€ç‰©å°½å…¶ç”¨ï¼Ÿæœ¬æ–‡å°†å¸¦ä½ æ·±å…¥é˜Ÿåˆ—è¯·æ±‚çš„åŸç†ä¸å®è·µï¼Œä»åŸºç¡€æ¦‚å¿µåˆ°é«˜çº§å®ç°ï¼Œé…ä»¥æ¸…æ™°çš„ä»£ç ç¤ºä¾‹ã€ç±»æ¯”è¯´æ˜å’Œå®ç”¨å»ºè®®ï¼ŒåŠ©ä½ åœ¨å‰ç«¯å¼€å‘ä¸­æ¸¸åˆƒæœ‰ä½™ã€‚\n\n## ä¸ºä»€ä¹ˆéœ€è¦é˜Ÿåˆ—è¯·æ±‚ï¼ŸğŸ¤”\n\nåœ¨æ¢è®¨é˜Ÿåˆ—è®¾è®¡ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥èŠèŠä¸ºä»€ä¹ˆéœ€è¦å®ƒã€‚ä»¥ä¸‹æ˜¯å‡ ä¸ªå¸¸è§çš„â€œè¯·æ±‚ç—›ç‚¹â€ï¼Œçœ‹çœ‹ä½ æ˜¯å¦ä¸­æ‹›ï¼š\n\n- **å¹¶å‘è¿‡è½½**ï¼šä¸€æ¬¡æ€§å‘å‡ºå‡ åä¸ªè¯·æ±‚ï¼ŒæœåŠ¡å™¨ç›´æ¥â€œç´¯ç˜«â€ï¼Œå“åº”æ—¶é—´é£™å‡ã€‚\n- **èµ„æºç«äº‰**ï¼šå¤šä¸ªè¯·æ±‚æŠ¢å æœ‰é™çš„æµè§ˆå™¨è¿æ¥ï¼Œé€ æˆé˜»å¡æˆ–å¤±è´¥ã€‚\n- **å¤±è´¥é‡è¯•å¤±æ§**ï¼šè¯·æ±‚å¤±è´¥åç›²ç›®é‡è¯•ï¼Œå¯¼è‡´â€œé›ªå´©æ•ˆåº”â€ã€‚\n- **ä¼˜å…ˆçº§æ··ä¹±**ï¼šå…³é”®è¯·æ±‚ï¼ˆå¦‚æ”¯ä»˜ç¡®è®¤ï¼‰è¢«åŸ‹æ²¡åœ¨æ— å…³ç´§è¦çš„è¯·æ±‚ï¼ˆå¦‚æ—¥å¿—ä¸Šä¼ ï¼‰ä¸­ã€‚\n- **å¤æ‚ä¾èµ–**ï¼šæŸäº›è¯·æ±‚éœ€è¦ç­‰å¾…å…¶ä»–è¯·æ±‚çš„ç»“æœï¼Œé€»è¾‘ä¹±å¦‚éº»ã€‚\n\nè¿™äº›é—®é¢˜å°±åƒå¨æˆ¿é‡Œçš„ä¸€åœºç¾éš¾ï¼šä½ åŒæ—¶ç…é¸¡è›‹ã€ç…®é¢æ¡ã€çƒ¤é¢åŒ…ï¼Œç»“æœé¸¡è›‹ç³Šäº†ï¼Œé¢æ¡æº¢äº†ï¼Œé¢åŒ…æœºè¿˜å†’çƒŸäº†ã€‚ğŸ”¥ è€Œé˜Ÿåˆ—è¯·æ±‚è®¾è®¡å°±åƒä¸€ä¸ªèªæ˜çš„å¨å¸ˆï¼Œèƒ½åˆç†å®‰æ’æ¯é“èœçš„çƒ¹é¥ªé¡ºåºï¼Œè®©å¨æˆ¿è¿è½¬å¾—äº•äº•æœ‰æ¡ã€‚\n\n### é˜Ÿåˆ—è¯·æ±‚çš„æ ¸å¿ƒç›®æ ‡\n\né˜Ÿåˆ—è¯·æ±‚è®¾è®¡çš„ç»ˆæç›®æ ‡æ˜¯ï¼š**é«˜æ•ˆã€ç¨³å®šã€å¯æ§**ã€‚å…·ä½“æ¥è¯´ï¼Œå®ƒè¦è§£å†³ä»¥ä¸‹é—®é¢˜ï¼š\n\n1. **æ§åˆ¶å¹¶å‘**ï¼šé™åˆ¶åŒæ—¶å‘é€çš„è¯·æ±‚æ•°é‡ï¼Œé¿å…æœåŠ¡å™¨è¿‡è½½ã€‚\n2. **ç®¡ç†ä¼˜å…ˆçº§**ï¼šç¡®ä¿é‡è¦è¯·æ±‚ä¼˜å…ˆæ‰§è¡Œã€‚\n3. **å¤„ç†å¤±è´¥**ï¼šé€šè¿‡é‡è¯•ã€é™çº§ç­‰ç­–ç•¥æé«˜æˆåŠŸç‡ã€‚\n4. **ä¼˜åŒ–æ€§èƒ½**ï¼šå‡å°‘ä¸å¿…è¦çš„è¯·æ±‚ï¼Œåˆå¹¶ç›¸ä¼¼è¯·æ±‚ã€‚\n5. **ç®€åŒ–é€»è¾‘**ï¼šä¸ºå¤æ‚ä¾èµ–å…³ç³»æä¾›æ¸…æ™°çš„è°ƒåº¦æ–¹æ¡ˆã€‚\n\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ä»**åŸºç¡€æ¦‚å¿µ**å¼€å§‹ï¼Œé€æ­¥æ·±å…¥åˆ°**å®ç°åŸç†**ã€**é«˜çº§åœºæ™¯**å’Œ**æœ€ä½³å®è·µ**ï¼Œå¸¦ä½ å…¨é¢æŒæ¡é˜Ÿåˆ—è¯·æ±‚çš„è®¾è®¡ä¹‹é“ã€‚\n\n## åŸºç¡€æ¦‚å¿µï¼šé˜Ÿåˆ—è¯·æ±‚çš„â€œæ‹¼å›¾â€ ğŸ§©\n\nè¦è®¾è®¡ä¸€ä¸ªé˜Ÿåˆ—è¯·æ±‚ç³»ç»Ÿï¼Œæˆ‘ä»¬éœ€è¦å…ˆææ¸…æ¥šå‡ ä¸ªæ ¸å¿ƒæ¦‚å¿µã€‚è¿™äº›æ¦‚å¿µå°±åƒæ‹¼å›¾çš„æ¯ä¸€å—ï¼Œæ‹¼å‡‘åœ¨ä¸€èµ·æ‰èƒ½å½¢æˆå®Œæ•´çš„ç”»é¢ã€‚\n\n### 1. ä»€ä¹ˆæ˜¯é˜Ÿåˆ—ï¼Ÿ\n\né˜Ÿåˆ—ï¼ˆQueueï¼‰æ˜¯ä¸€ç§**å…ˆè¿›å…ˆå‡ºï¼ˆFIFO, First-In-First-Outï¼‰**çš„æ•°æ®ç»“æ„ï¼Œå°±åƒæ’é˜Ÿä¹°å¥¶èŒ¶ï¼šå…ˆæ¥çš„å…ˆæœåŠ¡ï¼Œåæ¥çš„è€å¿ƒç­‰ç€ã€‚é˜Ÿåˆ—è¯·æ±‚çš„æ ¸å¿ƒæ˜¯å°†è¯·æ±‚ä»»åŠ¡æ”¾å…¥é˜Ÿåˆ—ï¼ŒæŒ‰é¡ºåºé€ä¸€å¤„ç†ã€‚\n\nä½†å‰ç«¯çš„é˜Ÿåˆ—è¯·æ±‚å¾€å¾€æ¯”ç®€å•çš„FIFOå¤æ‚å¾—å¤šã€‚æˆ‘ä»¬å¯èƒ½éœ€è¦ï¼š\n\n- **ä¼˜å…ˆçº§é˜Ÿåˆ—**ï¼šVIPå®¢æˆ·ï¼ˆé«˜ä¼˜å…ˆçº§è¯·æ±‚ï¼‰å¯ä»¥æ’é˜Ÿã€‚\n- **å¹¶å‘é˜Ÿåˆ—**ï¼šå…è®¸ä¸€å®šæ•°é‡çš„è¯·æ±‚åŒæ—¶å¤„ç†ï¼Œåƒå¤šæ¡æ”¶é“¶å°åŒæ—¶æœåŠ¡ã€‚\n- **å¼‚æ­¥é˜Ÿåˆ—**ï¼šæ¯ä¸ªè¯·æ±‚çš„æ‰§è¡Œæ˜¯å¼‚æ­¥çš„ï¼Œå®Œæˆåé€šçŸ¥é˜Ÿåˆ—ç»§ç»­å¤„ç†ä¸‹ä¸€ä¸ªã€‚\n\n### 2. å¹¶å‘æ§åˆ¶\n\næµè§ˆå™¨çš„HTTP/1.1è¿æ¥æ•°é€šå¸¸é™åˆ¶åœ¨6~8ä¸ªï¼ˆHTTP/2æœ‰æ‰€æå‡ï¼Œä½†ä»æœ‰ä¸Šé™ï¼‰ã€‚å¦‚æœä¸€æ¬¡æ€§å‘å‡º50ä¸ªè¯·æ±‚ï¼Œå¤§éƒ¨åˆ†ä¼šè¢«é˜»å¡ï¼Œä¸¥é‡å½±å“æ€§èƒ½ã€‚å¹¶å‘æ§åˆ¶çš„æœ¬è´¨æ˜¯**é™åˆ¶åŒæ—¶æ‰§è¡Œçš„è¯·æ±‚æ•°é‡**ï¼Œå°±åƒé¤å…é™åˆ¶åŒæ—¶å°±é¤çš„é¡¾å®¢æ•°é‡ï¼Œé¿å…æœåŠ¡å‘˜å¿™ä¸è¿‡æ¥ã€‚\n\n### 3. é‡è¯•æœºåˆ¶\n\nç½‘ç»œè¯·æ±‚ä¸å¯é¿å…ä¼šå¤±è´¥ï¼ˆç½‘ç»œæŠ–åŠ¨ã€æœåŠ¡å™¨è¶…æ—¶ç­‰ï¼‰ã€‚é‡è¯•æœºåˆ¶æ˜¯é˜Ÿåˆ—è¯·æ±‚çš„â€œå®‰å…¨ç½‘â€ï¼Œé€šè¿‡åˆç†è®¾ç½®é‡è¯•æ¬¡æ•°ã€é—´éš”ç­‰å‚æ•°ï¼Œç¡®ä¿è¯·æ±‚å°½å¯èƒ½æˆåŠŸï¼ŒåŒæ—¶é¿å…è¿‡åº¦é‡è¯•å¯¼è‡´æœåŠ¡å™¨é›ªå´©ã€‚\n\n### 4. ä¼˜å…ˆçº§ç®¡ç†\n\nå¹¶éæ‰€æœ‰è¯·æ±‚ç”Ÿè€Œå¹³ç­‰ã€‚æ”¯ä»˜è¯·æ±‚æ˜¾ç„¶æ¯”å¹¿å‘ŠåŠ è½½æ›´é‡è¦ï¼Œä¼˜å…ˆçº§ç®¡ç†èƒ½ç¡®ä¿å…³é”®è¯·æ±‚ä¼˜å…ˆæ‰§è¡Œï¼Œå°±åƒåŒ»é™¢çš„æ€¥è¯Šå®¤æ€»æ˜¯ä¼˜å…ˆå¤„ç†é‡ç—‡æ‚£è€…ã€‚\n\n### 5. è¯·æ±‚åˆå¹¶ä¸å»é‡\n\nå¦‚æœå¤šä¸ªç»„ä»¶åŒæ—¶è¯·æ±‚ç›¸åŒçš„æ¥å£ï¼ˆä¾‹å¦‚ç”¨æˆ·ä¿¡æ¯ï¼‰ï¼Œå¯ä»¥åˆå¹¶æˆä¸€ä¸ªè¯·æ±‚ï¼Œå‡å°‘æœåŠ¡å™¨å‹åŠ›ã€‚å»é‡åˆ™æ˜¯é¿å…é‡å¤å‘é€ç›¸åŒçš„è¯·æ±‚ï¼Œå°±åƒç‚¹å¤–å–æ—¶ä¸ä¼šé‡å¤ä¸‹å•åŒä¸€ä»½é¤ã€‚\n\n### 6. ä¾èµ–ç®¡ç†\n\næŸäº›è¯·æ±‚éœ€è¦ç­‰å¾…å…¶ä»–è¯·æ±‚çš„ç»“æœï¼Œä¾‹å¦‚å…ˆè·å–ç”¨æˆ·IDï¼Œå†æ ¹æ®IDè¯·æ±‚ç”¨æˆ·è¯¦æƒ…ã€‚é˜Ÿåˆ—éœ€è¦æ”¯æŒä¾èµ–å…³ç³»ï¼Œå°±åƒçƒ¹é¥ªæ—¶è¦å…ˆç…®å¥½ç±³é¥­å†ç‚’èœã€‚\n\nä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„è¡¨æ ¼ï¼Œæ€»ç»“è¿™äº›æ ¸å¿ƒæ¦‚å¿µåŠå…¶ä½œç”¨ï¼š\n\n| **æ¦‚å¿µ**           | **ä½œç”¨**                                                                 | **ç±»æ¯”**                     |\n|--------------------|--------------------------------------------------------------------------|------------------------------|\n| é˜Ÿåˆ—              | æŒ‰é¡ºåºç®¡ç†è¯·æ±‚ä»»åŠ¡ï¼Œé¿å…æ— åºç«äº‰                                         | æ’é˜Ÿä¹°å¥¶èŒ¶                  |\n| å¹¶å‘æ§åˆ¶         | é™åˆ¶åŒæ—¶æ‰§è¡Œçš„è¯·æ±‚æ•°ï¼Œæå‡æ€§èƒ½                                           | é¤å…é™åˆ¶åŒæ—¶å°±é¤äººæ•°         |\n| é‡è¯•æœºåˆ¶         | å¤„ç†è¯·æ±‚å¤±è´¥ï¼Œæé«˜æˆåŠŸç‡                                                 | æ¸¸æˆé‡Œçš„â€œå†è¯•ä¸€æ¬¡â€æŒ‰é’®       |\n| ä¼˜å…ˆçº§ç®¡ç†       | ç¡®ä¿é‡è¦è¯·æ±‚ä¼˜å…ˆæ‰§è¡Œ                                                     | åŒ»é™¢æ€¥è¯Šå®¤ä¼˜å…ˆé‡ç—‡æ‚£è€…       |\n| è¯·æ±‚åˆå¹¶ä¸å»é‡   | å‡å°‘é‡å¤è¯·æ±‚ï¼Œä¼˜åŒ–æœåŠ¡å™¨è´Ÿè½½                                             | ç‚¹å¤–å–åˆå¹¶ç›¸åŒè®¢å•           |\n| ä¾èµ–ç®¡ç†         | åè°ƒè¯·æ±‚é—´çš„ä¾èµ–å…³ç³»ï¼Œä¿è¯é€»è¾‘æ­£ç¡®                                       | å…ˆç…®ç±³é¥­å†ç‚’èœ              |\n\n*ğŸ“Œ å°Tipsï¼šç†è§£è¿™äº›æ¦‚å¿µæ˜¯è®¾è®¡é˜Ÿåˆ—çš„ç¬¬ä¸€æ­¥ã€‚å»ºè®®åœ¨å®é™…é¡¹ç›®ä¸­å…ˆä»ç®€å•çš„FIFOé˜Ÿåˆ—å…¥æ‰‹ï¼Œé€æ­¥å¼•å…¥å¹¶å‘æ§åˆ¶å’Œä¼˜å…ˆçº§ç®¡ç†ï¼Œå¾ªåºæ¸è¿›ã€‚*\n\n## å®ç°åŸç†ï¼šä»ç†è®ºåˆ°ä»£ç  ğŸ› ï¸\n\nç†è®ºè®²å®Œäº†ï¼Œæ¥ä¸‹æ¥è¿›å…¥ç¡¬æ ¸éƒ¨åˆ†ï¼šå¦‚ä½•ç”¨ä»£ç å®ç°ä¸€ä¸ªé˜Ÿåˆ—è¯·æ±‚ç³»ç»Ÿï¼Ÿæˆ‘ä»¬å°†ä»ä¸€ä¸ªç®€å•çš„é˜Ÿåˆ—å¼€å§‹ï¼Œé€æ­¥æ‰©å±•åˆ°æ”¯æŒå¹¶å‘ã€ä¼˜å…ˆçº§ã€é‡è¯•ç­‰åŠŸèƒ½çš„å®Œæ•´ç³»ç»Ÿã€‚\n\n### 1. åŸºç¡€é˜Ÿåˆ—å®ç°\n\nè®©æˆ‘ä»¬å…ˆå®ç°ä¸€ä¸ªæœ€ç®€å•çš„**FIFOé˜Ÿåˆ—**ï¼Œæ”¯æŒå¼‚æ­¥è¯·æ±‚çš„é¡ºåºå¤„ç†ã€‚\n\n```typescript\nclass RequestQueue {\n  private queue: Array<() => Promise<any>> = [];\n  private isProcessing: boolean = false;\n\n  // æ·»åŠ è¯·æ±‚åˆ°é˜Ÿåˆ—\n  add(request: () => Promise<any>) {\n    this.queue.push(request);\n    this.processNext();\n  }\n\n  // å¤„ç†ä¸‹ä¸€ä¸ªè¯·æ±‚\n  private async processNext() {\n    if (this.isProcessing || this.queue.length === 0) return;\n\n    this.isProcessing = true;\n    const request = this.queue.shift(); // å–å‡ºç¬¬ä¸€ä¸ªè¯·æ±‚\n    try {\n      await request(); // æ‰§è¡Œè¯·æ±‚\n    } catch (error) {\n      console.error('Request failed:', error);\n    } finally {\n      this.isProcessing = false;\n      this.processNext(); // ç»§ç»­å¤„ç†ä¸‹ä¸€ä¸ª\n    }\n  }\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nconst queue = new RequestQueue();\n\nqueue.add(() => fetch('/api/user').then(res => res.json()));\nqueue.add(() => fetch('/api/orders').then(res => res.json()));\n```\n\n**å·¥ä½œåŸç†**ï¼š\n\n1. `add`æ–¹æ³•å°†è¯·æ±‚å‡½æ•°æ¨å…¥é˜Ÿåˆ—ï¼Œå¹¶å°è¯•è§¦å‘å¤„ç†ã€‚\n2. `processNext`æ–¹æ³•æ£€æŸ¥æ˜¯å¦æ­£åœ¨å¤„ç†è¯·æ±‚ï¼Œè‹¥å¦ï¼Œåˆ™å–å‡ºé˜Ÿåˆ—å¤´çš„è¯·æ±‚æ‰§è¡Œã€‚\n3. ä½¿ç”¨`isProcessing`æ ‡å¿—ç¡®ä¿åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªè¯·æ±‚åœ¨å¤„ç†ã€‚\n4. è¯·æ±‚å®Œæˆåï¼ˆæ— è®ºæˆåŠŸæˆ–å¤±è´¥ï¼‰ï¼Œç»§ç»­å¤„ç†ä¸‹ä¸€ä¸ªã€‚\n\n**ç±»æ¯”**ï¼šè¿™å°±åƒä¸€ä¸ªå•äººæ”¶é“¶å°çš„å¥¶èŒ¶åº—ï¼Œé¡¾å®¢ä¸€ä¸ªæ¥ä¸€ä¸ªç‚¹å•ï¼Œæ”¶é“¶å‘˜å¤„ç†å®Œä¸€ä¸ªå†æœåŠ¡ä¸‹ä¸€ä¸ªã€‚\n\n*ğŸ“Œ å°Tipsï¼šåŸºç¡€é˜Ÿåˆ—é€‚åˆç®€å•åœºæ™¯ï¼Œä½†ä¸æ”¯æŒå¹¶å‘å’Œä¼˜å…ˆçº§ã€‚åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå»ºè®®æ ¹æ®éœ€æ±‚æ‰©å±•åŠŸèƒ½ï¼Œé¿å…â€œä¸€åˆ€åˆ‡â€ã€‚*\n\n### 2. æ”¯æŒå¹¶å‘æ§åˆ¶\n\nå•çº¿ç¨‹é˜Ÿåˆ—å¤ªæ…¢äº†ï¼ç°ä»£æµè§ˆå™¨æ”¯æŒå¤šä¸ªå¹¶å‘è¿æ¥ï¼Œæˆ‘ä»¬éœ€è¦è®©é˜Ÿåˆ—æ”¯æŒ**å¹¶å‘è¯·æ±‚**ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªæ”¯æŒæœ€å¤§å¹¶å‘æ•°çš„é˜Ÿåˆ—å®ç°ï¼š\n\n```typescript\nclass ConcurrentRequestQueue {\n  private queue: Array<() => Promise<any>> = [];\n  private activeCount: number = 0;\n  private maxConcurrency: number;\n\n  constructor(maxConcurrency: number = 6) {\n    this.maxConcurrency = maxConcurrency;\n  }\n\n  add(request: () => Promise<any>) {\n    this.queue.push(request);\n    this.processQueue();\n  }\n\n  private async processQueue() {\n    if (this.activeCount >= this.maxConcurrency || this.queue.length === 0) return;\n\n    this.activeCount++;\n    const request = this.queue.shift();\n    try {\n      await request();\n    } catch (error) {\n      console.error('Request failed:', error);\n    } finally {\n      this.activeCount--;\n      this.processQueue(); // ç»§ç»­å¤„ç†\n    }\n  }\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nconst queue = new ConcurrentRequestQueue(3); // æœ€å¤§å¹¶å‘3\nqueue.add(() => fetch('/api/user').then(res => res.json()));\nqueue.add(() => fetch('/api/orders').then(res => res.json()));\nqueue.add(() => fetch('/api/products').then(res => res.json()));\n```\n\n**æ”¹è¿›ç‚¹**ï¼š\n\n1. å¼•å…¥`maxConcurrency`å‚æ•°ï¼Œæ§åˆ¶æœ€å¤§å¹¶å‘æ•°ã€‚\n2. ä½¿ç”¨`activeCount`è·Ÿè¸ªå½“å‰æ­£åœ¨æ‰§è¡Œçš„è¯·æ±‚æ•°ã€‚\n3. å½“æœ‰ç©ºé—²â€œæ§½ä½â€æ—¶ï¼Œç«‹å³å¤„ç†ä¸‹ä¸€ä¸ªè¯·æ±‚ã€‚\n\n**ç±»æ¯”**ï¼šè¿™å°±åƒä¸€å®¶å¥¶èŒ¶åº—å¼€äº†ä¸‰ä¸ªæ”¶é“¶å°ï¼ŒåŒæ—¶æœåŠ¡ä¸‰ä½é¡¾å®¢ï¼Œå…¶ä»–äººç»§ç»­æ’é˜Ÿç­‰ç€ã€‚\n\n*ğŸ“Œ å°Tipsï¼šå¹¶å‘æ•°çš„é€‰æ‹©è¦æ ¹æ®æœåŠ¡å™¨èƒ½åŠ›å’Œåœºæ™¯è°ƒæ•´ã€‚HTTP/1.1å»ºè®®6ï¼ŒHTTP/2å¯é€‚å½“æé«˜ï¼Œä½†è¿‡é«˜å¯èƒ½å¼•å‘æœåŠ¡å™¨é™æµã€‚*\n\n### 3. æ·»åŠ ä¼˜å…ˆçº§æ”¯æŒ\n\nç°å®ä¸­ï¼Œè¯·æ±‚çš„é‡è¦æ€§ä¸åŒã€‚æˆ‘ä»¬éœ€è¦ä¸€ä¸ª**ä¼˜å…ˆçº§é˜Ÿåˆ—**ï¼Œè®©é«˜ä¼˜å…ˆçº§è¯·æ±‚æ’é˜Ÿã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªå®ç°ï¼š\n\n```typescript\ninterface QueueTask {\n  request: () => Promise<any>;\n  priority: number; // è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ï¼Œ0ä¸ºæœ€é«˜\n}\n\nclass PriorityRequestQueue {\n  private queue: QueueTask[] = [];\n  private activeCount: number = 0;\n  private maxConcurrency: number;\n\n  constructor(maxConcurrency: number = 6) {\n    this.maxConcurrency = maxConcurrency;\n  }\n\n  add(request: () => Promise<any>, priority: number = 10) {\n    this.queue.push({ request, priority });\n    this.queue.sort((a, b) => a.priority - b.priority); // æŒ‰ä¼˜å…ˆçº§æ’åº\n    this.processQueue();\n  }\n\n  private async processQueue() {\n    if (this.activeCount >= this.maxConcurrency || this.queue.length === 0) return;\n\n    this.activeCount++;\n    const task = this.queue.shift();\n    try {\n      await task.request();\n    } catch (error) {\n      console.error('Request failed:', error);\n    } finally {\n      this.activeCount--;\n      this.processQueue();\n    }\n  }\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nconst queue = new PriorityRequestQueue(3);\nqueue.add(() => fetch('/api/payment').then(res => res.json()), 0); // é«˜ä¼˜å…ˆçº§\nqueue.add(() => fetch('/api/logs').then(res => res.json()), 10); // ä½ä¼˜å…ˆçº§\n```\n\n**æ”¹è¿›ç‚¹**ï¼š\n\n1. æ¯ä¸ªä»»åŠ¡å¸¦æœ‰ä¸€ä¸ª`priority`å­—æ®µï¼Œå€¼è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ã€‚\n2. æ¯æ¬¡æ·»åŠ ä»»åŠ¡åï¼ŒæŒ‰ä¼˜å…ˆçº§é‡æ–°æ’åºé˜Ÿåˆ—ã€‚\n3. é«˜ä¼˜å…ˆçº§ä»»åŠ¡æ€»æ˜¯å…ˆæ‰§è¡Œã€‚\n\n**ç±»æ¯”**ï¼šå°±åƒæœºåœºå®‰æ£€ï¼ŒVIPä¹˜å®¢èµ°ç»¿è‰²é€šé“ï¼Œæ™®é€šä¹˜å®¢è€è€å®å®æ’é˜Ÿã€‚\n\n*ğŸ“Œ å°Tipsï¼šä¼˜å…ˆçº§è®¾è®¡è¦è°¨æ…ï¼Œè¿‡å¤šä¼˜å…ˆçº§å¯èƒ½å¯¼è‡´ä½ä¼˜å…ˆçº§è¯·æ±‚â€œé¥¿æ­»â€ã€‚å»ºè®®å°†ä¼˜å…ˆçº§æ§åˆ¶åœ¨3~5ä¸ªçº§åˆ«ã€‚*\n\n### 4. å®ç°é‡è¯•æœºåˆ¶\n\nè¯·æ±‚å¤±è´¥æ˜¯å¸¸æ€ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºé˜Ÿåˆ—æ·»åŠ **é‡è¯•æœºåˆ¶**ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªå¸¦é‡è¯•çš„é˜Ÿåˆ—ï¼š\n\n```typescript\ninterface QueueTask {\n  request: () => Promise<any>;\n  priority: number;\n  retries: number;\n  maxRetries: number;\n}\n\nclass RetryRequestQueue {\n  private queue: QueueTask[] = [];\n  private activeCount: number = 0;\n  private maxConcurrency: number;\n\n  constructor(maxConcurrency: number = 6) {\n    this.maxConcurrency = maxConcurrency;\n  }\n\n  add(request: () => Promise<any>, priority: number = 10, maxRetries: number = 3) {\n    this.queue.push({ request, priority, retries: 0, maxRetries });\n    this.queue.sort((a, b) => a.priority - b.priority);\n    this.processQueue();\n  }\n\n  private async processQueue() {\n    if (this.activeCount >= this.maxConcurrency || this.queue.length === 0) return;\n\n    this.activeCount++;\n    const task = this.queue.shift();\n    try {\n      await task.request();\n    } catch (error) {\n      task.retries++;\n      if (task.retries <= task.maxRetries) {\n        console.warn(`Retrying ${task.retries}/${task.maxRetries}...`);\n        this.queue.push(task); // å¤±è´¥åé‡æ–°å…¥é˜Ÿ\n        this.queue.sort((a, b) => a.priority - b.priority);\n      } else {\n        console.error('Request failed after retries:', error);\n      }\n    } finally {\n      this.activeCount--;\n      this.processQueue();\n    }\n  }\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nconst queue = new RetryRequestQueue(3);\nqueue.add(\n  () => fetch('/api/unstable').then(res => {\n    if (Math.random() > 0.7) throw new Error('Random failure');\n    return res.json();\n  }),\n  0,\n  3\n);\n```\n\n**æ”¹è¿›ç‚¹**ï¼š\n\n1. æ¯ä¸ªä»»åŠ¡è®°å½•`retries`å’Œ`maxRetries`ã€‚\n2. è¯·æ±‚å¤±è´¥åï¼Œè‹¥æœªè¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°ï¼Œé‡æ–°å…¥é˜Ÿã€‚\n3. ä¿æŒä¼˜å…ˆçº§æ’åºï¼Œé¿å…é‡è¯•ä»»åŠ¡å½±å“å…¶ä»–ä»»åŠ¡ã€‚\n\n**ç±»æ¯”**ï¼šå°±åƒç©è¡—æœºæ¸¸æˆï¼ŒæŠ•å¸å¤±è´¥äº†è¿˜èƒ½å†è¯•å‡ æ¬¡ï¼Œä½†æ€»ä¸èƒ½æ— é™æŠ•å¸å§ï¼Ÿ\n\n*ğŸ“Œ å°Tipsï¼šé‡è¯•é—´éš”å»ºè®®ä½¿ç”¨æŒ‡æ•°é€€é¿ï¼ˆexponential backoffï¼‰ï¼Œé¿å…çŸ­æ—¶é—´å†…é‡å¤å†²å‡»æœåŠ¡å™¨ã€‚*\n\n### 5. è¯·æ±‚åˆå¹¶ä¸å»é‡\n\nå¦‚æœå¤šä¸ªç»„ä»¶åŒæ—¶è¯·æ±‚åŒä¸€æ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡**è¯·æ±‚åˆå¹¶**å‡å°‘æœåŠ¡å™¨å‹åŠ›ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„å®ç°ï¼š\n\n```typescript\ninterface QueueTask {\n  request: () => Promise<any>;\n  priority: number;\n  key: string; // ç”¨äºå»é‡çš„å”¯ä¸€æ ‡è¯†\n}\n\nclass DedupeRequestQueue {\n  private queue: QueueTask[] = [];\n  private activeCount: number = 0;\n  private maxConcurrency: number;\n  private pendingPromises: Map<string, Promise<any>> = new Map();\n\n  constructor(maxConcurrency: number = 6) {\n    this.maxConcurrency = maxConcurrency;\n  }\n\n  add(request: () => Promise<any>, key: string, priority: number = 10) {\n    // å¦‚æœå·²æœ‰ç›¸åŒkeyçš„è¯·æ±‚ï¼Œè¿”å›ç°æœ‰promise\n    if (this.pendingPromises.has(key)) {\n      return this.pendingPromises.get(key);\n    }\n\n    const promise = new Promise(async (resolve, reject) => {\n      this.queue.push({ request, key, priority });\n      this.queue.sort((a, b) => a.priority - b.priority);\n      await this.processQueue();\n      resolve(await request());\n    });\n\n    this.pendingPromises.set(key, promise);\n    return promise;\n  }\n\n  private async processQueue() {\n    if (this.activeCount >= this.maxConcurrency || this.queue.length === 0) return;\n\n    this.activeCount++;\n    const task = this.queue.shift();\n    try {\n      await task.request();\n      this.pendingPromises.delete(task.key);\n    } catch (error) {\n      console.error('Request failed:', error);\n      this.pendingPromises.delete(task.key);\n    } finally {\n      this.activeCount--;\n      this.processQueue();\n    }\n  }\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nconst queue = new DedupeRequestQueue(3);\nconst userRequest = () => fetch('/api/user').then(res => res.json());\nqueue.add(userRequest, 'user', 0);\nqueue.add(userRequest, 'user', 0); // é‡å¤è¯·æ±‚ä¼šè¢«åˆå¹¶\n```\n\n**æ”¹è¿›ç‚¹**ï¼š\n\n1. ä½¿ç”¨`key`æ ‡è¯†è¯·æ±‚çš„å”¯ä¸€æ€§ï¼Œé‡å¤è¯·æ±‚è¿”å›ç›¸åŒçš„promiseã€‚\n2. é€šè¿‡`pendingPromises`ç¼“å­˜æ­£åœ¨å¤„ç†çš„è¯·æ±‚ã€‚\n3. è¯·æ±‚å®Œæˆåæ¸…ç†ç¼“å­˜ã€‚\n\n**ç±»æ¯”**ï¼šå°±åƒç‚¹å¤–å–ï¼ŒåŒä¸€ä¸ªè®¢å•ä¸ä¼šé‡å¤é€åˆ°ï¼Œåªéœ€ç­‰å¾…ä¸€ä»½å°±å¤Ÿäº†ã€‚\n\n*ğŸ“Œ å°Tipsï¼šè¯·æ±‚åˆå¹¶é€‚åˆé«˜é¢‘ã€é‡å¤æ€§é«˜çš„æ¥å£ï¼ˆå¦‚ç”¨æˆ·ä¿¡æ¯ï¼‰ã€‚ä¸ºé¿å…ç¼“å­˜è¿‡æœŸï¼Œå»ºè®®ä¸ºpromiseè®¾ç½®è¶…æ—¶æ¸…ç†æœºåˆ¶ã€‚*\n\n## é«˜çº§åœºæ™¯ï¼šåº”å¯¹å¤æ‚éœ€æ±‚ ğŸš€\n\nåŸºç¡€é˜Ÿåˆ—å·²ç»å¤Ÿç”¨äº†ï¼Œä½†çœŸå®é¡¹ç›®ä¸­æ€»æœ‰ä¸€äº›â€œå¥‡è‘©â€éœ€æ±‚ã€‚ä»¥ä¸‹æ˜¯å‡ ä¸ªé«˜çº§åœºæ™¯çš„è§£å†³æ–¹æ¡ˆã€‚\n\n### 1. ä¾èµ–è¯·æ±‚è°ƒåº¦\n\næŸäº›è¯·æ±‚éœ€è¦ç­‰å¾…å…¶ä»–è¯·æ±‚çš„ç»“æœï¼Œä¾‹å¦‚ï¼š\n\n1. è¯·æ±‚Aï¼šè·å–ç”¨æˆ·IDã€‚\n2. è¯·æ±‚Bï¼šæ ¹æ®ç”¨æˆ·IDè·å–è®¢å•åˆ—è¡¨ã€‚\n\næˆ‘ä»¬å¯ä»¥é€šè¿‡**ä¾èµ–é˜Ÿåˆ—**å®ç°ï¼š\n\n```typescript\ninterface DependentTask {\n  request: () => Promise<any>;\n  dependencies: string[]; // ä¾èµ–çš„ä»»åŠ¡key\n  key: string;\n}\n\nclass DependentRequestQueue {\n  private queue: DependentTask[] = [];\n  private results: Map<string, any> = new Map();\n  private activeCount: number = 0;\n  private maxConcurrency: number;\n\n  constructor(maxConcurrency: number = 6) {\n    this.maxConcurrency = maxConcurrency;\n  }\n\n  add(request: () => Promise<any>, key: string, dependencies: string[] = []) {\n    this.queue.push({ request, key, dependencies });\n    this.processQueue();\n  }\n\n  private async processQueue() {\n    if (this.activeCount >= this.maxConcurrency) return;\n\n    const executableTask = this.queue.find(task =>\n      task.dependencies.every(dep => this.results.has(dep))\n    );\n\n    if (!executableTask) return;\n\n    this.activeCount++;\n    this.queue = this.queue.filter(t => t !== executableTask);\n\n    try {\n      const result = await executableTask.request();\n      this.results.set(executableTask.key, result);\n    } catch (error) {\n      console.error(`Task ${executableTask.key} failed:`, error);\n    } finally {\n      this.activeCount--;\n      this.processQueue();\n    }\n  }\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nconst queue = new DependentRequestQueue(3);\nqueue.add(\n  () => fetch('/api/user').then(res => res.json()),\n  'user'\n);\nqueue.add(\n  () => fetch('/api/orders').then(res => res.json()),\n  'orders',\n  ['user']\n);\n```\n\n**å·¥ä½œåŸç†**ï¼š\n\n1. æ¯ä¸ªä»»åŠ¡å£°æ˜è‡ªå·±çš„`dependencies`ã€‚\n2. åªæœ‰å½“æ‰€æœ‰ä¾èµ–éƒ½å®Œæˆæ—¶ï¼Œä»»åŠ¡æ‰å¯æ‰§è¡Œã€‚\n3. ç»“æœé€šè¿‡`results`ç¼“å­˜ï¼Œä¾›åç»­ä»»åŠ¡ä½¿ç”¨ã€‚\n\n**ç±»æ¯”**ï¼šå°±åƒåšè›‹ç‚’é¥­ï¼Œå…ˆå¾—æœ‰ç±³é¥­ï¼ˆä¾èµ–ï¼‰ï¼Œæ‰èƒ½å¼€å§‹ç‚’ã€‚\n\n*ğŸ“Œ å°Tipsï¼šä¾èµ–é˜Ÿåˆ—é€‚åˆå¤æ‚çš„ä¸šåŠ¡é€»è¾‘ï¼Œä½†è¦è­¦æƒ•å¾ªç¯ä¾èµ–ï¼Œå¯èƒ½å¯¼è‡´é˜Ÿåˆ—å¡æ­»ã€‚*\n\n### 2. åŠ¨æ€ä¼˜å…ˆçº§è°ƒæ•´\n\næœ‰æ—¶ï¼Œè¯·æ±‚çš„ä¼˜å…ˆçº§ä¼šåŠ¨æ€å˜åŒ–ã€‚ä¾‹å¦‚ï¼Œé¡µé¢åˆ‡æ¢åï¼Œå½“å‰é¡µé¢çš„è¯·æ±‚éœ€è¦ä¼˜å…ˆã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å®ç°ï¼š\n\n```typescript\nclass DynamicPriorityQueue {\n  private queue: QueueTask[] = [];\n  private activeCount: number = 0;\n  private maxConcurrency: number;\n\n  constructor(maxConcurrency: number = 6) {\n    this.maxConcurrency = maxConcurrency;\n  }\n\n  add(request: () => Promise<any>, key: string, priority: number = 10) {\n    this.queue.push({ request, key, priority });\n    this.queue.sort((a, b) => a.priority - b.priority);\n    this.processQueue();\n  }\n\n  updatePriority(key: string, newPriority: number) {\n    const task = this.queue.find(t => t.key === key);\n    if (task) {\n      task.priority = newPriority;\n      this.queue.sort((a, b) => a.priority - b.priority);\n    }\n  }\n\n  private async processQueue() {\n    if (this.activeCount >= this.maxConcurrency || this.queue.length === 0) return;\n\n    this.activeCount++;\n    const task = this.queue.shift();\n    try {\n      await task.request();\n    } catch (error) {\n      console.error('Request failed:', error);\n    } finally {\n      this.activeCount--;\n      this.processQueue();\n    }\n  }\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nconst queue = new DynamicPriorityQueue(3);\nqueue.add(() => fetch('/api/page1').then(res => res.json()), 'page1', 10);\nqueue.add(() => fetch('/api/page2').then(res => res.json()), 'page2', 10);\n\n// é¡µé¢åˆ‡æ¢ï¼Œpage2ä¼˜å…ˆçº§æå‡\nqueue.updatePriority('page2', 0);\n```\n\n**ç±»æ¯”**ï¼šå°±åƒæœºåœºç™»æœºï¼ŒåŸæœ¬æ™®é€šèˆ±çš„ä¹˜å®¢çªç„¶å‡çº§æˆå¤´ç­‰èˆ±ï¼Œç›´æ¥æ’é˜Ÿã€‚\n\n*ğŸ“Œ å°Tipsï¼šåŠ¨æ€ä¼˜å…ˆçº§é€‚åˆSPAåº”ç”¨ï¼Œä½†é¢‘ç¹è°ƒæ•´å¯èƒ½å¯¼è‡´æ€§èƒ½å¼€é”€ï¼Œå»ºè®®é™åˆ¶è°ƒæ•´é¢‘ç‡ã€‚*\n\n### 3. è¯·æ±‚è¶…æ—¶ä¸å–æ¶ˆ\n\nè¯·æ±‚å¯èƒ½å› ç½‘ç»œé—®é¢˜å¡ä½ï¼Œæˆ‘ä»¬éœ€è¦æ”¯æŒ**è¶…æ—¶**å’Œ**å–æ¶ˆ**ï¼š\n\n```typescript\ninterface QueueTask {\n  request: () => Promise<any>;\n  key: string;\n  priority: number;\n  controller: AbortController;\n}\n\nclass TimeoutRequestQueue {\n  private queue: QueueTask[] = [];\n  private activeCount: number = 0;\n  private maxConcurrency: number;\n\n  constructor(maxConcurrency: number = 6) {\n    this.maxConcurrency = maxConcurrency;\n  }\n\n  add(request: () => Promise<any>, key: string, priority: number = 10, timeout: number = 5000) {\n    const controller = new AbortController();\n    const wrappedRequest = () =>\n      Promise.race([\n        request(),\n        new Promise((_, reject) =>\n          setTimeout(() => {\n            controller.abort();\n            reject(new Error('Request timed out'));\n          }, timeout)\n        ),\n      ]);\n\n    this.queue.push({ request: wrappedRequest, key, priority, controller });\n    this.queue.sort((a, b) => a.priority - b.priority);\n    this.processQueue();\n  }\n\n  cancel(key: string) {\n    const task = this.queue.find(t => t.key === key);\n    if (task) {\n      task.controller.abort();\n      this.queue = this.queue.filter(t => t.key !== key);\n    }\n  }\n\n  private async processQueue() {\n    if (this.activeCount >= this.maxConcurrency || this.queue.length === 0) return;\n\n    this.activeCount++;\n    const task = this.queue.shift();\n    try {\n      await task.request();\n    } catch (error) {\n      console.error('Request failed:', error);\n    } finally {\n      this.activeCount--;\n      this.processQueue();\n    }\n  }\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nconst queue = new TimeoutRequestQueue(3);\nqueue.add(\n  () => fetch('/api/slow', { signal: queue.queue[0]?.controller.signal }).then(res => res.json()),\n  'slow',\n  0,\n  2000\n);\n\n// æ‰‹åŠ¨å–æ¶ˆ\nqueue.cancel('slow');\n```\n\n**æ”¹è¿›ç‚¹**ï¼š\n\n1. ä½¿ç”¨`AbortController`æ”¯æŒè¯·æ±‚å–æ¶ˆã€‚\n2. é€šè¿‡`Promise.race`å®ç°è¶…æ—¶æœºåˆ¶ã€‚\n3. å–æ¶ˆä»»åŠ¡æ—¶ä»é˜Ÿåˆ—ä¸­ç§»é™¤ã€‚\n\n**ç±»æ¯”**ï¼šå°±åƒç‚¹å¤–å–ï¼Œè¶…è¿‡30åˆ†é’Ÿæ²¡é€åˆ°å°±å–æ¶ˆè®¢å•ï¼Œæ¢å®¶åº—é‡æ–°ç‚¹ã€‚\n\n*ğŸ“Œ å°Tipsï¼šè¶…æ—¶æ—¶é—´è¦æ ¹æ®æ¥å£å®é™…å“åº”æ—¶é—´è®¾ç½®ï¼Œè¿‡çŸ­å¯èƒ½è¯¯ä¼¤æ­£å¸¸è¯·æ±‚ã€‚*\n\n## æœ€ä½³å®è·µï¼šè®©é˜Ÿåˆ—æ›´â€œä¼˜é›…â€ âœ¨\n\nå®ç°ä¸€ä¸ªé˜Ÿåˆ—åªæ˜¯å¼€å§‹ï¼Œå¦‚ä½•è®©å®ƒåœ¨å®é™…é¡¹ç›®ä¸­å‘æŒ¥æœ€å¤§ä»·å€¼ï¼Ÿä»¥ä¸‹æ˜¯ä¸€äº›ç»è¿‡å®æˆ˜æ£€éªŒçš„æœ€ä½³å®è·µï¼š\n\n### 1. åŠ¨æ€è°ƒæ•´å¹¶å‘æ•°\n\næ ¹æ®ç½‘ç»œçŠ¶å†µå’ŒæœåŠ¡å™¨è´Ÿè½½åŠ¨æ€è°ƒæ•´`maxConcurrency`ã€‚ä¾‹å¦‚ï¼Œå¼±ç½‘ç¯å¢ƒä¸‹é™ä½å¹¶å‘æ•°ï¼Œå¼ºç½‘ç¯å¢ƒä¸‹æé«˜ã€‚\n\n```typescript\nfunction getDynamicConcurrency() {\n  return navigator.connection?.effectiveType === '4g' ? 6 : 3;\n}\n```\n\n*ğŸ“Œ å°Tipsï¼šç»“åˆ`navigator.connection`æ£€æµ‹ç½‘ç»œçŠ¶æ€ï¼Œä½†è¦æ³¨æ„å…¼å®¹æ€§ï¼Œéƒ¨åˆ†æµè§ˆå™¨å¯èƒ½ä¸æ”¯æŒã€‚*\n\n### 2. ä½¿ç”¨æŒ‡æ•°é€€é¿é‡è¯•\n\né‡è¯•é—´éš”ä¸åº”å›ºå®šï¼Œå»ºè®®ä½¿ç”¨æŒ‡æ•°é€€é¿ç­–ç•¥ï¼š\n\n```typescript\nfunction exponentialBackoff(retry: number) {\n  return Math.min(1000 * 2 ** retry, 10000); // æœ€å¤§10ç§’\n}\n```\n\n*ğŸ“Œ å°Tipsï¼šæŒ‡æ•°é€€é¿èƒ½æœ‰æ•ˆé™ä½æœåŠ¡å™¨å‹åŠ›ï¼Œä½†è¦è®¾ç½®æœ€å¤§é—´éš”ï¼Œé¿å…ç”¨æˆ·ç­‰å¾…è¿‡ä¹…ã€‚*\n\n### 3. æ—¥å¿—ä¸ç›‘æ§\n\nä¸ºé˜Ÿåˆ—æ·»åŠ æ—¥å¿—ï¼Œè®°å½•æ¯ä¸ªè¯·æ±‚çš„æ‰§è¡Œæ—¶é—´ã€å¤±è´¥åŸå› ç­‰ï¼Œæ–¹ä¾¿è°ƒè¯•å’Œä¼˜åŒ–ã€‚\n\n```typescript\nclass MonitoredQueue {\n  add(request: () => Promise<any>, key: string) {\n    const start = performance.now();\n    return request().then(\n      result => {\n        console.log(`Request ${key} took ${performance.now() - start}ms`);\n        return result;\n      },\n      error => {\n        console.error(`Request ${key} failed:`, error);\n        throw error;\n      }\n    );\n  }\n}\n```\n\n*ğŸ“Œ å°Tipsï¼šå°†æ—¥å¿—é›†æˆåˆ°ä½ çš„ç›‘æ§ç³»ç»Ÿï¼ˆå¦‚Sentryï¼‰ï¼Œèƒ½æ›´å¿«å®šä½é—®é¢˜ã€‚*\n\n### 4. è¯·æ±‚ç¼“å­˜\n\nå¯¹äºé¢‘ç¹è¯·æ±‚çš„æ¥å£ï¼Œä½¿ç”¨å†…å­˜ç¼“å­˜æˆ–LocalStorageç¼“å­˜ç»“æœï¼Œå‡å°‘ç½‘ç»œè¯·æ±‚ã€‚\n\n```typescript\nconst cache = new Map<string, any>();\nfunction cachedRequest(key: string, request: () => Promise<any>) {\n  if (cache.has(key)) return Promise.resolve(cache.get(key));\n  return request().then(result => {\n    cache.set(key, result);\n    return result;\n  });\n}\n```\n\n*ğŸ“Œ å°Tipsï¼šè®¾ç½®ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼Œé¿å…ä½¿ç”¨è¿‡æ—¶æ•°æ®ã€‚*\n\n### 5. é”™è¯¯é™çº§\n\nå½“è¯·æ±‚å¤±è´¥æ—¶ï¼Œæä¾›é™çº§æ–¹æ¡ˆï¼Œä¾‹å¦‚ä½¿ç”¨é»˜è®¤æ•°æ®æˆ–æœ¬åœ°ç¼“å­˜ã€‚\n\n```typescript\nfunction fallbackRequest(request: () => Promise<any>, fallback: any) {\n  return request().catch(() => fallback);\n}\n```\n\n*ğŸ“Œ å°Tipsï¼šé™çº§æ–¹æ¡ˆè¦ä¸äº§å“ç»ç†ç¡®è®¤ï¼Œç¡®ä¿ç”¨æˆ·ä½“éªŒä¸è¢«ç ´åã€‚*\n\n## çœŸå®æ¡ˆä¾‹ï¼šä»ç†è®ºåˆ°å®æˆ˜ ğŸ†\n\nä¸ºäº†è®©ç†è®ºè½åœ°ï¼Œæˆ‘ä»¬æ¥çœ‹å‡ ä¸ªçœŸå®é¡¹ç›®ä¸­çš„é˜Ÿåˆ—è¯·æ±‚è®¾è®¡æ¡ˆä¾‹ã€‚\n\n### æ¡ˆä¾‹1ï¼šç”µå•†å¹³å°çš„å›¾ç‰‡æ‡’åŠ è½½\n\nåœ¨ä¸€ä¸ªç”µå•†å¹³å°ä¸­ï¼Œå•†å“åˆ—è¡¨éœ€è¦æ‡’åŠ è½½æ•°ç™¾å¼ å›¾ç‰‡ã€‚å¦‚æœåŒæ—¶å‘èµ·æ‰€æœ‰å›¾ç‰‡è¯·æ±‚ï¼Œæµè§ˆå™¨ä¼šå´©æºƒã€‚æˆ‘ä»¬è®¾è®¡äº†ä¸€ä¸ªå¹¶å‘é˜Ÿåˆ—ï¼š\n\n- æœ€å¤§å¹¶å‘æ•°ï¼š10\n- ä¼˜å…ˆçº§ï¼šå¯è§åŒºåŸŸå›¾ç‰‡ä¼˜å…ˆçº§ä¸º0ï¼Œå…¶ä»–ä¸º10\n- é‡è¯•ï¼šå¤±è´¥å›¾ç‰‡é‡è¯•2æ¬¡\n- å»é‡ï¼šé‡å¤å›¾ç‰‡URLåªè¯·æ±‚ä¸€æ¬¡\n\n```typescript\nconst imageQueue = new DedupeRequestQueue(10);\nfunction loadImage(url: string, priority: number) {\n  return imageQueue.add(\n    () => fetch(url).then(res => res.blob()),\n    url,\n    priority\n  );\n}\n\n// ç›‘å¬æ»šåŠ¨äº‹ä»¶ï¼ŒåŠ¨æ€è°ƒæ•´ä¼˜å…ˆçº§\nwindow.addEventListener('scroll', () => {\n  document.querySelectorAll('img[data-src]').forEach(img => {\n    const isVisible = img.getBoundingClientRect().top < window.innerHeight;\n    loadImage(img.getAttribute('data-src'), isVisible ? 0 : 10);\n  });\n});\n```\n\n**æ•ˆæœ**ï¼šå›¾ç‰‡åŠ è½½æµç•…ï¼ŒæœåŠ¡å™¨å‹åŠ›é™ä½ï¼Œç”¨æˆ·ä½“éªŒæå‡ã€‚\n\n*ğŸ“Œ å°Tipsï¼šæ‡’åŠ è½½é˜Ÿåˆ—è¦ç»“åˆIntersectionObserverä¼˜åŒ–æ€§èƒ½ï¼Œé¿å…é¢‘ç¹è§¦å‘ã€‚*\n\n### æ¡ˆä¾‹2ï¼šå®æ—¶èŠå¤©ç³»ç»Ÿçš„æ¶ˆæ¯åŒæ­¥\n\nåœ¨ä¸€ä¸ªèŠå¤©åº”ç”¨ä¸­ï¼Œéœ€è¦å®æ—¶åŒæ­¥æ¶ˆæ¯ã€ç”¨æˆ·ä¿¡æ¯å’Œå·²è¯»çŠ¶æ€ã€‚è¯·æ±‚ä¹‹é—´æœ‰ä¾èµ–å…³ç³»ï¼š\n\n1. è·å–ç”¨æˆ·ID\n2. æ ¹æ®ç”¨æˆ·IDè·å–æ¶ˆæ¯\n3. å‘é€å·²è¯»çŠ¶æ€\n\næˆ‘ä»¬ä½¿ç”¨äº†ä¾èµ–é˜Ÿåˆ—ï¼š\n\n```typescript\nconst chatQueue = new DependentRequestQueue(3);\nchatQueue.add(\n  () => fetch('/api/user').then(res => res.json()),\n  'user'\n);\nchatQueue.add(\n  () => fetch('/api/messages').then(res => res.json()),\n  'messages',\n  ['user']\n);\nchatQueue.add(\n  () => fetch('/api/read', { method: 'POST' }).then(res => res.json()),\n  'read',\n  ['messages']\n);\n```\n\n**æ•ˆæœ**ï¼šæ¶ˆæ¯åŒæ­¥é€»è¾‘æ¸…æ™°ï¼Œè¯·æ±‚é¡ºåºæ­£ç¡®ï¼Œé¿å…äº†å›è°ƒåœ°ç‹±ã€‚\n\n*ğŸ“Œ å°Tipsï¼šä¾èµ–é˜Ÿåˆ—é€‚åˆå¼ºä¾èµ–åœºæ™¯ï¼Œä½†è¦ç¡®ä¿ä¾èµ–ä»»åŠ¡ä¸ä¼šå¤±è´¥ï¼Œå¦åˆ™å¯èƒ½é˜»å¡é˜Ÿåˆ—ã€‚*\n\n## å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ â“\n\nå³ä½¿æœ‰äº†é˜Ÿåˆ—è®¾è®¡ï¼Œå¼€å‘ä¸­ä»å¯èƒ½é‡åˆ°ä¸€äº›â€œå‘â€ã€‚ä»¥ä¸‹æ˜¯å¸¸è§é—®é¢˜åŠåº”å¯¹æ–¹æ³•ï¼š\n\n### é—®é¢˜1ï¼šé˜Ÿåˆ—å¡æ­»\n\n**ç°è±¡**ï¼šæŸä¸ªè¯·æ±‚ä¸€ç›´æœªå®Œæˆï¼Œå¯¼è‡´é˜Ÿåˆ—åœæ­¢å¤„ç†ã€‚\n\n**è§£å†³**ï¼šä¸ºæ¯ä¸ªè¯·æ±‚è®¾ç½®è¶…æ—¶ï¼Œå¹¶æ¸…ç†å¡æ­»çš„ä»»åŠ¡ã€‚\n\n*ğŸ“Œ å°Tipsï¼šè¶…æ—¶æ—¶é—´è¦æ ¹æ®æ¥å£å®é™…å“åº”æ—¶é—´è®¾ç½®ï¼Œé¿å…è¯¯ä¼¤ã€‚*\n\n### é—®é¢˜2ï¼šä¼˜å…ˆçº§â€œé¥¿æ­»â€\n\n**ç°è±¡**ï¼šä½ä¼˜å…ˆçº§è¯·æ±‚æ°¸è¿œæ— æ³•æ‰§è¡Œã€‚\n\n**è§£å†³**ï¼šå®šæœŸæå‡ä½ä¼˜å…ˆçº§ä»»åŠ¡çš„ä¼˜å…ˆçº§ï¼Œæˆ–é™åˆ¶é«˜ä¼˜å…ˆçº§ä»»åŠ¡çš„æ¯”ä¾‹ã€‚\n\n*ğŸ“Œ å°Tipsï¼šä¼˜å…ˆçº§ç®¡ç†è¦å¹³è¡¡ï¼Œé¿å…â€œä¸€åˆ€åˆ‡â€åˆ†é…ã€‚*\n\n### é—®é¢˜3ï¼šå†…å­˜æ³„æ¼\n\n**ç°è±¡**ï¼šé˜Ÿåˆ—é•¿æœŸè¿è¡Œåï¼Œå†…å­˜å ç”¨æ¿€å¢ã€‚\n\n**è§£å†³**ï¼šå®šæœŸæ¸…ç†å®Œæˆä»»åŠ¡çš„ç¼“å­˜ï¼Œé‡Šæ”¾ä¸å†éœ€è¦çš„èµ„æºã€‚\n\n*ğŸ“Œ å°Tipsï¼šä½¿ç”¨WeakMapä»£æ›¿Mapï¼Œèƒ½è‡ªåŠ¨æ¸…ç†æ— å¼•ç”¨å¯¹è±¡ã€‚*\n\n## æœªæ¥å±•æœ›ï¼šé˜Ÿåˆ—è¯·æ±‚çš„ä¸‹ä¸€ç«™ ğŸš„\n\néšç€å‰ç«¯æŠ€æœ¯çš„å‘å±•ï¼Œé˜Ÿåˆ—è¯·æ±‚è®¾è®¡ä¹Ÿåœ¨ä¸æ–­æ¼”è¿›ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å€¼å¾—å…³æ³¨çš„è¶‹åŠ¿ï¼š\n\n- **WebTransport**ï¼šHTTP/3å’ŒWebTransportå¯èƒ½æ”¹å˜å¹¶å‘æ¨¡å‹ï¼Œé˜Ÿåˆ—è®¾è®¡éœ€è¦é€‚é…æ–°åè®®ã€‚\n- **AIä¼˜åŒ–**ï¼šé€šè¿‡æœºå™¨å­¦ä¹ é¢„æµ‹è¯·æ±‚ä¼˜å…ˆçº§å’Œå¹¶å‘æ•°ï¼ŒåŠ¨æ€ä¼˜åŒ–é˜Ÿåˆ—ã€‚\n- **åˆ†å¸ƒå¼é˜Ÿåˆ—**ï¼šåœ¨å¾®å‰ç«¯æ¶æ„ä¸­ï¼Œé˜Ÿåˆ—å¯èƒ½éœ€è¦è·¨æ¨¡å—åä½œï¼Œå½¢æˆåˆ†å¸ƒå¼è°ƒåº¦ç³»ç»Ÿã€‚\n\n**ç±»æ¯”**ï¼šé˜Ÿåˆ—è¯·æ±‚çš„æœªæ¥å°±åƒè‡ªåŠ¨é©¾é©¶æ±½è½¦ï¼Œä¸ä»…è¦è‡ªå·±è·‘å¾—å¿«ï¼Œè¿˜è¦å’Œæ•´ä¸ªäº¤é€šç½‘ç»œååŒã€‚\n\n*ğŸ“Œ å°Tipsï¼šä¿æŒå¯¹æ–°æŠ€æœ¯çš„æ•æ„Ÿåº¦ï¼ŒåŠæ—¶è°ƒæ•´é˜Ÿåˆ—è®¾è®¡ï¼Œæ‰èƒ½ç«‹äºä¸è´¥ä¹‹åœ°ã€‚*\n\n## æ€»ç»“ï¼šä»æ··æ²Œåˆ°ä¼˜é›… ğŸ‰\n\nå‰ç«¯é˜Ÿåˆ—è¯·æ±‚è®¾è®¡æ˜¯ä¸€é—¨å…¼å…·æŠ€æœ¯ä¸è‰ºæœ¯çš„å­¦é—®ã€‚é€šè¿‡åˆç†çš„é˜Ÿåˆ—æœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ‚ä¹±æ— ç« çš„è¯·æ±‚å˜æˆäº•ç„¶æœ‰åºçš„äº¤å“ä¹ã€‚æ— è®ºæ˜¯ç®€å•çš„FIFOé˜Ÿåˆ—ï¼Œè¿˜æ˜¯å¤æ‚çš„ä¾èµ–è°ƒåº¦ï¼Œæ ¸å¿ƒéƒ½åœ¨äº**å¹³è¡¡æ€§èƒ½ä¸ç¨³å®šæ€§**ï¼Œè®©ç”¨æˆ·ä½“éªŒæ›´æµç•…ã€‚\n\nå¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½ä¸ºä½ æä¾›çµæ„Ÿï¼Œæ— è®ºæ˜¯ä¼˜åŒ–ç°æœ‰é¡¹ç›®ï¼Œè¿˜æ˜¯è®¾è®¡å…¨æ–°çš„è¯·æ±‚ç³»ç»Ÿï¼Œéƒ½èƒ½æ‰¾åˆ°é€‚åˆçš„æ–¹æ¡ˆã€‚å¿«å»è¯•è¯•å§ï¼Œè®©ä½ çš„è¯·æ±‚é˜Ÿåˆ—æˆä¸ºå‰ç«¯å¼€å‘çš„â€œå¹•åè‹±é›„â€ï¼ğŸ’ª\n\n> â€œå¥½çš„é˜Ÿåˆ—è®¾è®¡ï¼Œå°±åƒä¸€ä¸ªéšå½¢çš„ç®¡å®¶ï¼Œé»˜é»˜è®©ä¸€åˆ‡äº•äº•æœ‰æ¡ã€‚â€ â€”â€” è¿˜æ˜¯é‚£ä¸ªä¸æ„¿é€éœ²å§“åçš„å¼€å‘è€…ï¼ˆçœŸçš„ä¸æ˜¯æˆ‘ï¼‰\n\n---",
    "code": "var Component=(()=>{var p=Object.create;var s=Object.defineProperty;var E=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var F=Object.getPrototypeOf,B=Object.prototype.hasOwnProperty;var u=(e,l)=>()=>(l||e((l={exports:{}}).exports,l),l.exports),g=(e,l)=>{for(var r in l)s(e,r,{get:l[r],enumerable:!0})},a=(e,l,r,o)=>{if(l&&typeof l==\"object\"||typeof l==\"function\")for(let c of y(l))!B.call(e,c)&&c!==r&&s(e,c,{get:()=>l[c],enumerable:!(o=E(l,c))||o.enumerable});return e};var m=(e,l,r)=>(r=e!=null?p(F(e)):{},a(l||!e||!e.__esModule?s(r,\"default\",{value:e,enumerable:!0}):r,e)),f=e=>a(s({},\"__esModule\",{value:!0}),e);var d=u((k,i)=>{i.exports=_jsx_runtime});var A={};g(A,{default:()=>h,frontmatter:()=>q});var n=m(d()),q={type:\"Post\",title:\"\\u524D\\u7AEF\\u961F\\u5217\\u8BF7\\u6C42\\u8BBE\\u8BA1\\uFF1A\\u4ECE\\u6DF7\\u6C8C\\u5230\\u4F18\\u96C5\\u7684\\u8BF7\\u6C42\\u827A\\u672F \\u{1F3A8}\",date:\"2024-06-13\",description:\"\\u6DF1\\u5165\\u63A2\\u8BA8\\u524D\\u7AEF\\u961F\\u5217\\u8BF7\\u6C42\\u7684\\u8BBE\\u8BA1\\u539F\\u7406\\u4E0E\\u5B9E\\u8DF5\\uFF0C\\u6DB5\\u76D6\\u961F\\u5217\\u673A\\u5236\\u3001\\u5E76\\u53D1\\u63A7\\u5236\\u3001\\u91CD\\u8BD5\\u7B56\\u7565\\u3001\\u4F18\\u5148\\u7EA7\\u7BA1\\u7406\\u7B49\\uFF0C\\u52A9\\u529B\\u5F00\\u53D1\\u8005\\u6253\\u9020\\u5065\\u58EE\\u3001\\u9AD8\\u6548\\u7684\\u7F51\\u7EDC\\u8BF7\\u6C42\\u7CFB\\u7EDF\\u3002\",keywords:\"\\u524D\\u7AEF\\u5F00\\u53D1, \\u961F\\u5217\\u8BF7\\u6C42, \\u5E76\\u53D1\\u63A7\\u5236, \\u8BF7\\u6C42\\u4F18\\u5316, \\u91CD\\u8BD5\\u673A\\u5236, \\u4F18\\u5148\\u7EA7\\u961F\\u5217, JavaScript, TypeScript, \\u7F51\\u7EDC\\u8BF7\\u6C42\",author:\"\\u6653\\u9F99\",image:\"/images/hero/queue-request-design.jpg\",tags:[\"Frontend\",\"JavaScript\",\"TypeScript\",\"Network\"],category:\"\\u524D\\u7AEF\\u6280\\u672F\"};function t(e){let l={a:\"a\",blockquote:\"blockquote\",code:\"code\",em:\"em\",figure:\"figure\",h2:\"h2\",h3:\"h3\",hr:\"hr\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",table:\"table\",tbody:\"tbody\",td:\"td\",th:\"th\",thead:\"thead\",tr:\"tr\",ul:\"ul\",...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.blockquote,{children:[`\n`,(0,n.jsx)(l.p,{children:\"\\u201C\\u524D\\u7AEF\\u8BF7\\u6C42\\u5C31\\u50CF\\u4E00\\u573A\\u4EA4\\u54CD\\u4E50\\uFF1A\\u6CA1\\u6709\\u6307\\u6325\\u5BB6\\uFF0C\\u4E50\\u624B\\u4EEC\\u5404\\u81EA\\u4E71\\u594F\\uFF0C\\u7ED3\\u679C\\u53EA\\u80FD\\u662F\\u566A\\u97F3\\uFF1B\\u6709\\u4E86\\u961F\\u5217\\u8BBE\\u8BA1\\uFF0C\\u8BF7\\u6C42\\u624D\\u80FD\\u594F\\u51FA\\u548C\\u8C10\\u7684\\u4E50\\u7AE0\\u3002\\u201D \\u2014\\u2014 \\u67D0\\u4E0D\\u613F\\u900F\\u9732\\u59D3\\u540D\\u7684\\u524D\\u7AEF\\u5F00\\u53D1\\u8005\\uFF08\\u53EF\\u80FD\\u662F\\u6211\\uFF09\"}),`\n`]}),`\n`,(0,n.jsx)(l.p,{children:\"\\u5728\\u524D\\u7AEF\\u5F00\\u53D1\\u4E2D\\uFF0C\\u7F51\\u7EDC\\u8BF7\\u6C42\\u662F\\u4E0D\\u53EF\\u907F\\u514D\\u7684\\u6838\\u5FC3\\u73AF\\u8282\\u3002\\u65E0\\u8BBA\\u662F\\u62C9\\u53D6\\u7528\\u6237\\u6570\\u636E\\u3001\\u4E0A\\u4F20\\u6587\\u4EF6\\uFF0C\\u8FD8\\u662F\\u5B9E\\u65F6\\u540C\\u6B65\\u6D88\\u606F\\uFF0C\\u8BF7\\u6C42\\u7684\\u6027\\u80FD\\u4E0E\\u7A33\\u5B9A\\u6027\\u76F4\\u63A5\\u5F71\\u54CD\\u7528\\u6237\\u4F53\\u9A8C\\u3002\\u7136\\u800C\\uFF0C\\u5F53\\u8BF7\\u6C42\\u6570\\u91CF\\u6FC0\\u589E\\u3001\\u573A\\u666F\\u590D\\u6742\\u5316\\u65F6\\uFF0C\\u5F00\\u53D1\\u8005\\u5E38\\u5E38\\u4F1A\\u9677\\u5165\\u4E00\\u79CD\\u201C\\u8BF7\\u6C42\\u6DF7\\u6C8C\\u201D\\uFF1A\\u63A5\\u53E3\\u8D85\\u8F7D\\u3001\\u54CD\\u5E94\\u5EF6\\u8FDF\\u3001\\u5931\\u8D25\\u91CD\\u8BD5\\u5931\\u63A7\\u2026\\u2026\\u5C31\\u50CF\\u4E00\\u4E2A\\u6CA1\\u6709\\u7EA2\\u7EFF\\u706F\\u7684\\u5341\\u5B57\\u8DEF\\u53E3\\uFF0C\\u8F66\\u8F86\\uFF08\\u8BF7\\u6C42\\uFF09\\u6324\\u6210\\u4E00\\u56E2\\uFF0C\\u8C01\\u4E5F\\u52A8\\u4E0D\\u4E86\\u3002\\u{1F613}\"}),`\n`,(0,n.jsxs)(l.p,{children:[\"\\u4E3A\\u4E86\\u8BA9\\u8BF7\\u6C42\\u4ECE\\u201C\\u6DF7\\u6C8C\\u201D\\u8D70\\u5411\\u201C\\u4F18\\u96C5\\u201D\\uFF0C\\u6211\\u4EEC\\u9700\\u8981\\u5F15\\u5165\",(0,n.jsx)(l.strong,{children:\"\\u961F\\u5217\\u8BF7\\u6C42\\u8BBE\\u8BA1\"}),\"\\u3002\\u8FD9\\u4E0D\\u4EC5\\u662F\\u4E00\\u4E2A\\u6280\\u672F\\u95EE\\u9898\\uFF0C\\u66F4\\u662F\\u4E00\\u95E8\\u827A\\u672F\\uFF1A\\u5982\\u4F55\\u5728\\u6709\\u9650\\u7684\\u8D44\\u6E90\\u4E0B\\uFF0C\\u8BA9\\u6BCF\\u4E2A\\u8BF7\\u6C42\\u90FD\\u4E95\\u7136\\u6709\\u5E8F\\u3001\\u7269\\u5C3D\\u5176\\u7528\\uFF1F\\u672C\\u6587\\u5C06\\u5E26\\u4F60\\u6DF1\\u5165\\u961F\\u5217\\u8BF7\\u6C42\\u7684\\u539F\\u7406\\u4E0E\\u5B9E\\u8DF5\\uFF0C\\u4ECE\\u57FA\\u7840\\u6982\\u5FF5\\u5230\\u9AD8\\u7EA7\\u5B9E\\u73B0\\uFF0C\\u914D\\u4EE5\\u6E05\\u6670\\u7684\\u4EE3\\u7801\\u793A\\u4F8B\\u3001\\u7C7B\\u6BD4\\u8BF4\\u660E\\u548C\\u5B9E\\u7528\\u5EFA\\u8BAE\\uFF0C\\u52A9\\u4F60\\u5728\\u524D\\u7AEF\\u5F00\\u53D1\\u4E2D\\u6E38\\u5203\\u6709\\u4F59\\u3002\"]}),`\n`,(0,n.jsx)(l.h2,{id:\"\\u4E3A\\u4EC0\\u4E48\\u9700\\u8981\\u961F\\u5217\\u8BF7\\u6C42\",children:(0,n.jsx)(l.a,{href:\"#\\u4E3A\\u4EC0\\u4E48\\u9700\\u8981\\u961F\\u5217\\u8BF7\\u6C42\",children:\"\\u4E3A\\u4EC0\\u4E48\\u9700\\u8981\\u961F\\u5217\\u8BF7\\u6C42\\uFF1F\\u{1F914}\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u5728\\u63A2\\u8BA8\\u961F\\u5217\\u8BBE\\u8BA1\\u4E4B\\u524D\\uFF0C\\u6211\\u4EEC\\u5148\\u6765\\u804A\\u804A\\u4E3A\\u4EC0\\u4E48\\u9700\\u8981\\u5B83\\u3002\\u4EE5\\u4E0B\\u662F\\u51E0\\u4E2A\\u5E38\\u89C1\\u7684\\u201C\\u8BF7\\u6C42\\u75DB\\u70B9\\u201D\\uFF0C\\u770B\\u770B\\u4F60\\u662F\\u5426\\u4E2D\\u62DB\\uFF1A\"}),`\n`,(0,n.jsxs)(l.ul,{children:[`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u5E76\\u53D1\\u8FC7\\u8F7D\"}),\"\\uFF1A\\u4E00\\u6B21\\u6027\\u53D1\\u51FA\\u51E0\\u5341\\u4E2A\\u8BF7\\u6C42\\uFF0C\\u670D\\u52A1\\u5668\\u76F4\\u63A5\\u201C\\u7D2F\\u762B\\u201D\\uFF0C\\u54CD\\u5E94\\u65F6\\u95F4\\u98D9\\u5347\\u3002\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u8D44\\u6E90\\u7ADE\\u4E89\"}),\"\\uFF1A\\u591A\\u4E2A\\u8BF7\\u6C42\\u62A2\\u5360\\u6709\\u9650\\u7684\\u6D4F\\u89C8\\u5668\\u8FDE\\u63A5\\uFF0C\\u9020\\u6210\\u963B\\u585E\\u6216\\u5931\\u8D25\\u3002\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u5931\\u8D25\\u91CD\\u8BD5\\u5931\\u63A7\"}),\"\\uFF1A\\u8BF7\\u6C42\\u5931\\u8D25\\u540E\\u76F2\\u76EE\\u91CD\\u8BD5\\uFF0C\\u5BFC\\u81F4\\u201C\\u96EA\\u5D29\\u6548\\u5E94\\u201D\\u3002\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u4F18\\u5148\\u7EA7\\u6DF7\\u4E71\"}),\"\\uFF1A\\u5173\\u952E\\u8BF7\\u6C42\\uFF08\\u5982\\u652F\\u4ED8\\u786E\\u8BA4\\uFF09\\u88AB\\u57CB\\u6CA1\\u5728\\u65E0\\u5173\\u7D27\\u8981\\u7684\\u8BF7\\u6C42\\uFF08\\u5982\\u65E5\\u5FD7\\u4E0A\\u4F20\\uFF09\\u4E2D\\u3002\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u590D\\u6742\\u4F9D\\u8D56\"}),\"\\uFF1A\\u67D0\\u4E9B\\u8BF7\\u6C42\\u9700\\u8981\\u7B49\\u5F85\\u5176\\u4ED6\\u8BF7\\u6C42\\u7684\\u7ED3\\u679C\\uFF0C\\u903B\\u8F91\\u4E71\\u5982\\u9EBB\\u3002\"]}),`\n`]}),`\n`,(0,n.jsx)(l.p,{children:\"\\u8FD9\\u4E9B\\u95EE\\u9898\\u5C31\\u50CF\\u53A8\\u623F\\u91CC\\u7684\\u4E00\\u573A\\u707E\\u96BE\\uFF1A\\u4F60\\u540C\\u65F6\\u714E\\u9E21\\u86CB\\u3001\\u716E\\u9762\\u6761\\u3001\\u70E4\\u9762\\u5305\\uFF0C\\u7ED3\\u679C\\u9E21\\u86CB\\u7CCA\\u4E86\\uFF0C\\u9762\\u6761\\u6EA2\\u4E86\\uFF0C\\u9762\\u5305\\u673A\\u8FD8\\u5192\\u70DF\\u4E86\\u3002\\u{1F525} \\u800C\\u961F\\u5217\\u8BF7\\u6C42\\u8BBE\\u8BA1\\u5C31\\u50CF\\u4E00\\u4E2A\\u806A\\u660E\\u7684\\u53A8\\u5E08\\uFF0C\\u80FD\\u5408\\u7406\\u5B89\\u6392\\u6BCF\\u9053\\u83DC\\u7684\\u70F9\\u996A\\u987A\\u5E8F\\uFF0C\\u8BA9\\u53A8\\u623F\\u8FD0\\u8F6C\\u5F97\\u4E95\\u4E95\\u6709\\u6761\\u3002\"}),`\n`,(0,n.jsx)(l.h3,{id:\"\\u961F\\u5217\\u8BF7\\u6C42\\u7684\\u6838\\u5FC3\\u76EE\\u6807\",children:(0,n.jsx)(l.a,{href:\"#\\u961F\\u5217\\u8BF7\\u6C42\\u7684\\u6838\\u5FC3\\u76EE\\u6807\",children:\"\\u961F\\u5217\\u8BF7\\u6C42\\u7684\\u6838\\u5FC3\\u76EE\\u6807\"})}),`\n`,(0,n.jsxs)(l.p,{children:[\"\\u961F\\u5217\\u8BF7\\u6C42\\u8BBE\\u8BA1\\u7684\\u7EC8\\u6781\\u76EE\\u6807\\u662F\\uFF1A\",(0,n.jsx)(l.strong,{children:\"\\u9AD8\\u6548\\u3001\\u7A33\\u5B9A\\u3001\\u53EF\\u63A7\"}),\"\\u3002\\u5177\\u4F53\\u6765\\u8BF4\\uFF0C\\u5B83\\u8981\\u89E3\\u51B3\\u4EE5\\u4E0B\\u95EE\\u9898\\uFF1A\"]}),`\n`,(0,n.jsxs)(l.ol,{children:[`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u63A7\\u5236\\u5E76\\u53D1\"}),\"\\uFF1A\\u9650\\u5236\\u540C\\u65F6\\u53D1\\u9001\\u7684\\u8BF7\\u6C42\\u6570\\u91CF\\uFF0C\\u907F\\u514D\\u670D\\u52A1\\u5668\\u8FC7\\u8F7D\\u3002\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u7BA1\\u7406\\u4F18\\u5148\\u7EA7\"}),\"\\uFF1A\\u786E\\u4FDD\\u91CD\\u8981\\u8BF7\\u6C42\\u4F18\\u5148\\u6267\\u884C\\u3002\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u5904\\u7406\\u5931\\u8D25\"}),\"\\uFF1A\\u901A\\u8FC7\\u91CD\\u8BD5\\u3001\\u964D\\u7EA7\\u7B49\\u7B56\\u7565\\u63D0\\u9AD8\\u6210\\u529F\\u7387\\u3002\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u4F18\\u5316\\u6027\\u80FD\"}),\"\\uFF1A\\u51CF\\u5C11\\u4E0D\\u5FC5\\u8981\\u7684\\u8BF7\\u6C42\\uFF0C\\u5408\\u5E76\\u76F8\\u4F3C\\u8BF7\\u6C42\\u3002\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u7B80\\u5316\\u903B\\u8F91\"}),\"\\uFF1A\\u4E3A\\u590D\\u6742\\u4F9D\\u8D56\\u5173\\u7CFB\\u63D0\\u4F9B\\u6E05\\u6670\\u7684\\u8C03\\u5EA6\\u65B9\\u6848\\u3002\"]}),`\n`]}),`\n`,(0,n.jsxs)(l.p,{children:[\"\\u63A5\\u4E0B\\u6765\\uFF0C\\u6211\\u4EEC\\u5C06\\u4ECE\",(0,n.jsx)(l.strong,{children:\"\\u57FA\\u7840\\u6982\\u5FF5\"}),\"\\u5F00\\u59CB\\uFF0C\\u9010\\u6B65\\u6DF1\\u5165\\u5230\",(0,n.jsx)(l.strong,{children:\"\\u5B9E\\u73B0\\u539F\\u7406\"}),\"\\u3001\",(0,n.jsx)(l.strong,{children:\"\\u9AD8\\u7EA7\\u573A\\u666F\"}),\"\\u548C\",(0,n.jsx)(l.strong,{children:\"\\u6700\\u4F73\\u5B9E\\u8DF5\"}),\"\\uFF0C\\u5E26\\u4F60\\u5168\\u9762\\u638C\\u63E1\\u961F\\u5217\\u8BF7\\u6C42\\u7684\\u8BBE\\u8BA1\\u4E4B\\u9053\\u3002\"]}),`\n`,(0,n.jsx)(l.h2,{id:\"\\u57FA\\u7840\\u6982\\u5FF5\\u961F\\u5217\\u8BF7\\u6C42\\u7684\\u62FC\\u56FE-\",children:(0,n.jsx)(l.a,{href:\"#\\u57FA\\u7840\\u6982\\u5FF5\\u961F\\u5217\\u8BF7\\u6C42\\u7684\\u62FC\\u56FE-\",children:\"\\u57FA\\u7840\\u6982\\u5FF5\\uFF1A\\u961F\\u5217\\u8BF7\\u6C42\\u7684\\u201C\\u62FC\\u56FE\\u201D \\u{1F9E9}\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u8981\\u8BBE\\u8BA1\\u4E00\\u4E2A\\u961F\\u5217\\u8BF7\\u6C42\\u7CFB\\u7EDF\\uFF0C\\u6211\\u4EEC\\u9700\\u8981\\u5148\\u641E\\u6E05\\u695A\\u51E0\\u4E2A\\u6838\\u5FC3\\u6982\\u5FF5\\u3002\\u8FD9\\u4E9B\\u6982\\u5FF5\\u5C31\\u50CF\\u62FC\\u56FE\\u7684\\u6BCF\\u4E00\\u5757\\uFF0C\\u62FC\\u51D1\\u5728\\u4E00\\u8D77\\u624D\\u80FD\\u5F62\\u6210\\u5B8C\\u6574\\u7684\\u753B\\u9762\\u3002\"}),`\n`,(0,n.jsx)(l.h3,{id:\"1-\\u4EC0\\u4E48\\u662F\\u961F\\u5217\",children:(0,n.jsx)(l.a,{href:\"#1-\\u4EC0\\u4E48\\u662F\\u961F\\u5217\",children:\"1. \\u4EC0\\u4E48\\u662F\\u961F\\u5217\\uFF1F\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u961F\\u5217\\uFF08Queue\\uFF09\\u662F\\u4E00\\u79CD**\\u5148\\u8FDB\\u5148\\u51FA\\uFF08FIFO, First-In-First-Out\\uFF09**\\u7684\\u6570\\u636E\\u7ED3\\u6784\\uFF0C\\u5C31\\u50CF\\u6392\\u961F\\u4E70\\u5976\\u8336\\uFF1A\\u5148\\u6765\\u7684\\u5148\\u670D\\u52A1\\uFF0C\\u540E\\u6765\\u7684\\u8010\\u5FC3\\u7B49\\u7740\\u3002\\u961F\\u5217\\u8BF7\\u6C42\\u7684\\u6838\\u5FC3\\u662F\\u5C06\\u8BF7\\u6C42\\u4EFB\\u52A1\\u653E\\u5165\\u961F\\u5217\\uFF0C\\u6309\\u987A\\u5E8F\\u9010\\u4E00\\u5904\\u7406\\u3002\"}),`\n`,(0,n.jsx)(l.p,{children:\"\\u4F46\\u524D\\u7AEF\\u7684\\u961F\\u5217\\u8BF7\\u6C42\\u5F80\\u5F80\\u6BD4\\u7B80\\u5355\\u7684FIFO\\u590D\\u6742\\u5F97\\u591A\\u3002\\u6211\\u4EEC\\u53EF\\u80FD\\u9700\\u8981\\uFF1A\"}),`\n`,(0,n.jsxs)(l.ul,{children:[`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u4F18\\u5148\\u7EA7\\u961F\\u5217\"}),\"\\uFF1AVIP\\u5BA2\\u6237\\uFF08\\u9AD8\\u4F18\\u5148\\u7EA7\\u8BF7\\u6C42\\uFF09\\u53EF\\u4EE5\\u63D2\\u961F\\u3002\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u5E76\\u53D1\\u961F\\u5217\"}),\"\\uFF1A\\u5141\\u8BB8\\u4E00\\u5B9A\\u6570\\u91CF\\u7684\\u8BF7\\u6C42\\u540C\\u65F6\\u5904\\u7406\\uFF0C\\u50CF\\u591A\\u6761\\u6536\\u94F6\\u53F0\\u540C\\u65F6\\u670D\\u52A1\\u3002\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u5F02\\u6B65\\u961F\\u5217\"}),\"\\uFF1A\\u6BCF\\u4E2A\\u8BF7\\u6C42\\u7684\\u6267\\u884C\\u662F\\u5F02\\u6B65\\u7684\\uFF0C\\u5B8C\\u6210\\u540E\\u901A\\u77E5\\u961F\\u5217\\u7EE7\\u7EED\\u5904\\u7406\\u4E0B\\u4E00\\u4E2A\\u3002\"]}),`\n`]}),`\n`,(0,n.jsx)(l.h3,{id:\"2-\\u5E76\\u53D1\\u63A7\\u5236\",children:(0,n.jsx)(l.a,{href:\"#2-\\u5E76\\u53D1\\u63A7\\u5236\",children:\"2. \\u5E76\\u53D1\\u63A7\\u5236\"})}),`\n`,(0,n.jsxs)(l.p,{children:[\"\\u6D4F\\u89C8\\u5668\\u7684HTTP/1.1\\u8FDE\\u63A5\\u6570\\u901A\\u5E38\\u9650\\u5236\\u57286~8\\u4E2A\\uFF08HTTP/2\\u6709\\u6240\\u63D0\\u5347\\uFF0C\\u4F46\\u4ECD\\u6709\\u4E0A\\u9650\\uFF09\\u3002\\u5982\\u679C\\u4E00\\u6B21\\u6027\\u53D1\\u51FA50\\u4E2A\\u8BF7\\u6C42\\uFF0C\\u5927\\u90E8\\u5206\\u4F1A\\u88AB\\u963B\\u585E\\uFF0C\\u4E25\\u91CD\\u5F71\\u54CD\\u6027\\u80FD\\u3002\\u5E76\\u53D1\\u63A7\\u5236\\u7684\\u672C\\u8D28\\u662F\",(0,n.jsx)(l.strong,{children:\"\\u9650\\u5236\\u540C\\u65F6\\u6267\\u884C\\u7684\\u8BF7\\u6C42\\u6570\\u91CF\"}),\"\\uFF0C\\u5C31\\u50CF\\u9910\\u5385\\u9650\\u5236\\u540C\\u65F6\\u5C31\\u9910\\u7684\\u987E\\u5BA2\\u6570\\u91CF\\uFF0C\\u907F\\u514D\\u670D\\u52A1\\u5458\\u5FD9\\u4E0D\\u8FC7\\u6765\\u3002\"]}),`\n`,(0,n.jsx)(l.h3,{id:\"3-\\u91CD\\u8BD5\\u673A\\u5236\",children:(0,n.jsx)(l.a,{href:\"#3-\\u91CD\\u8BD5\\u673A\\u5236\",children:\"3. \\u91CD\\u8BD5\\u673A\\u5236\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u7F51\\u7EDC\\u8BF7\\u6C42\\u4E0D\\u53EF\\u907F\\u514D\\u4F1A\\u5931\\u8D25\\uFF08\\u7F51\\u7EDC\\u6296\\u52A8\\u3001\\u670D\\u52A1\\u5668\\u8D85\\u65F6\\u7B49\\uFF09\\u3002\\u91CD\\u8BD5\\u673A\\u5236\\u662F\\u961F\\u5217\\u8BF7\\u6C42\\u7684\\u201C\\u5B89\\u5168\\u7F51\\u201D\\uFF0C\\u901A\\u8FC7\\u5408\\u7406\\u8BBE\\u7F6E\\u91CD\\u8BD5\\u6B21\\u6570\\u3001\\u95F4\\u9694\\u7B49\\u53C2\\u6570\\uFF0C\\u786E\\u4FDD\\u8BF7\\u6C42\\u5C3D\\u53EF\\u80FD\\u6210\\u529F\\uFF0C\\u540C\\u65F6\\u907F\\u514D\\u8FC7\\u5EA6\\u91CD\\u8BD5\\u5BFC\\u81F4\\u670D\\u52A1\\u5668\\u96EA\\u5D29\\u3002\"}),`\n`,(0,n.jsx)(l.h3,{id:\"4-\\u4F18\\u5148\\u7EA7\\u7BA1\\u7406\",children:(0,n.jsx)(l.a,{href:\"#4-\\u4F18\\u5148\\u7EA7\\u7BA1\\u7406\",children:\"4. \\u4F18\\u5148\\u7EA7\\u7BA1\\u7406\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u5E76\\u975E\\u6240\\u6709\\u8BF7\\u6C42\\u751F\\u800C\\u5E73\\u7B49\\u3002\\u652F\\u4ED8\\u8BF7\\u6C42\\u663E\\u7136\\u6BD4\\u5E7F\\u544A\\u52A0\\u8F7D\\u66F4\\u91CD\\u8981\\uFF0C\\u4F18\\u5148\\u7EA7\\u7BA1\\u7406\\u80FD\\u786E\\u4FDD\\u5173\\u952E\\u8BF7\\u6C42\\u4F18\\u5148\\u6267\\u884C\\uFF0C\\u5C31\\u50CF\\u533B\\u9662\\u7684\\u6025\\u8BCA\\u5BA4\\u603B\\u662F\\u4F18\\u5148\\u5904\\u7406\\u91CD\\u75C7\\u60A3\\u8005\\u3002\"}),`\n`,(0,n.jsx)(l.h3,{id:\"5-\\u8BF7\\u6C42\\u5408\\u5E76\\u4E0E\\u53BB\\u91CD\",children:(0,n.jsx)(l.a,{href:\"#5-\\u8BF7\\u6C42\\u5408\\u5E76\\u4E0E\\u53BB\\u91CD\",children:\"5. \\u8BF7\\u6C42\\u5408\\u5E76\\u4E0E\\u53BB\\u91CD\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u5982\\u679C\\u591A\\u4E2A\\u7EC4\\u4EF6\\u540C\\u65F6\\u8BF7\\u6C42\\u76F8\\u540C\\u7684\\u63A5\\u53E3\\uFF08\\u4F8B\\u5982\\u7528\\u6237\\u4FE1\\u606F\\uFF09\\uFF0C\\u53EF\\u4EE5\\u5408\\u5E76\\u6210\\u4E00\\u4E2A\\u8BF7\\u6C42\\uFF0C\\u51CF\\u5C11\\u670D\\u52A1\\u5668\\u538B\\u529B\\u3002\\u53BB\\u91CD\\u5219\\u662F\\u907F\\u514D\\u91CD\\u590D\\u53D1\\u9001\\u76F8\\u540C\\u7684\\u8BF7\\u6C42\\uFF0C\\u5C31\\u50CF\\u70B9\\u5916\\u5356\\u65F6\\u4E0D\\u4F1A\\u91CD\\u590D\\u4E0B\\u5355\\u540C\\u4E00\\u4EFD\\u9910\\u3002\"}),`\n`,(0,n.jsx)(l.h3,{id:\"6-\\u4F9D\\u8D56\\u7BA1\\u7406\",children:(0,n.jsx)(l.a,{href:\"#6-\\u4F9D\\u8D56\\u7BA1\\u7406\",children:\"6. \\u4F9D\\u8D56\\u7BA1\\u7406\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u67D0\\u4E9B\\u8BF7\\u6C42\\u9700\\u8981\\u7B49\\u5F85\\u5176\\u4ED6\\u8BF7\\u6C42\\u7684\\u7ED3\\u679C\\uFF0C\\u4F8B\\u5982\\u5148\\u83B7\\u53D6\\u7528\\u6237ID\\uFF0C\\u518D\\u6839\\u636EID\\u8BF7\\u6C42\\u7528\\u6237\\u8BE6\\u60C5\\u3002\\u961F\\u5217\\u9700\\u8981\\u652F\\u6301\\u4F9D\\u8D56\\u5173\\u7CFB\\uFF0C\\u5C31\\u50CF\\u70F9\\u996A\\u65F6\\u8981\\u5148\\u716E\\u597D\\u7C73\\u996D\\u518D\\u7092\\u83DC\\u3002\"}),`\n`,(0,n.jsx)(l.p,{children:\"\\u4EE5\\u4E0B\\u662F\\u4E00\\u4E2A\\u7B80\\u5355\\u7684\\u8868\\u683C\\uFF0C\\u603B\\u7ED3\\u8FD9\\u4E9B\\u6838\\u5FC3\\u6982\\u5FF5\\u53CA\\u5176\\u4F5C\\u7528\\uFF1A\"}),`\n`,(0,n.jsxs)(l.table,{children:[(0,n.jsx)(l.thead,{children:(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.th,{children:(0,n.jsx)(l.strong,{children:\"\\u6982\\u5FF5\"})}),(0,n.jsx)(l.th,{children:(0,n.jsx)(l.strong,{children:\"\\u4F5C\\u7528\"})}),(0,n.jsx)(l.th,{children:(0,n.jsx)(l.strong,{children:\"\\u7C7B\\u6BD4\"})})]})}),(0,n.jsxs)(l.tbody,{children:[(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.td,{children:\"\\u961F\\u5217\"}),(0,n.jsx)(l.td,{children:\"\\u6309\\u987A\\u5E8F\\u7BA1\\u7406\\u8BF7\\u6C42\\u4EFB\\u52A1\\uFF0C\\u907F\\u514D\\u65E0\\u5E8F\\u7ADE\\u4E89\"}),(0,n.jsx)(l.td,{children:\"\\u6392\\u961F\\u4E70\\u5976\\u8336\"})]}),(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.td,{children:\"\\u5E76\\u53D1\\u63A7\\u5236\"}),(0,n.jsx)(l.td,{children:\"\\u9650\\u5236\\u540C\\u65F6\\u6267\\u884C\\u7684\\u8BF7\\u6C42\\u6570\\uFF0C\\u63D0\\u5347\\u6027\\u80FD\"}),(0,n.jsx)(l.td,{children:\"\\u9910\\u5385\\u9650\\u5236\\u540C\\u65F6\\u5C31\\u9910\\u4EBA\\u6570\"})]}),(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.td,{children:\"\\u91CD\\u8BD5\\u673A\\u5236\"}),(0,n.jsx)(l.td,{children:\"\\u5904\\u7406\\u8BF7\\u6C42\\u5931\\u8D25\\uFF0C\\u63D0\\u9AD8\\u6210\\u529F\\u7387\"}),(0,n.jsx)(l.td,{children:\"\\u6E38\\u620F\\u91CC\\u7684\\u201C\\u518D\\u8BD5\\u4E00\\u6B21\\u201D\\u6309\\u94AE\"})]}),(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.td,{children:\"\\u4F18\\u5148\\u7EA7\\u7BA1\\u7406\"}),(0,n.jsx)(l.td,{children:\"\\u786E\\u4FDD\\u91CD\\u8981\\u8BF7\\u6C42\\u4F18\\u5148\\u6267\\u884C\"}),(0,n.jsx)(l.td,{children:\"\\u533B\\u9662\\u6025\\u8BCA\\u5BA4\\u4F18\\u5148\\u91CD\\u75C7\\u60A3\\u8005\"})]}),(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.td,{children:\"\\u8BF7\\u6C42\\u5408\\u5E76\\u4E0E\\u53BB\\u91CD\"}),(0,n.jsx)(l.td,{children:\"\\u51CF\\u5C11\\u91CD\\u590D\\u8BF7\\u6C42\\uFF0C\\u4F18\\u5316\\u670D\\u52A1\\u5668\\u8D1F\\u8F7D\"}),(0,n.jsx)(l.td,{children:\"\\u70B9\\u5916\\u5356\\u5408\\u5E76\\u76F8\\u540C\\u8BA2\\u5355\"})]}),(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.td,{children:\"\\u4F9D\\u8D56\\u7BA1\\u7406\"}),(0,n.jsx)(l.td,{children:\"\\u534F\\u8C03\\u8BF7\\u6C42\\u95F4\\u7684\\u4F9D\\u8D56\\u5173\\u7CFB\\uFF0C\\u4FDD\\u8BC1\\u903B\\u8F91\\u6B63\\u786E\"}),(0,n.jsx)(l.td,{children:\"\\u5148\\u716E\\u7C73\\u996D\\u518D\\u7092\\u83DC\"})]})]})]}),`\n`,(0,n.jsx)(l.p,{children:(0,n.jsx)(l.em,{children:\"\\u{1F4CC} \\u5C0FTips\\uFF1A\\u7406\\u89E3\\u8FD9\\u4E9B\\u6982\\u5FF5\\u662F\\u8BBE\\u8BA1\\u961F\\u5217\\u7684\\u7B2C\\u4E00\\u6B65\\u3002\\u5EFA\\u8BAE\\u5728\\u5B9E\\u9645\\u9879\\u76EE\\u4E2D\\u5148\\u4ECE\\u7B80\\u5355\\u7684FIFO\\u961F\\u5217\\u5165\\u624B\\uFF0C\\u9010\\u6B65\\u5F15\\u5165\\u5E76\\u53D1\\u63A7\\u5236\\u548C\\u4F18\\u5148\\u7EA7\\u7BA1\\u7406\\uFF0C\\u5FAA\\u5E8F\\u6E10\\u8FDB\\u3002\"})}),`\n`,(0,n.jsx)(l.h2,{id:\"\\u5B9E\\u73B0\\u539F\\u7406\\u4ECE\\u7406\\u8BBA\\u5230\\u4EE3\\u7801-\\uFE0F\",children:(0,n.jsx)(l.a,{href:\"#\\u5B9E\\u73B0\\u539F\\u7406\\u4ECE\\u7406\\u8BBA\\u5230\\u4EE3\\u7801-\\uFE0F\",children:\"\\u5B9E\\u73B0\\u539F\\u7406\\uFF1A\\u4ECE\\u7406\\u8BBA\\u5230\\u4EE3\\u7801 \\u{1F6E0}\\uFE0F\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u7406\\u8BBA\\u8BB2\\u5B8C\\u4E86\\uFF0C\\u63A5\\u4E0B\\u6765\\u8FDB\\u5165\\u786C\\u6838\\u90E8\\u5206\\uFF1A\\u5982\\u4F55\\u7528\\u4EE3\\u7801\\u5B9E\\u73B0\\u4E00\\u4E2A\\u961F\\u5217\\u8BF7\\u6C42\\u7CFB\\u7EDF\\uFF1F\\u6211\\u4EEC\\u5C06\\u4ECE\\u4E00\\u4E2A\\u7B80\\u5355\\u7684\\u961F\\u5217\\u5F00\\u59CB\\uFF0C\\u9010\\u6B65\\u6269\\u5C55\\u5230\\u652F\\u6301\\u5E76\\u53D1\\u3001\\u4F18\\u5148\\u7EA7\\u3001\\u91CD\\u8BD5\\u7B49\\u529F\\u80FD\\u7684\\u5B8C\\u6574\\u7CFB\\u7EDF\\u3002\"}),`\n`,(0,n.jsx)(l.h3,{id:\"1-\\u57FA\\u7840\\u961F\\u5217\\u5B9E\\u73B0\",children:(0,n.jsx)(l.a,{href:\"#1-\\u57FA\\u7840\\u961F\\u5217\\u5B9E\\u73B0\",children:\"1. \\u57FA\\u7840\\u961F\\u5217\\u5B9E\\u73B0\"})}),`\n`,(0,n.jsxs)(l.p,{children:[\"\\u8BA9\\u6211\\u4EEC\\u5148\\u5B9E\\u73B0\\u4E00\\u4E2A\\u6700\\u7B80\\u5355\\u7684\",(0,n.jsx)(l.strong,{children:\"FIFO\\u961F\\u5217\"}),\"\\uFF0C\\u652F\\u6301\\u5F02\\u6B65\\u8BF7\\u6C42\\u7684\\u987A\\u5E8F\\u5904\\u7406\\u3002\"]}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"typescript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(l.code,{\"data-language\":\"typescript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"class\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" RequestQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  private\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\" queue\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Array\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"<() \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Promise\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"any\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">> \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" [];\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  private\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\" isProcessing\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" boolean\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" false\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"  // \\u6DFB\\u52A0\\u8BF7\\u6C42\\u5230\\u961F\\u5217\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  add\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"request\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Promise\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"any\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">) {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"push\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(request);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"processNext\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"  // \\u5904\\u7406\\u4E0B\\u4E00\\u4E2A\\u8BF7\\u6C42\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  private\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" async\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" processNext\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    if\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".isProcessing \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"||\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"length\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" ===\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 0\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"return\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".isProcessing \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" true\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" request\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"shift\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(); \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u53D6\\u51FA\\u7B2C\\u4E00\\u4E2A\\u8BF7\\u6C42\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    try\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      await\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" request\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(); \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u6267\\u884C\\u8BF7\\u6C42\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"catch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (error) {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      console.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"error\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'Request failed:'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", error);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"finally\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"      this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".isProcessing \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" false\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"      this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"processNext\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(); \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u7EE7\\u7EED\\u5904\\u7406\\u4E0B\\u4E00\\u4E2A\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u4F7F\\u7528\\u793A\\u4F8B\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" queue\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" RequestQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"add\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(() \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" fetch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'/api/user'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\").\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"res\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" res.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"json\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"()));\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"add\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(() \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" fetch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'/api/orders'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\").\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"res\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" res.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"json\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"()));\"})]})]})})}),`\n`,(0,n.jsxs)(l.p,{children:[(0,n.jsx)(l.strong,{children:\"\\u5DE5\\u4F5C\\u539F\\u7406\"}),\"\\uFF1A\"]}),`\n`,(0,n.jsxs)(l.ol,{children:[`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{children:\"add\"})})})}),\"\\u65B9\\u6CD5\\u5C06\\u8BF7\\u6C42\\u51FD\\u6570\\u63A8\\u5165\\u961F\\u5217\\uFF0C\\u5E76\\u5C1D\\u8BD5\\u89E6\\u53D1\\u5904\\u7406\\u3002\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{children:\"processNext\"})})})}),\"\\u65B9\\u6CD5\\u68C0\\u67E5\\u662F\\u5426\\u6B63\\u5728\\u5904\\u7406\\u8BF7\\u6C42\\uFF0C\\u82E5\\u5426\\uFF0C\\u5219\\u53D6\\u51FA\\u961F\\u5217\\u5934\\u7684\\u8BF7\\u6C42\\u6267\\u884C\\u3002\"]}),`\n`,(0,n.jsxs)(l.li,{children:[\"\\u4F7F\\u7528\",(0,n.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{children:\"isProcessing\"})})})}),\"\\u6807\\u5FD7\\u786E\\u4FDD\\u540C\\u4E00\\u65F6\\u95F4\\u53EA\\u6709\\u4E00\\u4E2A\\u8BF7\\u6C42\\u5728\\u5904\\u7406\\u3002\"]}),`\n`,(0,n.jsx)(l.li,{children:\"\\u8BF7\\u6C42\\u5B8C\\u6210\\u540E\\uFF08\\u65E0\\u8BBA\\u6210\\u529F\\u6216\\u5931\\u8D25\\uFF09\\uFF0C\\u7EE7\\u7EED\\u5904\\u7406\\u4E0B\\u4E00\\u4E2A\\u3002\"}),`\n`]}),`\n`,(0,n.jsxs)(l.p,{children:[(0,n.jsx)(l.strong,{children:\"\\u7C7B\\u6BD4\"}),\"\\uFF1A\\u8FD9\\u5C31\\u50CF\\u4E00\\u4E2A\\u5355\\u4EBA\\u6536\\u94F6\\u53F0\\u7684\\u5976\\u8336\\u5E97\\uFF0C\\u987E\\u5BA2\\u4E00\\u4E2A\\u63A5\\u4E00\\u4E2A\\u70B9\\u5355\\uFF0C\\u6536\\u94F6\\u5458\\u5904\\u7406\\u5B8C\\u4E00\\u4E2A\\u518D\\u670D\\u52A1\\u4E0B\\u4E00\\u4E2A\\u3002\"]}),`\n`,(0,n.jsx)(l.p,{children:(0,n.jsx)(l.em,{children:\"\\u{1F4CC} \\u5C0FTips\\uFF1A\\u57FA\\u7840\\u961F\\u5217\\u9002\\u5408\\u7B80\\u5355\\u573A\\u666F\\uFF0C\\u4F46\\u4E0D\\u652F\\u6301\\u5E76\\u53D1\\u548C\\u4F18\\u5148\\u7EA7\\u3002\\u5728\\u5B9E\\u9645\\u9879\\u76EE\\u4E2D\\uFF0C\\u5EFA\\u8BAE\\u6839\\u636E\\u9700\\u6C42\\u6269\\u5C55\\u529F\\u80FD\\uFF0C\\u907F\\u514D\\u201C\\u4E00\\u5200\\u5207\\u201D\\u3002\"})}),`\n`,(0,n.jsx)(l.h3,{id:\"2-\\u652F\\u6301\\u5E76\\u53D1\\u63A7\\u5236\",children:(0,n.jsx)(l.a,{href:\"#2-\\u652F\\u6301\\u5E76\\u53D1\\u63A7\\u5236\",children:\"2. \\u652F\\u6301\\u5E76\\u53D1\\u63A7\\u5236\"})}),`\n`,(0,n.jsxs)(l.p,{children:[\"\\u5355\\u7EBF\\u7A0B\\u961F\\u5217\\u592A\\u6162\\u4E86\\uFF01\\u73B0\\u4EE3\\u6D4F\\u89C8\\u5668\\u652F\\u6301\\u591A\\u4E2A\\u5E76\\u53D1\\u8FDE\\u63A5\\uFF0C\\u6211\\u4EEC\\u9700\\u8981\\u8BA9\\u961F\\u5217\\u652F\\u6301\",(0,n.jsx)(l.strong,{children:\"\\u5E76\\u53D1\\u8BF7\\u6C42\"}),\"\\u3002\\u4EE5\\u4E0B\\u662F\\u4E00\\u4E2A\\u652F\\u6301\\u6700\\u5927\\u5E76\\u53D1\\u6570\\u7684\\u961F\\u5217\\u5B9E\\u73B0\\uFF1A\"]}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"typescript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(l.code,{\"data-language\":\"typescript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"class\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" ConcurrentRequestQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  private\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\" queue\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Array\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"<() \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Promise\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"any\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">> \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" [];\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  private\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\" activeCount\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" number\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 0\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  private\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\" maxConcurrency\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" number\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  constructor\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"maxConcurrency\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" number\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 6\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".maxConcurrency \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" maxConcurrency;\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  add\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"request\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Promise\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"any\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">) {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"push\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(request);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"processQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  private\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" async\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" processQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    if\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".activeCount \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\">=\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".maxConcurrency \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"||\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"length\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" ===\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 0\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"return\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".activeCount\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"++\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" request\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"shift\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    try\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      await\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" request\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"catch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (error) {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      console.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"error\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'Request failed:'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", error);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"finally\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"      this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".activeCount\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"--\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"      this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"processQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(); \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u7EE7\\u7EED\\u5904\\u7406\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u4F7F\\u7528\\u793A\\u4F8B\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" queue\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" ConcurrentRequestQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"3\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"); \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u6700\\u5927\\u5E76\\u53D13\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"add\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(() \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" fetch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'/api/user'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\").\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"res\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" res.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"json\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"()));\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"add\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(() \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" fetch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'/api/orders'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\").\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"res\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" res.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"json\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"()));\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"add\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(() \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" fetch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'/api/products'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\").\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"res\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" res.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"json\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"()));\"})]})]})})}),`\n`,(0,n.jsxs)(l.p,{children:[(0,n.jsx)(l.strong,{children:\"\\u6539\\u8FDB\\u70B9\"}),\"\\uFF1A\"]}),`\n`,(0,n.jsxs)(l.ol,{children:[`\n`,(0,n.jsxs)(l.li,{children:[\"\\u5F15\\u5165\",(0,n.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{children:\"maxConcurrency\"})})})}),\"\\u53C2\\u6570\\uFF0C\\u63A7\\u5236\\u6700\\u5927\\u5E76\\u53D1\\u6570\\u3002\"]}),`\n`,(0,n.jsxs)(l.li,{children:[\"\\u4F7F\\u7528\",(0,n.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{children:\"activeCount\"})})})}),\"\\u8DDF\\u8E2A\\u5F53\\u524D\\u6B63\\u5728\\u6267\\u884C\\u7684\\u8BF7\\u6C42\\u6570\\u3002\"]}),`\n`,(0,n.jsx)(l.li,{children:\"\\u5F53\\u6709\\u7A7A\\u95F2\\u201C\\u69FD\\u4F4D\\u201D\\u65F6\\uFF0C\\u7ACB\\u5373\\u5904\\u7406\\u4E0B\\u4E00\\u4E2A\\u8BF7\\u6C42\\u3002\"}),`\n`]}),`\n`,(0,n.jsxs)(l.p,{children:[(0,n.jsx)(l.strong,{children:\"\\u7C7B\\u6BD4\"}),\"\\uFF1A\\u8FD9\\u5C31\\u50CF\\u4E00\\u5BB6\\u5976\\u8336\\u5E97\\u5F00\\u4E86\\u4E09\\u4E2A\\u6536\\u94F6\\u53F0\\uFF0C\\u540C\\u65F6\\u670D\\u52A1\\u4E09\\u4F4D\\u987E\\u5BA2\\uFF0C\\u5176\\u4ED6\\u4EBA\\u7EE7\\u7EED\\u6392\\u961F\\u7B49\\u7740\\u3002\"]}),`\n`,(0,n.jsx)(l.p,{children:(0,n.jsx)(l.em,{children:\"\\u{1F4CC} \\u5C0FTips\\uFF1A\\u5E76\\u53D1\\u6570\\u7684\\u9009\\u62E9\\u8981\\u6839\\u636E\\u670D\\u52A1\\u5668\\u80FD\\u529B\\u548C\\u573A\\u666F\\u8C03\\u6574\\u3002HTTP/1.1\\u5EFA\\u8BAE6\\uFF0CHTTP/2\\u53EF\\u9002\\u5F53\\u63D0\\u9AD8\\uFF0C\\u4F46\\u8FC7\\u9AD8\\u53EF\\u80FD\\u5F15\\u53D1\\u670D\\u52A1\\u5668\\u9650\\u6D41\\u3002\"})}),`\n`,(0,n.jsx)(l.h3,{id:\"3-\\u6DFB\\u52A0\\u4F18\\u5148\\u7EA7\\u652F\\u6301\",children:(0,n.jsx)(l.a,{href:\"#3-\\u6DFB\\u52A0\\u4F18\\u5148\\u7EA7\\u652F\\u6301\",children:\"3. \\u6DFB\\u52A0\\u4F18\\u5148\\u7EA7\\u652F\\u6301\"})}),`\n`,(0,n.jsxs)(l.p,{children:[\"\\u73B0\\u5B9E\\u4E2D\\uFF0C\\u8BF7\\u6C42\\u7684\\u91CD\\u8981\\u6027\\u4E0D\\u540C\\u3002\\u6211\\u4EEC\\u9700\\u8981\\u4E00\\u4E2A\",(0,n.jsx)(l.strong,{children:\"\\u4F18\\u5148\\u7EA7\\u961F\\u5217\"}),\"\\uFF0C\\u8BA9\\u9AD8\\u4F18\\u5148\\u7EA7\\u8BF7\\u6C42\\u63D2\\u961F\\u3002\\u4EE5\\u4E0B\\u662F\\u4E00\\u4E2A\\u5B9E\\u73B0\\uFF1A\"]}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"typescript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(l.code,{\"data-language\":\"typescript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"interface\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" QueueTask\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  request\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Promise\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"any\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">;\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"  priority\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" number\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"; \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u8D8A\\u5C0F\\u4F18\\u5148\\u7EA7\\u8D8A\\u9AD8\\uFF0C0\\u4E3A\\u6700\\u9AD8\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"class\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" PriorityRequestQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  private\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\" queue\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" QueueTask\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"[] \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" [];\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  private\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\" activeCount\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" number\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 0\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  private\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\" maxConcurrency\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" number\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  constructor\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"maxConcurrency\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" number\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 6\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".maxConcurrency \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" maxConcurrency;\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  add\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"request\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Promise\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"any\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">, \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"priority\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" number\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 10\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"push\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({ request, priority });\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"sort\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"a\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"b\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" a.priority \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" b.priority); \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u6309\\u4F18\\u5148\\u7EA7\\u6392\\u5E8F\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"processQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  private\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" async\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" processQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    if\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".activeCount \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\">=\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".maxConcurrency \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"||\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"length\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" ===\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 0\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"return\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".activeCount\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"++\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" task\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"shift\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    try\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      await\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" task.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"request\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"catch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (error) {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      console.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"error\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'Request failed:'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", error);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"finally\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"      this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".activeCount\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"--\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"      this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"processQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u4F7F\\u7528\\u793A\\u4F8B\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" queue\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" PriorityRequestQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"3\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"add\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(() \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" fetch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'/api/payment'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\").\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"res\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" res.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"json\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"()), \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"); \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u9AD8\\u4F18\\u5148\\u7EA7\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"add\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(() \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" fetch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'/api/logs'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\").\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"res\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" res.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"json\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"()), \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"10\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"); \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u4F4E\\u4F18\\u5148\\u7EA7\"})]})]})})}),`\n`,(0,n.jsxs)(l.p,{children:[(0,n.jsx)(l.strong,{children:\"\\u6539\\u8FDB\\u70B9\"}),\"\\uFF1A\"]}),`\n`,(0,n.jsxs)(l.ol,{children:[`\n`,(0,n.jsxs)(l.li,{children:[\"\\u6BCF\\u4E2A\\u4EFB\\u52A1\\u5E26\\u6709\\u4E00\\u4E2A\",(0,n.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{children:\"priority\"})})})}),\"\\u5B57\\u6BB5\\uFF0C\\u503C\\u8D8A\\u5C0F\\u4F18\\u5148\\u7EA7\\u8D8A\\u9AD8\\u3002\"]}),`\n`,(0,n.jsx)(l.li,{children:\"\\u6BCF\\u6B21\\u6DFB\\u52A0\\u4EFB\\u52A1\\u540E\\uFF0C\\u6309\\u4F18\\u5148\\u7EA7\\u91CD\\u65B0\\u6392\\u5E8F\\u961F\\u5217\\u3002\"}),`\n`,(0,n.jsx)(l.li,{children:\"\\u9AD8\\u4F18\\u5148\\u7EA7\\u4EFB\\u52A1\\u603B\\u662F\\u5148\\u6267\\u884C\\u3002\"}),`\n`]}),`\n`,(0,n.jsxs)(l.p,{children:[(0,n.jsx)(l.strong,{children:\"\\u7C7B\\u6BD4\"}),\"\\uFF1A\\u5C31\\u50CF\\u673A\\u573A\\u5B89\\u68C0\\uFF0CVIP\\u4E58\\u5BA2\\u8D70\\u7EFF\\u8272\\u901A\\u9053\\uFF0C\\u666E\\u901A\\u4E58\\u5BA2\\u8001\\u8001\\u5B9E\\u5B9E\\u6392\\u961F\\u3002\"]}),`\n`,(0,n.jsx)(l.p,{children:(0,n.jsx)(l.em,{children:\"\\u{1F4CC} \\u5C0FTips\\uFF1A\\u4F18\\u5148\\u7EA7\\u8BBE\\u8BA1\\u8981\\u8C28\\u614E\\uFF0C\\u8FC7\\u591A\\u4F18\\u5148\\u7EA7\\u53EF\\u80FD\\u5BFC\\u81F4\\u4F4E\\u4F18\\u5148\\u7EA7\\u8BF7\\u6C42\\u201C\\u997F\\u6B7B\\u201D\\u3002\\u5EFA\\u8BAE\\u5C06\\u4F18\\u5148\\u7EA7\\u63A7\\u5236\\u57283~5\\u4E2A\\u7EA7\\u522B\\u3002\"})}),`\n`,(0,n.jsx)(l.h3,{id:\"4-\\u5B9E\\u73B0\\u91CD\\u8BD5\\u673A\\u5236\",children:(0,n.jsx)(l.a,{href:\"#4-\\u5B9E\\u73B0\\u91CD\\u8BD5\\u673A\\u5236\",children:\"4. \\u5B9E\\u73B0\\u91CD\\u8BD5\\u673A\\u5236\"})}),`\n`,(0,n.jsxs)(l.p,{children:[\"\\u8BF7\\u6C42\\u5931\\u8D25\\u662F\\u5E38\\u6001\\uFF0C\\u6211\\u4EEC\\u9700\\u8981\\u4E3A\\u961F\\u5217\\u6DFB\\u52A0\",(0,n.jsx)(l.strong,{children:\"\\u91CD\\u8BD5\\u673A\\u5236\"}),\"\\u3002\\u4EE5\\u4E0B\\u662F\\u4E00\\u4E2A\\u5E26\\u91CD\\u8BD5\\u7684\\u961F\\u5217\\uFF1A\"]}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"typescript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(l.code,{\"data-language\":\"typescript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"interface\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" QueueTask\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  request\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Promise\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"any\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">;\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"  priority\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" number\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"  retries\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" number\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"  maxRetries\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" number\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"class\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" RetryRequestQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  private\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\" queue\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" QueueTask\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"[] \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" [];\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  private\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\" activeCount\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" number\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 0\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  private\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\" maxConcurrency\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" number\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  constructor\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"maxConcurrency\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" number\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 6\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".maxConcurrency \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" maxConcurrency;\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  add\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"request\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Promise\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"any\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">, \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"priority\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" number\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 10\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"maxRetries\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" number\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 3\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"push\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({ request, priority, retries: \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", maxRetries });\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"sort\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"a\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"b\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" a.priority \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" b.priority);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"processQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  private\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" async\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" processQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    if\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".activeCount \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\">=\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".maxConcurrency \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"||\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"length\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" ===\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 0\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"return\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".activeCount\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"++\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" task\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"shift\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    try\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      await\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" task.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"request\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"catch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (error) {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      task.retries\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"++\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      if\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (task.retries \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"<=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" task.maxRetries) {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"        console.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"warn\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"`Retrying ${\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"task\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"retries\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"}/${\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"task\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"maxRetries\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"}...`\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"        this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"push\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(task); \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u5931\\u8D25\\u540E\\u91CD\\u65B0\\u5165\\u961F\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"        this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"sort\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"a\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"b\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" a.priority \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" b.priority);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"else\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"        console.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"error\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'Request failed after retries:'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", error);\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      }\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"finally\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"      this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".activeCount\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"--\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"      this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"processQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u4F7F\\u7528\\u793A\\u4F8B\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" queue\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" RetryRequestQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"3\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"add\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" fetch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'/api/unstable'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\").\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"res\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    if\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (Math.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"random\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"() \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\">\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 0.7\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"throw\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Error\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'Random failure'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    return\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" res.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"json\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }),\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"  0\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"  3\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})})]})})}),`\n`,(0,n.jsxs)(l.p,{children:[(0,n.jsx)(l.strong,{children:\"\\u6539\\u8FDB\\u70B9\"}),\"\\uFF1A\"]}),`\n`,(0,n.jsxs)(l.ol,{children:[`\n`,(0,n.jsxs)(l.li,{children:[\"\\u6BCF\\u4E2A\\u4EFB\\u52A1\\u8BB0\\u5F55\",(0,n.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{children:\"retries\"})})})}),\"\\u548C\",(0,n.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{children:\"maxRetries\"})})})}),\"\\u3002\"]}),`\n`,(0,n.jsx)(l.li,{children:\"\\u8BF7\\u6C42\\u5931\\u8D25\\u540E\\uFF0C\\u82E5\\u672A\\u8FBE\\u5230\\u6700\\u5927\\u91CD\\u8BD5\\u6B21\\u6570\\uFF0C\\u91CD\\u65B0\\u5165\\u961F\\u3002\"}),`\n`,(0,n.jsx)(l.li,{children:\"\\u4FDD\\u6301\\u4F18\\u5148\\u7EA7\\u6392\\u5E8F\\uFF0C\\u907F\\u514D\\u91CD\\u8BD5\\u4EFB\\u52A1\\u5F71\\u54CD\\u5176\\u4ED6\\u4EFB\\u52A1\\u3002\"}),`\n`]}),`\n`,(0,n.jsxs)(l.p,{children:[(0,n.jsx)(l.strong,{children:\"\\u7C7B\\u6BD4\"}),\"\\uFF1A\\u5C31\\u50CF\\u73A9\\u8857\\u673A\\u6E38\\u620F\\uFF0C\\u6295\\u5E01\\u5931\\u8D25\\u4E86\\u8FD8\\u80FD\\u518D\\u8BD5\\u51E0\\u6B21\\uFF0C\\u4F46\\u603B\\u4E0D\\u80FD\\u65E0\\u9650\\u6295\\u5E01\\u5427\\uFF1F\"]}),`\n`,(0,n.jsx)(l.p,{children:(0,n.jsx)(l.em,{children:\"\\u{1F4CC} \\u5C0FTips\\uFF1A\\u91CD\\u8BD5\\u95F4\\u9694\\u5EFA\\u8BAE\\u4F7F\\u7528\\u6307\\u6570\\u9000\\u907F\\uFF08exponential backoff\\uFF09\\uFF0C\\u907F\\u514D\\u77ED\\u65F6\\u95F4\\u5185\\u91CD\\u590D\\u51B2\\u51FB\\u670D\\u52A1\\u5668\\u3002\"})}),`\n`,(0,n.jsx)(l.h3,{id:\"5-\\u8BF7\\u6C42\\u5408\\u5E76\\u4E0E\\u53BB\\u91CD-1\",children:(0,n.jsx)(l.a,{href:\"#5-\\u8BF7\\u6C42\\u5408\\u5E76\\u4E0E\\u53BB\\u91CD-1\",children:\"5. \\u8BF7\\u6C42\\u5408\\u5E76\\u4E0E\\u53BB\\u91CD\"})}),`\n`,(0,n.jsxs)(l.p,{children:[\"\\u5982\\u679C\\u591A\\u4E2A\\u7EC4\\u4EF6\\u540C\\u65F6\\u8BF7\\u6C42\\u540C\\u4E00\\u63A5\\u53E3\\uFF0C\\u6211\\u4EEC\\u53EF\\u4EE5\\u901A\\u8FC7\",(0,n.jsx)(l.strong,{children:\"\\u8BF7\\u6C42\\u5408\\u5E76\"}),\"\\u51CF\\u5C11\\u670D\\u52A1\\u5668\\u538B\\u529B\\u3002\\u4EE5\\u4E0B\\u662F\\u4E00\\u4E2A\\u7B80\\u5355\\u7684\\u5B9E\\u73B0\\uFF1A\"]}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"typescript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(l.code,{\"data-language\":\"typescript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"interface\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" QueueTask\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  request\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Promise\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"any\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">;\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"  priority\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" number\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"  key\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" string\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"; \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u7528\\u4E8E\\u53BB\\u91CD\\u7684\\u552F\\u4E00\\u6807\\u8BC6\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"class\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" DedupeRequestQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  private\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\" queue\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" QueueTask\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"[] \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" [];\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  private\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\" activeCount\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" number\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 0\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  private\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\" maxConcurrency\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" number\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  private\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\" pendingPromises\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Map\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"string\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"Promise\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"any\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">> \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Map\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  constructor\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"maxConcurrency\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" number\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 6\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".maxConcurrency \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" maxConcurrency;\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  add\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"request\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Promise\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"any\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">, \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"key\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" string\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"priority\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" number\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 10\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"    // \\u5982\\u679C\\u5DF2\\u6709\\u76F8\\u540Ckey\\u7684\\u8BF7\\u6C42\\uFF0C\\u8FD4\\u56DE\\u73B0\\u6709promise\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    if\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".pendingPromises.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"has\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(key)) {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      return\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".pendingPromises.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"get\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(key);\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" promise\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" Promise\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"async\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"resolve\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"reject\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"      this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"push\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({ request, key, priority });\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"      this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"sort\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"a\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"b\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" a.priority \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" b.priority);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      await\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"processQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"      resolve\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"await\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" request\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"());\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    });\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".pendingPromises.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"set\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(key, promise);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    return\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" promise;\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  private\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" async\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" processQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    if\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".activeCount \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\">=\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".maxConcurrency \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"||\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"length\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" ===\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 0\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"return\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".activeCount\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"++\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" task\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"shift\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    try\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      await\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" task.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"request\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"      this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".pendingPromises.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"delete\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(task.key);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"catch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (error) {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      console.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"error\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'Request failed:'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", error);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"      this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".pendingPromises.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"delete\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(task.key);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"finally\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"      this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".activeCount\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"--\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"      this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"processQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u4F7F\\u7528\\u793A\\u4F8B\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" queue\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" DedupeRequestQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"3\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" userRequest\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" fetch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'/api/user'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\").\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"res\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" res.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"json\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"());\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"add\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(userRequest, \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'user'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"add\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(userRequest, \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'user'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"); \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u91CD\\u590D\\u8BF7\\u6C42\\u4F1A\\u88AB\\u5408\\u5E76\"})]})]})})}),`\n`,(0,n.jsxs)(l.p,{children:[(0,n.jsx)(l.strong,{children:\"\\u6539\\u8FDB\\u70B9\"}),\"\\uFF1A\"]}),`\n`,(0,n.jsxs)(l.ol,{children:[`\n`,(0,n.jsxs)(l.li,{children:[\"\\u4F7F\\u7528\",(0,n.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{children:\"key\"})})})}),\"\\u6807\\u8BC6\\u8BF7\\u6C42\\u7684\\u552F\\u4E00\\u6027\\uFF0C\\u91CD\\u590D\\u8BF7\\u6C42\\u8FD4\\u56DE\\u76F8\\u540C\\u7684promise\\u3002\"]}),`\n`,(0,n.jsxs)(l.li,{children:[\"\\u901A\\u8FC7\",(0,n.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{children:\"pendingPromises\"})})})}),\"\\u7F13\\u5B58\\u6B63\\u5728\\u5904\\u7406\\u7684\\u8BF7\\u6C42\\u3002\"]}),`\n`,(0,n.jsx)(l.li,{children:\"\\u8BF7\\u6C42\\u5B8C\\u6210\\u540E\\u6E05\\u7406\\u7F13\\u5B58\\u3002\"}),`\n`]}),`\n`,(0,n.jsxs)(l.p,{children:[(0,n.jsx)(l.strong,{children:\"\\u7C7B\\u6BD4\"}),\"\\uFF1A\\u5C31\\u50CF\\u70B9\\u5916\\u5356\\uFF0C\\u540C\\u4E00\\u4E2A\\u8BA2\\u5355\\u4E0D\\u4F1A\\u91CD\\u590D\\u9001\\u5230\\uFF0C\\u53EA\\u9700\\u7B49\\u5F85\\u4E00\\u4EFD\\u5C31\\u591F\\u4E86\\u3002\"]}),`\n`,(0,n.jsx)(l.p,{children:(0,n.jsx)(l.em,{children:\"\\u{1F4CC} \\u5C0FTips\\uFF1A\\u8BF7\\u6C42\\u5408\\u5E76\\u9002\\u5408\\u9AD8\\u9891\\u3001\\u91CD\\u590D\\u6027\\u9AD8\\u7684\\u63A5\\u53E3\\uFF08\\u5982\\u7528\\u6237\\u4FE1\\u606F\\uFF09\\u3002\\u4E3A\\u907F\\u514D\\u7F13\\u5B58\\u8FC7\\u671F\\uFF0C\\u5EFA\\u8BAE\\u4E3Apromise\\u8BBE\\u7F6E\\u8D85\\u65F6\\u6E05\\u7406\\u673A\\u5236\\u3002\"})}),`\n`,(0,n.jsx)(l.h2,{id:\"\\u9AD8\\u7EA7\\u573A\\u666F\\u5E94\\u5BF9\\u590D\\u6742\\u9700\\u6C42-\",children:(0,n.jsx)(l.a,{href:\"#\\u9AD8\\u7EA7\\u573A\\u666F\\u5E94\\u5BF9\\u590D\\u6742\\u9700\\u6C42-\",children:\"\\u9AD8\\u7EA7\\u573A\\u666F\\uFF1A\\u5E94\\u5BF9\\u590D\\u6742\\u9700\\u6C42 \\u{1F680}\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u57FA\\u7840\\u961F\\u5217\\u5DF2\\u7ECF\\u591F\\u7528\\u4E86\\uFF0C\\u4F46\\u771F\\u5B9E\\u9879\\u76EE\\u4E2D\\u603B\\u6709\\u4E00\\u4E9B\\u201C\\u5947\\u8469\\u201D\\u9700\\u6C42\\u3002\\u4EE5\\u4E0B\\u662F\\u51E0\\u4E2A\\u9AD8\\u7EA7\\u573A\\u666F\\u7684\\u89E3\\u51B3\\u65B9\\u6848\\u3002\"}),`\n`,(0,n.jsx)(l.h3,{id:\"1-\\u4F9D\\u8D56\\u8BF7\\u6C42\\u8C03\\u5EA6\",children:(0,n.jsx)(l.a,{href:\"#1-\\u4F9D\\u8D56\\u8BF7\\u6C42\\u8C03\\u5EA6\",children:\"1. \\u4F9D\\u8D56\\u8BF7\\u6C42\\u8C03\\u5EA6\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u67D0\\u4E9B\\u8BF7\\u6C42\\u9700\\u8981\\u7B49\\u5F85\\u5176\\u4ED6\\u8BF7\\u6C42\\u7684\\u7ED3\\u679C\\uFF0C\\u4F8B\\u5982\\uFF1A\"}),`\n`,(0,n.jsxs)(l.ol,{children:[`\n`,(0,n.jsx)(l.li,{children:\"\\u8BF7\\u6C42A\\uFF1A\\u83B7\\u53D6\\u7528\\u6237ID\\u3002\"}),`\n`,(0,n.jsx)(l.li,{children:\"\\u8BF7\\u6C42B\\uFF1A\\u6839\\u636E\\u7528\\u6237ID\\u83B7\\u53D6\\u8BA2\\u5355\\u5217\\u8868\\u3002\"}),`\n`]}),`\n`,(0,n.jsxs)(l.p,{children:[\"\\u6211\\u4EEC\\u53EF\\u4EE5\\u901A\\u8FC7\",(0,n.jsx)(l.strong,{children:\"\\u4F9D\\u8D56\\u961F\\u5217\"}),\"\\u5B9E\\u73B0\\uFF1A\"]}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"typescript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(l.code,{\"data-language\":\"typescript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"interface\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" DependentTask\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  request\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Promise\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"any\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">;\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"  dependencies\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" string\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"[]; \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u4F9D\\u8D56\\u7684\\u4EFB\\u52A1key\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"  key\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" string\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"class\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" DependentRequestQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  private\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\" queue\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" DependentTask\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"[] \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" [];\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  private\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\" results\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Map\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"string\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"any\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"> \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Map\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  private\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\" activeCount\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" number\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 0\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  private\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\" maxConcurrency\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" number\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  constructor\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"maxConcurrency\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" number\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 6\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".maxConcurrency \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" maxConcurrency;\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  add\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"request\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Promise\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"any\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">, \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"key\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" string\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"dependencies\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" string\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"[] \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" []) {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"push\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({ request, key, dependencies });\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"processQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  private\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" async\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" processQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    if\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".activeCount \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\">=\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".maxConcurrency) \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"return\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" executableTask\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"find\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"task\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =>\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      task.dependencies.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"every\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"dep\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =>\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".results.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"has\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(dep))\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    );\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    if\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"!\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"executableTask) \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"return\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".activeCount\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"++\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".queue \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"filter\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"t\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" t \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"!==\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" executableTask);\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    try\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" result\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" executableTask.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"request\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"      this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".results.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"set\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(executableTask.key, result);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"catch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (error) {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      console.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"error\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"`Task ${\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"executableTask\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"key\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"} failed:`\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", error);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"finally\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"      this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".activeCount\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"--\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"      this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"processQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u4F7F\\u7528\\u793A\\u4F8B\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" queue\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" DependentRequestQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"3\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"add\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" fetch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'/api/user'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\").\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"res\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" res.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"json\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"()),\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"  'user'\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"add\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" fetch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'/api/orders'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\").\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"res\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" res.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"json\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"()),\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"  'orders'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  [\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'user'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"]\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})})]})})}),`\n`,(0,n.jsxs)(l.p,{children:[(0,n.jsx)(l.strong,{children:\"\\u5DE5\\u4F5C\\u539F\\u7406\"}),\"\\uFF1A\"]}),`\n`,(0,n.jsxs)(l.ol,{children:[`\n`,(0,n.jsxs)(l.li,{children:[\"\\u6BCF\\u4E2A\\u4EFB\\u52A1\\u58F0\\u660E\\u81EA\\u5DF1\\u7684\",(0,n.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{children:\"dependencies\"})})})}),\"\\u3002\"]}),`\n`,(0,n.jsx)(l.li,{children:\"\\u53EA\\u6709\\u5F53\\u6240\\u6709\\u4F9D\\u8D56\\u90FD\\u5B8C\\u6210\\u65F6\\uFF0C\\u4EFB\\u52A1\\u624D\\u53EF\\u6267\\u884C\\u3002\"}),`\n`,(0,n.jsxs)(l.li,{children:[\"\\u7ED3\\u679C\\u901A\\u8FC7\",(0,n.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{children:\"results\"})})})}),\"\\u7F13\\u5B58\\uFF0C\\u4F9B\\u540E\\u7EED\\u4EFB\\u52A1\\u4F7F\\u7528\\u3002\"]}),`\n`]}),`\n`,(0,n.jsxs)(l.p,{children:[(0,n.jsx)(l.strong,{children:\"\\u7C7B\\u6BD4\"}),\"\\uFF1A\\u5C31\\u50CF\\u505A\\u86CB\\u7092\\u996D\\uFF0C\\u5148\\u5F97\\u6709\\u7C73\\u996D\\uFF08\\u4F9D\\u8D56\\uFF09\\uFF0C\\u624D\\u80FD\\u5F00\\u59CB\\u7092\\u3002\"]}),`\n`,(0,n.jsx)(l.p,{children:(0,n.jsx)(l.em,{children:\"\\u{1F4CC} \\u5C0FTips\\uFF1A\\u4F9D\\u8D56\\u961F\\u5217\\u9002\\u5408\\u590D\\u6742\\u7684\\u4E1A\\u52A1\\u903B\\u8F91\\uFF0C\\u4F46\\u8981\\u8B66\\u60D5\\u5FAA\\u73AF\\u4F9D\\u8D56\\uFF0C\\u53EF\\u80FD\\u5BFC\\u81F4\\u961F\\u5217\\u5361\\u6B7B\\u3002\"})}),`\n`,(0,n.jsx)(l.h3,{id:\"2-\\u52A8\\u6001\\u4F18\\u5148\\u7EA7\\u8C03\\u6574\",children:(0,n.jsx)(l.a,{href:\"#2-\\u52A8\\u6001\\u4F18\\u5148\\u7EA7\\u8C03\\u6574\",children:\"2. \\u52A8\\u6001\\u4F18\\u5148\\u7EA7\\u8C03\\u6574\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u6709\\u65F6\\uFF0C\\u8BF7\\u6C42\\u7684\\u4F18\\u5148\\u7EA7\\u4F1A\\u52A8\\u6001\\u53D8\\u5316\\u3002\\u4F8B\\u5982\\uFF0C\\u9875\\u9762\\u5207\\u6362\\u540E\\uFF0C\\u5F53\\u524D\\u9875\\u9762\\u7684\\u8BF7\\u6C42\\u9700\\u8981\\u4F18\\u5148\\u3002\\u53EF\\u4EE5\\u901A\\u8FC7\\u4EE5\\u4E0B\\u65B9\\u5F0F\\u5B9E\\u73B0\\uFF1A\"}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"typescript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(l.code,{\"data-language\":\"typescript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"class\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" DynamicPriorityQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  private\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\" queue\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" QueueTask\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"[] \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" [];\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  private\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\" activeCount\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" number\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 0\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  private\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\" maxConcurrency\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" number\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  constructor\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"maxConcurrency\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" number\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 6\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".maxConcurrency \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" maxConcurrency;\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  add\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"request\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Promise\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"any\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">, \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"key\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" string\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"priority\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" number\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 10\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"push\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({ request, key, priority });\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"sort\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"a\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"b\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" a.priority \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" b.priority);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"processQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  updatePriority\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"key\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" string\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"newPriority\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" number\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" task\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"find\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"t\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" t.key \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"===\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" key);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    if\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (task) {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      task.priority \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" newPriority;\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"      this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"sort\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"a\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"b\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" a.priority \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" b.priority);\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  private\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" async\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" processQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    if\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".activeCount \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\">=\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".maxConcurrency \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"||\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"length\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" ===\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 0\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"return\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".activeCount\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"++\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" task\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"shift\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    try\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      await\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" task.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"request\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"catch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (error) {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      console.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"error\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'Request failed:'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", error);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"finally\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"      this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".activeCount\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"--\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"      this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"processQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u4F7F\\u7528\\u793A\\u4F8B\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" queue\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" DynamicPriorityQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"3\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"add\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(() \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" fetch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'/api/page1'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\").\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"res\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" res.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"json\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"()), \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'page1'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"10\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"add\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(() \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" fetch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'/api/page2'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\").\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"res\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" res.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"json\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"()), \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'page2'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"10\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u9875\\u9762\\u5207\\u6362\\uFF0Cpage2\\u4F18\\u5148\\u7EA7\\u63D0\\u5347\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"updatePriority\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'page2'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]})]})})}),`\n`,(0,n.jsxs)(l.p,{children:[(0,n.jsx)(l.strong,{children:\"\\u7C7B\\u6BD4\"}),\"\\uFF1A\\u5C31\\u50CF\\u673A\\u573A\\u767B\\u673A\\uFF0C\\u539F\\u672C\\u666E\\u901A\\u8231\\u7684\\u4E58\\u5BA2\\u7A81\\u7136\\u5347\\u7EA7\\u6210\\u5934\\u7B49\\u8231\\uFF0C\\u76F4\\u63A5\\u63D2\\u961F\\u3002\"]}),`\n`,(0,n.jsx)(l.p,{children:(0,n.jsx)(l.em,{children:\"\\u{1F4CC} \\u5C0FTips\\uFF1A\\u52A8\\u6001\\u4F18\\u5148\\u7EA7\\u9002\\u5408SPA\\u5E94\\u7528\\uFF0C\\u4F46\\u9891\\u7E41\\u8C03\\u6574\\u53EF\\u80FD\\u5BFC\\u81F4\\u6027\\u80FD\\u5F00\\u9500\\uFF0C\\u5EFA\\u8BAE\\u9650\\u5236\\u8C03\\u6574\\u9891\\u7387\\u3002\"})}),`\n`,(0,n.jsx)(l.h3,{id:\"3-\\u8BF7\\u6C42\\u8D85\\u65F6\\u4E0E\\u53D6\\u6D88\",children:(0,n.jsx)(l.a,{href:\"#3-\\u8BF7\\u6C42\\u8D85\\u65F6\\u4E0E\\u53D6\\u6D88\",children:\"3. \\u8BF7\\u6C42\\u8D85\\u65F6\\u4E0E\\u53D6\\u6D88\"})}),`\n`,(0,n.jsxs)(l.p,{children:[\"\\u8BF7\\u6C42\\u53EF\\u80FD\\u56E0\\u7F51\\u7EDC\\u95EE\\u9898\\u5361\\u4F4F\\uFF0C\\u6211\\u4EEC\\u9700\\u8981\\u652F\\u6301\",(0,n.jsx)(l.strong,{children:\"\\u8D85\\u65F6\"}),\"\\u548C\",(0,n.jsx)(l.strong,{children:\"\\u53D6\\u6D88\"}),\"\\uFF1A\"]}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"typescript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(l.code,{\"data-language\":\"typescript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"interface\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" QueueTask\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  request\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Promise\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"any\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">;\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"  key\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" string\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"  priority\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" number\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"  controller\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" AbortController\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"class\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" TimeoutRequestQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  private\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\" queue\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" QueueTask\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"[] \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" [];\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  private\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\" activeCount\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" number\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 0\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  private\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\" maxConcurrency\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" number\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  constructor\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"maxConcurrency\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" number\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 6\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".maxConcurrency \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" maxConcurrency;\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  add\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"request\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Promise\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"any\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">, \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"key\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" string\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"priority\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" number\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 10\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"timeout\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" number\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 5000\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" controller\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" AbortController\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" wrappedRequest\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"      Promise\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"race\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"([\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"        request\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(),\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"        new\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" Promise\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"_\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"reject\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"          setTimeout\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(() \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"            controller.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"abort\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"            reject\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"new\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Error\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'Request timed out'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"));\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"          }, timeout)\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"        ),\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      ]);\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"push\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({ request: wrappedRequest, key, priority, controller });\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"sort\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"a\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"b\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" a.priority \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" b.priority);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"processQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  cancel\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"key\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" string\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" task\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"find\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"t\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" t.key \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"===\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" key);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    if\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (task) {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      task.controller.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"abort\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"      this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".queue \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"filter\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"t\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" t.key \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"!==\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" key);\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  private\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" async\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" processQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    if\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".activeCount \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\">=\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".maxConcurrency \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"||\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"length\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" ===\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 0\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"return\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"    this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".activeCount\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"++\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" task\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"shift\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    try\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      await\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" task.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"request\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"catch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (error) {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      console.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"error\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'Request failed:'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", error);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"finally\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"      this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".activeCount\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"--\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"      this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"processQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u4F7F\\u7528\\u793A\\u4F8B\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" queue\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" TimeoutRequestQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"3\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"add\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" fetch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'/api/slow'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", { signal: queue.queue[\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"]?.controller.signal }).\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"res\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" res.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"json\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"()),\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"  'slow'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"  0\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"  2000\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u624B\\u52A8\\u53D6\\u6D88\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"queue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"cancel\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'slow'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]})]})})}),`\n`,(0,n.jsxs)(l.p,{children:[(0,n.jsx)(l.strong,{children:\"\\u6539\\u8FDB\\u70B9\"}),\"\\uFF1A\"]}),`\n`,(0,n.jsxs)(l.ol,{children:[`\n`,(0,n.jsxs)(l.li,{children:[\"\\u4F7F\\u7528\",(0,n.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{children:\"AbortController\"})})})}),\"\\u652F\\u6301\\u8BF7\\u6C42\\u53D6\\u6D88\\u3002\"]}),`\n`,(0,n.jsxs)(l.li,{children:[\"\\u901A\\u8FC7\",(0,n.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{children:\"Promise.race\"})})})}),\"\\u5B9E\\u73B0\\u8D85\\u65F6\\u673A\\u5236\\u3002\"]}),`\n`,(0,n.jsx)(l.li,{children:\"\\u53D6\\u6D88\\u4EFB\\u52A1\\u65F6\\u4ECE\\u961F\\u5217\\u4E2D\\u79FB\\u9664\\u3002\"}),`\n`]}),`\n`,(0,n.jsxs)(l.p,{children:[(0,n.jsx)(l.strong,{children:\"\\u7C7B\\u6BD4\"}),\"\\uFF1A\\u5C31\\u50CF\\u70B9\\u5916\\u5356\\uFF0C\\u8D85\\u8FC730\\u5206\\u949F\\u6CA1\\u9001\\u5230\\u5C31\\u53D6\\u6D88\\u8BA2\\u5355\\uFF0C\\u6362\\u5BB6\\u5E97\\u91CD\\u65B0\\u70B9\\u3002\"]}),`\n`,(0,n.jsx)(l.p,{children:(0,n.jsx)(l.em,{children:\"\\u{1F4CC} \\u5C0FTips\\uFF1A\\u8D85\\u65F6\\u65F6\\u95F4\\u8981\\u6839\\u636E\\u63A5\\u53E3\\u5B9E\\u9645\\u54CD\\u5E94\\u65F6\\u95F4\\u8BBE\\u7F6E\\uFF0C\\u8FC7\\u77ED\\u53EF\\u80FD\\u8BEF\\u4F24\\u6B63\\u5E38\\u8BF7\\u6C42\\u3002\"})}),`\n`,(0,n.jsx)(l.h2,{id:\"\\u6700\\u4F73\\u5B9E\\u8DF5\\u8BA9\\u961F\\u5217\\u66F4\\u4F18\\u96C5-\",children:(0,n.jsx)(l.a,{href:\"#\\u6700\\u4F73\\u5B9E\\u8DF5\\u8BA9\\u961F\\u5217\\u66F4\\u4F18\\u96C5-\",children:\"\\u6700\\u4F73\\u5B9E\\u8DF5\\uFF1A\\u8BA9\\u961F\\u5217\\u66F4\\u201C\\u4F18\\u96C5\\u201D \\u2728\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u5B9E\\u73B0\\u4E00\\u4E2A\\u961F\\u5217\\u53EA\\u662F\\u5F00\\u59CB\\uFF0C\\u5982\\u4F55\\u8BA9\\u5B83\\u5728\\u5B9E\\u9645\\u9879\\u76EE\\u4E2D\\u53D1\\u6325\\u6700\\u5927\\u4EF7\\u503C\\uFF1F\\u4EE5\\u4E0B\\u662F\\u4E00\\u4E9B\\u7ECF\\u8FC7\\u5B9E\\u6218\\u68C0\\u9A8C\\u7684\\u6700\\u4F73\\u5B9E\\u8DF5\\uFF1A\"}),`\n`,(0,n.jsx)(l.h3,{id:\"1-\\u52A8\\u6001\\u8C03\\u6574\\u5E76\\u53D1\\u6570\",children:(0,n.jsx)(l.a,{href:\"#1-\\u52A8\\u6001\\u8C03\\u6574\\u5E76\\u53D1\\u6570\",children:\"1. \\u52A8\\u6001\\u8C03\\u6574\\u5E76\\u53D1\\u6570\"})}),`\n`,(0,n.jsxs)(l.p,{children:[\"\\u6839\\u636E\\u7F51\\u7EDC\\u72B6\\u51B5\\u548C\\u670D\\u52A1\\u5668\\u8D1F\\u8F7D\\u52A8\\u6001\\u8C03\\u6574\",(0,n.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{children:\"maxConcurrency\"})})})}),\"\\u3002\\u4F8B\\u5982\\uFF0C\\u5F31\\u7F51\\u73AF\\u5883\\u4E0B\\u964D\\u4F4E\\u5E76\\u53D1\\u6570\\uFF0C\\u5F3A\\u7F51\\u73AF\\u5883\\u4E0B\\u63D0\\u9AD8\\u3002\"]}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"typescript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(l.code,{\"data-language\":\"typescript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"function\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" getDynamicConcurrency\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" navigator.connection?.effectiveType \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"===\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\" '4g'\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" ?\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 6\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" :\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 3\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsx)(l.p,{children:(0,n.jsxs)(l.em,{children:[\"\\u{1F4CC} \\u5C0FTips\\uFF1A\\u7ED3\\u5408\",(0,n.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{children:\"navigator.connection\"})})})}),\"\\u68C0\\u6D4B\\u7F51\\u7EDC\\u72B6\\u6001\\uFF0C\\u4F46\\u8981\\u6CE8\\u610F\\u517C\\u5BB9\\u6027\\uFF0C\\u90E8\\u5206\\u6D4F\\u89C8\\u5668\\u53EF\\u80FD\\u4E0D\\u652F\\u6301\\u3002\"]})}),`\n`,(0,n.jsx)(l.h3,{id:\"2-\\u4F7F\\u7528\\u6307\\u6570\\u9000\\u907F\\u91CD\\u8BD5\",children:(0,n.jsx)(l.a,{href:\"#2-\\u4F7F\\u7528\\u6307\\u6570\\u9000\\u907F\\u91CD\\u8BD5\",children:\"2. \\u4F7F\\u7528\\u6307\\u6570\\u9000\\u907F\\u91CD\\u8BD5\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u91CD\\u8BD5\\u95F4\\u9694\\u4E0D\\u5E94\\u56FA\\u5B9A\\uFF0C\\u5EFA\\u8BAE\\u4F7F\\u7528\\u6307\\u6570\\u9000\\u907F\\u7B56\\u7565\\uFF1A\"}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"typescript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(l.code,{\"data-language\":\"typescript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"function\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" exponentialBackoff\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"retry\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" number\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" Math.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"min\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"1000\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" *\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 2\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" **\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" retry, \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"10000\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"); \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u6700\\u592710\\u79D2\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsx)(l.p,{children:(0,n.jsx)(l.em,{children:\"\\u{1F4CC} \\u5C0FTips\\uFF1A\\u6307\\u6570\\u9000\\u907F\\u80FD\\u6709\\u6548\\u964D\\u4F4E\\u670D\\u52A1\\u5668\\u538B\\u529B\\uFF0C\\u4F46\\u8981\\u8BBE\\u7F6E\\u6700\\u5927\\u95F4\\u9694\\uFF0C\\u907F\\u514D\\u7528\\u6237\\u7B49\\u5F85\\u8FC7\\u4E45\\u3002\"})}),`\n`,(0,n.jsx)(l.h3,{id:\"3-\\u65E5\\u5FD7\\u4E0E\\u76D1\\u63A7\",children:(0,n.jsx)(l.a,{href:\"#3-\\u65E5\\u5FD7\\u4E0E\\u76D1\\u63A7\",children:\"3. \\u65E5\\u5FD7\\u4E0E\\u76D1\\u63A7\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u4E3A\\u961F\\u5217\\u6DFB\\u52A0\\u65E5\\u5FD7\\uFF0C\\u8BB0\\u5F55\\u6BCF\\u4E2A\\u8BF7\\u6C42\\u7684\\u6267\\u884C\\u65F6\\u95F4\\u3001\\u5931\\u8D25\\u539F\\u56E0\\u7B49\\uFF0C\\u65B9\\u4FBF\\u8C03\\u8BD5\\u548C\\u4F18\\u5316\\u3002\"}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"typescript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(l.code,{\"data-language\":\"typescript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"class\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" MonitoredQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  add\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"request\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Promise\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"any\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">, \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"key\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" string\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" start\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" performance.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"now\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    return\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" request\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"().\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"      result\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"        console.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"`Request ${\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"key\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"} took ${\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"performance\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"now\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"() \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" start\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"}ms`\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"        return\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" result;\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      },\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"      error\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"        console.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"error\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"`Request ${\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"key\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"} failed:`\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", error);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"        throw\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" error;\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    );\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsx)(l.p,{children:(0,n.jsx)(l.em,{children:\"\\u{1F4CC} \\u5C0FTips\\uFF1A\\u5C06\\u65E5\\u5FD7\\u96C6\\u6210\\u5230\\u4F60\\u7684\\u76D1\\u63A7\\u7CFB\\u7EDF\\uFF08\\u5982Sentry\\uFF09\\uFF0C\\u80FD\\u66F4\\u5FEB\\u5B9A\\u4F4D\\u95EE\\u9898\\u3002\"})}),`\n`,(0,n.jsx)(l.h3,{id:\"4-\\u8BF7\\u6C42\\u7F13\\u5B58\",children:(0,n.jsx)(l.a,{href:\"#4-\\u8BF7\\u6C42\\u7F13\\u5B58\",children:\"4. \\u8BF7\\u6C42\\u7F13\\u5B58\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u5BF9\\u4E8E\\u9891\\u7E41\\u8BF7\\u6C42\\u7684\\u63A5\\u53E3\\uFF0C\\u4F7F\\u7528\\u5185\\u5B58\\u7F13\\u5B58\\u6216LocalStorage\\u7F13\\u5B58\\u7ED3\\u679C\\uFF0C\\u51CF\\u5C11\\u7F51\\u7EDC\\u8BF7\\u6C42\\u3002\"}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"typescript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(l.code,{\"data-language\":\"typescript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" cache\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Map\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"string\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"any\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">();\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"function\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" cachedRequest\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"key\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" string\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"request\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Promise\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"any\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">) {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  if\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (cache.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"has\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(key)) \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"return\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" Promise\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"resolve\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(cache.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"get\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(key));\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" request\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"().\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"result\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    cache.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"set\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(key, result);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    return\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" result;\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  });\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsx)(l.p,{children:(0,n.jsx)(l.em,{children:\"\\u{1F4CC} \\u5C0FTips\\uFF1A\\u8BBE\\u7F6E\\u7F13\\u5B58\\u8FC7\\u671F\\u65F6\\u95F4\\uFF0C\\u907F\\u514D\\u4F7F\\u7528\\u8FC7\\u65F6\\u6570\\u636E\\u3002\"})}),`\n`,(0,n.jsx)(l.h3,{id:\"5-\\u9519\\u8BEF\\u964D\\u7EA7\",children:(0,n.jsx)(l.a,{href:\"#5-\\u9519\\u8BEF\\u964D\\u7EA7\",children:\"5. \\u9519\\u8BEF\\u964D\\u7EA7\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u5F53\\u8BF7\\u6C42\\u5931\\u8D25\\u65F6\\uFF0C\\u63D0\\u4F9B\\u964D\\u7EA7\\u65B9\\u6848\\uFF0C\\u4F8B\\u5982\\u4F7F\\u7528\\u9ED8\\u8BA4\\u6570\\u636E\\u6216\\u672C\\u5730\\u7F13\\u5B58\\u3002\"}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"typescript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(l.code,{\"data-language\":\"typescript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"function\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" fallbackRequest\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"request\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Promise\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"any\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">, \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"fallback\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" any\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" request\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"().\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"catch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(() \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" fallback);\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsx)(l.p,{children:(0,n.jsx)(l.em,{children:\"\\u{1F4CC} \\u5C0FTips\\uFF1A\\u964D\\u7EA7\\u65B9\\u6848\\u8981\\u4E0E\\u4EA7\\u54C1\\u7ECF\\u7406\\u786E\\u8BA4\\uFF0C\\u786E\\u4FDD\\u7528\\u6237\\u4F53\\u9A8C\\u4E0D\\u88AB\\u7834\\u574F\\u3002\"})}),`\n`,(0,n.jsx)(l.h2,{id:\"\\u771F\\u5B9E\\u6848\\u4F8B\\u4ECE\\u7406\\u8BBA\\u5230\\u5B9E\\u6218-\",children:(0,n.jsx)(l.a,{href:\"#\\u771F\\u5B9E\\u6848\\u4F8B\\u4ECE\\u7406\\u8BBA\\u5230\\u5B9E\\u6218-\",children:\"\\u771F\\u5B9E\\u6848\\u4F8B\\uFF1A\\u4ECE\\u7406\\u8BBA\\u5230\\u5B9E\\u6218 \\u{1F3C6}\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u4E3A\\u4E86\\u8BA9\\u7406\\u8BBA\\u843D\\u5730\\uFF0C\\u6211\\u4EEC\\u6765\\u770B\\u51E0\\u4E2A\\u771F\\u5B9E\\u9879\\u76EE\\u4E2D\\u7684\\u961F\\u5217\\u8BF7\\u6C42\\u8BBE\\u8BA1\\u6848\\u4F8B\\u3002\"}),`\n`,(0,n.jsx)(l.h3,{id:\"\\u6848\\u4F8B1\\u7535\\u5546\\u5E73\\u53F0\\u7684\\u56FE\\u7247\\u61D2\\u52A0\\u8F7D\",children:(0,n.jsx)(l.a,{href:\"#\\u6848\\u4F8B1\\u7535\\u5546\\u5E73\\u53F0\\u7684\\u56FE\\u7247\\u61D2\\u52A0\\u8F7D\",children:\"\\u6848\\u4F8B1\\uFF1A\\u7535\\u5546\\u5E73\\u53F0\\u7684\\u56FE\\u7247\\u61D2\\u52A0\\u8F7D\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u5728\\u4E00\\u4E2A\\u7535\\u5546\\u5E73\\u53F0\\u4E2D\\uFF0C\\u5546\\u54C1\\u5217\\u8868\\u9700\\u8981\\u61D2\\u52A0\\u8F7D\\u6570\\u767E\\u5F20\\u56FE\\u7247\\u3002\\u5982\\u679C\\u540C\\u65F6\\u53D1\\u8D77\\u6240\\u6709\\u56FE\\u7247\\u8BF7\\u6C42\\uFF0C\\u6D4F\\u89C8\\u5668\\u4F1A\\u5D29\\u6E83\\u3002\\u6211\\u4EEC\\u8BBE\\u8BA1\\u4E86\\u4E00\\u4E2A\\u5E76\\u53D1\\u961F\\u5217\\uFF1A\"}),`\n`,(0,n.jsxs)(l.ul,{children:[`\n`,(0,n.jsx)(l.li,{children:\"\\u6700\\u5927\\u5E76\\u53D1\\u6570\\uFF1A10\"}),`\n`,(0,n.jsx)(l.li,{children:\"\\u4F18\\u5148\\u7EA7\\uFF1A\\u53EF\\u89C1\\u533A\\u57DF\\u56FE\\u7247\\u4F18\\u5148\\u7EA7\\u4E3A0\\uFF0C\\u5176\\u4ED6\\u4E3A10\"}),`\n`,(0,n.jsx)(l.li,{children:\"\\u91CD\\u8BD5\\uFF1A\\u5931\\u8D25\\u56FE\\u7247\\u91CD\\u8BD52\\u6B21\"}),`\n`,(0,n.jsx)(l.li,{children:\"\\u53BB\\u91CD\\uFF1A\\u91CD\\u590D\\u56FE\\u7247URL\\u53EA\\u8BF7\\u6C42\\u4E00\\u6B21\"}),`\n`]}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"typescript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(l.code,{\"data-language\":\"typescript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" imageQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" DedupeRequestQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"10\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"function\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" loadImage\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"url\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" string\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"priority\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" number\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" imageQueue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"add\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" fetch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(url).\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"res\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" res.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"blob\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"()),\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    url,\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    priority\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  );\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u76D1\\u542C\\u6EDA\\u52A8\\u4E8B\\u4EF6\\uFF0C\\u52A8\\u6001\\u8C03\\u6574\\u4F18\\u5148\\u7EA7\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"window.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"addEventListener\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'scroll'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  document.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"querySelectorAll\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'img[data-src]'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\").\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"forEach\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"img\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" isVisible\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" img.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"getBoundingClientRect\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"().top \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"<\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" window.innerHeight;\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"    loadImage\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(img.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"getAttribute\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'data-src'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"), isVisible \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"?\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 0\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" :\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 10\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  });\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})}),`\n`,(0,n.jsxs)(l.p,{children:[(0,n.jsx)(l.strong,{children:\"\\u6548\\u679C\"}),\"\\uFF1A\\u56FE\\u7247\\u52A0\\u8F7D\\u6D41\\u7545\\uFF0C\\u670D\\u52A1\\u5668\\u538B\\u529B\\u964D\\u4F4E\\uFF0C\\u7528\\u6237\\u4F53\\u9A8C\\u63D0\\u5347\\u3002\"]}),`\n`,(0,n.jsx)(l.p,{children:(0,n.jsx)(l.em,{children:\"\\u{1F4CC} \\u5C0FTips\\uFF1A\\u61D2\\u52A0\\u8F7D\\u961F\\u5217\\u8981\\u7ED3\\u5408IntersectionObserver\\u4F18\\u5316\\u6027\\u80FD\\uFF0C\\u907F\\u514D\\u9891\\u7E41\\u89E6\\u53D1\\u3002\"})}),`\n`,(0,n.jsx)(l.h3,{id:\"\\u6848\\u4F8B2\\u5B9E\\u65F6\\u804A\\u5929\\u7CFB\\u7EDF\\u7684\\u6D88\\u606F\\u540C\\u6B65\",children:(0,n.jsx)(l.a,{href:\"#\\u6848\\u4F8B2\\u5B9E\\u65F6\\u804A\\u5929\\u7CFB\\u7EDF\\u7684\\u6D88\\u606F\\u540C\\u6B65\",children:\"\\u6848\\u4F8B2\\uFF1A\\u5B9E\\u65F6\\u804A\\u5929\\u7CFB\\u7EDF\\u7684\\u6D88\\u606F\\u540C\\u6B65\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u5728\\u4E00\\u4E2A\\u804A\\u5929\\u5E94\\u7528\\u4E2D\\uFF0C\\u9700\\u8981\\u5B9E\\u65F6\\u540C\\u6B65\\u6D88\\u606F\\u3001\\u7528\\u6237\\u4FE1\\u606F\\u548C\\u5DF2\\u8BFB\\u72B6\\u6001\\u3002\\u8BF7\\u6C42\\u4E4B\\u95F4\\u6709\\u4F9D\\u8D56\\u5173\\u7CFB\\uFF1A\"}),`\n`,(0,n.jsxs)(l.ol,{children:[`\n`,(0,n.jsx)(l.li,{children:\"\\u83B7\\u53D6\\u7528\\u6237ID\"}),`\n`,(0,n.jsx)(l.li,{children:\"\\u6839\\u636E\\u7528\\u6237ID\\u83B7\\u53D6\\u6D88\\u606F\"}),`\n`,(0,n.jsx)(l.li,{children:\"\\u53D1\\u9001\\u5DF2\\u8BFB\\u72B6\\u6001\"}),`\n`]}),`\n`,(0,n.jsx)(l.p,{children:\"\\u6211\\u4EEC\\u4F7F\\u7528\\u4E86\\u4F9D\\u8D56\\u961F\\u5217\\uFF1A\"}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"typescript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(l.code,{\"data-language\":\"typescript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" chatQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" DependentRequestQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"3\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"chatQueue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"add\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" fetch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'/api/user'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\").\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"res\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" res.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"json\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"()),\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"  'user'\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"chatQueue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"add\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" fetch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'/api/messages'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\").\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"res\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" res.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"json\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"()),\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"  'messages'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  [\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'user'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"]\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"chatQueue.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"add\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" fetch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'/api/read'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", { method: \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'POST'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" }).\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"res\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" res.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"json\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"()),\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"  'read'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  [\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'messages'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"]\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})})]})})}),`\n`,(0,n.jsxs)(l.p,{children:[(0,n.jsx)(l.strong,{children:\"\\u6548\\u679C\"}),\"\\uFF1A\\u6D88\\u606F\\u540C\\u6B65\\u903B\\u8F91\\u6E05\\u6670\\uFF0C\\u8BF7\\u6C42\\u987A\\u5E8F\\u6B63\\u786E\\uFF0C\\u907F\\u514D\\u4E86\\u56DE\\u8C03\\u5730\\u72F1\\u3002\"]}),`\n`,(0,n.jsx)(l.p,{children:(0,n.jsx)(l.em,{children:\"\\u{1F4CC} \\u5C0FTips\\uFF1A\\u4F9D\\u8D56\\u961F\\u5217\\u9002\\u5408\\u5F3A\\u4F9D\\u8D56\\u573A\\u666F\\uFF0C\\u4F46\\u8981\\u786E\\u4FDD\\u4F9D\\u8D56\\u4EFB\\u52A1\\u4E0D\\u4F1A\\u5931\\u8D25\\uFF0C\\u5426\\u5219\\u53EF\\u80FD\\u963B\\u585E\\u961F\\u5217\\u3002\"})}),`\n`,(0,n.jsx)(l.h2,{id:\"\\u5E38\\u89C1\\u95EE\\u9898\\u4E0E\\u89E3\\u51B3\\u65B9\\u6848-\",children:(0,n.jsx)(l.a,{href:\"#\\u5E38\\u89C1\\u95EE\\u9898\\u4E0E\\u89E3\\u51B3\\u65B9\\u6848-\",children:\"\\u5E38\\u89C1\\u95EE\\u9898\\u4E0E\\u89E3\\u51B3\\u65B9\\u6848 \\u2753\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u5373\\u4F7F\\u6709\\u4E86\\u961F\\u5217\\u8BBE\\u8BA1\\uFF0C\\u5F00\\u53D1\\u4E2D\\u4ECD\\u53EF\\u80FD\\u9047\\u5230\\u4E00\\u4E9B\\u201C\\u5751\\u201D\\u3002\\u4EE5\\u4E0B\\u662F\\u5E38\\u89C1\\u95EE\\u9898\\u53CA\\u5E94\\u5BF9\\u65B9\\u6CD5\\uFF1A\"}),`\n`,(0,n.jsx)(l.h3,{id:\"\\u95EE\\u98981\\u961F\\u5217\\u5361\\u6B7B\",children:(0,n.jsx)(l.a,{href:\"#\\u95EE\\u98981\\u961F\\u5217\\u5361\\u6B7B\",children:\"\\u95EE\\u98981\\uFF1A\\u961F\\u5217\\u5361\\u6B7B\"})}),`\n`,(0,n.jsxs)(l.p,{children:[(0,n.jsx)(l.strong,{children:\"\\u73B0\\u8C61\"}),\"\\uFF1A\\u67D0\\u4E2A\\u8BF7\\u6C42\\u4E00\\u76F4\\u672A\\u5B8C\\u6210\\uFF0C\\u5BFC\\u81F4\\u961F\\u5217\\u505C\\u6B62\\u5904\\u7406\\u3002\"]}),`\n`,(0,n.jsxs)(l.p,{children:[(0,n.jsx)(l.strong,{children:\"\\u89E3\\u51B3\"}),\"\\uFF1A\\u4E3A\\u6BCF\\u4E2A\\u8BF7\\u6C42\\u8BBE\\u7F6E\\u8D85\\u65F6\\uFF0C\\u5E76\\u6E05\\u7406\\u5361\\u6B7B\\u7684\\u4EFB\\u52A1\\u3002\"]}),`\n`,(0,n.jsx)(l.p,{children:(0,n.jsx)(l.em,{children:\"\\u{1F4CC} \\u5C0FTips\\uFF1A\\u8D85\\u65F6\\u65F6\\u95F4\\u8981\\u6839\\u636E\\u63A5\\u53E3\\u5B9E\\u9645\\u54CD\\u5E94\\u65F6\\u95F4\\u8BBE\\u7F6E\\uFF0C\\u907F\\u514D\\u8BEF\\u4F24\\u3002\"})}),`\n`,(0,n.jsx)(l.h3,{id:\"\\u95EE\\u98982\\u4F18\\u5148\\u7EA7\\u997F\\u6B7B\",children:(0,n.jsx)(l.a,{href:\"#\\u95EE\\u98982\\u4F18\\u5148\\u7EA7\\u997F\\u6B7B\",children:\"\\u95EE\\u98982\\uFF1A\\u4F18\\u5148\\u7EA7\\u201C\\u997F\\u6B7B\\u201D\"})}),`\n`,(0,n.jsxs)(l.p,{children:[(0,n.jsx)(l.strong,{children:\"\\u73B0\\u8C61\"}),\"\\uFF1A\\u4F4E\\u4F18\\u5148\\u7EA7\\u8BF7\\u6C42\\u6C38\\u8FDC\\u65E0\\u6CD5\\u6267\\u884C\\u3002\"]}),`\n`,(0,n.jsxs)(l.p,{children:[(0,n.jsx)(l.strong,{children:\"\\u89E3\\u51B3\"}),\"\\uFF1A\\u5B9A\\u671F\\u63D0\\u5347\\u4F4E\\u4F18\\u5148\\u7EA7\\u4EFB\\u52A1\\u7684\\u4F18\\u5148\\u7EA7\\uFF0C\\u6216\\u9650\\u5236\\u9AD8\\u4F18\\u5148\\u7EA7\\u4EFB\\u52A1\\u7684\\u6BD4\\u4F8B\\u3002\"]}),`\n`,(0,n.jsx)(l.p,{children:(0,n.jsx)(l.em,{children:\"\\u{1F4CC} \\u5C0FTips\\uFF1A\\u4F18\\u5148\\u7EA7\\u7BA1\\u7406\\u8981\\u5E73\\u8861\\uFF0C\\u907F\\u514D\\u201C\\u4E00\\u5200\\u5207\\u201D\\u5206\\u914D\\u3002\"})}),`\n`,(0,n.jsx)(l.h3,{id:\"\\u95EE\\u98983\\u5185\\u5B58\\u6CC4\\u6F0F\",children:(0,n.jsx)(l.a,{href:\"#\\u95EE\\u98983\\u5185\\u5B58\\u6CC4\\u6F0F\",children:\"\\u95EE\\u98983\\uFF1A\\u5185\\u5B58\\u6CC4\\u6F0F\"})}),`\n`,(0,n.jsxs)(l.p,{children:[(0,n.jsx)(l.strong,{children:\"\\u73B0\\u8C61\"}),\"\\uFF1A\\u961F\\u5217\\u957F\\u671F\\u8FD0\\u884C\\u540E\\uFF0C\\u5185\\u5B58\\u5360\\u7528\\u6FC0\\u589E\\u3002\"]}),`\n`,(0,n.jsxs)(l.p,{children:[(0,n.jsx)(l.strong,{children:\"\\u89E3\\u51B3\"}),\"\\uFF1A\\u5B9A\\u671F\\u6E05\\u7406\\u5B8C\\u6210\\u4EFB\\u52A1\\u7684\\u7F13\\u5B58\\uFF0C\\u91CA\\u653E\\u4E0D\\u518D\\u9700\\u8981\\u7684\\u8D44\\u6E90\\u3002\"]}),`\n`,(0,n.jsx)(l.p,{children:(0,n.jsx)(l.em,{children:\"\\u{1F4CC} \\u5C0FTips\\uFF1A\\u4F7F\\u7528WeakMap\\u4EE3\\u66FFMap\\uFF0C\\u80FD\\u81EA\\u52A8\\u6E05\\u7406\\u65E0\\u5F15\\u7528\\u5BF9\\u8C61\\u3002\"})}),`\n`,(0,n.jsx)(l.h2,{id:\"\\u672A\\u6765\\u5C55\\u671B\\u961F\\u5217\\u8BF7\\u6C42\\u7684\\u4E0B\\u4E00\\u7AD9-\",children:(0,n.jsx)(l.a,{href:\"#\\u672A\\u6765\\u5C55\\u671B\\u961F\\u5217\\u8BF7\\u6C42\\u7684\\u4E0B\\u4E00\\u7AD9-\",children:\"\\u672A\\u6765\\u5C55\\u671B\\uFF1A\\u961F\\u5217\\u8BF7\\u6C42\\u7684\\u4E0B\\u4E00\\u7AD9 \\u{1F684}\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u968F\\u7740\\u524D\\u7AEF\\u6280\\u672F\\u7684\\u53D1\\u5C55\\uFF0C\\u961F\\u5217\\u8BF7\\u6C42\\u8BBE\\u8BA1\\u4E5F\\u5728\\u4E0D\\u65AD\\u6F14\\u8FDB\\u3002\\u4EE5\\u4E0B\\u662F\\u4E00\\u4E9B\\u503C\\u5F97\\u5173\\u6CE8\\u7684\\u8D8B\\u52BF\\uFF1A\"}),`\n`,(0,n.jsxs)(l.ul,{children:[`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"WebTransport\"}),\"\\uFF1AHTTP/3\\u548CWebTransport\\u53EF\\u80FD\\u6539\\u53D8\\u5E76\\u53D1\\u6A21\\u578B\\uFF0C\\u961F\\u5217\\u8BBE\\u8BA1\\u9700\\u8981\\u9002\\u914D\\u65B0\\u534F\\u8BAE\\u3002\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"AI\\u4F18\\u5316\"}),\"\\uFF1A\\u901A\\u8FC7\\u673A\\u5668\\u5B66\\u4E60\\u9884\\u6D4B\\u8BF7\\u6C42\\u4F18\\u5148\\u7EA7\\u548C\\u5E76\\u53D1\\u6570\\uFF0C\\u52A8\\u6001\\u4F18\\u5316\\u961F\\u5217\\u3002\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u5206\\u5E03\\u5F0F\\u961F\\u5217\"}),\"\\uFF1A\\u5728\\u5FAE\\u524D\\u7AEF\\u67B6\\u6784\\u4E2D\\uFF0C\\u961F\\u5217\\u53EF\\u80FD\\u9700\\u8981\\u8DE8\\u6A21\\u5757\\u534F\\u4F5C\\uFF0C\\u5F62\\u6210\\u5206\\u5E03\\u5F0F\\u8C03\\u5EA6\\u7CFB\\u7EDF\\u3002\"]}),`\n`]}),`\n`,(0,n.jsxs)(l.p,{children:[(0,n.jsx)(l.strong,{children:\"\\u7C7B\\u6BD4\"}),\"\\uFF1A\\u961F\\u5217\\u8BF7\\u6C42\\u7684\\u672A\\u6765\\u5C31\\u50CF\\u81EA\\u52A8\\u9A7E\\u9A76\\u6C7D\\u8F66\\uFF0C\\u4E0D\\u4EC5\\u8981\\u81EA\\u5DF1\\u8DD1\\u5F97\\u5FEB\\uFF0C\\u8FD8\\u8981\\u548C\\u6574\\u4E2A\\u4EA4\\u901A\\u7F51\\u7EDC\\u534F\\u540C\\u3002\"]}),`\n`,(0,n.jsx)(l.p,{children:(0,n.jsx)(l.em,{children:\"\\u{1F4CC} \\u5C0FTips\\uFF1A\\u4FDD\\u6301\\u5BF9\\u65B0\\u6280\\u672F\\u7684\\u654F\\u611F\\u5EA6\\uFF0C\\u53CA\\u65F6\\u8C03\\u6574\\u961F\\u5217\\u8BBE\\u8BA1\\uFF0C\\u624D\\u80FD\\u7ACB\\u4E8E\\u4E0D\\u8D25\\u4E4B\\u5730\\u3002\"})}),`\n`,(0,n.jsx)(l.h2,{id:\"\\u603B\\u7ED3\\u4ECE\\u6DF7\\u6C8C\\u5230\\u4F18\\u96C5-\",children:(0,n.jsx)(l.a,{href:\"#\\u603B\\u7ED3\\u4ECE\\u6DF7\\u6C8C\\u5230\\u4F18\\u96C5-\",children:\"\\u603B\\u7ED3\\uFF1A\\u4ECE\\u6DF7\\u6C8C\\u5230\\u4F18\\u96C5 \\u{1F389}\"})}),`\n`,(0,n.jsxs)(l.p,{children:[\"\\u524D\\u7AEF\\u961F\\u5217\\u8BF7\\u6C42\\u8BBE\\u8BA1\\u662F\\u4E00\\u95E8\\u517C\\u5177\\u6280\\u672F\\u4E0E\\u827A\\u672F\\u7684\\u5B66\\u95EE\\u3002\\u901A\\u8FC7\\u5408\\u7406\\u7684\\u961F\\u5217\\u673A\\u5236\\uFF0C\\u6211\\u4EEC\\u53EF\\u4EE5\\u5C06\\u6742\\u4E71\\u65E0\\u7AE0\\u7684\\u8BF7\\u6C42\\u53D8\\u6210\\u4E95\\u7136\\u6709\\u5E8F\\u7684\\u4EA4\\u54CD\\u4E50\\u3002\\u65E0\\u8BBA\\u662F\\u7B80\\u5355\\u7684FIFO\\u961F\\u5217\\uFF0C\\u8FD8\\u662F\\u590D\\u6742\\u7684\\u4F9D\\u8D56\\u8C03\\u5EA6\\uFF0C\\u6838\\u5FC3\\u90FD\\u5728\\u4E8E\",(0,n.jsx)(l.strong,{children:\"\\u5E73\\u8861\\u6027\\u80FD\\u4E0E\\u7A33\\u5B9A\\u6027\"}),\"\\uFF0C\\u8BA9\\u7528\\u6237\\u4F53\\u9A8C\\u66F4\\u6D41\\u7545\\u3002\"]}),`\n`,(0,n.jsx)(l.p,{children:\"\\u5E0C\\u671B\\u8FD9\\u7BC7\\u6587\\u7AE0\\u80FD\\u4E3A\\u4F60\\u63D0\\u4F9B\\u7075\\u611F\\uFF0C\\u65E0\\u8BBA\\u662F\\u4F18\\u5316\\u73B0\\u6709\\u9879\\u76EE\\uFF0C\\u8FD8\\u662F\\u8BBE\\u8BA1\\u5168\\u65B0\\u7684\\u8BF7\\u6C42\\u7CFB\\u7EDF\\uFF0C\\u90FD\\u80FD\\u627E\\u5230\\u9002\\u5408\\u7684\\u65B9\\u6848\\u3002\\u5FEB\\u53BB\\u8BD5\\u8BD5\\u5427\\uFF0C\\u8BA9\\u4F60\\u7684\\u8BF7\\u6C42\\u961F\\u5217\\u6210\\u4E3A\\u524D\\u7AEF\\u5F00\\u53D1\\u7684\\u201C\\u5E55\\u540E\\u82F1\\u96C4\\u201D\\uFF01\\u{1F4AA}\"}),`\n`,(0,n.jsxs)(l.blockquote,{children:[`\n`,(0,n.jsx)(l.p,{children:\"\\u201C\\u597D\\u7684\\u961F\\u5217\\u8BBE\\u8BA1\\uFF0C\\u5C31\\u50CF\\u4E00\\u4E2A\\u9690\\u5F62\\u7684\\u7BA1\\u5BB6\\uFF0C\\u9ED8\\u9ED8\\u8BA9\\u4E00\\u5207\\u4E95\\u4E95\\u6709\\u6761\\u3002\\u201D \\u2014\\u2014 \\u8FD8\\u662F\\u90A3\\u4E2A\\u4E0D\\u613F\\u900F\\u9732\\u59D3\\u540D\\u7684\\u5F00\\u53D1\\u8005\\uFF08\\u771F\\u7684\\u4E0D\\u662F\\u6211\\uFF09\"}),`\n`]}),`\n`,(0,n.jsx)(l.hr,{})]})}function h(e={}){let{wrapper:l}=e.components||{};return l?(0,n.jsx)(l,{...e,children:(0,n.jsx)(t,{...e})}):t(e)}return f(A);})();\n;return Component;"
  },
  "_id": "å‰ç«¯æŠ€æœ¯/å‰ç«¯é˜Ÿåˆ—è¯·æ±‚è®¾è®¡.mdx",
  "_raw": {
    "sourceFilePath": "å‰ç«¯æŠ€æœ¯/å‰ç«¯é˜Ÿåˆ—è¯·æ±‚è®¾è®¡.mdx",
    "sourceFileName": "å‰ç«¯é˜Ÿåˆ—è¯·æ±‚è®¾è®¡.mdx",
    "sourceFileDir": "å‰ç«¯æŠ€æœ¯",
    "contentType": "mdx",
    "flattenedPath": "å‰ç«¯æŠ€æœ¯/å‰ç«¯é˜Ÿåˆ—è¯·æ±‚è®¾è®¡"
  },
  "type": "Post",
  "url": "/blog/å‰ç«¯æŠ€æœ¯/å‰ç«¯é˜Ÿåˆ—è¯·æ±‚è®¾è®¡"
}