{
  "title": "æ‰‹æŠŠæ‰‹æ•™ä½ åœ¨æµè§ˆå™¨ä¸­å¤„ç†æµå¼ä¼ è¾“",
  "date": "2023-08-28T00:00:00.000Z",
  "description": "æ·±å…¥è®²è§£å¦‚ä½•åœ¨æµè§ˆå™¨ä¸­ä¼˜é›…åœ°å¤„ç†æµå¼ä¼ è¾“ï¼Œä» Fetch API åˆ° ReadableStreamï¼Œå¸¦ä½ æŒæ¡åŸç†ã€è¸©å‘ç»éªŒå’Œæœ€ä½³å®è·µã€‚",
  "keywords": "æµå¼ä¼ è¾“, Fetch API, ReadableStream, Web Streams, å‰ç«¯å¼€å‘, JavaScript, æ€§èƒ½ä¼˜åŒ–",
  "author": "æ™“é¾™",
  "image": "/images/hero/streaming.jpg",
  "tags": [
    "JavaScript",
    "Web Streams",
    "å‰ç«¯å¼€å‘",
    "æ€§èƒ½ä¼˜åŒ–"
  ],
  "views": 0,
  "likes": 0,
  "category": "å‰ç«¯æŠ€æœ¯",
  "body": {
    "raw": "\næµå¼ä¼ è¾“ï¼ˆStreamingï¼‰åœ¨ç°ä»£å‰ç«¯å¼€å‘ä¸­è¶Šæ¥è¶Šå¸¸è§ï¼Œå°¤å…¶æ˜¯å½“ä½ éœ€è¦å¤„ç†å¤§æ–‡ä»¶ã€å®æ—¶æ•°æ®æˆ–è€…ä¼˜åŒ–é¦–å±åŠ è½½æ—¶ï¼Œå®ƒç®€ç›´æ˜¯ä¸ªæ•‘å‘½ç¨»è‰ ğŸŒ¾ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œä½ åœ¨æµè§ˆå™¨é‡Œçœ‹è§†é¢‘ï¼Œè¾¹ä¸‹è¾¹æ’­ï¼Œè€Œä¸æ˜¯ç­‰æ•´ä¸ªæ–‡ä»¶ä¸‹è½½å®Œå†çœ‹â€”â€”è¿™å°±æ˜¯æµå¼ä¼ è¾“çš„é­…åŠ›ï¼ä»Šå¤©ï¼Œæˆ‘å°±å¸¦ä½ ä»é›¶å¼€å§‹ï¼Œæ·±å…¥å‰–æå¦‚ä½•åœ¨æµè§ˆå™¨ä¸­å¤„ç†æµå¼ä¼ è¾“ï¼ŒèŠèŠèƒŒåçš„åŸç†ï¼Œç”©å‡ ä¸ªå®ç”¨ä¾‹å­ï¼Œå†é™„ä¸Šä¸€äº›è¸©å‘ç»éªŒå’Œæœ€ä½³å®è·µã€‚å‡†å¤‡å¥½äº†å—ï¼Ÿè®©æˆ‘ä»¬ä¸€å¤´æ‰è¿›è¿™ä¸ªâ€œæµåŠ¨çš„ä¸–ç•Œâ€å§ï¼ğŸš€\n\n## ä»€ä¹ˆæ˜¯æµå¼ä¼ è¾“ï¼Ÿä»ç”Ÿæ´»èŠåˆ°ä»£ç \n\nç®€å•æ¥è¯´ï¼Œæµå¼ä¼ è¾“å°±æ˜¯æ•°æ®åƒæ°´æµä¸€æ ·ï¼Œåˆ†å—ï¼ˆchunkï¼‰ä¼ è¾“ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§å…¨ç»™ä½ ã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆè‡ªåŠ©é¤çš„æµæ°´çº¿ ğŸ£ï¼šå¨å¸ˆä¸åœåœ°æŠŠå¯¿å¸ç«¯ä¸Šæ¥ï¼Œä½ è¾¹åƒè¾¹æ‹¿ï¼Œè€Œä¸æ˜¯ç­‰ä¸€æ¡Œå­èœéƒ½ä¸Šé½æ‰å¼€åŠ¨ã€‚åœ¨ Web ä¸­ï¼Œæµå¼ä¼ è¾“çš„å…¸å‹åœºæ™¯åŒ…æ‹¬ï¼š\n\n- **å¤§æ–‡ä»¶ä¸‹è½½/ä¸Šä¼ **ï¼šæ¯”å¦‚æ—¥å¿—æ–‡ä»¶ï¼Œåˆ†å—è¯»å–è€Œä¸æ˜¯å…¨åŠ è½½åˆ°å†…å­˜ã€‚\n- **å®æ—¶æ•°æ®**ï¼šåƒèŠå¤©å®¤çš„ WebSocket æ¶ˆæ¯æ¨é€ï¼Œæˆ–è€…æœåŠ¡å™¨æ¨é€äº‹ä»¶ï¼ˆSSEï¼‰ã€‚\n- **æ€§èƒ½ä¼˜åŒ–**ï¼šé¡µé¢å†…å®¹é€æ­¥æ¸²æŸ“ï¼Œä¸ç”¨ç­‰æ•´ä¸ªå“åº”è¿”å›ã€‚\n\nåœ¨æµè§ˆå™¨ä¸­ï¼Œæµå¼ä¼ è¾“çš„å®ç°ä¸»è¦é ç°ä»£ Web APIï¼Œæ¯”å¦‚ `Fetch API` å’Œ `ReadableStream`ã€‚åˆ«æ€¥ï¼Œæˆ‘ä»¬ä¸€æ­¥æ­¥æ‹†è§£ã€‚\n\n---\n\n## æ ¸å¿ƒå·¥å…·ï¼šFetch API å’Œ Web Streams\n\n### Fetch API çš„æµå¼è¶…èƒ½åŠ›\n\nä½ å¯èƒ½å·²ç»ç”¨ `fetch` è¯·æ±‚è¿‡æ— æ•°æ¥å£ï¼Œä½†ä½ çŸ¥é“å®ƒå…¶å®å¤©ç”Ÿæ”¯æŒæµå¼ä¼ è¾“å—ï¼Ÿå½“ä½ è°ƒç”¨ `fetch(url)` æ—¶ï¼Œè¿”å›çš„ `Response` å¯¹è±¡æœ‰ä¸ªéšè—çš„å®è— â€”â€” `body`ï¼Œå®ƒæ˜¯ä¸€ä¸ª `ReadableStream`ã€‚è¿™æ„å‘³ç€ï¼ŒæœåŠ¡å™¨è¿”å›çš„æ•°æ®å¯ä»¥åˆ†å—è¯»å–ï¼Œè€Œä¸æ˜¯ç­‰å…¨éƒ¨å“åº”åˆ°ä½ã€‚\n\n```javascript\nfetch(\"https://api.example.com/big-file\")\n  .then((response) => {\n    const stream = response.body; // è¿™å°±æ˜¯ ReadableStreamï¼\n    console.log(stream); // ReadableStream { locked: false, ... }\n  })\n  .catch((err) => console.error(\"å‡ºé”™äº†å…„å¼Ÿ:\", err));\n```\n\n**å° Tips**: æ‹¿åˆ° `response.body` åï¼Œåˆ«æ€¥ç€ç”¨ `.json()` æˆ– `.text()`ï¼Œå®ƒä»¬ä¼šæŠŠæ•´ä¸ªæµè¯»å®Œï¼Œå¤±å»æµå¼å¤„ç†çš„æ„ä¹‰ã€‚æƒ³æµå¼å¤„ç†ï¼Œå¾—ç”¨ `ReadableStream` çš„æ–¹æ³•ã€‚\n\n---\n\n### ReadableStreamï¼šæµçš„æ ¸å¿ƒ\n\n`ReadableStream` æ˜¯ Web Streams API çš„ä¸»è§’ï¼Œè´Ÿè´£ç®¡ç†æ•°æ®çš„â€œæµåŠ¨â€ã€‚å®ƒåƒä¸ªæ°´ç®¡å·¥ï¼Œæ§åˆ¶ç€æ•°æ®çš„è¯»å–å’Œæ¶ˆè´¹ã€‚ç»“æ„ä¸Šï¼Œå®ƒæœ‰ä¸‰ä¸ªæ ¸å¿ƒè§’è‰²ï¼š\n\n1. **Reader**ï¼šè¯»å–æµçš„å·¥ä½œè€…ï¼Œç”¨ `getReader()` è·å–ã€‚\n2. **Chunk**ï¼šæ¯æ¬¡è¯»å–çš„æ•°æ®å—ï¼Œå¯ä»¥æ˜¯æ–‡æœ¬ã€äºŒè¿›åˆ¶æ•°æ®ï¼ˆ`ArrayBuffer`ï¼‰ç­‰ã€‚\n3. **Controller**ï¼šæµçš„å¹•åè€æ¿ï¼Œæ§åˆ¶æµçš„å¼€å§‹ã€æš‚åœå’Œç»“æŸã€‚\n\næ¥çœ‹ä¸ªç®€å•çš„ä¾‹å­ï¼Œè¯»å–ä¸€ä¸ªè¿œç¨‹æ–‡æœ¬æ–‡ä»¶ï¼š\n\n```javascript\nasync function readStream() {\n  const response = await fetch(\"https://example.com/stream.txt\");\n  const reader = response.body.getReader();\n\n  while (true) {\n    const { done, value } = await reader.read(); // è¯»å–ä¸€å—æ•°æ®\n    if (done) {\n      console.log(\"æµç»“æŸäº†ï¼Œæ­‡ä¼šå„¿å§ ğŸ˜Œ\");\n      break;\n    }\n    const text = new TextDecoder().decode(value); // å°† Uint8Array è½¬ä¸ºå­—ç¬¦ä¸²\n    console.log(\"æ”¶åˆ°ä¸€å—æ•°æ®:\", text);\n  }\n}\n\nreadStream();\n```\n\n**è¿è¡Œé€»è¾‘**ï¼š\n- `reader.read()` è¿”å›ä¸€ä¸ª Promiseï¼Œè§£æåå¾—åˆ° `{ done, value }`ã€‚\n- `done` ä¸º `true` æ—¶ï¼Œæµç»“æŸï¼›å¦åˆ™ `value` æ˜¯å½“å‰çš„æ•°æ®å—ï¼ˆ`Uint8Array`ï¼‰ã€‚\n- ç”¨ `TextDecoder` æŠŠäºŒè¿›åˆ¶æ•°æ®è½¬ä¸ºå¯è¯»çš„å­—ç¬¦ä¸²ã€‚\n\n**å° Tips**: å¦‚æœæ•°æ®æ˜¯ JSON æµï¼ˆæ¯”å¦‚ NDJSONï¼Œæ¯è¡Œä¸€ä¸ª JSONï¼‰ï¼Œå¯ä»¥ç”¨ `JSON.parse()` é€å—è§£æï¼Œä½†è¦ç¡®ä¿æ¯å—æ˜¯å®Œæ•´çš„ JSON å¯¹è±¡ã€‚\n\n---\n\n## å®æˆ˜åœºæ™¯ï¼šä»ç®€å•åˆ°å¤æ‚\n\n### åœºæ™¯ 1ï¼šå®æ—¶æ˜¾ç¤ºæœåŠ¡å™¨æ—¥å¿—\n\nå‡è®¾ä½ æœ‰ä¸ªæ¥å£è¿”å›æœåŠ¡å™¨æ—¥å¿—ï¼ˆæ¯”å¦‚ `GET /logs`ï¼‰ï¼Œæ•°æ®æ˜¯æµå¼çš„ï¼Œæ¯ç§’æ¨é€ä¸€è¡Œã€‚æˆ‘ä»¬ç”¨æµå¼ä¼ è¾“æ¥å®æ—¶æ˜¾ç¤ºï¼š\n\n```javascript\nasync function displayLogs() {\n  const response = await fetch(\"https://api.example.com/logs\");\n  const reader = response.body.getReader();\n  const decoder = new TextDecoder();\n\n  const logContainer = document.getElementById(\"log-container\");\n\n  while (true) {\n    const { done, value } = await reader.read();\n    if (done) {\n      logContainer.append(\"æ—¥å¿—ç»“æŸäº†ï¼Œå–å£æ°´å§ ğŸµ\");\n      break;\n    }\n    const logLine = decoder.decode(value);\n    const p = document.createElement(\"p\");\n    p.textContent = logLine;\n    logContainer.appendChild(p);\n  }\n}\n\ndisplayLogs();\n```\n\n**æ•ˆæœ**ï¼šæ—¥å¿—ä¸€è¡Œè¡Œæ˜¾ç¤ºåœ¨é¡µé¢ä¸Šï¼Œåƒç»ˆç«¯ä¸€æ ·å®æ—¶æ›´æ–°ï¼Œè€Œä¸æ˜¯ç­‰å…¨éƒ¨åŠ è½½å®Œã€‚\n\n**å° Tips**: å¦‚æœæ—¥å¿—é‡å¾ˆå¤§ï¼Œè€ƒè™‘ç”¨ `requestAnimationFrame` ä¼˜åŒ– DOM æ›´æ–°ï¼Œé¿å…å¡é¡¿ã€‚\n\n---\n\n### åœºæ™¯ 2ï¼šå¤„ç†å¤§æ–‡ä»¶ä¸‹è½½\n\nå‡è®¾ä½ è¦ä¸‹è½½ä¸€ä¸ª 1GB çš„è§†é¢‘æ–‡ä»¶ï¼Œç›´æ¥ç”¨ `<a download>` å¯èƒ½ä¼šè®©æµè§ˆå™¨å†…å­˜çˆ†ç‚¸ ğŸ’¥ã€‚ç”¨æµå¼ä¼ è¾“ï¼Œåˆ†å—ä¿å­˜åˆ°æœ¬åœ°ï¼š\n\n```javascript\nasync function downloadBigFile() {\n  const response = await fetch(\"https://example.com/video.mp4\");\n  const reader = response.body.getReader();\n  const totalSize = +response.headers.get(\"Content-Length\");\n  let receivedSize = 0;\n  const chunks = [];\n\n  while (true) {\n    const { done, value } = await reader.read();\n    if (done) {\n      console.log(\"ä¸‹è½½å®Œæˆï¼Œå‡†å¤‡ä¿å­˜ ğŸ‰\");\n      break;\n    }\n    chunks.push(value);\n    receivedSize += value.length;\n    console.log(`å·²ä¸‹è½½: ${(receivedSize / totalSize * 100).toFixed(2)}%`);\n  }\n\n  const blob = new Blob(chunks);\n  const url = URL.createObjectURL(blob);\n  const a = document.createElement(\"a\");\n  a.href = url;\n  a.download = \"video.mp4\";\n  a.click();\n  URL.revokeObjectURL(url); // æ¸…ç†å†…å­˜\n}\n\ndownloadBigFile();\n```\n\n**åŸç†**ï¼š\n- ç”¨æ•°ç»„ `chunks` æ”¶é›†æ‰€æœ‰æ•°æ®å—ã€‚\n- ç”¨ `Blob` æŠŠå—æ‹¼æˆæ–‡ä»¶ï¼Œç”Ÿæˆä¸‹è½½é“¾æ¥ã€‚\n- æ˜¾ç¤ºä¸‹è½½è¿›åº¦ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚\n\n**å° Tips**: å¦‚æœæ–‡ä»¶è¶…å¤§ï¼Œè€ƒè™‘ç”¨ `FileSystemWritableFileStream`ï¼ˆéœ€è¦ Chrome æ”¯æŒï¼‰ç›´æ¥å†™å…¥ç£ç›˜ï¼ŒèŠ‚çœå†…å­˜ã€‚\n\n---\n\n### åœºæ™¯ 3ï¼šè‡ªå®šä¹‰æµä¸ TransformStream\n\næœ‰æ—¶å€™ï¼ŒæœåŠ¡å™¨çš„æµæ•°æ®æ ¼å¼ä¸ç†æƒ³ï¼Œæ¯”å¦‚å…¨æ˜¯å°å†™å­—æ¯ï¼Œä½ æƒ³è½¬æˆå¤§å†™å†æ˜¾ç¤ºã€‚è¿™æ—¶å€™å¯ä»¥ç”¨ `TransformStream` åŠ å·¥æ•°æ®ï¼š\n\n```javascript\nasync function transformStream() {\n  const response = await fetch(\"https://example.com/stream.txt\");\n  const transformStream = new TransformStream({\n    transform(chunk, controller) {\n      const text = new TextDecoder().decode(chunk);\n      const upperText = text.toUpperCase();\n      controller.enqueue(new TextEncoder().encode(upperText));\n    },\n  });\n\n  const transformedStream = response.body.pipeThrough(transformStream);\n  const reader = transformedStream.getReader();\n\n  while (true) {\n    const { done, value } = await reader.read();\n    if (done) break;\n    console.log(new TextDecoder().decode(value));\n  }\n}\n\ntransformStream();\n```\n\n**äº®ç‚¹**ï¼š`pipeThrough` æŠŠåŸå§‹æµâ€œç®¡é“â€æ¥åˆ°åŠ å·¥æµï¼Œé“¾å¼å¤„ç†ï¼Œåƒæ­ä¹é«˜ä¸€æ ·çµæ´» ğŸ§©ã€‚\n\n**å° Tips**: `TransformStream` è¿˜èƒ½å‹ç¼©ã€åŠ å¯†æ•°æ®ï¼Œå‘æŒ¥æƒ³è±¡åŠ›å§ï¼\n\n---\n\n## æ·±å…¥åŸç†ï¼šæµæ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ\n\n### èƒŒå‹ï¼ˆBackpressureï¼‰ä¸å¼‚æ­¥è¿­ä»£\n\næµå¼ä¼ è¾“æœ‰ä¸ªå…³é”®æ¦‚å¿µå«â€œèƒŒå‹â€ï¼Œæ„æ€æ˜¯æ¶ˆè´¹è€…ï¼ˆä½ ï¼‰å¤„ç†æ•°æ®çš„é€Ÿåº¦å¾—è·Ÿä¸Šç”Ÿäº§è€…ï¼ˆæœåŠ¡å™¨ï¼‰çš„é€Ÿåº¦ã€‚å¦‚æœæœåŠ¡å™¨æ¨é€å¤ªå¿«ï¼Œè€Œä½ å¤„ç†å¤ªæ…¢ï¼Œæ•°æ®å°±ä¼šå †ç§¯ï¼Œåƒå µè½¦ä¸€æ · ğŸš—ã€‚`ReadableStream` è‡ªå¸¦èƒŒå‹ç®¡ç†ï¼Œå½“ç¼“å†²åŒºæ»¡æ—¶ï¼Œä¼šé€šçŸ¥æœåŠ¡å™¨æš‚åœå‘é€ã€‚\n\nç°ä»£æµè§ˆå™¨è¿˜æ”¯æŒå¼‚æ­¥è¿­ä»£å™¨ï¼Œæ›´ä¼˜é›…åœ°å¤„ç†æµï¼š\n\n```javascript\nasync function elegantStream() {\n  const response = await fetch(\"https://example.com/stream.txt\");\n  for await (const chunk of response.body) {\n    console.log(new TextDecoder().decode(chunk));\n  }\n}\n\nelegantStream();\n```\n\n**å¥½å¤„**ï¼šä»£ç ç®€æ´ï¼Œåƒéå†æ•°ç»„ä¸€æ ·è‡ªç„¶ã€‚\n\n**å° Tips**: å¼‚æ­¥è¿­ä»£éœ€è¦æµè§ˆå™¨æ”¯æŒï¼ˆChrome 63+ï¼‰ï¼Œè€é¡¹ç›®è®°å¾—åŠ  Polyfillã€‚\n\n---\n\n### æµçš„ç”Ÿå‘½å‘¨æœŸ\n\næµçš„ç”Ÿå‘½å‘¨æœŸæœ‰ç‚¹åƒäººç”Ÿçš„èµ·ä¼ï¼š\n1. **åˆ›å»º**ï¼š`fetch` è¿”å› `ReadableStream`ã€‚\n2. **é”å®š**ï¼šè°ƒç”¨ `getReader()` åï¼Œæµè¢«æŸä¸ª reader ç‹¬å ã€‚\n3. **è¯»å–**ï¼šåˆ†å—æ¶ˆè´¹æ•°æ®ã€‚\n4. **ç»“æŸ/å–æ¶ˆ**ï¼šæµè¯»å®Œï¼ˆ`done`ï¼‰æˆ–æ‰‹åŠ¨è°ƒç”¨ `reader.cancel()`ã€‚\n\nå¦‚æœä¸­é€”æƒ³æ”¾å¼ƒè¯»å–ï¼š\n\n```javascript\nconst reader = response.body.getReader();\nawait reader.cancel(\"ä¸æƒ³è¯»äº†ï¼Œæ’¤ï¼\");\n```\n\n**å° Tips**: å–æ¶ˆæµæ—¶å¯ä»¥ä¼ ä¸ªåŸå› ï¼ˆreasonï¼‰ï¼Œæ–¹ä¾¿è°ƒè¯•ã€‚\n\n---\n\n## æœ€ä½³å®è·µï¼šå°‘è¸©å‘ï¼Œå¤šå¹²è´§\n\n1. **é”™è¯¯å¤„ç†è¦åˆ°ä½**  \n   æµå¤„ç†ä¸­é€”å¯èƒ½æ–­å¼€ï¼ˆç½‘ç»œæŠ–åŠ¨ã€æœåŠ¡å™¨æŒ‚äº†ï¼‰ï¼Œåˆ«å¿˜äº†åŠ  try-catchï¼š\n\n   ```javascript\n   try {\n     const response = await fetch(url);\n     const reader = response.body.getReader();\n     while (true) {\n       const { done, value } = await reader.read();\n       if (done) break;\n       // å¤„ç† value\n     }\n   } catch (err) {\n     console.error(\"æµæŒ‚äº†ï¼Œå¿«æŸ¥æ—¥å¿—:\", err);\n   }\n   ```\n\n   **å° Tips**: æ£€æŸ¥ `response.ok` å’Œ `response.status`ï¼Œç¡®ä¿æµæ²¡é—®é¢˜å†è¯»ã€‚\n\n2. **å†…å­˜ç®¡ç†åˆ«å¿½è§†**  \n   æ”¶é›†å¤§æ–‡ä»¶æ—¶ï¼Œåˆ«ä¸€è‚¡è„‘å„¿å¡è¿›æ•°ç»„ï¼Œç”¨ `WritableStream` æˆ–ç£ç›˜å†™å…¥ API æ›´é¦™ã€‚\n\n3. **æ€§èƒ½ä¼˜åŒ–åŠ ç‚¹æ–™**  \n   ç”¨ `requestIdleCallback` å¤„ç†éç´§æ€¥çš„æµæ•°æ®ï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹ã€‚\n\n4. **è°ƒè¯•ç¥å™¨ï¼šæ—¥å¿—å…ˆè¡Œ**  \n   åœ¨æµå¤„ç†çš„å…³é”®ç‚¹åŠ  `console.log`ï¼Œä¸ç„¶å‡ºäº†é—®é¢˜ä½ ä¼šæŠ“çã€‚\n\n5. **å…¼å®¹æ€§è¦è€ƒè™‘**  \n   `ReadableStream` åœ¨ IE å’Œè€ Safari ä¸Šä¸æ”¯æŒï¼Œå¿…è¦æ—¶ç”¨ `whatwg-streams` Polyfillã€‚\n\n---\n\n## å½©è›‹ï¼šæµå¼ä¼ è¾“çš„æœªæ¥\n\nWeb Streams API è¿˜åœ¨è¿›åŒ–ï¼Œæœªæ¥çš„ `ReadableStreamBYOB`ï¼ˆBring Your Own Bufferï¼‰ä¼šè®©å¼€å‘è€…æ›´çµæ´»åœ°æ§åˆ¶ç¼“å†²åŒºã€‚åŠ ä¸Š WebAssembly çš„åŠ æŒï¼Œæµå¼å¤„ç†å¯èƒ½ä¼šæˆä¸ºå‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„æ ‡é…ã€‚åˆ«å¿˜äº†å…³æ³¨ W3C çš„æœ€æ–°åŠ¨æ€ï¼Œä¿æŒä½ çš„æŠ€æœ¯é›·è¾¾çµæ•å“¦ï¼ğŸ“¡\n\n---\n\n## å†™åœ¨æœ€å\n\næµå¼ä¼ è¾“å°±åƒå‰ç«¯å¼€å‘çš„â€œè½»åŠŸâ€ï¼Œç”¨å¾—å¥½ï¼Œèƒ½è®©ä½ çš„åº”ç”¨é£èµ·æ¥ ğŸ•Šï¸ã€‚ä» `Fetch API` åˆ° `ReadableStream`ï¼Œå†åˆ°è‡ªå®šä¹‰åŠ å·¥æµï¼Œä»Šå¤©æˆ‘ä»¬ä»åŸç†åˆ°å®æˆ˜èŠäº†ä¸ªéã€‚å¸Œæœ›ä½ èƒ½æ‹¿è¿™äº›ä»£ç å’Œæ€è·¯ï¼Œæå®šæ‰‹å¤´çš„éœ€æ±‚ï¼Œé¡ºä¾¿åœ¨åŒäº‹é¢å‰ç§€ä¸€æŠŠâ€œæŠ€æœ¯è‚Œè‚‰â€ ğŸ’ªã€‚\n\næœ‰å•¥é—®é¢˜æˆ–è€…éªšæƒ³æ³•ï¼Œæ¬¢è¿ç•™è¨€è®¨è®ºï¼ä¸‹æ¬¡å†èŠç‚¹åˆ«çš„ç¡¬æ ¸è¯é¢˜ï¼Œå’±ä»¬æ±Ÿæ¹–å†è§ï¼ğŸ‘‹\n\n--- ",
    "code": "var Component=(()=>{var p=Object.create;var c=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var E=Object.getOwnPropertyNames;var F=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var u=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports),m=(l,e)=>{for(var r in e)c(l,r,{get:e[r],enumerable:!0})},t=(l,e,r,d)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let a of E(e))!g.call(l,a)&&a!==r&&c(l,a,{get:()=>e[a],enumerable:!(d=y(e,a))||d.enumerable});return l};var B=(l,e,r)=>(r=l!=null?p(F(l)):{},t(e||!l||!l.__esModule?c(r,\"default\",{value:l,enumerable:!0}):r,l)),b=l=>t(c({},\"__esModule\",{value:!0}),l);var i=u((S,s)=>{s.exports=_jsx_runtime});var x={};m(x,{default:()=>h,frontmatter:()=>f});var n=B(i()),f={type:\"Post\",title:\"\\u624B\\u628A\\u624B\\u6559\\u4F60\\u5728\\u6D4F\\u89C8\\u5668\\u4E2D\\u5904\\u7406\\u6D41\\u5F0F\\u4F20\\u8F93\",date:\"2023-08-28\",description:\"\\u6DF1\\u5165\\u8BB2\\u89E3\\u5982\\u4F55\\u5728\\u6D4F\\u89C8\\u5668\\u4E2D\\u4F18\\u96C5\\u5730\\u5904\\u7406\\u6D41\\u5F0F\\u4F20\\u8F93\\uFF0C\\u4ECE Fetch API \\u5230 ReadableStream\\uFF0C\\u5E26\\u4F60\\u638C\\u63E1\\u539F\\u7406\\u3001\\u8E29\\u5751\\u7ECF\\u9A8C\\u548C\\u6700\\u4F73\\u5B9E\\u8DF5\\u3002\",keywords:\"\\u6D41\\u5F0F\\u4F20\\u8F93, Fetch API, ReadableStream, Web Streams, \\u524D\\u7AEF\\u5F00\\u53D1, JavaScript, \\u6027\\u80FD\\u4F18\\u5316\",author:\"\\u6653\\u9F99\",image:\"/images/hero/streaming.jpg\",tags:[\"JavaScript\",\"Web Streams\",\"\\u524D\\u7AEF\\u5F00\\u53D1\",\"\\u6027\\u80FD\\u4F18\\u5316\"],category:\"\\u524D\\u7AEF\\u6280\\u672F\"};function o(l){let e={a:\"a\",br:\"br\",code:\"code\",figure:\"figure\",h2:\"h2\",h3:\"h3\",hr:\"hr\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...l.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:\"\\u6D41\\u5F0F\\u4F20\\u8F93\\uFF08Streaming\\uFF09\\u5728\\u73B0\\u4EE3\\u524D\\u7AEF\\u5F00\\u53D1\\u4E2D\\u8D8A\\u6765\\u8D8A\\u5E38\\u89C1\\uFF0C\\u5C24\\u5176\\u662F\\u5F53\\u4F60\\u9700\\u8981\\u5904\\u7406\\u5927\\u6587\\u4EF6\\u3001\\u5B9E\\u65F6\\u6570\\u636E\\u6216\\u8005\\u4F18\\u5316\\u9996\\u5C4F\\u52A0\\u8F7D\\u65F6\\uFF0C\\u5B83\\u7B80\\u76F4\\u662F\\u4E2A\\u6551\\u547D\\u7A3B\\u8349 \\u{1F33E}\\u3002\\u60F3\\u8C61\\u4E00\\u4E0B\\uFF0C\\u4F60\\u5728\\u6D4F\\u89C8\\u5668\\u91CC\\u770B\\u89C6\\u9891\\uFF0C\\u8FB9\\u4E0B\\u8FB9\\u64AD\\uFF0C\\u800C\\u4E0D\\u662F\\u7B49\\u6574\\u4E2A\\u6587\\u4EF6\\u4E0B\\u8F7D\\u5B8C\\u518D\\u770B\\u2014\\u2014\\u8FD9\\u5C31\\u662F\\u6D41\\u5F0F\\u4F20\\u8F93\\u7684\\u9B45\\u529B\\uFF01\\u4ECA\\u5929\\uFF0C\\u6211\\u5C31\\u5E26\\u4F60\\u4ECE\\u96F6\\u5F00\\u59CB\\uFF0C\\u6DF1\\u5165\\u5256\\u6790\\u5982\\u4F55\\u5728\\u6D4F\\u89C8\\u5668\\u4E2D\\u5904\\u7406\\u6D41\\u5F0F\\u4F20\\u8F93\\uFF0C\\u804A\\u804A\\u80CC\\u540E\\u7684\\u539F\\u7406\\uFF0C\\u7529\\u51E0\\u4E2A\\u5B9E\\u7528\\u4F8B\\u5B50\\uFF0C\\u518D\\u9644\\u4E0A\\u4E00\\u4E9B\\u8E29\\u5751\\u7ECF\\u9A8C\\u548C\\u6700\\u4F73\\u5B9E\\u8DF5\\u3002\\u51C6\\u5907\\u597D\\u4E86\\u5417\\uFF1F\\u8BA9\\u6211\\u4EEC\\u4E00\\u5934\\u624E\\u8FDB\\u8FD9\\u4E2A\\u201C\\u6D41\\u52A8\\u7684\\u4E16\\u754C\\u201D\\u5427\\uFF01\\u{1F680}\"}),`\n`,(0,n.jsx)(e.h2,{id:\"\\u4EC0\\u4E48\\u662F\\u6D41\\u5F0F\\u4F20\\u8F93\\u4ECE\\u751F\\u6D3B\\u804A\\u5230\\u4EE3\\u7801\",children:(0,n.jsx)(e.a,{href:\"#\\u4EC0\\u4E48\\u662F\\u6D41\\u5F0F\\u4F20\\u8F93\\u4ECE\\u751F\\u6D3B\\u804A\\u5230\\u4EE3\\u7801\",children:\"\\u4EC0\\u4E48\\u662F\\u6D41\\u5F0F\\u4F20\\u8F93\\uFF1F\\u4ECE\\u751F\\u6D3B\\u804A\\u5230\\u4EE3\\u7801\"})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u7B80\\u5355\\u6765\\u8BF4\\uFF0C\\u6D41\\u5F0F\\u4F20\\u8F93\\u5C31\\u662F\\u6570\\u636E\\u50CF\\u6C34\\u6D41\\u4E00\\u6837\\uFF0C\\u5206\\u5757\\uFF08chunk\\uFF09\\u4F20\\u8F93\\uFF0C\\u800C\\u4E0D\\u662F\\u4E00\\u6B21\\u6027\\u5168\\u7ED9\\u4F60\\u3002\\u4F60\\u53EF\\u4EE5\\u628A\\u5B83\\u60F3\\u8C61\\u6210\\u81EA\\u52A9\\u9910\\u7684\\u6D41\\u6C34\\u7EBF \\u{1F363}\\uFF1A\\u53A8\\u5E08\\u4E0D\\u505C\\u5730\\u628A\\u5BFF\\u53F8\\u7AEF\\u4E0A\\u6765\\uFF0C\\u4F60\\u8FB9\\u5403\\u8FB9\\u62FF\\uFF0C\\u800C\\u4E0D\\u662F\\u7B49\\u4E00\\u684C\\u5B50\\u83DC\\u90FD\\u4E0A\\u9F50\\u624D\\u5F00\\u52A8\\u3002\\u5728 Web \\u4E2D\\uFF0C\\u6D41\\u5F0F\\u4F20\\u8F93\\u7684\\u5178\\u578B\\u573A\\u666F\\u5305\\u62EC\\uFF1A\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"\\u5927\\u6587\\u4EF6\\u4E0B\\u8F7D/\\u4E0A\\u4F20\"}),\"\\uFF1A\\u6BD4\\u5982\\u65E5\\u5FD7\\u6587\\u4EF6\\uFF0C\\u5206\\u5757\\u8BFB\\u53D6\\u800C\\u4E0D\\u662F\\u5168\\u52A0\\u8F7D\\u5230\\u5185\\u5B58\\u3002\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"\\u5B9E\\u65F6\\u6570\\u636E\"}),\"\\uFF1A\\u50CF\\u804A\\u5929\\u5BA4\\u7684 WebSocket \\u6D88\\u606F\\u63A8\\u9001\\uFF0C\\u6216\\u8005\\u670D\\u52A1\\u5668\\u63A8\\u9001\\u4E8B\\u4EF6\\uFF08SSE\\uFF09\\u3002\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"\\u6027\\u80FD\\u4F18\\u5316\"}),\"\\uFF1A\\u9875\\u9762\\u5185\\u5BB9\\u9010\\u6B65\\u6E32\\u67D3\\uFF0C\\u4E0D\\u7528\\u7B49\\u6574\\u4E2A\\u54CD\\u5E94\\u8FD4\\u56DE\\u3002\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u5728\\u6D4F\\u89C8\\u5668\\u4E2D\\uFF0C\\u6D41\\u5F0F\\u4F20\\u8F93\\u7684\\u5B9E\\u73B0\\u4E3B\\u8981\\u9760\\u73B0\\u4EE3 Web API\\uFF0C\\u6BD4\\u5982 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"Fetch API\"})})})}),\" \\u548C \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"ReadableStream\"})})})}),\"\\u3002\\u522B\\u6025\\uFF0C\\u6211\\u4EEC\\u4E00\\u6B65\\u6B65\\u62C6\\u89E3\\u3002\"]}),`\n`,(0,n.jsx)(e.hr,{}),`\n`,(0,n.jsx)(e.h2,{id:\"\\u6838\\u5FC3\\u5DE5\\u5177fetch-api-\\u548C-web-streams\",children:(0,n.jsx)(e.a,{href:\"#\\u6838\\u5FC3\\u5DE5\\u5177fetch-api-\\u548C-web-streams\",children:\"\\u6838\\u5FC3\\u5DE5\\u5177\\uFF1AFetch API \\u548C Web Streams\"})}),`\n`,(0,n.jsx)(e.h3,{id:\"fetch-api-\\u7684\\u6D41\\u5F0F\\u8D85\\u80FD\\u529B\",children:(0,n.jsx)(e.a,{href:\"#fetch-api-\\u7684\\u6D41\\u5F0F\\u8D85\\u80FD\\u529B\",children:\"Fetch API \\u7684\\u6D41\\u5F0F\\u8D85\\u80FD\\u529B\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u4F60\\u53EF\\u80FD\\u5DF2\\u7ECF\\u7528 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"fetch\"})})})}),\" \\u8BF7\\u6C42\\u8FC7\\u65E0\\u6570\\u63A5\\u53E3\\uFF0C\\u4F46\\u4F60\\u77E5\\u9053\\u5B83\\u5176\\u5B9E\\u5929\\u751F\\u652F\\u6301\\u6D41\\u5F0F\\u4F20\\u8F93\\u5417\\uFF1F\\u5F53\\u4F60\\u8C03\\u7528 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"fetch(url)\"})})})}),\" \\u65F6\\uFF0C\\u8FD4\\u56DE\\u7684 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"Response\"})})})}),\" \\u5BF9\\u8C61\\u6709\\u4E2A\\u9690\\u85CF\\u7684\\u5B9D\\u85CF \\u2014\\u2014 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"body\"})})})}),\"\\uFF0C\\u5B83\\u662F\\u4E00\\u4E2A \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"ReadableStream\"})})})}),\"\\u3002\\u8FD9\\u610F\\u5473\\u7740\\uFF0C\\u670D\\u52A1\\u5668\\u8FD4\\u56DE\\u7684\\u6570\\u636E\\u53EF\\u4EE5\\u5206\\u5757\\u8BFB\\u53D6\\uFF0C\\u800C\\u4E0D\\u662F\\u7B49\\u5168\\u90E8\\u54CD\\u5E94\\u5230\\u4F4D\\u3002\"]}),`\n`,(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"fetch\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"https://api.example.com/big-file\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\")\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  .\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,n.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"response\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" stream\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" response.body; \"}),(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u8FD9\\u5C31\\u662F ReadableStream\\uFF01\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    console.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(stream); \"}),(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// ReadableStream { locked: false, ... }\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  })\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  .\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"catch\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,n.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"err\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" console.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"error\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"\\u51FA\\u9519\\u4E86\\u5144\\u5F1F:\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", err));\"})]})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"\\u5C0F Tips\"}),\": \\u62FF\\u5230 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"response.body\"})})})}),\" \\u540E\\uFF0C\\u522B\\u6025\\u7740\\u7528 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\".json()\"})})})}),\" \\u6216 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\".text()\"})})})}),\"\\uFF0C\\u5B83\\u4EEC\\u4F1A\\u628A\\u6574\\u4E2A\\u6D41\\u8BFB\\u5B8C\\uFF0C\\u5931\\u53BB\\u6D41\\u5F0F\\u5904\\u7406\\u7684\\u610F\\u4E49\\u3002\\u60F3\\u6D41\\u5F0F\\u5904\\u7406\\uFF0C\\u5F97\\u7528 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"ReadableStream\"})})})}),\" \\u7684\\u65B9\\u6CD5\\u3002\"]}),`\n`,(0,n.jsx)(e.hr,{}),`\n`,(0,n.jsx)(e.h3,{id:\"readablestream\\u6D41\\u7684\\u6838\\u5FC3\",children:(0,n.jsx)(e.a,{href:\"#readablestream\\u6D41\\u7684\\u6838\\u5FC3\",children:\"ReadableStream\\uFF1A\\u6D41\\u7684\\u6838\\u5FC3\"})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"ReadableStream\"})})})}),\" \\u662F Web Streams API \\u7684\\u4E3B\\u89D2\\uFF0C\\u8D1F\\u8D23\\u7BA1\\u7406\\u6570\\u636E\\u7684\\u201C\\u6D41\\u52A8\\u201D\\u3002\\u5B83\\u50CF\\u4E2A\\u6C34\\u7BA1\\u5DE5\\uFF0C\\u63A7\\u5236\\u7740\\u6570\\u636E\\u7684\\u8BFB\\u53D6\\u548C\\u6D88\\u8D39\\u3002\\u7ED3\\u6784\\u4E0A\\uFF0C\\u5B83\\u6709\\u4E09\\u4E2A\\u6838\\u5FC3\\u89D2\\u8272\\uFF1A\"]}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Reader\"}),\"\\uFF1A\\u8BFB\\u53D6\\u6D41\\u7684\\u5DE5\\u4F5C\\u8005\\uFF0C\\u7528 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"getReader()\"})})})}),\" \\u83B7\\u53D6\\u3002\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Chunk\"}),\"\\uFF1A\\u6BCF\\u6B21\\u8BFB\\u53D6\\u7684\\u6570\\u636E\\u5757\\uFF0C\\u53EF\\u4EE5\\u662F\\u6587\\u672C\\u3001\\u4E8C\\u8FDB\\u5236\\u6570\\u636E\\uFF08\",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"ArrayBuffer\"})})})}),\"\\uFF09\\u7B49\\u3002\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Controller\"}),\"\\uFF1A\\u6D41\\u7684\\u5E55\\u540E\\u8001\\u677F\\uFF0C\\u63A7\\u5236\\u6D41\\u7684\\u5F00\\u59CB\\u3001\\u6682\\u505C\\u548C\\u7ED3\\u675F\\u3002\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u6765\\u770B\\u4E2A\\u7B80\\u5355\\u7684\\u4F8B\\u5B50\\uFF0C\\u8BFB\\u53D6\\u4E00\\u4E2A\\u8FDC\\u7A0B\\u6587\\u672C\\u6587\\u4EF6\\uFF1A\"}),`\n`,(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"async\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" function\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" readStream\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" response\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" fetch\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"https://example.com/stream.txt\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" reader\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" response.body.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"getReader\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  while\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"true\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" { \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"done\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"value\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" } \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" reader.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"read\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(); \"}),(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u8BFB\\u53D6\\u4E00\\u5757\\u6570\\u636E\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    if\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (done) {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      console.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"\\u6D41\\u7ED3\\u675F\\u4E86\\uFF0C\\u6B47\\u4F1A\\u513F\\u5427 \\u{1F60C}\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"      break\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" text\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" TextDecoder\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"().\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"decode\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(value); \"}),(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u5C06 Uint8Array \\u8F6C\\u4E3A\\u5B57\\u7B26\\u4E32\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    console.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"\\u6536\\u5230\\u4E00\\u5757\\u6570\\u636E:\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", text);\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"readStream\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"\\u8FD0\\u884C\\u903B\\u8F91\"}),\"\\uFF1A\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"reader.read()\"})})})}),\" \\u8FD4\\u56DE\\u4E00\\u4E2A Promise\\uFF0C\\u89E3\\u6790\\u540E\\u5F97\\u5230 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"{ done, value }\"})})})}),\"\\u3002\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"done\"})})})}),\" \\u4E3A \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"true\"})})})}),\" \\u65F6\\uFF0C\\u6D41\\u7ED3\\u675F\\uFF1B\\u5426\\u5219 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"value\"})})})}),\" \\u662F\\u5F53\\u524D\\u7684\\u6570\\u636E\\u5757\\uFF08\",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"Uint8Array\"})})})}),\"\\uFF09\\u3002\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"\\u7528 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"TextDecoder\"})})})}),\" \\u628A\\u4E8C\\u8FDB\\u5236\\u6570\\u636E\\u8F6C\\u4E3A\\u53EF\\u8BFB\\u7684\\u5B57\\u7B26\\u4E32\\u3002\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"\\u5C0F Tips\"}),\": \\u5982\\u679C\\u6570\\u636E\\u662F JSON \\u6D41\\uFF08\\u6BD4\\u5982 NDJSON\\uFF0C\\u6BCF\\u884C\\u4E00\\u4E2A JSON\\uFF09\\uFF0C\\u53EF\\u4EE5\\u7528 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"JSON.parse()\"})})})}),\" \\u9010\\u5757\\u89E3\\u6790\\uFF0C\\u4F46\\u8981\\u786E\\u4FDD\\u6BCF\\u5757\\u662F\\u5B8C\\u6574\\u7684 JSON \\u5BF9\\u8C61\\u3002\"]}),`\n`,(0,n.jsx)(e.hr,{}),`\n`,(0,n.jsx)(e.h2,{id:\"\\u5B9E\\u6218\\u573A\\u666F\\u4ECE\\u7B80\\u5355\\u5230\\u590D\\u6742\",children:(0,n.jsx)(e.a,{href:\"#\\u5B9E\\u6218\\u573A\\u666F\\u4ECE\\u7B80\\u5355\\u5230\\u590D\\u6742\",children:\"\\u5B9E\\u6218\\u573A\\u666F\\uFF1A\\u4ECE\\u7B80\\u5355\\u5230\\u590D\\u6742\"})}),`\n`,(0,n.jsx)(e.h3,{id:\"\\u573A\\u666F-1\\u5B9E\\u65F6\\u663E\\u793A\\u670D\\u52A1\\u5668\\u65E5\\u5FD7\",children:(0,n.jsx)(e.a,{href:\"#\\u573A\\u666F-1\\u5B9E\\u65F6\\u663E\\u793A\\u670D\\u52A1\\u5668\\u65E5\\u5FD7\",children:\"\\u573A\\u666F 1\\uFF1A\\u5B9E\\u65F6\\u663E\\u793A\\u670D\\u52A1\\u5668\\u65E5\\u5FD7\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u5047\\u8BBE\\u4F60\\u6709\\u4E2A\\u63A5\\u53E3\\u8FD4\\u56DE\\u670D\\u52A1\\u5668\\u65E5\\u5FD7\\uFF08\\u6BD4\\u5982 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"GET /logs\"})})})}),\"\\uFF09\\uFF0C\\u6570\\u636E\\u662F\\u6D41\\u5F0F\\u7684\\uFF0C\\u6BCF\\u79D2\\u63A8\\u9001\\u4E00\\u884C\\u3002\\u6211\\u4EEC\\u7528\\u6D41\\u5F0F\\u4F20\\u8F93\\u6765\\u5B9E\\u65F6\\u663E\\u793A\\uFF1A\"]}),`\n`,(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"async\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" function\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" displayLogs\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" response\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" fetch\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"https://api.example.com/logs\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" reader\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" response.body.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"getReader\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" decoder\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" TextDecoder\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" logContainer\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" document.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"getElementById\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"log-container\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  while\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"true\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" { \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"done\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"value\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" } \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" reader.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"read\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    if\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (done) {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      logContainer.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"append\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"\\u65E5\\u5FD7\\u7ED3\\u675F\\u4E86\\uFF0C\\u559D\\u53E3\\u6C34\\u5427 \\u{1F375}\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"      break\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" logLine\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" decoder.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"decode\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(value);\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" p\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" document.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"createElement\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"p\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    p.textContent \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" logLine;\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    logContainer.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"appendChild\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(p);\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"displayLogs\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"\\u6548\\u679C\"}),\"\\uFF1A\\u65E5\\u5FD7\\u4E00\\u884C\\u884C\\u663E\\u793A\\u5728\\u9875\\u9762\\u4E0A\\uFF0C\\u50CF\\u7EC8\\u7AEF\\u4E00\\u6837\\u5B9E\\u65F6\\u66F4\\u65B0\\uFF0C\\u800C\\u4E0D\\u662F\\u7B49\\u5168\\u90E8\\u52A0\\u8F7D\\u5B8C\\u3002\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"\\u5C0F Tips\"}),\": \\u5982\\u679C\\u65E5\\u5FD7\\u91CF\\u5F88\\u5927\\uFF0C\\u8003\\u8651\\u7528 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"requestAnimationFrame\"})})})}),\" \\u4F18\\u5316 DOM \\u66F4\\u65B0\\uFF0C\\u907F\\u514D\\u5361\\u987F\\u3002\"]}),`\n`,(0,n.jsx)(e.hr,{}),`\n`,(0,n.jsx)(e.h3,{id:\"\\u573A\\u666F-2\\u5904\\u7406\\u5927\\u6587\\u4EF6\\u4E0B\\u8F7D\",children:(0,n.jsx)(e.a,{href:\"#\\u573A\\u666F-2\\u5904\\u7406\\u5927\\u6587\\u4EF6\\u4E0B\\u8F7D\",children:\"\\u573A\\u666F 2\\uFF1A\\u5904\\u7406\\u5927\\u6587\\u4EF6\\u4E0B\\u8F7D\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u5047\\u8BBE\\u4F60\\u8981\\u4E0B\\u8F7D\\u4E00\\u4E2A 1GB \\u7684\\u89C6\\u9891\\u6587\\u4EF6\\uFF0C\\u76F4\\u63A5\\u7528 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"<a download>\"})})})}),\" \\u53EF\\u80FD\\u4F1A\\u8BA9\\u6D4F\\u89C8\\u5668\\u5185\\u5B58\\u7206\\u70B8 \\u{1F4A5}\\u3002\\u7528\\u6D41\\u5F0F\\u4F20\\u8F93\\uFF0C\\u5206\\u5757\\u4FDD\\u5B58\\u5230\\u672C\\u5730\\uFF1A\"]}),`\n`,(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"async\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" function\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" downloadBigFile\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" response\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" fetch\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"https://example.com/video.mp4\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" reader\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" response.body.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"getReader\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" totalSize\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" +\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"response.headers.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"get\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"Content-Length\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  let\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" receivedSize \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 0\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" chunks\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" [];\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  while\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"true\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" { \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"done\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"value\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" } \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" reader.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"read\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    if\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (done) {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      console.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"\\u4E0B\\u8F7D\\u5B8C\\u6210\\uFF0C\\u51C6\\u5907\\u4FDD\\u5B58 \\u{1F389}\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"      break\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    chunks.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"push\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(value);\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    receivedSize \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"+=\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" value.\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"length\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    console.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"`\\u5DF2\\u4E0B\\u8F7D: ${\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"receivedSize\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" /\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" totalSize\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" *\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 100\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\").\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"toFixed\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"2\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"}%`\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" blob\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" Blob\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(chunks);\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" url\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" URL\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"createObjectURL\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(blob);\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" a\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" document.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"createElement\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"a\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  a.href \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" url;\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  a.download \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:' \"video.mp4\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  a.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"click\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"  URL\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"revokeObjectURL\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(url); \"}),(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u6E05\\u7406\\u5185\\u5B58\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"downloadBigFile\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"\\u539F\\u7406\"}),\"\\uFF1A\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"\\u7528\\u6570\\u7EC4 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"chunks\"})})})}),\" \\u6536\\u96C6\\u6240\\u6709\\u6570\\u636E\\u5757\\u3002\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"\\u7528 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"Blob\"})})})}),\" \\u628A\\u5757\\u62FC\\u6210\\u6587\\u4EF6\\uFF0C\\u751F\\u6210\\u4E0B\\u8F7D\\u94FE\\u63A5\\u3002\"]}),`\n`,(0,n.jsx)(e.li,{children:\"\\u663E\\u793A\\u4E0B\\u8F7D\\u8FDB\\u5EA6\\uFF0C\\u63D0\\u5347\\u7528\\u6237\\u4F53\\u9A8C\\u3002\"}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"\\u5C0F Tips\"}),\": \\u5982\\u679C\\u6587\\u4EF6\\u8D85\\u5927\\uFF0C\\u8003\\u8651\\u7528 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"FileSystemWritableFileStream\"})})})}),\"\\uFF08\\u9700\\u8981 Chrome \\u652F\\u6301\\uFF09\\u76F4\\u63A5\\u5199\\u5165\\u78C1\\u76D8\\uFF0C\\u8282\\u7701\\u5185\\u5B58\\u3002\"]}),`\n`,(0,n.jsx)(e.hr,{}),`\n`,(0,n.jsx)(e.h3,{id:\"\\u573A\\u666F-3\\u81EA\\u5B9A\\u4E49\\u6D41\\u4E0E-transformstream\",children:(0,n.jsx)(e.a,{href:\"#\\u573A\\u666F-3\\u81EA\\u5B9A\\u4E49\\u6D41\\u4E0E-transformstream\",children:\"\\u573A\\u666F 3\\uFF1A\\u81EA\\u5B9A\\u4E49\\u6D41\\u4E0E TransformStream\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u6709\\u65F6\\u5019\\uFF0C\\u670D\\u52A1\\u5668\\u7684\\u6D41\\u6570\\u636E\\u683C\\u5F0F\\u4E0D\\u7406\\u60F3\\uFF0C\\u6BD4\\u5982\\u5168\\u662F\\u5C0F\\u5199\\u5B57\\u6BCD\\uFF0C\\u4F60\\u60F3\\u8F6C\\u6210\\u5927\\u5199\\u518D\\u663E\\u793A\\u3002\\u8FD9\\u65F6\\u5019\\u53EF\\u4EE5\\u7528 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"TransformStream\"})})})}),\" \\u52A0\\u5DE5\\u6570\\u636E\\uFF1A\"]}),`\n`,(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"async\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" function\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" transformStream\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" response\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" fetch\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"https://example.com/stream.txt\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" transformStream\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" TransformStream\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"    transform\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"chunk\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"controller\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"      const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" text\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" TextDecoder\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"().\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"decode\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(chunk);\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"      const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" upperText\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" text.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"toUpperCase\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      controller.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"enqueue\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"new\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" TextEncoder\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"().\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"encode\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(upperText));\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    },\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  });\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" transformedStream\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" response.body.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"pipeThrough\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(transformStream);\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" reader\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" transformedStream.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"getReader\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  while\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"true\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" { \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"done\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"value\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" } \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" reader.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"read\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    if\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (done) \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"break\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    console.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"new\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" TextDecoder\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"().\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"decode\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(value));\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"transformStream\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"\\u4EAE\\u70B9\"}),\"\\uFF1A\",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"pipeThrough\"})})})}),\" \\u628A\\u539F\\u59CB\\u6D41\\u201C\\u7BA1\\u9053\\u201D\\u63A5\\u5230\\u52A0\\u5DE5\\u6D41\\uFF0C\\u94FE\\u5F0F\\u5904\\u7406\\uFF0C\\u50CF\\u642D\\u4E50\\u9AD8\\u4E00\\u6837\\u7075\\u6D3B \\u{1F9E9}\\u3002\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"\\u5C0F Tips\"}),\": \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"TransformStream\"})})})}),\" \\u8FD8\\u80FD\\u538B\\u7F29\\u3001\\u52A0\\u5BC6\\u6570\\u636E\\uFF0C\\u53D1\\u6325\\u60F3\\u8C61\\u529B\\u5427\\uFF01\"]}),`\n`,(0,n.jsx)(e.hr,{}),`\n`,(0,n.jsx)(e.h2,{id:\"\\u6DF1\\u5165\\u539F\\u7406\\u6D41\\u662F\\u600E\\u4E48\\u5DE5\\u4F5C\\u7684\",children:(0,n.jsx)(e.a,{href:\"#\\u6DF1\\u5165\\u539F\\u7406\\u6D41\\u662F\\u600E\\u4E48\\u5DE5\\u4F5C\\u7684\",children:\"\\u6DF1\\u5165\\u539F\\u7406\\uFF1A\\u6D41\\u662F\\u600E\\u4E48\\u5DE5\\u4F5C\\u7684\\uFF1F\"})}),`\n`,(0,n.jsx)(e.h3,{id:\"\\u80CC\\u538Bbackpressure\\u4E0E\\u5F02\\u6B65\\u8FED\\u4EE3\",children:(0,n.jsx)(e.a,{href:\"#\\u80CC\\u538Bbackpressure\\u4E0E\\u5F02\\u6B65\\u8FED\\u4EE3\",children:\"\\u80CC\\u538B\\uFF08Backpressure\\uFF09\\u4E0E\\u5F02\\u6B65\\u8FED\\u4EE3\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u6D41\\u5F0F\\u4F20\\u8F93\\u6709\\u4E2A\\u5173\\u952E\\u6982\\u5FF5\\u53EB\\u201C\\u80CC\\u538B\\u201D\\uFF0C\\u610F\\u601D\\u662F\\u6D88\\u8D39\\u8005\\uFF08\\u4F60\\uFF09\\u5904\\u7406\\u6570\\u636E\\u7684\\u901F\\u5EA6\\u5F97\\u8DDF\\u4E0A\\u751F\\u4EA7\\u8005\\uFF08\\u670D\\u52A1\\u5668\\uFF09\\u7684\\u901F\\u5EA6\\u3002\\u5982\\u679C\\u670D\\u52A1\\u5668\\u63A8\\u9001\\u592A\\u5FEB\\uFF0C\\u800C\\u4F60\\u5904\\u7406\\u592A\\u6162\\uFF0C\\u6570\\u636E\\u5C31\\u4F1A\\u5806\\u79EF\\uFF0C\\u50CF\\u5835\\u8F66\\u4E00\\u6837 \\u{1F697}\\u3002\",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"ReadableStream\"})})})}),\" \\u81EA\\u5E26\\u80CC\\u538B\\u7BA1\\u7406\\uFF0C\\u5F53\\u7F13\\u51B2\\u533A\\u6EE1\\u65F6\\uFF0C\\u4F1A\\u901A\\u77E5\\u670D\\u52A1\\u5668\\u6682\\u505C\\u53D1\\u9001\\u3002\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u73B0\\u4EE3\\u6D4F\\u89C8\\u5668\\u8FD8\\u652F\\u6301\\u5F02\\u6B65\\u8FED\\u4EE3\\u5668\\uFF0C\\u66F4\\u4F18\\u96C5\\u5730\\u5904\\u7406\\u6D41\\uFF1A\"}),`\n`,(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"async\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" function\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" elegantStream\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" response\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" fetch\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"https://example.com/stream.txt\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  for\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" chunk\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" of\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" response.body) {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    console.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"new\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" TextDecoder\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"().\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"decode\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(chunk));\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"elegantStream\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"\\u597D\\u5904\"}),\"\\uFF1A\\u4EE3\\u7801\\u7B80\\u6D01\\uFF0C\\u50CF\\u904D\\u5386\\u6570\\u7EC4\\u4E00\\u6837\\u81EA\\u7136\\u3002\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"\\u5C0F Tips\"}),\": \\u5F02\\u6B65\\u8FED\\u4EE3\\u9700\\u8981\\u6D4F\\u89C8\\u5668\\u652F\\u6301\\uFF08Chrome 63+\\uFF09\\uFF0C\\u8001\\u9879\\u76EE\\u8BB0\\u5F97\\u52A0 Polyfill\\u3002\"]}),`\n`,(0,n.jsx)(e.hr,{}),`\n`,(0,n.jsx)(e.h3,{id:\"\\u6D41\\u7684\\u751F\\u547D\\u5468\\u671F\",children:(0,n.jsx)(e.a,{href:\"#\\u6D41\\u7684\\u751F\\u547D\\u5468\\u671F\",children:\"\\u6D41\\u7684\\u751F\\u547D\\u5468\\u671F\"})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u6D41\\u7684\\u751F\\u547D\\u5468\\u671F\\u6709\\u70B9\\u50CF\\u4EBA\\u751F\\u7684\\u8D77\\u4F0F\\uFF1A\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"\\u521B\\u5EFA\"}),\"\\uFF1A\",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"fetch\"})})})}),\" \\u8FD4\\u56DE \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"ReadableStream\"})})})}),\"\\u3002\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"\\u9501\\u5B9A\"}),\"\\uFF1A\\u8C03\\u7528 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"getReader()\"})})})}),\" \\u540E\\uFF0C\\u6D41\\u88AB\\u67D0\\u4E2A reader \\u72EC\\u5360\\u3002\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"\\u8BFB\\u53D6\"}),\"\\uFF1A\\u5206\\u5757\\u6D88\\u8D39\\u6570\\u636E\\u3002\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"\\u7ED3\\u675F/\\u53D6\\u6D88\"}),\"\\uFF1A\\u6D41\\u8BFB\\u5B8C\\uFF08\",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"done\"})})})}),\"\\uFF09\\u6216\\u624B\\u52A8\\u8C03\\u7528 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"reader.cancel()\"})})})}),\"\\u3002\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5982\\u679C\\u4E2D\\u9014\\u60F3\\u653E\\u5F03\\u8BFB\\u53D6\\uFF1A\"}),`\n`,(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" reader\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" response.body.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"getReader\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"await\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" reader.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"cancel\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"\\u4E0D\\u60F3\\u8BFB\\u4E86\\uFF0C\\u64A4\\uFF01\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"\\u5C0F Tips\"}),\": \\u53D6\\u6D88\\u6D41\\u65F6\\u53EF\\u4EE5\\u4F20\\u4E2A\\u539F\\u56E0\\uFF08reason\\uFF09\\uFF0C\\u65B9\\u4FBF\\u8C03\\u8BD5\\u3002\"]}),`\n`,(0,n.jsx)(e.hr,{}),`\n`,(0,n.jsx)(e.h2,{id:\"\\u6700\\u4F73\\u5B9E\\u8DF5\\u5C11\\u8E29\\u5751\\u591A\\u5E72\\u8D27\",children:(0,n.jsx)(e.a,{href:\"#\\u6700\\u4F73\\u5B9E\\u8DF5\\u5C11\\u8E29\\u5751\\u591A\\u5E72\\u8D27\",children:\"\\u6700\\u4F73\\u5B9E\\u8DF5\\uFF1A\\u5C11\\u8E29\\u5751\\uFF0C\\u591A\\u5E72\\u8D27\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"\\u9519\\u8BEF\\u5904\\u7406\\u8981\\u5230\\u4F4D\"}),(0,n.jsx)(e.br,{}),`\n`,\"\\u6D41\\u5904\\u7406\\u4E2D\\u9014\\u53EF\\u80FD\\u65AD\\u5F00\\uFF08\\u7F51\\u7EDC\\u6296\\u52A8\\u3001\\u670D\\u52A1\\u5668\\u6302\\u4E86\\uFF09\\uFF0C\\u522B\\u5FD8\\u4E86\\u52A0 try-catch\\uFF1A\"]}),`\n`,(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"try\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" response\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" fetch\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(url);\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" reader\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" response.body.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"getReader\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  while\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"true\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" { \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"done\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"value\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" } \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" reader.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"read\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    if\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (done) \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"break\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"    // \\u5904\\u7406 value\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"} \"}),(0,n.jsx)(e.span,{style:{color:\"#F97583\"},children:\"catch\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (err) {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  console.\"}),(0,n.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"error\"}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:'\"\\u6D41\\u6302\\u4E86\\uFF0C\\u5FEB\\u67E5\\u65E5\\u5FD7:\"'}),(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", err);\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"\\u5C0F Tips\"}),\": \\u68C0\\u67E5 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"response.ok\"})})})}),\" \\u548C \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"response.status\"})})})}),\"\\uFF0C\\u786E\\u4FDD\\u6D41\\u6CA1\\u95EE\\u9898\\u518D\\u8BFB\\u3002\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"\\u5185\\u5B58\\u7BA1\\u7406\\u522B\\u5FFD\\u89C6\"}),(0,n.jsx)(e.br,{}),`\n`,\"\\u6536\\u96C6\\u5927\\u6587\\u4EF6\\u65F6\\uFF0C\\u522B\\u4E00\\u80A1\\u8111\\u513F\\u585E\\u8FDB\\u6570\\u7EC4\\uFF0C\\u7528 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"WritableStream\"})})})}),\" \\u6216\\u78C1\\u76D8\\u5199\\u5165 API \\u66F4\\u9999\\u3002\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"\\u6027\\u80FD\\u4F18\\u5316\\u52A0\\u70B9\\u6599\"}),(0,n.jsx)(e.br,{}),`\n`,\"\\u7528 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"requestIdleCallback\"})})})}),\" \\u5904\\u7406\\u975E\\u7D27\\u6025\\u7684\\u6D41\\u6570\\u636E\\uFF0C\\u907F\\u514D\\u963B\\u585E\\u4E3B\\u7EBF\\u7A0B\\u3002\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"\\u8C03\\u8BD5\\u795E\\u5668\\uFF1A\\u65E5\\u5FD7\\u5148\\u884C\"}),(0,n.jsx)(e.br,{}),`\n`,\"\\u5728\\u6D41\\u5904\\u7406\\u7684\\u5173\\u952E\\u70B9\\u52A0 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"console.log\"})})})}),\"\\uFF0C\\u4E0D\\u7136\\u51FA\\u4E86\\u95EE\\u9898\\u4F60\\u4F1A\\u6293\\u778E\\u3002\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"\\u517C\\u5BB9\\u6027\\u8981\\u8003\\u8651\"}),(0,n.jsx)(e.br,{}),`\n`,(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"ReadableStream\"})})})}),\" \\u5728 IE \\u548C\\u8001 Safari \\u4E0A\\u4E0D\\u652F\\u6301\\uFF0C\\u5FC5\\u8981\\u65F6\\u7528 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"whatwg-streams\"})})})}),\" Polyfill\\u3002\"]}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.hr,{}),`\n`,(0,n.jsx)(e.h2,{id:\"\\u5F69\\u86CB\\u6D41\\u5F0F\\u4F20\\u8F93\\u7684\\u672A\\u6765\",children:(0,n.jsx)(e.a,{href:\"#\\u5F69\\u86CB\\u6D41\\u5F0F\\u4F20\\u8F93\\u7684\\u672A\\u6765\",children:\"\\u5F69\\u86CB\\uFF1A\\u6D41\\u5F0F\\u4F20\\u8F93\\u7684\\u672A\\u6765\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Web Streams API \\u8FD8\\u5728\\u8FDB\\u5316\\uFF0C\\u672A\\u6765\\u7684 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"ReadableStreamBYOB\"})})})}),\"\\uFF08Bring Your Own Buffer\\uFF09\\u4F1A\\u8BA9\\u5F00\\u53D1\\u8005\\u66F4\\u7075\\u6D3B\\u5730\\u63A7\\u5236\\u7F13\\u51B2\\u533A\\u3002\\u52A0\\u4E0A WebAssembly \\u7684\\u52A0\\u6301\\uFF0C\\u6D41\\u5F0F\\u5904\\u7406\\u53EF\\u80FD\\u4F1A\\u6210\\u4E3A\\u524D\\u7AEF\\u6027\\u80FD\\u4F18\\u5316\\u7684\\u6807\\u914D\\u3002\\u522B\\u5FD8\\u4E86\\u5173\\u6CE8 W3C \\u7684\\u6700\\u65B0\\u52A8\\u6001\\uFF0C\\u4FDD\\u6301\\u4F60\\u7684\\u6280\\u672F\\u96F7\\u8FBE\\u7075\\u654F\\u54E6\\uFF01\\u{1F4E1}\"]}),`\n`,(0,n.jsx)(e.hr,{}),`\n`,(0,n.jsx)(e.h2,{id:\"\\u5199\\u5728\\u6700\\u540E\",children:(0,n.jsx)(e.a,{href:\"#\\u5199\\u5728\\u6700\\u540E\",children:\"\\u5199\\u5728\\u6700\\u540E\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u6D41\\u5F0F\\u4F20\\u8F93\\u5C31\\u50CF\\u524D\\u7AEF\\u5F00\\u53D1\\u7684\\u201C\\u8F7B\\u529F\\u201D\\uFF0C\\u7528\\u5F97\\u597D\\uFF0C\\u80FD\\u8BA9\\u4F60\\u7684\\u5E94\\u7528\\u98DE\\u8D77\\u6765 \\u{1F54A}\\uFE0F\\u3002\\u4ECE \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"Fetch API\"})})})}),\" \\u5230 \",(0,n.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{children:\"ReadableStream\"})})})}),\"\\uFF0C\\u518D\\u5230\\u81EA\\u5B9A\\u4E49\\u52A0\\u5DE5\\u6D41\\uFF0C\\u4ECA\\u5929\\u6211\\u4EEC\\u4ECE\\u539F\\u7406\\u5230\\u5B9E\\u6218\\u804A\\u4E86\\u4E2A\\u904D\\u3002\\u5E0C\\u671B\\u4F60\\u80FD\\u62FF\\u8FD9\\u4E9B\\u4EE3\\u7801\\u548C\\u601D\\u8DEF\\uFF0C\\u641E\\u5B9A\\u624B\\u5934\\u7684\\u9700\\u6C42\\uFF0C\\u987A\\u4FBF\\u5728\\u540C\\u4E8B\\u9762\\u524D\\u79C0\\u4E00\\u628A\\u201C\\u6280\\u672F\\u808C\\u8089\\u201D \\u{1F4AA}\\u3002\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u6709\\u5565\\u95EE\\u9898\\u6216\\u8005\\u9A9A\\u60F3\\u6CD5\\uFF0C\\u6B22\\u8FCE\\u7559\\u8A00\\u8BA8\\u8BBA\\uFF01\\u4E0B\\u6B21\\u518D\\u804A\\u70B9\\u522B\\u7684\\u786C\\u6838\\u8BDD\\u9898\\uFF0C\\u54B1\\u4EEC\\u6C5F\\u6E56\\u518D\\u89C1\\uFF01\\u{1F44B}\"}),`\n`,(0,n.jsx)(e.hr,{})]})}function h(l={}){let{wrapper:e}=l.components||{};return e?(0,n.jsx)(e,{...l,children:(0,n.jsx)(o,{...l})}):o(l)}return b(x);})();\n;return Component;"
  },
  "_id": "å‰ç«¯æŠ€æœ¯/æ‰‹æŠŠæ‰‹æ•™ä½ åœ¨æµè§ˆå™¨ä¸­å¤„ç†æµå¼ä¼ è¾“.mdx",
  "_raw": {
    "sourceFilePath": "å‰ç«¯æŠ€æœ¯/æ‰‹æŠŠæ‰‹æ•™ä½ åœ¨æµè§ˆå™¨ä¸­å¤„ç†æµå¼ä¼ è¾“.mdx",
    "sourceFileName": "æ‰‹æŠŠæ‰‹æ•™ä½ åœ¨æµè§ˆå™¨ä¸­å¤„ç†æµå¼ä¼ è¾“.mdx",
    "sourceFileDir": "å‰ç«¯æŠ€æœ¯",
    "contentType": "mdx",
    "flattenedPath": "å‰ç«¯æŠ€æœ¯/æ‰‹æŠŠæ‰‹æ•™ä½ åœ¨æµè§ˆå™¨ä¸­å¤„ç†æµå¼ä¼ è¾“"
  },
  "type": "Post",
  "url": "/blog/å‰ç«¯æŠ€æœ¯/æ‰‹æŠŠæ‰‹æ•™ä½ åœ¨æµè§ˆå™¨ä¸­å¤„ç†æµå¼ä¼ è¾“"
}