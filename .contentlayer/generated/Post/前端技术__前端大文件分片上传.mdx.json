{
  "title": "å‰ç«¯å¦‚ä½•å®ç°å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ ï¼Ÿä»åŸç†åˆ°å®æˆ˜ï¼Œå¸¦ä½ é£",
  "date": "2024-02-17T00:00:00.000Z",
  "description": "æ·±å…¥å‰–æå‰ç«¯å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ çš„å®ç°åŸç†ï¼Œæ¶µç›–åˆ†ç‰‡ç­–ç•¥ã€å¹¶å‘æ§åˆ¶ã€æ–­ç‚¹ç»­ä¼ ã€é”™è¯¯é‡è¯•ç­‰ï¼Œé™„å¸¦ä»£ç ç¤ºä¾‹å’Œæœ€ä½³å®è·µã€‚",
  "keywords": "å¤§æ–‡ä»¶ä¸Šä¼ , åˆ†ç‰‡ä¸Šä¼ , å‰ç«¯å¼€å‘, JavaScript, Blob, File API, æ–­ç‚¹ç»­ä¼ , å¹¶å‘æ§åˆ¶, Web Workers",
  "author": "æ™“é¾™",
  "image": "/images/hero/file-upload-chunk.jpg",
  "tags": [
    "å‰ç«¯å¼€å‘",
    "JavaScript",
    "æ€§èƒ½ä¼˜åŒ–"
  ],
  "views": 0,
  "likes": 0,
  "category": "å‰ç«¯æŠ€æœ¯",
  "body": {
    "raw": "\nHeyï¼Œå‰ç«¯å…„å¼Ÿä»¬ï¼Œä½ ä»¬æœ‰æ²¡æœ‰é‡åˆ°è¿‡è¿™æ ·çš„åœºæ™¯ï¼šç”¨æˆ·å…´å†²å†²åœ°ä¸Šä¼ ä¸€ä¸ª 10GB çš„é«˜æ¸…è§†é¢‘ï¼Œç»“æœæµè§ˆå™¨å¡æˆ PPTï¼ŒæœåŠ¡å™¨ç›´æ¥â€œç½¢å·¥â€ï¼Œæœ€åç”¨æˆ·è¿˜ç”©ç»™ä½ ä¸€å¥â€œä½ ä»¬è¿™ç ´ç½‘ç«™æ€ä¹ˆè¿™ä¹ˆæ…¢â€ï¼ŸğŸ˜‚ åˆ«æ…Œï¼Œä»Šå¤©å’±ä»¬å°±æ¥èŠèŠ**å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ **è¿™é—¨å‰ç«¯é»‘é­”æ³•â€”â€”ä¸ä»…èƒ½è®©ä¸Šä¼ ä¸æ»‘å¦‚ butterï¼Œè¿˜èƒ½è®©æœåŠ¡å™¨å’Œç”¨æˆ·éƒ½å¯¹ä½ ç«–èµ·å¤§æ‹‡æŒ‡ã€‚âœŒï¸\n\nè¿™ç¯‡æ–‡ç« æˆ‘ä¼šä»åŸç†åˆ°ä»£ç ï¼Œå¸¦ä½ ä¸€æ­¥æ­¥æå®šå¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ ã€‚å’±ä»¬ä¼šèŠåˆ°åˆ†ç‰‡ç­–ç•¥ã€å¹¶å‘æ§åˆ¶ã€æ–­ç‚¹ç»­ä¼ ã€é”™è¯¯é‡è¯•ï¼Œç”šè‡³è¿˜æœ‰ä¸€äº›â€œé”¦ä¸Šæ·»èŠ±â€çš„æœ€ä½³å®è·µã€‚å‡†å¤‡å¥½äº†å—ï¼Ÿç³»å¥½å®‰å…¨å¸¦ï¼Œå’±ä»¬å¼€æ•´ï¼\n\n## ä¸ºä»€ä¹ˆéœ€è¦åˆ†ç‰‡ä¸Šä¼ ï¼Ÿ\n\nå…ˆæ¥ç‚¹å“²å­¦æ€è€ƒï¼šå¦‚æœç”Ÿæ´»ç»™ä½ ä¸€ä¸ª 10GB çš„æ–‡ä»¶ï¼Œä½ ä¼šæ€ä¹ˆåŠï¼Ÿç›´æ¥ç¡¬åˆšå—ï¼Ÿæ˜¾ç„¶ä¸è¡Œï¼Œæµè§ˆå™¨ä¼šå´©æºƒï¼ŒæœåŠ¡å™¨ä¼šåè¡€ï¼Œç”¨æˆ·ä¼šéª‚å¨˜ã€‚ğŸŒ‹ è¿™æ—¶å€™ï¼Œåˆ†ç‰‡ä¸Šä¼ å°±åƒæ˜¯æŠŠä¸€ä¸ªå·¨æ— éœ¸æ±‰å ¡åˆ‡æˆå°å—ï¼Œä¸€å£ä¸€å£åƒï¼Œæ—¢ä¼˜é›…åˆé«˜æ•ˆã€‚\n\n### åˆ†ç‰‡ä¸Šä¼ çš„æ ¸å¿ƒæ€æƒ³\nç®€å•æ¥è¯´ï¼Œåˆ†ç‰‡ä¸Šä¼ å°±æ˜¯æŠŠä¸€ä¸ªå¤§æ–‡ä»¶åˆ‡æˆè‹¥å¹²å°å—ï¼ˆchunkï¼‰ï¼Œç„¶åé€ä¸ªä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œæœ€åç”±æœåŠ¡å™¨æŠŠè¿™äº›ç¢ç‰‡æ‹¼æˆå®Œæ•´çš„æ–‡ä»¶ã€‚å¬èµ·æ¥æ˜¯ä¸æ˜¯æœ‰ç‚¹åƒæ­ä¹é«˜ï¼Ÿä¸€å—ä¸€å—å’èµ·æ¥ï¼Œæœ€åå˜æˆä¸€ä¸ªå£®è§‚çš„åŸå ¡ã€‚ğŸ°\n\n### åˆ†ç‰‡çš„å¥½å¤„\n- **æ€§èƒ½æå‡**ï¼šå°å—ä¸Šä¼ ä¸ä¼šä¸€æ¬¡æ€§å ç”¨å¤§é‡å†…å­˜ï¼Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨éƒ½æ¾äº†ä¸€å£æ°”ã€‚\n- **æ–­ç‚¹ç»­ä¼ **ï¼šç½‘ç»œæ–­äº†ï¼Ÿæ²¡äº‹å„¿ï¼Œå·²ä¸Šä¼ çš„éƒ¨åˆ†ä¸ç”¨é‡æ¥ï¼Œç›´æ¥ä»æ–­ç‚¹ç»§ç»­ã€‚\n- **å¹¶å‘æ§åˆ¶**ï¼šå¯ä»¥åŒæ—¶ä¸Šä¼ å¤šä¸ªåˆ†ç‰‡ï¼Œé€Ÿåº¦èµ·é£ï¼Œåƒå¼€äº†å¤šçº¿ç¨‹ä¸‹è½½å™¨ã€‚\n- **ç”¨æˆ·ä½“éªŒ**ï¼šæ”¯æŒæš‚åœã€å–æ¶ˆã€è¿›åº¦æ¡å®æ—¶åé¦ˆï¼Œç”¨æˆ·ä¸å†ç›¯ç€â€œä¸Šä¼ ä¸­â€å‘å‘†ã€‚\n\nå¥½äº†ï¼Œé“ç†è®²å®Œäº†ï¼Œå’±ä»¬ç›´æ¥è¿›å…¥ç¡¬æ ¸éƒ¨åˆ†â€”â€”æ€ä¹ˆå®ç°ï¼Ÿ\n\n## å®ç°åˆ†ç‰‡ä¸Šä¼ çš„åŸç†ä¸æ­¥éª¤\n\nå®ç°åˆ†ç‰‡ä¸Šä¼ å…¶å®æ²¡é‚£ä¹ˆç„ä¹ï¼Œå’±ä»¬å¯ä»¥æŠŠå®ƒæ‹†æˆå‡ ä¸ªå…³é”®æ­¥éª¤ï¼Œåƒåšèœä¸€æ ·ï¼ŒæŒ‰éƒ¨å°±ç­æ¥ã€‚\n\n### 1. æ–‡ä»¶åˆ‡ç‰‡ï¼šä»å¤§å—åˆ°å°å—\nå‰ç«¯æ‹¿åˆ°æ–‡ä»¶çš„ç¬¬ä¸€æ­¥ï¼Œå°±æ˜¯ç”¨åˆ€ï¼ˆå¥½å§ï¼Œå…¶å®æ˜¯ä»£ç ï¼‰æŠŠå®ƒåˆ‡æˆå°ä»½ã€‚è¿™é‡Œæˆ‘ä»¬è¦ç”¨åˆ°æµè§ˆå™¨æä¾›çš„ `File` å¯¹è±¡å’Œ `Blob.slice` æ–¹æ³•ã€‚\n\nå‡è®¾ç”¨æˆ·ä¸Šä¼ äº†ä¸€ä¸ªå« `cat-video.mp4` çš„æ–‡ä»¶ï¼Œå’±ä»¬å…ˆæ¥çœ‹çœ‹æ€ä¹ˆåˆ‡ï¼š\n\n```javascript\nconst file = document.querySelector('input[type=\"file\"]').files[0];\nconst CHUNK_SIZE = 5 * 1024 * 1024; // 5MB per chunk\nconst chunks = [];\n\nfor (let start = 0; start < file.size; start += CHUNK_SIZE) {\n  const end = Math.min(start + CHUNK_SIZE, file.size);\n  chunks.push(file.slice(start, end));\n}\n\nconsole.log(`æ€»å…±åˆ‡äº† ${chunks.length} ç‰‡ï¼Œå‡†å¤‡å¼€å¹²ï¼`);\n```\n\nè¿™é‡Œ `file.slice(start, end)` è¿”å›çš„æ˜¯ä¸€ä¸ª `Blob` å¯¹è±¡ï¼Œä»£è¡¨æ–‡ä»¶çš„ä¸€å°å—ã€‚ä½ å¯ä»¥æŠŠ `CHUNK_SIZE` æƒ³è±¡æˆåˆ‡æŠ«è¨çš„åˆ€ï¼Œæ¯åˆ€ä¸‹å»å°±æ˜¯ä¸€ä¸ªåˆ†ç‰‡ã€‚ğŸ•\n\n**å°è´´å£«**ï¼šåˆ†ç‰‡å¤§å°æ€ä¹ˆå®šï¼Ÿ5MB æ˜¯ä¸ªä¸é”™çš„èµ·ç‚¹ï¼Œä½†å…·ä½“è¦çœ‹åœºæ™¯ã€‚å¤ªå°äº†è¯·æ±‚å¤ªå¤šï¼Œå¤ªå¤§äº†åˆå¤±å»åˆ†ç‰‡çš„æ„ä¹‰ã€‚åé¢æˆ‘ä¼šè®²æ€ä¹ˆåŠ¨æ€è°ƒæ•´ã€‚\n\n### 2. ä¸Šä¼ åˆ†ç‰‡ï¼šé€ä¸ªé€ä¸ŠæœåŠ¡å™¨\nåˆ‡å¥½åˆ†ç‰‡åï¼Œå’±ä»¬éœ€è¦æŠŠè¿™äº›å°å—ä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚å¯ä»¥ç”¨ `fetch` æˆ– `axios`ï¼Œå¸¦ä¸Šä¸€äº›å…ƒä¿¡æ¯ï¼Œæ¯”å¦‚åˆ†ç‰‡åºå·ã€æ–‡ä»¶æ€»å¤§å°ã€åˆ†ç‰‡æ€»æ•°ç­‰ã€‚\n\nä¸€ä¸ªç®€å•çš„ä¸Šä¼ å‡½æ•°å¯èƒ½é•¿è¿™æ ·ï¼š\n\n```javascript\nasync function uploadChunk(chunk, index, totalChunks, fileName) {\n  const formData = new FormData();\n  formData.append('chunk', chunk);\n  formData.append('chunkIndex', index);\n  formData.append('totalChunks', totalChunks);\n  formData.append('fileName', fileName);\n\n  try {\n    const response = await fetch('/upload/chunk', {\n      method: 'POST',\n      body: formData,\n    });\n    if (!response.ok) throw new Error('ä¸Šä¼ å¤±è´¥');\n    console.log(`ç¬¬ ${index + 1} ç‰‡ä¸Šä¼ æˆåŠŸï¼`);\n  } catch (error) {\n    console.error(`ç¬¬ ${index + 1} ç‰‡æŒ‚äº†ï¼š`, error);\n    // è¿™é‡Œå¯ä»¥åŠ é‡è¯•é€»è¾‘ï¼Œåé¢è®²\n  }\n}\n\n// æŒ¨ä¸ªä¸Šä¼ \nchunks.forEach((chunk, index) => {\n  uploadChunk(chunk, index, chunks.length, file.name);\n});\n```\n\næœåŠ¡å™¨æ”¶åˆ°åˆ†ç‰‡åï¼Œé€šå¸¸ä¼šæŠŠå®ƒä»¬æš‚å­˜èµ·æ¥ï¼Œç­‰æ‰€æœ‰åˆ†ç‰‡éƒ½åˆ°é½å†åˆå¹¶ã€‚\n\n### 3. å¹¶å‘ä¸Šä¼ ï¼šå¤šçº¿ç¨‹å¼€å¹²\nä¸Šé¢çš„ä»£ç æ˜¯ä¸²è¡Œä¸Šä¼ ï¼Œå¤ªæ…¢äº†ï¼å’±ä»¬å¯ä»¥æç‚¹å¹¶å‘ï¼Œåƒå¿«é€’å‘˜åŒæ—¶é€å¤šä»½åŒ…è£¹ä¸€æ ·ã€‚å¯ä»¥ç”¨ `Promise.all` æ¥å®ç°ï¼š\n\n```javascript\nasync function uploadChunksConcurrently(chunks, fileName, concurrency = 4) {\n  const tasks = [];\n  let uploaded = 0;\n\n  const uploadTask = async (chunk, index) => {\n    await uploadChunk(chunk, index, chunks.length, fileName);\n    uploaded++;\n    console.log(`è¿›åº¦ï¼š${((uploaded / chunks.length) * 100).toFixed(2)}%`);\n  };\n\n  for (let i = 0; i < chunks.length; i++) {\n    tasks.push(uploadTask(chunks[i], i));\n    if (tasks.length >= concurrency || i === chunks.length - 1) {\n      await Promise.all(tasks);\n      tasks.length = 0; // æ¸…ç©ºä»»åŠ¡é˜Ÿåˆ—\n    }\n  }\n}\n\nuploadChunksConcurrently(chunks, file.name);\n```\n\nè¿™é‡Œæˆ‘è®¾ç½®äº† `concurrency = 4`ï¼Œæ„æ€æ˜¯åŒæ—¶ä¸Šä¼  4 ä¸ªåˆ†ç‰‡ã€‚ä½ å¯ä»¥æ ¹æ®ç½‘ç»œçŠ¶å†µå’ŒæœåŠ¡å™¨æ‰¿å—èƒ½åŠ›è°ƒæ•´è¿™ä¸ªæ•°å­—ã€‚å°±åƒå¼€è‡ªåŠ©é¤ï¼Œä¸èƒ½ä¸€ä¸‹å­æ”¾å¤ªå¤šç›˜å­ï¼Œå¾—æ§åˆ¶èŠ‚å¥ã€‚ğŸ½ï¸\n\n### 4. æ–­ç‚¹ç»­ä¼ ï¼šä»å“ªé‡Œæ‘”å€’å°±ä»å“ªé‡Œçˆ¬èµ·æ¥\nç½‘ç»œä¸ç¨³å®šæ˜¯å®¶å¸¸ä¾¿é¥­ï¼Œç”¨æˆ·è¿˜å¯èƒ½ä¸­é€”æš‚åœä¸Šä¼ ã€‚æ€ä¹ˆåŠï¼Ÿå’±ä»¬å¾—å®ç°**æ–­ç‚¹ç»­ä¼ **ã€‚\n\næ€è·¯æ˜¯è¿™æ ·çš„ï¼š\n- åœ¨ä¸Šä¼ å‰ï¼Œå…ˆé—®æœåŠ¡å™¨ï¼šâ€œå˜¿ï¼Œæˆ‘è¿™ä¸ªæ–‡ä»¶ä¸Šä¼ åˆ°ç¬¬å‡ å—äº†ï¼Ÿâ€\n- æœåŠ¡å™¨è¿”å›å·²ä¸Šä¼ çš„åˆ†ç‰‡åºå·ï¼Œå’±ä»¬è·³è¿‡è¿™äº›ï¼Œç›´æ¥ä»ä¸‹ä¸€å—å¼€å§‹ã€‚\n\nå‰ç«¯ä»£ç å¯ä»¥åŠ ä¸ªé¢„æ£€æŸ¥ï¼š\n\n```javascript\nasync function checkUploadedChunks(fileName) {\n  const response = await fetch(`/upload/check?fileName=${fileName}`);\n  const { uploadedChunks } = await response.json(); // å‡è®¾è¿”å›å·²ä¸Šä¼ çš„åˆ†ç‰‡ç´¢å¼•æ•°ç»„\n  return new Set(uploadedChunks);\n}\n\nasync function resumeUpload(chunks, fileName) {\n  const uploadedChunks = await checkUploadedChunks(fileName);\n  const tasks = chunks\n    .map((chunk, index) => (!uploadedChunks.has(index) ? uploadChunk(chunk, index, chunks.length, fileName) : null))\n    .filter(Boolean);\n\n  await Promise.all(tasks);\n  console.log('ç»­ä¼ å®Œæˆï¼Œç‰›é€¼ï¼');\n}\n```\n\næœåŠ¡å™¨è¿™è¾¹éœ€è¦è®°å½•æ¯ä¸ªåˆ†ç‰‡çš„ä¸Šä¼ çŠ¶æ€ï¼Œé€šå¸¸å¯ä»¥ç”¨ Redis æˆ–æ•°æ®åº“å­˜ä¸€ä¸‹ã€‚\n\n### 5. åˆå¹¶æ–‡ä»¶ï¼šæ‹¼å›¾çš„æœ€åä¸€æ­¥\næ‰€æœ‰åˆ†ç‰‡ä¸Šä¼ å®Œæˆåï¼Œé€šçŸ¥æœåŠ¡å™¨åˆå¹¶æ–‡ä»¶ã€‚è¿™ä¸€æ­¥é€šå¸¸æ˜¯åç«¯çš„äº‹å„¿ï¼Œä½†å‰ç«¯å¯ä»¥å‘ä¸ªè¯·æ±‚è§¦å‘ï¼š\n\n```javascript\nasync function mergeChunks(fileName, totalChunks) {\n  const response = await fetch('/upload/merge', {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify({ fileName, totalChunks }),\n  });\n  if (response.ok) {\n    console.log('æ–‡ä»¶åˆå¹¶æˆåŠŸï¼Œå®Œç¾æ”¶å®˜ï¼ğŸ‰');\n  } else {\n    throw new Error('åˆå¹¶å¤±è´¥ï¼ŒæœåŠ¡å™¨å¯èƒ½å·æ‡’äº†');\n  }\n}\n\nawait uploadChunksConcurrently(chunks, file.name);\nawait mergeChunks(file.name, chunks.length);\n```\n\nåç«¯å¯ä»¥ç”¨ Node.js çš„ `fs` æ¨¡å—æŠŠåˆ†ç‰‡æ‹¼èµ·æ¥ï¼Œæˆ–è€…ç›´æ¥äº¤ç»™äº‘å­˜å‚¨æœåŠ¡ï¼ˆæ¯”å¦‚ AWS S3 çš„åˆ†ç‰‡ä¸Šä¼  APIï¼‰ã€‚\n\n## è¿›é˜¶ä¼˜åŒ–ï¼šè®©åˆ†ç‰‡ä¸Šä¼ æ›´ç¡¬æ ¸\n\nåŸºç¡€å®ç°æå®šäº†ï¼Œä½†ä½œä¸ºä¸€ä¸ªæœ‰è¿½æ±‚çš„å‰ç«¯ï¼Œå’±ä»¬å¾—å†åŠ ç‚¹æ–™ï¼Œè®©å®ƒæ›´é è°±ã€æ›´ç‚«é…·ã€‚\n\n### 1. åŠ¨æ€åˆ†ç‰‡å¤§å°\nå›ºå®šçš„ 5MB åˆ†ç‰‡å¯èƒ½ä¸é€‚åˆæ‰€æœ‰åœºæ™¯ã€‚ç½‘ç»œå¥½æ—¶å¯ä»¥åˆ‡å¤§ä¸€ç‚¹ï¼Œç½‘ç»œå·®æ—¶åˆ‡å°ä¸€ç‚¹ã€‚å¯ä»¥ç”¨ç®€å•çš„æ¢æµ‹é€»è¾‘ï¼š\n\n```javascript\nasync function detectChunkSize() {\n  const testBlob = new Blob([new ArrayBuffer(1024 * 1024)]); // 1MB æµ‹è¯•æ•°æ®\n  const startTime = Date.now();\n  await fetch('/upload/test', { method: 'POST', body: testBlob });\n  const latency = Date.now() - startTime;\n\n  return latency < 200 ? 10 * 1024 * 1024 : 2 * 1024 * 1024; // ä½å»¶è¿Ÿç”¨10MBï¼Œé«˜å»¶è¿Ÿç”¨2MB\n}\n\nconst CHUNK_SIZE = await detectChunkSize();\n```\n\nè¿™å°±åƒå¼€è½¦æ¢è·¯ï¼Œè·¯å†µå¥½å°±å¼€å¿«ç‚¹ï¼Œè·¯å†µå·®å°±æ…¢ç‚¹ã€‚\n\n### 2. é”™è¯¯é‡è¯•ï¼šä¸æŠ›å¼ƒä¸æ”¾å¼ƒ\nç½‘ç»œæŠ–ä¸€ä¸‹ï¼Œåˆ†ç‰‡ä¸Šä¼ å¤±è´¥æ€ä¹ˆåŠï¼Ÿåˆ«æ€¥ï¼ŒåŠ ä¸ªé‡è¯•æœºåˆ¶ï¼š\n\n```javascript\nasync function uploadChunkWithRetry(chunk, index, totalChunks, fileName, maxRetries = 3) {\n  for (let retry = 0; retry <= maxRetries; retry++) {\n    try {\n      await uploadChunk(chunk, index, totalChunks, fileName);\n      return;\n    } catch (error) {\n      if (retry === maxRetries) throw error;\n      console.warn(`ç¬¬ ${index + 1} ç‰‡ç¬¬ ${retry + 1} æ¬¡é‡è¯•...`);\n      await new Promise((resolve) => setTimeout(resolve, 1000 * Math.pow(2, retry))); // æŒ‡æ•°é€€é¿\n    }\n  }\n}\n```\n\nè¿™é‡Œç”¨äº†**æŒ‡æ•°é€€é¿**ï¼ˆexponential backoffï¼‰ï¼Œå¤±è´¥åç­‰å¾…æ—¶é—´é€æ¸å¢åŠ ï¼Œé¿å…ç–¯ç‹‚è½°ç‚¸æœåŠ¡å™¨ã€‚\n\n### 3. Web Workersï¼šè§£æ”¾ä¸»çº¿ç¨‹\nåˆ†ç‰‡å’Œä¸Šä¼ é€»è¾‘å¦‚æœå¾ˆå¤æ‚ï¼Œå¯èƒ½ä¼šå¡ä½ UIã€‚å¯ä»¥ç”¨ Web Workers æŠŠè¿™äº›è„æ´»ç´¯æ´»ä¸¢åˆ°åå°çº¿ç¨‹ï¼š\n\n```javascript\n// worker.js\nself.onmessage = async (e) => {\n  const { chunk, index, totalChunks, fileName } = e.data;\n  const response = await fetch('/upload/chunk', {\n    method: 'POST',\n    body: chunk,\n  });\n  self.postMessage({ index, success: response.ok });\n};\n\n// ä¸»çº¿ç¨‹\nconst worker = new Worker('worker.js');\nchunks.forEach((chunk, index) => {\n  worker.postMessage({ chunk, index, totalChunks: chunks.length, fileName: file.name });\n});\nworker.onmessage = (e) => {\n  console.log(`åˆ†ç‰‡ ${e.data.index} ${e.data.success ? 'æˆåŠŸ' : 'å¤±è´¥'}`);\n};\n```\n\nè¿™å°±åƒé›‡äº†ä¸ªå°å¼Ÿå¹²æ´»ï¼Œä¸»çº¿ç¨‹åªç®¡å–èŒ¶çœ‹ç»“æœã€‚â˜•\n\n### 4. è¿›åº¦æ¡ï¼šè®©ç”¨æˆ·çˆ½åˆ°é£èµ·\nç”¨æˆ·æœ€å…³å¿ƒçš„æ˜¯â€œä¸Šä¼ åˆ°å“ªå„¿äº†â€ã€‚å’±ä»¬å¯ä»¥ç”¨ä¸ªç®€å•çš„è¿›åº¦æ¡ï¼š\n\n```javascript\nconst progressBar = document.querySelector('#progress');\nlet uploadedChunks = 0;\n\nfunction updateProgress() {\n  uploadedChunks++;\n  progressBar.style.width = `${(uploadedChunks / chunks.length) * 100}%`;\n}\n\n// åœ¨ uploadChunk æˆåŠŸåè°ƒç”¨\nawait uploadChunk(chunk, index, totalChunks, fileName);\nupdateProgress();\n```\n\nCSS æä¸ªæ¸å˜åŠ¨ç”»ï¼Œç”¨æˆ·ä½“éªŒç›´æ¥æ‹‰æ»¡ï¼\n\n## æœ€ä½³å®è·µï¼šå®æˆ˜ä¸­çš„ç»éªŒæ•™è®­\n\nå†™åˆ°è¿™å„¿ï¼Œæˆ‘å·²ç»æœ‰ç‚¹æ‰‹é…¸äº†ï¼Œä½†ä¸ºäº†ä½ ä»¬ï¼Œæˆ‘è¿˜æ˜¯å¾—å†æç‚¹å¹²è´§ã€‚ä»¥ä¸‹æ˜¯äº›å®æˆ˜ä¸­è¸©è¿‡çš„å‘å’Œæœ€ä½³å®è·µï¼š\n\n1. **æ–‡ä»¶å”¯ä¸€æ ‡è¯†**ï¼šæ–‡ä»¶åå¯èƒ½é‡å¤ï¼Œå»ºè®®ç”¨ MD5 æˆ– UUID ç»™æ–‡ä»¶ç”Ÿæˆå”¯ä¸€ IDï¼ŒæœåŠ¡å™¨ä¹Ÿå¥½ç®¡ç†ã€‚\n2. **åˆ†ç‰‡é¡ºåºæ— å…³**ï¼šåˆ«æŒ‡æœ›åˆ†ç‰‡æŒ‰é¡ºåºåˆ°è¾¾ï¼ŒæœåŠ¡å™¨å¾—èƒ½ä¹±åºæ‹¼è£…ã€‚\n3. **å¸¦å®½æ£€æµ‹**ï¼šä¸Šä¼ å‰æµ‹ä¸€ä¸‹ç½‘é€Ÿï¼ŒåŠ¨æ€è°ƒæ•´å¹¶å‘æ•°å’Œåˆ†ç‰‡å¤§å°ã€‚\n4. **æ¸…ç†ä¸´æ—¶æ–‡ä»¶**ï¼šä¸Šä¼ å¤±è´¥æˆ–å–æ¶ˆåï¼Œæé†’åç«¯åˆ æ‰ä¸´æ—¶åˆ†ç‰‡ï¼Œçœå¾—å ç©ºé—´ã€‚\n5. **ç”¨æˆ·äº¤äº’**ï¼šåŠ ä¸ªâ€œæš‚åœâ€å’Œâ€œå–æ¶ˆâ€æŒ‰é’®ï¼Œç”¨æˆ·ä¼šçˆ±æ­»ä½ ã€‚\n\n## ç»“å°¾å½©è›‹ï¼šä¸€ä¸ªå®Œæ•´çš„ Demo\n\næœ€åï¼Œæˆ‘è´´ä¸ªç®€åŒ–çš„å®Œæ•´ä»£ç ï¼Œä¾›ä½ å‚è€ƒï¼š\n\n```javascript\nasync function uploadBigFile(file) {\n  const CHUNK_SIZE = 5 * 1024 * 1024;\n  const chunks = [];\n  for (let start = 0; start < file.size; start += CHUNK_SIZE) {\n    chunks.push(file.slice(start, Math.min(start + CHUNK_SIZE, file.size)));\n  }\n\n  const fileId = `${Date.now()}-${file.name}`;\n  const uploadedChunks = await checkUploadedChunks(fileId);\n  const tasks = chunks.map((chunk, i) =>\n    uploadedChunks.has(i) ? null : uploadChunkWithRetry(chunk, i, chunks.length, fileId)\n  ).filter(Boolean);\n\n  await Promise.all(tasks);\n  await mergeChunks(fileId, chunks.length);\n  console.log('ä¸Šä¼ å®Œæˆï¼Œå–æ¯å’–å•¡åº†ç¥ä¸‹å§ï¼â˜•');\n}\n\ndocument.querySelector('input[type=\"file\"]').addEventListener('change', (e) => {\n  uploadBigFile(e.target.files[0]);\n});\n```\n\n## å†™åœ¨æœ€å\n\nå¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ çœ‹ç€å¤æ‚ï¼Œå…¶å®å°±æ˜¯åˆ‡ç‰‡ã€ä¸Šä¼ ã€åˆå¹¶è¿™ä¸‰æ¿æ–§ã€‚åŠ ä¸Šå¹¶å‘ã€æ–­ç‚¹ç»­ä¼ ã€é‡è¯•è¿™äº›â€œè°ƒæ–™â€ï¼Œå°±èƒ½åšå‡ºä¸€ä¸ªæ—¢ç¨³åˆå¿«çš„ä¸Šä¼ ç³»ç»Ÿã€‚å¸Œæœ›è¿™ç¯‡åšå®¢èƒ½å¸®åˆ°ä½ ï¼Œä¸‹æ¬¡ç”¨æˆ·å†æ‰”ä¸ª 100GB æ–‡ä»¶è¿‡æ¥ï¼Œä½ å¯ä»¥æ·¡å®šåœ°è¯´ï¼šâ€œå°æ„æ€ï¼Œåˆ†åˆ†é’Ÿæå®šï¼â€ğŸ˜\n\næœ‰å•¥é—®é¢˜æˆ–æ›´å¥½çš„æƒ³æ³•ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºè·Ÿæˆ‘å” å” ï¼Œå’±ä»¬ä¸€èµ·è¿›æ­¥ï¼âœ‹",
    "code": "var Component=(()=>{var p=Object.create;var s=Object.defineProperty;var E=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var F=Object.getPrototypeOf,B=Object.prototype.hasOwnProperty;var u=(e,l)=>()=>(l||e((l={exports:{}}).exports,l),l.exports),g=(e,l)=>{for(var r in l)s(e,r,{get:l[r],enumerable:!0})},a=(e,l,r,o)=>{if(l&&typeof l==\"object\"||typeof l==\"function\")for(let c of y(l))!B.call(e,c)&&c!==r&&s(e,c,{get:()=>l[c],enumerable:!(o=E(l,c))||o.enumerable});return e};var k=(e,l,r)=>(r=e!=null?p(F(e)):{},a(l||!e||!e.__esModule?s(r,\"default\",{value:e,enumerable:!0}):r,e)),f=e=>a(s({},\"__esModule\",{value:!0}),e);var i=u((x,d)=>{d.exports=_jsx_runtime});var m={};g(m,{default:()=>h,frontmatter:()=>C});var n=k(i()),C={type:\"Post\",title:\"\\u524D\\u7AEF\\u5982\\u4F55\\u5B9E\\u73B0\\u5927\\u6587\\u4EF6\\u5206\\u7247\\u4E0A\\u4F20\\uFF1F\\u4ECE\\u539F\\u7406\\u5230\\u5B9E\\u6218\\uFF0C\\u5E26\\u4F60\\u98DE\",date:\"2024-02-17\",description:\"\\u6DF1\\u5165\\u5256\\u6790\\u524D\\u7AEF\\u5927\\u6587\\u4EF6\\u5206\\u7247\\u4E0A\\u4F20\\u7684\\u5B9E\\u73B0\\u539F\\u7406\\uFF0C\\u6DB5\\u76D6\\u5206\\u7247\\u7B56\\u7565\\u3001\\u5E76\\u53D1\\u63A7\\u5236\\u3001\\u65AD\\u70B9\\u7EED\\u4F20\\u3001\\u9519\\u8BEF\\u91CD\\u8BD5\\u7B49\\uFF0C\\u9644\\u5E26\\u4EE3\\u7801\\u793A\\u4F8B\\u548C\\u6700\\u4F73\\u5B9E\\u8DF5\\u3002\",keywords:\"\\u5927\\u6587\\u4EF6\\u4E0A\\u4F20, \\u5206\\u7247\\u4E0A\\u4F20, \\u524D\\u7AEF\\u5F00\\u53D1, JavaScript, Blob, File API, \\u65AD\\u70B9\\u7EED\\u4F20, \\u5E76\\u53D1\\u63A7\\u5236, Web Workers\",author:\"\\u6653\\u9F99\",image:\"/images/hero/file-upload-chunk.jpg\",tags:[\"\\u524D\\u7AEF\\u5F00\\u53D1\",\"JavaScript\",\"\\u6027\\u80FD\\u4F18\\u5316\"],category:\"\\u524D\\u7AEF\\u6280\\u672F\"};function t(e){let l={a:\"a\",code:\"code\",figure:\"figure\",h2:\"h2\",h3:\"h3\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.p,{children:[\"Hey\\uFF0C\\u524D\\u7AEF\\u5144\\u5F1F\\u4EEC\\uFF0C\\u4F60\\u4EEC\\u6709\\u6CA1\\u6709\\u9047\\u5230\\u8FC7\\u8FD9\\u6837\\u7684\\u573A\\u666F\\uFF1A\\u7528\\u6237\\u5174\\u51B2\\u51B2\\u5730\\u4E0A\\u4F20\\u4E00\\u4E2A 10GB \\u7684\\u9AD8\\u6E05\\u89C6\\u9891\\uFF0C\\u7ED3\\u679C\\u6D4F\\u89C8\\u5668\\u5361\\u6210 PPT\\uFF0C\\u670D\\u52A1\\u5668\\u76F4\\u63A5\\u201C\\u7F62\\u5DE5\\u201D\\uFF0C\\u6700\\u540E\\u7528\\u6237\\u8FD8\\u7529\\u7ED9\\u4F60\\u4E00\\u53E5\\u201C\\u4F60\\u4EEC\\u8FD9\\u7834\\u7F51\\u7AD9\\u600E\\u4E48\\u8FD9\\u4E48\\u6162\\u201D\\uFF1F\\u{1F602} \\u522B\\u614C\\uFF0C\\u4ECA\\u5929\\u54B1\\u4EEC\\u5C31\\u6765\\u804A\\u804A\",(0,n.jsx)(l.strong,{children:\"\\u5927\\u6587\\u4EF6\\u5206\\u7247\\u4E0A\\u4F20\"}),\"\\u8FD9\\u95E8\\u524D\\u7AEF\\u9ED1\\u9B54\\u6CD5\\u2014\\u2014\\u4E0D\\u4EC5\\u80FD\\u8BA9\\u4E0A\\u4F20\\u4E1D\\u6ED1\\u5982 butter\\uFF0C\\u8FD8\\u80FD\\u8BA9\\u670D\\u52A1\\u5668\\u548C\\u7528\\u6237\\u90FD\\u5BF9\\u4F60\\u7AD6\\u8D77\\u5927\\u62C7\\u6307\\u3002\\u270C\\uFE0F\"]}),`\n`,(0,n.jsx)(l.p,{children:\"\\u8FD9\\u7BC7\\u6587\\u7AE0\\u6211\\u4F1A\\u4ECE\\u539F\\u7406\\u5230\\u4EE3\\u7801\\uFF0C\\u5E26\\u4F60\\u4E00\\u6B65\\u6B65\\u641E\\u5B9A\\u5927\\u6587\\u4EF6\\u5206\\u7247\\u4E0A\\u4F20\\u3002\\u54B1\\u4EEC\\u4F1A\\u804A\\u5230\\u5206\\u7247\\u7B56\\u7565\\u3001\\u5E76\\u53D1\\u63A7\\u5236\\u3001\\u65AD\\u70B9\\u7EED\\u4F20\\u3001\\u9519\\u8BEF\\u91CD\\u8BD5\\uFF0C\\u751A\\u81F3\\u8FD8\\u6709\\u4E00\\u4E9B\\u201C\\u9526\\u4E0A\\u6DFB\\u82B1\\u201D\\u7684\\u6700\\u4F73\\u5B9E\\u8DF5\\u3002\\u51C6\\u5907\\u597D\\u4E86\\u5417\\uFF1F\\u7CFB\\u597D\\u5B89\\u5168\\u5E26\\uFF0C\\u54B1\\u4EEC\\u5F00\\u6574\\uFF01\"}),`\n`,(0,n.jsx)(l.h2,{id:\"\\u4E3A\\u4EC0\\u4E48\\u9700\\u8981\\u5206\\u7247\\u4E0A\\u4F20\",children:(0,n.jsx)(l.a,{href:\"#\\u4E3A\\u4EC0\\u4E48\\u9700\\u8981\\u5206\\u7247\\u4E0A\\u4F20\",children:\"\\u4E3A\\u4EC0\\u4E48\\u9700\\u8981\\u5206\\u7247\\u4E0A\\u4F20\\uFF1F\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u5148\\u6765\\u70B9\\u54F2\\u5B66\\u601D\\u8003\\uFF1A\\u5982\\u679C\\u751F\\u6D3B\\u7ED9\\u4F60\\u4E00\\u4E2A 10GB \\u7684\\u6587\\u4EF6\\uFF0C\\u4F60\\u4F1A\\u600E\\u4E48\\u529E\\uFF1F\\u76F4\\u63A5\\u786C\\u521A\\u5417\\uFF1F\\u663E\\u7136\\u4E0D\\u884C\\uFF0C\\u6D4F\\u89C8\\u5668\\u4F1A\\u5D29\\u6E83\\uFF0C\\u670D\\u52A1\\u5668\\u4F1A\\u5410\\u8840\\uFF0C\\u7528\\u6237\\u4F1A\\u9A82\\u5A18\\u3002\\u{1F30B} \\u8FD9\\u65F6\\u5019\\uFF0C\\u5206\\u7247\\u4E0A\\u4F20\\u5C31\\u50CF\\u662F\\u628A\\u4E00\\u4E2A\\u5DE8\\u65E0\\u9738\\u6C49\\u5821\\u5207\\u6210\\u5C0F\\u5757\\uFF0C\\u4E00\\u53E3\\u4E00\\u53E3\\u5403\\uFF0C\\u65E2\\u4F18\\u96C5\\u53C8\\u9AD8\\u6548\\u3002\"}),`\n`,(0,n.jsx)(l.h3,{id:\"\\u5206\\u7247\\u4E0A\\u4F20\\u7684\\u6838\\u5FC3\\u601D\\u60F3\",children:(0,n.jsx)(l.a,{href:\"#\\u5206\\u7247\\u4E0A\\u4F20\\u7684\\u6838\\u5FC3\\u601D\\u60F3\",children:\"\\u5206\\u7247\\u4E0A\\u4F20\\u7684\\u6838\\u5FC3\\u601D\\u60F3\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u7B80\\u5355\\u6765\\u8BF4\\uFF0C\\u5206\\u7247\\u4E0A\\u4F20\\u5C31\\u662F\\u628A\\u4E00\\u4E2A\\u5927\\u6587\\u4EF6\\u5207\\u6210\\u82E5\\u5E72\\u5C0F\\u5757\\uFF08chunk\\uFF09\\uFF0C\\u7136\\u540E\\u9010\\u4E2A\\u4E0A\\u4F20\\u5230\\u670D\\u52A1\\u5668\\uFF0C\\u6700\\u540E\\u7531\\u670D\\u52A1\\u5668\\u628A\\u8FD9\\u4E9B\\u788E\\u7247\\u62FC\\u6210\\u5B8C\\u6574\\u7684\\u6587\\u4EF6\\u3002\\u542C\\u8D77\\u6765\\u662F\\u4E0D\\u662F\\u6709\\u70B9\\u50CF\\u642D\\u4E50\\u9AD8\\uFF1F\\u4E00\\u5757\\u4E00\\u5757\\u5792\\u8D77\\u6765\\uFF0C\\u6700\\u540E\\u53D8\\u6210\\u4E00\\u4E2A\\u58EE\\u89C2\\u7684\\u57CE\\u5821\\u3002\\u{1F3F0}\"}),`\n`,(0,n.jsx)(l.h3,{id:\"\\u5206\\u7247\\u7684\\u597D\\u5904\",children:(0,n.jsx)(l.a,{href:\"#\\u5206\\u7247\\u7684\\u597D\\u5904\",children:\"\\u5206\\u7247\\u7684\\u597D\\u5904\"})}),`\n`,(0,n.jsxs)(l.ul,{children:[`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u6027\\u80FD\\u63D0\\u5347\"}),\"\\uFF1A\\u5C0F\\u5757\\u4E0A\\u4F20\\u4E0D\\u4F1A\\u4E00\\u6B21\\u6027\\u5360\\u7528\\u5927\\u91CF\\u5185\\u5B58\\uFF0C\\u6D4F\\u89C8\\u5668\\u548C\\u670D\\u52A1\\u5668\\u90FD\\u677E\\u4E86\\u4E00\\u53E3\\u6C14\\u3002\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u65AD\\u70B9\\u7EED\\u4F20\"}),\"\\uFF1A\\u7F51\\u7EDC\\u65AD\\u4E86\\uFF1F\\u6CA1\\u4E8B\\u513F\\uFF0C\\u5DF2\\u4E0A\\u4F20\\u7684\\u90E8\\u5206\\u4E0D\\u7528\\u91CD\\u6765\\uFF0C\\u76F4\\u63A5\\u4ECE\\u65AD\\u70B9\\u7EE7\\u7EED\\u3002\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u5E76\\u53D1\\u63A7\\u5236\"}),\"\\uFF1A\\u53EF\\u4EE5\\u540C\\u65F6\\u4E0A\\u4F20\\u591A\\u4E2A\\u5206\\u7247\\uFF0C\\u901F\\u5EA6\\u8D77\\u98DE\\uFF0C\\u50CF\\u5F00\\u4E86\\u591A\\u7EBF\\u7A0B\\u4E0B\\u8F7D\\u5668\\u3002\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u7528\\u6237\\u4F53\\u9A8C\"}),\"\\uFF1A\\u652F\\u6301\\u6682\\u505C\\u3001\\u53D6\\u6D88\\u3001\\u8FDB\\u5EA6\\u6761\\u5B9E\\u65F6\\u53CD\\u9988\\uFF0C\\u7528\\u6237\\u4E0D\\u518D\\u76EF\\u7740\\u201C\\u4E0A\\u4F20\\u4E2D\\u201D\\u53D1\\u5446\\u3002\"]}),`\n`]}),`\n`,(0,n.jsx)(l.p,{children:\"\\u597D\\u4E86\\uFF0C\\u9053\\u7406\\u8BB2\\u5B8C\\u4E86\\uFF0C\\u54B1\\u4EEC\\u76F4\\u63A5\\u8FDB\\u5165\\u786C\\u6838\\u90E8\\u5206\\u2014\\u2014\\u600E\\u4E48\\u5B9E\\u73B0\\uFF1F\"}),`\n`,(0,n.jsx)(l.h2,{id:\"\\u5B9E\\u73B0\\u5206\\u7247\\u4E0A\\u4F20\\u7684\\u539F\\u7406\\u4E0E\\u6B65\\u9AA4\",children:(0,n.jsx)(l.a,{href:\"#\\u5B9E\\u73B0\\u5206\\u7247\\u4E0A\\u4F20\\u7684\\u539F\\u7406\\u4E0E\\u6B65\\u9AA4\",children:\"\\u5B9E\\u73B0\\u5206\\u7247\\u4E0A\\u4F20\\u7684\\u539F\\u7406\\u4E0E\\u6B65\\u9AA4\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u5B9E\\u73B0\\u5206\\u7247\\u4E0A\\u4F20\\u5176\\u5B9E\\u6CA1\\u90A3\\u4E48\\u7384\\u4E4E\\uFF0C\\u54B1\\u4EEC\\u53EF\\u4EE5\\u628A\\u5B83\\u62C6\\u6210\\u51E0\\u4E2A\\u5173\\u952E\\u6B65\\u9AA4\\uFF0C\\u50CF\\u505A\\u83DC\\u4E00\\u6837\\uFF0C\\u6309\\u90E8\\u5C31\\u73ED\\u6765\\u3002\"}),`\n`,(0,n.jsx)(l.h3,{id:\"1-\\u6587\\u4EF6\\u5207\\u7247\\u4ECE\\u5927\\u5757\\u5230\\u5C0F\\u5757\",children:(0,n.jsx)(l.a,{href:\"#1-\\u6587\\u4EF6\\u5207\\u7247\\u4ECE\\u5927\\u5757\\u5230\\u5C0F\\u5757\",children:\"1. \\u6587\\u4EF6\\u5207\\u7247\\uFF1A\\u4ECE\\u5927\\u5757\\u5230\\u5C0F\\u5757\"})}),`\n`,(0,n.jsxs)(l.p,{children:[\"\\u524D\\u7AEF\\u62FF\\u5230\\u6587\\u4EF6\\u7684\\u7B2C\\u4E00\\u6B65\\uFF0C\\u5C31\\u662F\\u7528\\u5200\\uFF08\\u597D\\u5427\\uFF0C\\u5176\\u5B9E\\u662F\\u4EE3\\u7801\\uFF09\\u628A\\u5B83\\u5207\\u6210\\u5C0F\\u4EFD\\u3002\\u8FD9\\u91CC\\u6211\\u4EEC\\u8981\\u7528\\u5230\\u6D4F\\u89C8\\u5668\\u63D0\\u4F9B\\u7684 \",(0,n.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{children:\"File\"})})})}),\" \\u5BF9\\u8C61\\u548C \",(0,n.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{children:\"Blob.slice\"})})})}),\" \\u65B9\\u6CD5\\u3002\"]}),`\n`,(0,n.jsxs)(l.p,{children:[\"\\u5047\\u8BBE\\u7528\\u6237\\u4E0A\\u4F20\\u4E86\\u4E00\\u4E2A\\u53EB \",(0,n.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{children:\"cat-video.mp4\"})})})}),\" \\u7684\\u6587\\u4EF6\\uFF0C\\u54B1\\u4EEC\\u5148\\u6765\\u770B\\u770B\\u600E\\u4E48\\u5207\\uFF1A\"]}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" file\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" document.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"querySelector\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:`'input[type=\"file\"]'`}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\").files[\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"];\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" CHUNK_SIZE\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 5\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" *\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 1024\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" *\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 1024\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"; \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// 5MB per chunk\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" chunks\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" [];\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"for\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"let\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" start \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 0\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"; start \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"<\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" file.size; start \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"+=\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" CHUNK_SIZE\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" end\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" Math.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"min\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(start \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"+\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" CHUNK_SIZE\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", file.size);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  chunks.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"push\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(file.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"slice\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(start, end));\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"console.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"`\\u603B\\u5171\\u5207\\u4E86 ${\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"chunks\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"length\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"} \\u7247\\uFF0C\\u51C6\\u5907\\u5F00\\u5E72\\uFF01`\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]})]})})}),`\n`,(0,n.jsxs)(l.p,{children:[\"\\u8FD9\\u91CC \",(0,n.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{children:\"file.slice(start, end)\"})})})}),\" \\u8FD4\\u56DE\\u7684\\u662F\\u4E00\\u4E2A \",(0,n.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{children:\"Blob\"})})})}),\" \\u5BF9\\u8C61\\uFF0C\\u4EE3\\u8868\\u6587\\u4EF6\\u7684\\u4E00\\u5C0F\\u5757\\u3002\\u4F60\\u53EF\\u4EE5\\u628A \",(0,n.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{children:\"CHUNK_SIZE\"})})})}),\" \\u60F3\\u8C61\\u6210\\u5207\\u62AB\\u8428\\u7684\\u5200\\uFF0C\\u6BCF\\u5200\\u4E0B\\u53BB\\u5C31\\u662F\\u4E00\\u4E2A\\u5206\\u7247\\u3002\\u{1F355}\"]}),`\n`,(0,n.jsxs)(l.p,{children:[(0,n.jsx)(l.strong,{children:\"\\u5C0F\\u8D34\\u58EB\"}),\"\\uFF1A\\u5206\\u7247\\u5927\\u5C0F\\u600E\\u4E48\\u5B9A\\uFF1F5MB \\u662F\\u4E2A\\u4E0D\\u9519\\u7684\\u8D77\\u70B9\\uFF0C\\u4F46\\u5177\\u4F53\\u8981\\u770B\\u573A\\u666F\\u3002\\u592A\\u5C0F\\u4E86\\u8BF7\\u6C42\\u592A\\u591A\\uFF0C\\u592A\\u5927\\u4E86\\u53C8\\u5931\\u53BB\\u5206\\u7247\\u7684\\u610F\\u4E49\\u3002\\u540E\\u9762\\u6211\\u4F1A\\u8BB2\\u600E\\u4E48\\u52A8\\u6001\\u8C03\\u6574\\u3002\"]}),`\n`,(0,n.jsx)(l.h3,{id:\"2-\\u4E0A\\u4F20\\u5206\\u7247\\u9010\\u4E2A\\u9001\\u4E0A\\u670D\\u52A1\\u5668\",children:(0,n.jsx)(l.a,{href:\"#2-\\u4E0A\\u4F20\\u5206\\u7247\\u9010\\u4E2A\\u9001\\u4E0A\\u670D\\u52A1\\u5668\",children:\"2. \\u4E0A\\u4F20\\u5206\\u7247\\uFF1A\\u9010\\u4E2A\\u9001\\u4E0A\\u670D\\u52A1\\u5668\"})}),`\n`,(0,n.jsxs)(l.p,{children:[\"\\u5207\\u597D\\u5206\\u7247\\u540E\\uFF0C\\u54B1\\u4EEC\\u9700\\u8981\\u628A\\u8FD9\\u4E9B\\u5C0F\\u5757\\u4E0A\\u4F20\\u5230\\u670D\\u52A1\\u5668\\u3002\\u53EF\\u4EE5\\u7528 \",(0,n.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{children:\"fetch\"})})})}),\" \\u6216 \",(0,n.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{children:\"axios\"})})})}),\"\\uFF0C\\u5E26\\u4E0A\\u4E00\\u4E9B\\u5143\\u4FE1\\u606F\\uFF0C\\u6BD4\\u5982\\u5206\\u7247\\u5E8F\\u53F7\\u3001\\u6587\\u4EF6\\u603B\\u5927\\u5C0F\\u3001\\u5206\\u7247\\u603B\\u6570\\u7B49\\u3002\"]}),`\n`,(0,n.jsx)(l.p,{children:\"\\u4E00\\u4E2A\\u7B80\\u5355\\u7684\\u4E0A\\u4F20\\u51FD\\u6570\\u53EF\\u80FD\\u957F\\u8FD9\\u6837\\uFF1A\"}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"async\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" function\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" uploadChunk\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"chunk\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"index\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"totalChunks\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"fileName\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" formData\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" FormData\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  formData.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"append\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'chunk'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", chunk);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  formData.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"append\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'chunkIndex'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", index);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  formData.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"append\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'totalChunks'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", totalChunks);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  formData.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"append\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'fileName'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", fileName);\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  try\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" response\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" fetch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'/upload/chunk'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      method: \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'POST'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      body: formData,\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    });\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    if\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"!\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"response.ok) \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"throw\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Error\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'\\u4E0A\\u4F20\\u5931\\u8D25'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    console.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"`\\u7B2C ${\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"index\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" +\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"} \\u7247\\u4E0A\\u4F20\\u6210\\u529F\\uFF01`\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"catch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (error) {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    console.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"error\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"`\\u7B2C ${\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"index\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" +\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"} \\u7247\\u6302\\u4E86\\uFF1A`\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", error);\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"    // \\u8FD9\\u91CC\\u53EF\\u4EE5\\u52A0\\u91CD\\u8BD5\\u903B\\u8F91\\uFF0C\\u540E\\u9762\\u8BB2\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u6328\\u4E2A\\u4E0A\\u4F20\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"chunks.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"forEach\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"chunk\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"index\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  uploadChunk\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(chunk, index, chunks.\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"length\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", file.name);\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u670D\\u52A1\\u5668\\u6536\\u5230\\u5206\\u7247\\u540E\\uFF0C\\u901A\\u5E38\\u4F1A\\u628A\\u5B83\\u4EEC\\u6682\\u5B58\\u8D77\\u6765\\uFF0C\\u7B49\\u6240\\u6709\\u5206\\u7247\\u90FD\\u5230\\u9F50\\u518D\\u5408\\u5E76\\u3002\"}),`\n`,(0,n.jsx)(l.h3,{id:\"3-\\u5E76\\u53D1\\u4E0A\\u4F20\\u591A\\u7EBF\\u7A0B\\u5F00\\u5E72\",children:(0,n.jsx)(l.a,{href:\"#3-\\u5E76\\u53D1\\u4E0A\\u4F20\\u591A\\u7EBF\\u7A0B\\u5F00\\u5E72\",children:\"3. \\u5E76\\u53D1\\u4E0A\\u4F20\\uFF1A\\u591A\\u7EBF\\u7A0B\\u5F00\\u5E72\"})}),`\n`,(0,n.jsxs)(l.p,{children:[\"\\u4E0A\\u9762\\u7684\\u4EE3\\u7801\\u662F\\u4E32\\u884C\\u4E0A\\u4F20\\uFF0C\\u592A\\u6162\\u4E86\\uFF01\\u54B1\\u4EEC\\u53EF\\u4EE5\\u641E\\u70B9\\u5E76\\u53D1\\uFF0C\\u50CF\\u5FEB\\u9012\\u5458\\u540C\\u65F6\\u9001\\u591A\\u4EFD\\u5305\\u88F9\\u4E00\\u6837\\u3002\\u53EF\\u4EE5\\u7528 \",(0,n.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{children:\"Promise.all\"})})})}),\" \\u6765\\u5B9E\\u73B0\\uFF1A\"]}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"async\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" function\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" uploadChunksConcurrently\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"chunks\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"fileName\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"concurrency\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 4\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" tasks\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" [];\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  let\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" uploaded \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 0\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" uploadTask\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" async\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"chunk\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"index\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    await\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" uploadChunk\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(chunk, index, chunks.\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"length\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", fileName);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    uploaded\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"++\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    console.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"`\\u8FDB\\u5EA6\\uFF1A${\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"((\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"uploaded\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" /\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" chunks\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"length\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"*\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 100\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\").\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"toFixed\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"2\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\")\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"}%`\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  };\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  for\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"let\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" i \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 0\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"; i \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"<\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" chunks.\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"length\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"; i\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"++\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    tasks.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"push\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"uploadTask\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(chunks[i], i));\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    if\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (tasks.\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"length\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" >=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" concurrency \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"||\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" i \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"===\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" chunks.\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"length\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" -\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      await\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" Promise\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"all\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(tasks);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      tasks.\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"length\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 0\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"; \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u6E05\\u7A7A\\u4EFB\\u52A1\\u961F\\u5217\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"uploadChunksConcurrently\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(chunks, file.name);\"})]})]})})}),`\n`,(0,n.jsxs)(l.p,{children:[\"\\u8FD9\\u91CC\\u6211\\u8BBE\\u7F6E\\u4E86 \",(0,n.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{children:\"concurrency = 4\"})})})}),\"\\uFF0C\\u610F\\u601D\\u662F\\u540C\\u65F6\\u4E0A\\u4F20 4 \\u4E2A\\u5206\\u7247\\u3002\\u4F60\\u53EF\\u4EE5\\u6839\\u636E\\u7F51\\u7EDC\\u72B6\\u51B5\\u548C\\u670D\\u52A1\\u5668\\u627F\\u53D7\\u80FD\\u529B\\u8C03\\u6574\\u8FD9\\u4E2A\\u6570\\u5B57\\u3002\\u5C31\\u50CF\\u5F00\\u81EA\\u52A9\\u9910\\uFF0C\\u4E0D\\u80FD\\u4E00\\u4E0B\\u5B50\\u653E\\u592A\\u591A\\u76D8\\u5B50\\uFF0C\\u5F97\\u63A7\\u5236\\u8282\\u594F\\u3002\\u{1F37D}\\uFE0F\"]}),`\n`,(0,n.jsx)(l.h3,{id:\"4-\\u65AD\\u70B9\\u7EED\\u4F20\\u4ECE\\u54EA\\u91CC\\u6454\\u5012\\u5C31\\u4ECE\\u54EA\\u91CC\\u722C\\u8D77\\u6765\",children:(0,n.jsx)(l.a,{href:\"#4-\\u65AD\\u70B9\\u7EED\\u4F20\\u4ECE\\u54EA\\u91CC\\u6454\\u5012\\u5C31\\u4ECE\\u54EA\\u91CC\\u722C\\u8D77\\u6765\",children:\"4. \\u65AD\\u70B9\\u7EED\\u4F20\\uFF1A\\u4ECE\\u54EA\\u91CC\\u6454\\u5012\\u5C31\\u4ECE\\u54EA\\u91CC\\u722C\\u8D77\\u6765\"})}),`\n`,(0,n.jsxs)(l.p,{children:[\"\\u7F51\\u7EDC\\u4E0D\\u7A33\\u5B9A\\u662F\\u5BB6\\u5E38\\u4FBF\\u996D\\uFF0C\\u7528\\u6237\\u8FD8\\u53EF\\u80FD\\u4E2D\\u9014\\u6682\\u505C\\u4E0A\\u4F20\\u3002\\u600E\\u4E48\\u529E\\uFF1F\\u54B1\\u4EEC\\u5F97\\u5B9E\\u73B0\",(0,n.jsx)(l.strong,{children:\"\\u65AD\\u70B9\\u7EED\\u4F20\"}),\"\\u3002\"]}),`\n`,(0,n.jsx)(l.p,{children:\"\\u601D\\u8DEF\\u662F\\u8FD9\\u6837\\u7684\\uFF1A\"}),`\n`,(0,n.jsxs)(l.ul,{children:[`\n`,(0,n.jsx)(l.li,{children:\"\\u5728\\u4E0A\\u4F20\\u524D\\uFF0C\\u5148\\u95EE\\u670D\\u52A1\\u5668\\uFF1A\\u201C\\u563F\\uFF0C\\u6211\\u8FD9\\u4E2A\\u6587\\u4EF6\\u4E0A\\u4F20\\u5230\\u7B2C\\u51E0\\u5757\\u4E86\\uFF1F\\u201D\"}),`\n`,(0,n.jsx)(l.li,{children:\"\\u670D\\u52A1\\u5668\\u8FD4\\u56DE\\u5DF2\\u4E0A\\u4F20\\u7684\\u5206\\u7247\\u5E8F\\u53F7\\uFF0C\\u54B1\\u4EEC\\u8DF3\\u8FC7\\u8FD9\\u4E9B\\uFF0C\\u76F4\\u63A5\\u4ECE\\u4E0B\\u4E00\\u5757\\u5F00\\u59CB\\u3002\"}),`\n`]}),`\n`,(0,n.jsx)(l.p,{children:\"\\u524D\\u7AEF\\u4EE3\\u7801\\u53EF\\u4EE5\\u52A0\\u4E2A\\u9884\\u68C0\\u67E5\\uFF1A\"}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"async\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" function\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" checkUploadedChunks\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"fileName\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" response\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" fetch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"`/upload/check?fileName=${\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"fileName\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"}`\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" { \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"uploadedChunks\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" response.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"json\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(); \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u5047\\u8BBE\\u8FD4\\u56DE\\u5DF2\\u4E0A\\u4F20\\u7684\\u5206\\u7247\\u7D22\\u5F15\\u6570\\u7EC4\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Set\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(uploadedChunks);\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"async\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" function\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" resumeUpload\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"chunks\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"fileName\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" uploadedChunks\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" checkUploadedChunks\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(fileName);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" tasks\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" chunks\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    .\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"map\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"chunk\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"index\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"!\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"uploadedChunks.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"has\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(index) \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"?\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" uploadChunk\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(chunk, index, chunks.\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"length\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", fileName) \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" null\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"))\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    .\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"filter\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(Boolean);\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  await\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" Promise\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"all\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(tasks);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  console.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'\\u7EED\\u4F20\\u5B8C\\u6210\\uFF0C\\u725B\\u903C\\uFF01'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u670D\\u52A1\\u5668\\u8FD9\\u8FB9\\u9700\\u8981\\u8BB0\\u5F55\\u6BCF\\u4E2A\\u5206\\u7247\\u7684\\u4E0A\\u4F20\\u72B6\\u6001\\uFF0C\\u901A\\u5E38\\u53EF\\u4EE5\\u7528 Redis \\u6216\\u6570\\u636E\\u5E93\\u5B58\\u4E00\\u4E0B\\u3002\"}),`\n`,(0,n.jsx)(l.h3,{id:\"5-\\u5408\\u5E76\\u6587\\u4EF6\\u62FC\\u56FE\\u7684\\u6700\\u540E\\u4E00\\u6B65\",children:(0,n.jsx)(l.a,{href:\"#5-\\u5408\\u5E76\\u6587\\u4EF6\\u62FC\\u56FE\\u7684\\u6700\\u540E\\u4E00\\u6B65\",children:\"5. \\u5408\\u5E76\\u6587\\u4EF6\\uFF1A\\u62FC\\u56FE\\u7684\\u6700\\u540E\\u4E00\\u6B65\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u6240\\u6709\\u5206\\u7247\\u4E0A\\u4F20\\u5B8C\\u6210\\u540E\\uFF0C\\u901A\\u77E5\\u670D\\u52A1\\u5668\\u5408\\u5E76\\u6587\\u4EF6\\u3002\\u8FD9\\u4E00\\u6B65\\u901A\\u5E38\\u662F\\u540E\\u7AEF\\u7684\\u4E8B\\u513F\\uFF0C\\u4F46\\u524D\\u7AEF\\u53EF\\u4EE5\\u53D1\\u4E2A\\u8BF7\\u6C42\\u89E6\\u53D1\\uFF1A\"}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"async\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" function\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" mergeChunks\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"fileName\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"totalChunks\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" response\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" fetch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'/upload/merge'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    method: \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'POST'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    headers: { \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'Content-Type'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'application/json'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" },\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    body: \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"JSON\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"stringify\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({ fileName, totalChunks }),\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  });\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  if\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (response.ok) {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    console.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'\\u6587\\u4EF6\\u5408\\u5E76\\u6210\\u529F\\uFF0C\\u5B8C\\u7F8E\\u6536\\u5B98\\uFF01\\u{1F389}'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"else\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    throw\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Error\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'\\u5408\\u5E76\\u5931\\u8D25\\uFF0C\\u670D\\u52A1\\u5668\\u53EF\\u80FD\\u5077\\u61D2\\u4E86'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"await\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" uploadChunksConcurrently\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(chunks, file.name);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"await\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" mergeChunks\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(file.name, chunks.\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"length\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]})]})})}),`\n`,(0,n.jsxs)(l.p,{children:[\"\\u540E\\u7AEF\\u53EF\\u4EE5\\u7528 Node.js \\u7684 \",(0,n.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{children:\"fs\"})})})}),\" \\u6A21\\u5757\\u628A\\u5206\\u7247\\u62FC\\u8D77\\u6765\\uFF0C\\u6216\\u8005\\u76F4\\u63A5\\u4EA4\\u7ED9\\u4E91\\u5B58\\u50A8\\u670D\\u52A1\\uFF08\\u6BD4\\u5982 AWS S3 \\u7684\\u5206\\u7247\\u4E0A\\u4F20 API\\uFF09\\u3002\"]}),`\n`,(0,n.jsx)(l.h2,{id:\"\\u8FDB\\u9636\\u4F18\\u5316\\u8BA9\\u5206\\u7247\\u4E0A\\u4F20\\u66F4\\u786C\\u6838\",children:(0,n.jsx)(l.a,{href:\"#\\u8FDB\\u9636\\u4F18\\u5316\\u8BA9\\u5206\\u7247\\u4E0A\\u4F20\\u66F4\\u786C\\u6838\",children:\"\\u8FDB\\u9636\\u4F18\\u5316\\uFF1A\\u8BA9\\u5206\\u7247\\u4E0A\\u4F20\\u66F4\\u786C\\u6838\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u57FA\\u7840\\u5B9E\\u73B0\\u641E\\u5B9A\\u4E86\\uFF0C\\u4F46\\u4F5C\\u4E3A\\u4E00\\u4E2A\\u6709\\u8FFD\\u6C42\\u7684\\u524D\\u7AEF\\uFF0C\\u54B1\\u4EEC\\u5F97\\u518D\\u52A0\\u70B9\\u6599\\uFF0C\\u8BA9\\u5B83\\u66F4\\u9760\\u8C31\\u3001\\u66F4\\u70AB\\u9177\\u3002\"}),`\n`,(0,n.jsx)(l.h3,{id:\"1-\\u52A8\\u6001\\u5206\\u7247\\u5927\\u5C0F\",children:(0,n.jsx)(l.a,{href:\"#1-\\u52A8\\u6001\\u5206\\u7247\\u5927\\u5C0F\",children:\"1. \\u52A8\\u6001\\u5206\\u7247\\u5927\\u5C0F\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u56FA\\u5B9A\\u7684 5MB \\u5206\\u7247\\u53EF\\u80FD\\u4E0D\\u9002\\u5408\\u6240\\u6709\\u573A\\u666F\\u3002\\u7F51\\u7EDC\\u597D\\u65F6\\u53EF\\u4EE5\\u5207\\u5927\\u4E00\\u70B9\\uFF0C\\u7F51\\u7EDC\\u5DEE\\u65F6\\u5207\\u5C0F\\u4E00\\u70B9\\u3002\\u53EF\\u4EE5\\u7528\\u7B80\\u5355\\u7684\\u63A2\\u6D4B\\u903B\\u8F91\\uFF1A\"}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"async\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" function\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" detectChunkSize\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" testBlob\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Blob\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"([\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"new\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" ArrayBuffer\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"1024\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" *\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 1024\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\")]); \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// 1MB \\u6D4B\\u8BD5\\u6570\\u636E\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" startTime\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" Date.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"now\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  await\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" fetch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'/upload/test'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", { method: \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'POST'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", body: testBlob });\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" latency\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" Date.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"now\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"() \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" startTime;\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" latency \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"<\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 200\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" ?\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 10\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" *\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 1024\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" *\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 1024\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" :\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 2\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" *\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 1024\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" *\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 1024\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"; \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u4F4E\\u5EF6\\u8FDF\\u752810MB\\uFF0C\\u9AD8\\u5EF6\\u8FDF\\u75282MB\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" CHUNK_SIZE\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" detectChunkSize\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]})]})})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u8FD9\\u5C31\\u50CF\\u5F00\\u8F66\\u63A2\\u8DEF\\uFF0C\\u8DEF\\u51B5\\u597D\\u5C31\\u5F00\\u5FEB\\u70B9\\uFF0C\\u8DEF\\u51B5\\u5DEE\\u5C31\\u6162\\u70B9\\u3002\"}),`\n`,(0,n.jsx)(l.h3,{id:\"2-\\u9519\\u8BEF\\u91CD\\u8BD5\\u4E0D\\u629B\\u5F03\\u4E0D\\u653E\\u5F03\",children:(0,n.jsx)(l.a,{href:\"#2-\\u9519\\u8BEF\\u91CD\\u8BD5\\u4E0D\\u629B\\u5F03\\u4E0D\\u653E\\u5F03\",children:\"2. \\u9519\\u8BEF\\u91CD\\u8BD5\\uFF1A\\u4E0D\\u629B\\u5F03\\u4E0D\\u653E\\u5F03\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u7F51\\u7EDC\\u6296\\u4E00\\u4E0B\\uFF0C\\u5206\\u7247\\u4E0A\\u4F20\\u5931\\u8D25\\u600E\\u4E48\\u529E\\uFF1F\\u522B\\u6025\\uFF0C\\u52A0\\u4E2A\\u91CD\\u8BD5\\u673A\\u5236\\uFF1A\"}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"async\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" function\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" uploadChunkWithRetry\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"chunk\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"index\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"totalChunks\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"fileName\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"maxRetries\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 3\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  for\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"let\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" retry \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 0\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"; retry \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"<=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" maxRetries; retry\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"++\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    try\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      await\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" uploadChunk\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(chunk, index, totalChunks, fileName);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      return\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"catch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (error) {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      if\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (retry \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"===\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" maxRetries) \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"throw\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" error;\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      console.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"warn\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"`\\u7B2C ${\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"index\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" +\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"} \\u7247\\u7B2C ${\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"retry\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" +\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 1\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"} \\u6B21\\u91CD\\u8BD5...`\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      await\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" Promise\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"resolve\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" setTimeout\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(resolve, \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"1000\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" *\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" Math.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"pow\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"2\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", retry))); \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u6307\\u6570\\u9000\\u907F\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(l.p,{children:[\"\\u8FD9\\u91CC\\u7528\\u4E86\",(0,n.jsx)(l.strong,{children:\"\\u6307\\u6570\\u9000\\u907F\"}),\"\\uFF08exponential backoff\\uFF09\\uFF0C\\u5931\\u8D25\\u540E\\u7B49\\u5F85\\u65F6\\u95F4\\u9010\\u6E10\\u589E\\u52A0\\uFF0C\\u907F\\u514D\\u75AF\\u72C2\\u8F70\\u70B8\\u670D\\u52A1\\u5668\\u3002\"]}),`\n`,(0,n.jsx)(l.h3,{id:\"3-web-workers\\u89E3\\u653E\\u4E3B\\u7EBF\\u7A0B\",children:(0,n.jsx)(l.a,{href:\"#3-web-workers\\u89E3\\u653E\\u4E3B\\u7EBF\\u7A0B\",children:\"3. Web Workers\\uFF1A\\u89E3\\u653E\\u4E3B\\u7EBF\\u7A0B\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u5206\\u7247\\u548C\\u4E0A\\u4F20\\u903B\\u8F91\\u5982\\u679C\\u5F88\\u590D\\u6742\\uFF0C\\u53EF\\u80FD\\u4F1A\\u5361\\u4F4F UI\\u3002\\u53EF\\u4EE5\\u7528 Web Workers \\u628A\\u8FD9\\u4E9B\\u810F\\u6D3B\\u7D2F\\u6D3B\\u4E22\\u5230\\u540E\\u53F0\\u7EBF\\u7A0B\\uFF1A\"}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// worker.js\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"self.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"onmessage\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" async\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"e\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" { \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"chunk\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"index\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"totalChunks\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"fileName\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" e.data;\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" response\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" fetch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'/upload/chunk'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    method: \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'POST'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    body: chunk,\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  });\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  self.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"postMessage\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({ index, success: response.ok });\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"};\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u4E3B\\u7EBF\\u7A0B\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" worker\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Worker\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'worker.js'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"chunks.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"forEach\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"chunk\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"index\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  worker.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"postMessage\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({ chunk, index, totalChunks: chunks.\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"length\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", fileName: file.name });\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"});\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"worker.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"onmessage\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"e\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  console.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"`\\u5206\\u7247 ${\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"e\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"data\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"index\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"} ${\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"e\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"data\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"success\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" ?\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\" '\\u6210\\u529F'\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" :\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\" '\\u5931\\u8D25'}`\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"};\"})})]})})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u8FD9\\u5C31\\u50CF\\u96C7\\u4E86\\u4E2A\\u5C0F\\u5F1F\\u5E72\\u6D3B\\uFF0C\\u4E3B\\u7EBF\\u7A0B\\u53EA\\u7BA1\\u559D\\u8336\\u770B\\u7ED3\\u679C\\u3002\\u2615\"}),`\n`,(0,n.jsx)(l.h3,{id:\"4-\\u8FDB\\u5EA6\\u6761\\u8BA9\\u7528\\u6237\\u723D\\u5230\\u98DE\\u8D77\",children:(0,n.jsx)(l.a,{href:\"#4-\\u8FDB\\u5EA6\\u6761\\u8BA9\\u7528\\u6237\\u723D\\u5230\\u98DE\\u8D77\",children:\"4. \\u8FDB\\u5EA6\\u6761\\uFF1A\\u8BA9\\u7528\\u6237\\u723D\\u5230\\u98DE\\u8D77\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u7528\\u6237\\u6700\\u5173\\u5FC3\\u7684\\u662F\\u201C\\u4E0A\\u4F20\\u5230\\u54EA\\u513F\\u4E86\\u201D\\u3002\\u54B1\\u4EEC\\u53EF\\u4EE5\\u7528\\u4E2A\\u7B80\\u5355\\u7684\\u8FDB\\u5EA6\\u6761\\uFF1A\"}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" progressBar\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" document.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"querySelector\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'#progress'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"let\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" uploadedChunks \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 0\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"function\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" updateProgress\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  uploadedChunks\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"++\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  progressBar.style.width \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\" `${\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"uploadedChunks\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" /\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" chunks\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"length\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"*\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 100\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"}%`\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u5728 uploadChunk \\u6210\\u529F\\u540E\\u8C03\\u7528\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"await\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" uploadChunk\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(chunk, index, totalChunks, fileName);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"updateProgress\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]})]})})}),`\n`,(0,n.jsx)(l.p,{children:\"CSS \\u641E\\u4E2A\\u6E10\\u53D8\\u52A8\\u753B\\uFF0C\\u7528\\u6237\\u4F53\\u9A8C\\u76F4\\u63A5\\u62C9\\u6EE1\\uFF01\"}),`\n`,(0,n.jsx)(l.h2,{id:\"\\u6700\\u4F73\\u5B9E\\u8DF5\\u5B9E\\u6218\\u4E2D\\u7684\\u7ECF\\u9A8C\\u6559\\u8BAD\",children:(0,n.jsx)(l.a,{href:\"#\\u6700\\u4F73\\u5B9E\\u8DF5\\u5B9E\\u6218\\u4E2D\\u7684\\u7ECF\\u9A8C\\u6559\\u8BAD\",children:\"\\u6700\\u4F73\\u5B9E\\u8DF5\\uFF1A\\u5B9E\\u6218\\u4E2D\\u7684\\u7ECF\\u9A8C\\u6559\\u8BAD\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u5199\\u5230\\u8FD9\\u513F\\uFF0C\\u6211\\u5DF2\\u7ECF\\u6709\\u70B9\\u624B\\u9178\\u4E86\\uFF0C\\u4F46\\u4E3A\\u4E86\\u4F60\\u4EEC\\uFF0C\\u6211\\u8FD8\\u662F\\u5F97\\u518D\\u638F\\u70B9\\u5E72\\u8D27\\u3002\\u4EE5\\u4E0B\\u662F\\u4E9B\\u5B9E\\u6218\\u4E2D\\u8E29\\u8FC7\\u7684\\u5751\\u548C\\u6700\\u4F73\\u5B9E\\u8DF5\\uFF1A\"}),`\n`,(0,n.jsxs)(l.ol,{children:[`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u6587\\u4EF6\\u552F\\u4E00\\u6807\\u8BC6\"}),\"\\uFF1A\\u6587\\u4EF6\\u540D\\u53EF\\u80FD\\u91CD\\u590D\\uFF0C\\u5EFA\\u8BAE\\u7528 MD5 \\u6216 UUID \\u7ED9\\u6587\\u4EF6\\u751F\\u6210\\u552F\\u4E00 ID\\uFF0C\\u670D\\u52A1\\u5668\\u4E5F\\u597D\\u7BA1\\u7406\\u3002\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u5206\\u7247\\u987A\\u5E8F\\u65E0\\u5173\"}),\"\\uFF1A\\u522B\\u6307\\u671B\\u5206\\u7247\\u6309\\u987A\\u5E8F\\u5230\\u8FBE\\uFF0C\\u670D\\u52A1\\u5668\\u5F97\\u80FD\\u4E71\\u5E8F\\u62FC\\u88C5\\u3002\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u5E26\\u5BBD\\u68C0\\u6D4B\"}),\"\\uFF1A\\u4E0A\\u4F20\\u524D\\u6D4B\\u4E00\\u4E0B\\u7F51\\u901F\\uFF0C\\u52A8\\u6001\\u8C03\\u6574\\u5E76\\u53D1\\u6570\\u548C\\u5206\\u7247\\u5927\\u5C0F\\u3002\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u6E05\\u7406\\u4E34\\u65F6\\u6587\\u4EF6\"}),\"\\uFF1A\\u4E0A\\u4F20\\u5931\\u8D25\\u6216\\u53D6\\u6D88\\u540E\\uFF0C\\u63D0\\u9192\\u540E\\u7AEF\\u5220\\u6389\\u4E34\\u65F6\\u5206\\u7247\\uFF0C\\u7701\\u5F97\\u5360\\u7A7A\\u95F4\\u3002\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u7528\\u6237\\u4EA4\\u4E92\"}),\"\\uFF1A\\u52A0\\u4E2A\\u201C\\u6682\\u505C\\u201D\\u548C\\u201C\\u53D6\\u6D88\\u201D\\u6309\\u94AE\\uFF0C\\u7528\\u6237\\u4F1A\\u7231\\u6B7B\\u4F60\\u3002\"]}),`\n`]}),`\n`,(0,n.jsx)(l.h2,{id:\"\\u7ED3\\u5C3E\\u5F69\\u86CB\\u4E00\\u4E2A\\u5B8C\\u6574\\u7684-demo\",children:(0,n.jsx)(l.a,{href:\"#\\u7ED3\\u5C3E\\u5F69\\u86CB\\u4E00\\u4E2A\\u5B8C\\u6574\\u7684-demo\",children:\"\\u7ED3\\u5C3E\\u5F69\\u86CB\\uFF1A\\u4E00\\u4E2A\\u5B8C\\u6574\\u7684 Demo\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u6700\\u540E\\uFF0C\\u6211\\u8D34\\u4E2A\\u7B80\\u5316\\u7684\\u5B8C\\u6574\\u4EE3\\u7801\\uFF0C\\u4F9B\\u4F60\\u53C2\\u8003\\uFF1A\"}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"async\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" function\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" uploadBigFile\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"file\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" CHUNK_SIZE\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 5\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" *\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 1024\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" *\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 1024\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" chunks\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" [];\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  for\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"let\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" start \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 0\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"; start \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"<\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" file.size; start \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"+=\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" CHUNK_SIZE\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    chunks.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"push\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(file.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"slice\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(start, Math.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"min\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(start \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"+\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" CHUNK_SIZE\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", file.size)));\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" fileId\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\" `${\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"Date\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"now\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"()\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"}-${\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"file\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"name\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"}`\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" uploadedChunks\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" checkUploadedChunks\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(fileId);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" tasks\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" chunks.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"map\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"chunk\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"i\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    uploadedChunks.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"has\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(i) \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"?\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" null\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" :\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" uploadChunkWithRetry\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(chunk, i, chunks.\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"length\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", fileId)\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  ).\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"filter\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(Boolean);\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  await\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" Promise\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"all\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(tasks);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  await\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" mergeChunks\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(fileId, chunks.\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"length\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  console.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'\\u4E0A\\u4F20\\u5B8C\\u6210\\uFF0C\\u559D\\u676F\\u5496\\u5561\\u5E86\\u795D\\u4E0B\\u5427\\uFF01\\u2615'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"document.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"querySelector\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:`'input[type=\"file\"]'`}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\").\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"addEventListener\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'change'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", (\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"e\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  uploadBigFile\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(e.target.files[\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"]);\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})}),`\n`,(0,n.jsx)(l.h2,{id:\"\\u5199\\u5728\\u6700\\u540E\",children:(0,n.jsx)(l.a,{href:\"#\\u5199\\u5728\\u6700\\u540E\",children:\"\\u5199\\u5728\\u6700\\u540E\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u5927\\u6587\\u4EF6\\u5206\\u7247\\u4E0A\\u4F20\\u770B\\u7740\\u590D\\u6742\\uFF0C\\u5176\\u5B9E\\u5C31\\u662F\\u5207\\u7247\\u3001\\u4E0A\\u4F20\\u3001\\u5408\\u5E76\\u8FD9\\u4E09\\u677F\\u65A7\\u3002\\u52A0\\u4E0A\\u5E76\\u53D1\\u3001\\u65AD\\u70B9\\u7EED\\u4F20\\u3001\\u91CD\\u8BD5\\u8FD9\\u4E9B\\u201C\\u8C03\\u6599\\u201D\\uFF0C\\u5C31\\u80FD\\u505A\\u51FA\\u4E00\\u4E2A\\u65E2\\u7A33\\u53C8\\u5FEB\\u7684\\u4E0A\\u4F20\\u7CFB\\u7EDF\\u3002\\u5E0C\\u671B\\u8FD9\\u7BC7\\u535A\\u5BA2\\u80FD\\u5E2E\\u5230\\u4F60\\uFF0C\\u4E0B\\u6B21\\u7528\\u6237\\u518D\\u6254\\u4E2A 100GB \\u6587\\u4EF6\\u8FC7\\u6765\\uFF0C\\u4F60\\u53EF\\u4EE5\\u6DE1\\u5B9A\\u5730\\u8BF4\\uFF1A\\u201C\\u5C0F\\u610F\\u601D\\uFF0C\\u5206\\u5206\\u949F\\u641E\\u5B9A\\uFF01\\u201D\\u{1F60E}\"}),`\n`,(0,n.jsx)(l.p,{children:\"\\u6709\\u5565\\u95EE\\u9898\\u6216\\u66F4\\u597D\\u7684\\u60F3\\u6CD5\\uFF0C\\u6B22\\u8FCE\\u5728\\u8BC4\\u8BBA\\u533A\\u8DDF\\u6211\\u5520\\u5520\\uFF0C\\u54B1\\u4EEC\\u4E00\\u8D77\\u8FDB\\u6B65\\uFF01\\u270B\"})]})}function h(e={}){let{wrapper:l}=e.components||{};return l?(0,n.jsx)(l,{...e,children:(0,n.jsx)(t,{...e})}):t(e)}return f(m);})();\n;return Component;"
  },
  "_id": "å‰ç«¯æŠ€æœ¯/å‰ç«¯å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ .mdx",
  "_raw": {
    "sourceFilePath": "å‰ç«¯æŠ€æœ¯/å‰ç«¯å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ .mdx",
    "sourceFileName": "å‰ç«¯å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ .mdx",
    "sourceFileDir": "å‰ç«¯æŠ€æœ¯",
    "contentType": "mdx",
    "flattenedPath": "å‰ç«¯æŠ€æœ¯/å‰ç«¯å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ "
  },
  "type": "Post",
  "url": "/blog/å‰ç«¯æŠ€æœ¯/å‰ç«¯å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ "
}