{
  "title": "聊聊Web身份认证与状态管理",
  "date": "2024-05-02T00:00:00.000Z",
  "description": "深度探讨Web身份认证与状态管理的核心原理、技术方案及源码实现，涵盖Cookie、Session、Token、OAuth等内容。",
  "keywords": "Web身份认证, 状态管理, Cookie, Session, JWT, OAuth, 前端开发, 后端开发, 源码解析",
  "author": "晓龙",
  "image": "/images/hero/web-auth-state.jpg",
  "tags": [
    "Web开发",
    "身份认证",
    "状态管理",
    "安全性"
  ],
  "views": 0,
  "likes": 0,
  "category": "前端技术",
  "body": {
    "raw": "\nWeb开发中，身份认证（Authentication）和状态管理（State Management）是构建安全、可靠应用的核心环节。从传统的Cookie-Session模式到现代的Token认证和OAuth授权，技术方案层出不穷。本文将从原理到源码实现，全面解析这些技术，帮助你理解它们的本质和适用场景。\n\n## 身份认证与状态管理的基础\n\n### 什么是身份认证与状态管理？\n\n身份认证是验证用户身份的过程，例如登录时验证用户名和密码是否正确。状态管理则是在用户通过认证后，维持其会话状态（如“已登录”），确保后续请求能识别用户身份。\n\nWeb的无状态特性（HTTP协议本身不记录请求间的状态）决定了我们需要额外的机制来实现这两者。常见的方案包括：\n\n- **Cookie + Session**：服务器端存储会话状态。\n- **Token（如JWT）**：客户端存储认证信息。\n- **OAuth/OpenID Connect**：第三方授权与认证。\n\n## 传统方案：Cookie + Session\n\n### 工作原理\n\n1. 用户登录时，服务器验证凭据后生成一个唯一的`Session ID`。\n2. `Session ID`存储在服务器（如内存、数据库或Redis），并通过`Set-Cookie`头返回给客户端。\n3. 客户端后续请求自动携带Cookie中的`Session ID`，服务器据此识别用户。\n\n### 源码实现（Node.js + Express）\n\n以下是一个简单的Cookie-Session实现：\n\n```javascript\nconst express = require('express');\nconst session = require('express-session');\nconst app = express();\n\n// 配置Session中间件\napp.use(session({\n  secret: 'my-secret-key', // 用于签名Cookie\n  resave: false, // 不强制保存未修改的会话\n  saveUninitialized: false, // 不保存未初始化的会话\n  cookie: { maxAge: 24 * 60 * 60 * 1000 } // Cookie有效期1天\n}));\n\n// 登录路由\napp.post('/login', (req, res) => {\n  const { username, password } = req.body;\n  if (username === 'admin' && password === '123456') {\n    req.session.user = { username }; // 在Session中存储用户信息\n    res.send('登录成功');\n  } else {\n    res.status(401).send('登录失败');\n  }\n});\n\n// 受保护路由\napp.get('/profile', (req, res) => {\n  if (req.session.user) {\n    res.send(`欢迎, ${req.session.user.username}`);\n  } else {\n    res.status(401).send('请先登录');\n  }\n});\n\napp.listen(3000, () => console.log('Server running on port 3000'));\n```\n\n### 源码解析\n\n- **`express-session`**：通过生成一个唯一的`Session ID`（如`sid`），并将其存储在`req.session`对象中。`sid`通过Cookie返回客户端。\n- **Cookie签名**：`secret`用于对Cookie签名，防止篡改。签名后的Cookie格式类似于：`s:xxx.xxx`。\n- **会话存储**：默认存储在内存中，可配置为Redis等外部存储。\n\n### 优缺点\n\n**优点**：\n- 服务器端控制会话，安全性较高。\n- 支持复杂的状态管理（如购物车数据）。\n\n**缺点**：\n- 服务器需存储所有会话，内存或数据库压力大。\n- 不适合分布式系统，除非使用集中式存储（如Redis）。\n\n## 现代方案：Token（JWT）\n\n### 工作原理\n\nJWT（JSON Web Token）是一种无状态认证方案，由三部分组成：`Header.Payload.Signature`，用`.`分隔。\n\n1. 用户登录后，服务器生成JWT并返回客户端。\n2. 客户端将JWT存储（如`localStorage`或`Cookie`），后续请求在`Authorization`头中携带。\n3. 服务器验证JWT签名，解析出用户信息。\n\n### 源码实现（Node.js + jsonwebtoken）\n\n```javascript\nconst express = require('express');\nconst jwt = require('jsonwebtoken');\nconst app = express();\n\napp.use(express.json());\n\nconst SECRET_KEY = 'my-jwt-secret';\n\n// 登录路由\napp.post('/login', (req, res) => {\n  const { username, password } = req.body;\n  if (username === 'admin' && password === '123456') {\n    const token = jwt.sign({ username }, SECRET_KEY, { expiresIn: '1h' });\n    res.json({ token });\n  } else {\n    res.status(401).send('登录失败');\n  }\n});\n\n// 中间件：验证Token\nconst authenticateToken = (req, res, next) => {\n  const authHeader = req.headers['authorization'];\n  const token = authHeader && authHeader.split(' ')[1];\n  if (!token) return res.status(401).send('无访问权限');\n\n  jwt.verify(token, SECRET_KEY, (err, user) => {\n    if (err) return res.status(403).send('Token无效');\n    req.user = user;\n    next();\n  });\n};\n\n// 受保护路由\napp.get('/profile', authenticateToken, (req, res) => {\n  res.send(`欢迎, ${req.user.username}`);\n});\n\napp.listen(3000, () => console.log('Server running on port 3000'));\n```\n\n### 源码解析\n\n- **`jwt.sign`**：生成JWT，包含头部（算法）、载荷（用户信息）和签名。签名基于`SECRET_KEY`和HMAC-SHA256算法。\n- **`jwt.verify`**：验证签名是否有效，若过期或被篡改则抛出错误。\n- **Token格式**：如`eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImFkbWluIiwiaWF0IjoxNjg...`，可通过[jwt.io](https://jwt.io)解析。\n\n### 优缺点\n\n**优点**：\n- 无状态，服务器无需存储会话，适合分布式系统。\n- 可跨域携带，适用于前后端分离。\n\n**缺点**：\n- Token无法主动失效（需借助黑名单机制）。\n- 存储在客户端，泄露风险较高。\n\n## OAuth 2.0：第三方授权\n\n### 工作原理\n\nOAuth 2.0是一种授权框架，常用于第三方登录（如Google、GitHub）。核心流程：\n\n1. 用户选择通过第三方登录。\n2. 应用跳转到第三方授权页面，用户同意后返回`Authorization Code`。\n3. 应用用`Code`换取`Access Token`，再用Token获取用户信息。\n\n### 源码实现（Node.js + Passport）\n\n以下以GitHub为例：\n\n```javascript\nconst express = require('express');\nconst passport = require('passport');\nconst GitHubStrategy = require('passport-github2').Strategy;\nconst app = express();\n\npassport.use(new GitHubStrategy({\n    clientID: 'YOUR_GITHUB_CLIENT_ID',\n    clientSecret: 'YOUR_GITHUB_CLIENT_SECRET',\n    callbackURL: 'http://localhost:3000/auth/github/callback'\n  },\n  (accessToken, refreshToken, profile, done) => {\n    return done(null, profile); // 将用户信息传递给后续处理\n  }\n));\n\napp.use(passport.initialize());\n\n// 发起GitHub授权\napp.get('/auth/github', passport.authenticate('github', { scope: ['user:email'] }));\n\n// 回调路由\napp.get('/auth/github/callback',\n  passport.authenticate('github', { failureRedirect: '/login' }),\n  (req, res) => {\n    res.redirect('/profile');\n  }\n);\n\n// 受保护路由\napp.get('/profile', (req, res) => {\n  if (req.user) {\n    res.send(`欢迎, ${req.user.displayName}`);\n  } else {\n    res.status(401).send('请先登录');\n  }\n});\n\napp.listen(3000, () => console.log('Server running on port 3000'));\n```\n\n### 源码解析\n\n- **`passport-github2`**：封装了OAuth 2.0流程，自动处理授权码和Token交换。\n- **`accessToken`**：用于调用GitHub API获取用户信息。\n- **安全性**：依赖HTTPS和客户端密钥，确保通信安全。\n\n### 优缺点\n\n**优点**：\n- 借助第三方信任，简化用户注册/登录。\n- 标准协议，生态丰富。\n\n**缺点**：\n- 依赖第三方服务，增加外部风险。\n- 实现复杂度较高。\n\n## 状态管理进阶：前端与后端协作\n\n### 前端状态管理\n\n在前后端分离的架构中，前端通常使用`Redux`、`Vuex`或`React Context`管理状态。以JWT为例，前端代码可能如下：\n\n```javascript\n// React + Context 示例\nimport React, { createContext, useContext, useState } from 'react';\n\nconst AuthContext = createContext();\n\nexport const AuthProvider = ({ children }) => {\n  const [token, setToken] = useState(localStorage.getItem('token') || null);\n\n  const login = (newToken) => {\n    setToken(newToken);\n    localStorage.setItem('token', newToken);\n  };\n\n  const logout = () => {\n    setToken(null);\n    localStorage.removeItem('token');\n  };\n\n  return (\n    <AuthContext.Provider value={{ token, login, logout }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport const useAuth = () => useContext(AuthContext);\n```\n\n### 后端状态管理\n\n后端可通过Redis存储Token黑名单，解决JWT无法主动失效的问题：\n\n```javascript\nconst redis = require('redis');\nconst client = redis.createClient();\n\nconst blacklistToken = async (token) => {\n  await client.set(token, 'blacklisted', 'EX', 3600); // 1小时过期\n};\n\nconst isTokenBlacklisted = async (token) => {\n  return await client.get(token) === 'blacklisted';\n};\n```\n\n## 总结与选择建议\n\n- **小型应用**：Cookie + Session简单易用。\n- **前后端分离/分布式系统**：JWT更灵活。\n- **第三方登录**：OAuth是最佳选择。\n\n身份认证与状态管理没有“银弹”，需根据业务需求权衡安全性、可扩展性和开发成本。希望本文的源码解析能为你提供实践参考！\n\n---",
    "code": "var Component=(()=>{var p=Object.create;var s=Object.defineProperty;var E=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var F=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),B=(n,e)=>{for(var r in e)s(n,r,{get:e[r],enumerable:!0})},o=(n,e,r,a)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of y(e))!u.call(n,c)&&c!==r&&s(n,c,{get:()=>e[c],enumerable:!(a=E(e,c))||a.enumerable});return n};var k=(n,e,r)=>(r=n!=null?p(F(n)):{},o(e||!n||!n.__esModule?s(r,\"default\",{value:n,enumerable:!0}):r,n)),C=n=>o(s({},\"__esModule\",{value:!0}),n);var d=g((m,i)=>{i.exports=_jsx_runtime});var x={};B(x,{default:()=>h,frontmatter:()=>f});var l=k(d()),f={type:\"Post\",title:\"\\u804A\\u804AWeb\\u8EAB\\u4EFD\\u8BA4\\u8BC1\\u4E0E\\u72B6\\u6001\\u7BA1\\u7406\",date:\"2024-05-02\",description:\"\\u6DF1\\u5EA6\\u63A2\\u8BA8Web\\u8EAB\\u4EFD\\u8BA4\\u8BC1\\u4E0E\\u72B6\\u6001\\u7BA1\\u7406\\u7684\\u6838\\u5FC3\\u539F\\u7406\\u3001\\u6280\\u672F\\u65B9\\u6848\\u53CA\\u6E90\\u7801\\u5B9E\\u73B0\\uFF0C\\u6DB5\\u76D6Cookie\\u3001Session\\u3001Token\\u3001OAuth\\u7B49\\u5185\\u5BB9\\u3002\",keywords:\"Web\\u8EAB\\u4EFD\\u8BA4\\u8BC1, \\u72B6\\u6001\\u7BA1\\u7406, Cookie, Session, JWT, OAuth, \\u524D\\u7AEF\\u5F00\\u53D1, \\u540E\\u7AEF\\u5F00\\u53D1, \\u6E90\\u7801\\u89E3\\u6790\",author:\"\\u6653\\u9F99\",image:\"/images/hero/web-auth-state.jpg\",tags:[\"Web\\u5F00\\u53D1\",\"\\u8EAB\\u4EFD\\u8BA4\\u8BC1\",\"\\u72B6\\u6001\\u7BA1\\u7406\",\"\\u5B89\\u5168\\u6027\"],category:\"\\u524D\\u7AEF\\u6280\\u672F\"};function t(n){let e={a:\"a\",code:\"code\",figure:\"figure\",h2:\"h2\",h3:\"h3\",hr:\"hr\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.p,{children:\"Web\\u5F00\\u53D1\\u4E2D\\uFF0C\\u8EAB\\u4EFD\\u8BA4\\u8BC1\\uFF08Authentication\\uFF09\\u548C\\u72B6\\u6001\\u7BA1\\u7406\\uFF08State Management\\uFF09\\u662F\\u6784\\u5EFA\\u5B89\\u5168\\u3001\\u53EF\\u9760\\u5E94\\u7528\\u7684\\u6838\\u5FC3\\u73AF\\u8282\\u3002\\u4ECE\\u4F20\\u7EDF\\u7684Cookie-Session\\u6A21\\u5F0F\\u5230\\u73B0\\u4EE3\\u7684Token\\u8BA4\\u8BC1\\u548COAuth\\u6388\\u6743\\uFF0C\\u6280\\u672F\\u65B9\\u6848\\u5C42\\u51FA\\u4E0D\\u7A77\\u3002\\u672C\\u6587\\u5C06\\u4ECE\\u539F\\u7406\\u5230\\u6E90\\u7801\\u5B9E\\u73B0\\uFF0C\\u5168\\u9762\\u89E3\\u6790\\u8FD9\\u4E9B\\u6280\\u672F\\uFF0C\\u5E2E\\u52A9\\u4F60\\u7406\\u89E3\\u5B83\\u4EEC\\u7684\\u672C\\u8D28\\u548C\\u9002\\u7528\\u573A\\u666F\\u3002\"}),`\n`,(0,l.jsx)(e.h2,{id:\"\\u8EAB\\u4EFD\\u8BA4\\u8BC1\\u4E0E\\u72B6\\u6001\\u7BA1\\u7406\\u7684\\u57FA\\u7840\",children:(0,l.jsx)(e.a,{href:\"#\\u8EAB\\u4EFD\\u8BA4\\u8BC1\\u4E0E\\u72B6\\u6001\\u7BA1\\u7406\\u7684\\u57FA\\u7840\",children:\"\\u8EAB\\u4EFD\\u8BA4\\u8BC1\\u4E0E\\u72B6\\u6001\\u7BA1\\u7406\\u7684\\u57FA\\u7840\"})}),`\n`,(0,l.jsx)(e.h3,{id:\"\\u4EC0\\u4E48\\u662F\\u8EAB\\u4EFD\\u8BA4\\u8BC1\\u4E0E\\u72B6\\u6001\\u7BA1\\u7406\",children:(0,l.jsx)(e.a,{href:\"#\\u4EC0\\u4E48\\u662F\\u8EAB\\u4EFD\\u8BA4\\u8BC1\\u4E0E\\u72B6\\u6001\\u7BA1\\u7406\",children:\"\\u4EC0\\u4E48\\u662F\\u8EAB\\u4EFD\\u8BA4\\u8BC1\\u4E0E\\u72B6\\u6001\\u7BA1\\u7406\\uFF1F\"})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u8EAB\\u4EFD\\u8BA4\\u8BC1\\u662F\\u9A8C\\u8BC1\\u7528\\u6237\\u8EAB\\u4EFD\\u7684\\u8FC7\\u7A0B\\uFF0C\\u4F8B\\u5982\\u767B\\u5F55\\u65F6\\u9A8C\\u8BC1\\u7528\\u6237\\u540D\\u548C\\u5BC6\\u7801\\u662F\\u5426\\u6B63\\u786E\\u3002\\u72B6\\u6001\\u7BA1\\u7406\\u5219\\u662F\\u5728\\u7528\\u6237\\u901A\\u8FC7\\u8BA4\\u8BC1\\u540E\\uFF0C\\u7EF4\\u6301\\u5176\\u4F1A\\u8BDD\\u72B6\\u6001\\uFF08\\u5982\\u201C\\u5DF2\\u767B\\u5F55\\u201D\\uFF09\\uFF0C\\u786E\\u4FDD\\u540E\\u7EED\\u8BF7\\u6C42\\u80FD\\u8BC6\\u522B\\u7528\\u6237\\u8EAB\\u4EFD\\u3002\"}),`\n`,(0,l.jsx)(e.p,{children:\"Web\\u7684\\u65E0\\u72B6\\u6001\\u7279\\u6027\\uFF08HTTP\\u534F\\u8BAE\\u672C\\u8EAB\\u4E0D\\u8BB0\\u5F55\\u8BF7\\u6C42\\u95F4\\u7684\\u72B6\\u6001\\uFF09\\u51B3\\u5B9A\\u4E86\\u6211\\u4EEC\\u9700\\u8981\\u989D\\u5916\\u7684\\u673A\\u5236\\u6765\\u5B9E\\u73B0\\u8FD9\\u4E24\\u8005\\u3002\\u5E38\\u89C1\\u7684\\u65B9\\u6848\\u5305\\u62EC\\uFF1A\"}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"Cookie + Session\"}),\"\\uFF1A\\u670D\\u52A1\\u5668\\u7AEF\\u5B58\\u50A8\\u4F1A\\u8BDD\\u72B6\\u6001\\u3002\"]}),`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"Token\\uFF08\\u5982JWT\\uFF09\"}),\"\\uFF1A\\u5BA2\\u6237\\u7AEF\\u5B58\\u50A8\\u8BA4\\u8BC1\\u4FE1\\u606F\\u3002\"]}),`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"OAuth/OpenID Connect\"}),\"\\uFF1A\\u7B2C\\u4E09\\u65B9\\u6388\\u6743\\u4E0E\\u8BA4\\u8BC1\\u3002\"]}),`\n`]}),`\n`,(0,l.jsx)(e.h2,{id:\"\\u4F20\\u7EDF\\u65B9\\u6848cookie--session\",children:(0,l.jsx)(e.a,{href:\"#\\u4F20\\u7EDF\\u65B9\\u6848cookie--session\",children:\"\\u4F20\\u7EDF\\u65B9\\u6848\\uFF1ACookie + Session\"})}),`\n`,(0,l.jsx)(e.h3,{id:\"\\u5DE5\\u4F5C\\u539F\\u7406\",children:(0,l.jsx)(e.a,{href:\"#\\u5DE5\\u4F5C\\u539F\\u7406\",children:\"\\u5DE5\\u4F5C\\u539F\\u7406\"})}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsxs)(e.li,{children:[\"\\u7528\\u6237\\u767B\\u5F55\\u65F6\\uFF0C\\u670D\\u52A1\\u5668\\u9A8C\\u8BC1\\u51ED\\u636E\\u540E\\u751F\\u6210\\u4E00\\u4E2A\\u552F\\u4E00\\u7684\",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"Session ID\"})})})}),\"\\u3002\"]}),`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"Session ID\"})})})}),\"\\u5B58\\u50A8\\u5728\\u670D\\u52A1\\u5668\\uFF08\\u5982\\u5185\\u5B58\\u3001\\u6570\\u636E\\u5E93\\u6216Redis\\uFF09\\uFF0C\\u5E76\\u901A\\u8FC7\",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"Set-Cookie\"})})})}),\"\\u5934\\u8FD4\\u56DE\\u7ED9\\u5BA2\\u6237\\u7AEF\\u3002\"]}),`\n`,(0,l.jsxs)(e.li,{children:[\"\\u5BA2\\u6237\\u7AEF\\u540E\\u7EED\\u8BF7\\u6C42\\u81EA\\u52A8\\u643A\\u5E26Cookie\\u4E2D\\u7684\",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"Session ID\"})})})}),\"\\uFF0C\\u670D\\u52A1\\u5668\\u636E\\u6B64\\u8BC6\\u522B\\u7528\\u6237\\u3002\"]}),`\n`]}),`\n`,(0,l.jsx)(e.h3,{id:\"\\u6E90\\u7801\\u5B9E\\u73B0nodejs--express\",children:(0,l.jsx)(e.a,{href:\"#\\u6E90\\u7801\\u5B9E\\u73B0nodejs--express\",children:\"\\u6E90\\u7801\\u5B9E\\u73B0\\uFF08Node.js + Express\\uFF09\"})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u4EE5\\u4E0B\\u662F\\u4E00\\u4E2A\\u7B80\\u5355\\u7684Cookie-Session\\u5B9E\\u73B0\\uFF1A\"}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" express\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" require\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'express'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" session\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" require\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'express-session'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" app\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" express\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u914D\\u7F6ESession\\u4E2D\\u95F4\\u4EF6\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"app.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"use\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"session\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  secret: \"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'my-secret-key'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u7528\\u4E8E\\u7B7E\\u540DCookie\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  resave: \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"false\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u4E0D\\u5F3A\\u5236\\u4FDD\\u5B58\\u672A\\u4FEE\\u6539\\u7684\\u4F1A\\u8BDD\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  saveUninitialized: \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"false\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u4E0D\\u4FDD\\u5B58\\u672A\\u521D\\u59CB\\u5316\\u7684\\u4F1A\\u8BDD\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  cookie: { maxAge: \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"24\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" *\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 60\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" *\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 60\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" *\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1000\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" } \"}),(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// Cookie\\u6709\\u6548\\u671F1\\u5929\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}));\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u767B\\u5F55\\u8DEF\\u7531\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"app.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"post\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'/login'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"req\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"res\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" { \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"username\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"password\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" } \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" req.body;\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  if\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (username \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"===\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" 'admin'\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" &&\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" password \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"===\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" '123456'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    req.session.user \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" { username }; \"}),(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u5728Session\\u4E2D\\u5B58\\u50A8\\u7528\\u6237\\u4FE1\\u606F\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    res.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"send\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u767B\\u5F55\\u6210\\u529F'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  } \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"else\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    res.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"status\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"401\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\").\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"send\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u767B\\u5F55\\u5931\\u8D25'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u53D7\\u4FDD\\u62A4\\u8DEF\\u7531\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"app.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"get\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'/profile'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"req\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"res\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  if\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (req.session.user) {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    res.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"send\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"`\\u6B22\\u8FCE, ${\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"req\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"session\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"user\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"username\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"}`\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  } \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"else\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    res.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"status\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"401\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\").\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"send\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u8BF7\\u5148\\u767B\\u5F55'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"app.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"listen\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"3000\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", () \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" console.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'Server running on port 3000'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"));\"})]})]})})}),`\n`,(0,l.jsx)(e.h3,{id:\"\\u6E90\\u7801\\u89E3\\u6790\",children:(0,l.jsx)(e.a,{href:\"#\\u6E90\\u7801\\u89E3\\u6790\",children:\"\\u6E90\\u7801\\u89E3\\u6790\"})}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"express-session\"})})})})}),\"\\uFF1A\\u901A\\u8FC7\\u751F\\u6210\\u4E00\\u4E2A\\u552F\\u4E00\\u7684\",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"Session ID\"})})})}),\"\\uFF08\\u5982\",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"sid\"})})})}),\"\\uFF09\\uFF0C\\u5E76\\u5C06\\u5176\\u5B58\\u50A8\\u5728\",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"req.session\"})})})}),\"\\u5BF9\\u8C61\\u4E2D\\u3002\",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"sid\"})})})}),\"\\u901A\\u8FC7Cookie\\u8FD4\\u56DE\\u5BA2\\u6237\\u7AEF\\u3002\"]}),`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"Cookie\\u7B7E\\u540D\"}),\"\\uFF1A\",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"secret\"})})})}),\"\\u7528\\u4E8E\\u5BF9Cookie\\u7B7E\\u540D\\uFF0C\\u9632\\u6B62\\u7BE1\\u6539\\u3002\\u7B7E\\u540D\\u540E\\u7684Cookie\\u683C\\u5F0F\\u7C7B\\u4F3C\\u4E8E\\uFF1A\",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"s:xxx.xxx\"})})})}),\"\\u3002\"]}),`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"\\u4F1A\\u8BDD\\u5B58\\u50A8\"}),\"\\uFF1A\\u9ED8\\u8BA4\\u5B58\\u50A8\\u5728\\u5185\\u5B58\\u4E2D\\uFF0C\\u53EF\\u914D\\u7F6E\\u4E3ARedis\\u7B49\\u5916\\u90E8\\u5B58\\u50A8\\u3002\"]}),`\n`]}),`\n`,(0,l.jsx)(e.h3,{id:\"\\u4F18\\u7F3A\\u70B9\",children:(0,l.jsx)(e.a,{href:\"#\\u4F18\\u7F3A\\u70B9\",children:\"\\u4F18\\u7F3A\\u70B9\"})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"\\u4F18\\u70B9\"}),\"\\uFF1A\"]}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsx)(e.li,{children:\"\\u670D\\u52A1\\u5668\\u7AEF\\u63A7\\u5236\\u4F1A\\u8BDD\\uFF0C\\u5B89\\u5168\\u6027\\u8F83\\u9AD8\\u3002\"}),`\n`,(0,l.jsx)(e.li,{children:\"\\u652F\\u6301\\u590D\\u6742\\u7684\\u72B6\\u6001\\u7BA1\\u7406\\uFF08\\u5982\\u8D2D\\u7269\\u8F66\\u6570\\u636E\\uFF09\\u3002\"}),`\n`]}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"\\u7F3A\\u70B9\"}),\"\\uFF1A\"]}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsx)(e.li,{children:\"\\u670D\\u52A1\\u5668\\u9700\\u5B58\\u50A8\\u6240\\u6709\\u4F1A\\u8BDD\\uFF0C\\u5185\\u5B58\\u6216\\u6570\\u636E\\u5E93\\u538B\\u529B\\u5927\\u3002\"}),`\n`,(0,l.jsx)(e.li,{children:\"\\u4E0D\\u9002\\u5408\\u5206\\u5E03\\u5F0F\\u7CFB\\u7EDF\\uFF0C\\u9664\\u975E\\u4F7F\\u7528\\u96C6\\u4E2D\\u5F0F\\u5B58\\u50A8\\uFF08\\u5982Redis\\uFF09\\u3002\"}),`\n`]}),`\n`,(0,l.jsx)(e.h2,{id:\"\\u73B0\\u4EE3\\u65B9\\u6848tokenjwt\",children:(0,l.jsx)(e.a,{href:\"#\\u73B0\\u4EE3\\u65B9\\u6848tokenjwt\",children:\"\\u73B0\\u4EE3\\u65B9\\u6848\\uFF1AToken\\uFF08JWT\\uFF09\"})}),`\n`,(0,l.jsx)(e.h3,{id:\"\\u5DE5\\u4F5C\\u539F\\u7406-1\",children:(0,l.jsx)(e.a,{href:\"#\\u5DE5\\u4F5C\\u539F\\u7406-1\",children:\"\\u5DE5\\u4F5C\\u539F\\u7406\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"JWT\\uFF08JSON Web Token\\uFF09\\u662F\\u4E00\\u79CD\\u65E0\\u72B6\\u6001\\u8BA4\\u8BC1\\u65B9\\u6848\\uFF0C\\u7531\\u4E09\\u90E8\\u5206\\u7EC4\\u6210\\uFF1A\",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"Header.Payload.Signature\"})})})}),\"\\uFF0C\\u7528\",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\".\"})})})}),\"\\u5206\\u9694\\u3002\"]}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsx)(e.li,{children:\"\\u7528\\u6237\\u767B\\u5F55\\u540E\\uFF0C\\u670D\\u52A1\\u5668\\u751F\\u6210JWT\\u5E76\\u8FD4\\u56DE\\u5BA2\\u6237\\u7AEF\\u3002\"}),`\n`,(0,l.jsxs)(e.li,{children:[\"\\u5BA2\\u6237\\u7AEF\\u5C06JWT\\u5B58\\u50A8\\uFF08\\u5982\",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"localStorage\"})})})}),\"\\u6216\",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"Cookie\"})})})}),\"\\uFF09\\uFF0C\\u540E\\u7EED\\u8BF7\\u6C42\\u5728\",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"Authorization\"})})})}),\"\\u5934\\u4E2D\\u643A\\u5E26\\u3002\"]}),`\n`,(0,l.jsx)(e.li,{children:\"\\u670D\\u52A1\\u5668\\u9A8C\\u8BC1JWT\\u7B7E\\u540D\\uFF0C\\u89E3\\u6790\\u51FA\\u7528\\u6237\\u4FE1\\u606F\\u3002\"}),`\n`]}),`\n`,(0,l.jsx)(e.h3,{id:\"\\u6E90\\u7801\\u5B9E\\u73B0nodejs--jsonwebtoken\",children:(0,l.jsx)(e.a,{href:\"#\\u6E90\\u7801\\u5B9E\\u73B0nodejs--jsonwebtoken\",children:\"\\u6E90\\u7801\\u5B9E\\u73B0\\uFF08Node.js + jsonwebtoken\\uFF09\"})}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" express\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" require\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'express'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" jwt\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" require\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'jsonwebtoken'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" app\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" express\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"app.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"use\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(express.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"json\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"());\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" SECRET_KEY\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" 'my-jwt-secret'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u767B\\u5F55\\u8DEF\\u7531\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"app.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"post\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'/login'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"req\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"res\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" { \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"username\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"password\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" } \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" req.body;\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  if\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (username \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"===\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" 'admin'\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" &&\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" password \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"===\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" '123456'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" token\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" jwt.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"sign\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"({ username }, \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"SECRET_KEY\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", { expiresIn: \"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'1h'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" });\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    res.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"json\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"({ token });\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  } \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"else\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    res.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"status\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"401\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\").\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"send\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u767B\\u5F55\\u5931\\u8D25'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u4E2D\\u95F4\\u4EF6\\uFF1A\\u9A8C\\u8BC1Token\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" authenticateToken\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"req\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"res\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"next\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" authHeader\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" req.headers[\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'authorization'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"];\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" token\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" authHeader \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"&&\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" authHeader.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"split\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"' '\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\")[\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"];\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  if\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"!\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"token) \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"return\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" res.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"status\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"401\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\").\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"send\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u65E0\\u8BBF\\u95EE\\u6743\\u9650'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  jwt.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"verify\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(token, \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"SECRET_KEY\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"err\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"user\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    if\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (err) \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"return\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" res.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"status\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"403\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\").\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"send\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'Token\\u65E0\\u6548'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    req.user \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" user;\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"    next\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  });\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"};\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u53D7\\u4FDD\\u62A4\\u8DEF\\u7531\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"app.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"get\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'/profile'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", authenticateToken, (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"req\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"res\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  res.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"send\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"`\\u6B22\\u8FCE, ${\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"req\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"user\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"username\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"}`\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"app.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"listen\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"3000\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", () \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" console.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'Server running on port 3000'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"));\"})]})]})})}),`\n`,(0,l.jsx)(e.h3,{id:\"\\u6E90\\u7801\\u89E3\\u6790-1\",children:(0,l.jsx)(e.a,{href:\"#\\u6E90\\u7801\\u89E3\\u6790-1\",children:\"\\u6E90\\u7801\\u89E3\\u6790\"})}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"jwt.sign\"})})})})}),\"\\uFF1A\\u751F\\u6210JWT\\uFF0C\\u5305\\u542B\\u5934\\u90E8\\uFF08\\u7B97\\u6CD5\\uFF09\\u3001\\u8F7D\\u8377\\uFF08\\u7528\\u6237\\u4FE1\\u606F\\uFF09\\u548C\\u7B7E\\u540D\\u3002\\u7B7E\\u540D\\u57FA\\u4E8E\",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"SECRET_KEY\"})})})}),\"\\u548CHMAC-SHA256\\u7B97\\u6CD5\\u3002\"]}),`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"jwt.verify\"})})})})}),\"\\uFF1A\\u9A8C\\u8BC1\\u7B7E\\u540D\\u662F\\u5426\\u6709\\u6548\\uFF0C\\u82E5\\u8FC7\\u671F\\u6216\\u88AB\\u7BE1\\u6539\\u5219\\u629B\\u51FA\\u9519\\u8BEF\\u3002\"]}),`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"Token\\u683C\\u5F0F\"}),\"\\uFF1A\\u5982\",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImFkbWluIiwiaWF0IjoxNjg...\"})})})}),\"\\uFF0C\\u53EF\\u901A\\u8FC7\",(0,l.jsx)(e.a,{href:\"https://jwt.io\",children:\"jwt.io\"}),\"\\u89E3\\u6790\\u3002\"]}),`\n`]}),`\n`,(0,l.jsx)(e.h3,{id:\"\\u4F18\\u7F3A\\u70B9-1\",children:(0,l.jsx)(e.a,{href:\"#\\u4F18\\u7F3A\\u70B9-1\",children:\"\\u4F18\\u7F3A\\u70B9\"})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"\\u4F18\\u70B9\"}),\"\\uFF1A\"]}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsx)(e.li,{children:\"\\u65E0\\u72B6\\u6001\\uFF0C\\u670D\\u52A1\\u5668\\u65E0\\u9700\\u5B58\\u50A8\\u4F1A\\u8BDD\\uFF0C\\u9002\\u5408\\u5206\\u5E03\\u5F0F\\u7CFB\\u7EDF\\u3002\"}),`\n`,(0,l.jsx)(e.li,{children:\"\\u53EF\\u8DE8\\u57DF\\u643A\\u5E26\\uFF0C\\u9002\\u7528\\u4E8E\\u524D\\u540E\\u7AEF\\u5206\\u79BB\\u3002\"}),`\n`]}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"\\u7F3A\\u70B9\"}),\"\\uFF1A\"]}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsx)(e.li,{children:\"Token\\u65E0\\u6CD5\\u4E3B\\u52A8\\u5931\\u6548\\uFF08\\u9700\\u501F\\u52A9\\u9ED1\\u540D\\u5355\\u673A\\u5236\\uFF09\\u3002\"}),`\n`,(0,l.jsx)(e.li,{children:\"\\u5B58\\u50A8\\u5728\\u5BA2\\u6237\\u7AEF\\uFF0C\\u6CC4\\u9732\\u98CE\\u9669\\u8F83\\u9AD8\\u3002\"}),`\n`]}),`\n`,(0,l.jsx)(e.h2,{id:\"oauth-20\\u7B2C\\u4E09\\u65B9\\u6388\\u6743\",children:(0,l.jsx)(e.a,{href:\"#oauth-20\\u7B2C\\u4E09\\u65B9\\u6388\\u6743\",children:\"OAuth 2.0\\uFF1A\\u7B2C\\u4E09\\u65B9\\u6388\\u6743\"})}),`\n`,(0,l.jsx)(e.h3,{id:\"\\u5DE5\\u4F5C\\u539F\\u7406-2\",children:(0,l.jsx)(e.a,{href:\"#\\u5DE5\\u4F5C\\u539F\\u7406-2\",children:\"\\u5DE5\\u4F5C\\u539F\\u7406\"})}),`\n`,(0,l.jsx)(e.p,{children:\"OAuth 2.0\\u662F\\u4E00\\u79CD\\u6388\\u6743\\u6846\\u67B6\\uFF0C\\u5E38\\u7528\\u4E8E\\u7B2C\\u4E09\\u65B9\\u767B\\u5F55\\uFF08\\u5982Google\\u3001GitHub\\uFF09\\u3002\\u6838\\u5FC3\\u6D41\\u7A0B\\uFF1A\"}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsx)(e.li,{children:\"\\u7528\\u6237\\u9009\\u62E9\\u901A\\u8FC7\\u7B2C\\u4E09\\u65B9\\u767B\\u5F55\\u3002\"}),`\n`,(0,l.jsxs)(e.li,{children:[\"\\u5E94\\u7528\\u8DF3\\u8F6C\\u5230\\u7B2C\\u4E09\\u65B9\\u6388\\u6743\\u9875\\u9762\\uFF0C\\u7528\\u6237\\u540C\\u610F\\u540E\\u8FD4\\u56DE\",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"Authorization Code\"})})})}),\"\\u3002\"]}),`\n`,(0,l.jsxs)(e.li,{children:[\"\\u5E94\\u7528\\u7528\",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"Code\"})})})}),\"\\u6362\\u53D6\",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"Access Token\"})})})}),\"\\uFF0C\\u518D\\u7528Token\\u83B7\\u53D6\\u7528\\u6237\\u4FE1\\u606F\\u3002\"]}),`\n`]}),`\n`,(0,l.jsx)(e.h3,{id:\"\\u6E90\\u7801\\u5B9E\\u73B0nodejs--passport\",children:(0,l.jsx)(e.a,{href:\"#\\u6E90\\u7801\\u5B9E\\u73B0nodejs--passport\",children:\"\\u6E90\\u7801\\u5B9E\\u73B0\\uFF08Node.js + Passport\\uFF09\"})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u4EE5\\u4E0B\\u4EE5GitHub\\u4E3A\\u4F8B\\uFF1A\"}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" express\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" require\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'express'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" passport\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" require\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'passport'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" GitHubStrategy\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" require\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'passport-github2'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\").Strategy;\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" app\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" express\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"passport.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"use\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"new\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" GitHubStrategy\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    clientID: \"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'YOUR_GITHUB_CLIENT_ID'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    clientSecret: \"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'YOUR_GITHUB_CLIENT_SECRET'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    callbackURL: \"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'http://localhost:3000/auth/github/callback'\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  },\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"accessToken\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"refreshToken\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"profile\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"done\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    return\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" done\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"null\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", profile); \"}),(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u5C06\\u7528\\u6237\\u4FE1\\u606F\\u4F20\\u9012\\u7ED9\\u540E\\u7EED\\u5904\\u7406\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"));\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"app.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"use\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(passport.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"initialize\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"());\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u53D1\\u8D77GitHub\\u6388\\u6743\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"app.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"get\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'/auth/github'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", passport.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"authenticate\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'github'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", { scope: [\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'user:email'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] }));\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u56DE\\u8C03\\u8DEF\\u7531\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"app.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"get\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'/auth/github/callback'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  passport.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"authenticate\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'github'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", { failureRedirect: \"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'/login'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" }),\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"req\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"res\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    res.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"redirect\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'/profile'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u53D7\\u4FDD\\u62A4\\u8DEF\\u7531\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"app.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"get\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'/profile'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"req\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"res\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  if\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (req.user) {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    res.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"send\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"`\\u6B22\\u8FCE, ${\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"req\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"user\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"displayName\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"}`\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  } \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"else\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    res.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"status\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"401\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\").\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"send\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u8BF7\\u5148\\u767B\\u5F55'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"app.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"listen\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"3000\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", () \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" console.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'Server running on port 3000'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"));\"})]})]})})}),`\n`,(0,l.jsx)(e.h3,{id:\"\\u6E90\\u7801\\u89E3\\u6790-2\",children:(0,l.jsx)(e.a,{href:\"#\\u6E90\\u7801\\u89E3\\u6790-2\",children:\"\\u6E90\\u7801\\u89E3\\u6790\"})}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"passport-github2\"})})})})}),\"\\uFF1A\\u5C01\\u88C5\\u4E86OAuth 2.0\\u6D41\\u7A0B\\uFF0C\\u81EA\\u52A8\\u5904\\u7406\\u6388\\u6743\\u7801\\u548CToken\\u4EA4\\u6362\\u3002\"]}),`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"accessToken\"})})})})}),\"\\uFF1A\\u7528\\u4E8E\\u8C03\\u7528GitHub API\\u83B7\\u53D6\\u7528\\u6237\\u4FE1\\u606F\\u3002\"]}),`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"\\u5B89\\u5168\\u6027\"}),\"\\uFF1A\\u4F9D\\u8D56HTTPS\\u548C\\u5BA2\\u6237\\u7AEF\\u5BC6\\u94A5\\uFF0C\\u786E\\u4FDD\\u901A\\u4FE1\\u5B89\\u5168\\u3002\"]}),`\n`]}),`\n`,(0,l.jsx)(e.h3,{id:\"\\u4F18\\u7F3A\\u70B9-2\",children:(0,l.jsx)(e.a,{href:\"#\\u4F18\\u7F3A\\u70B9-2\",children:\"\\u4F18\\u7F3A\\u70B9\"})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"\\u4F18\\u70B9\"}),\"\\uFF1A\"]}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsx)(e.li,{children:\"\\u501F\\u52A9\\u7B2C\\u4E09\\u65B9\\u4FE1\\u4EFB\\uFF0C\\u7B80\\u5316\\u7528\\u6237\\u6CE8\\u518C/\\u767B\\u5F55\\u3002\"}),`\n`,(0,l.jsx)(e.li,{children:\"\\u6807\\u51C6\\u534F\\u8BAE\\uFF0C\\u751F\\u6001\\u4E30\\u5BCC\\u3002\"}),`\n`]}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"\\u7F3A\\u70B9\"}),\"\\uFF1A\"]}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsx)(e.li,{children:\"\\u4F9D\\u8D56\\u7B2C\\u4E09\\u65B9\\u670D\\u52A1\\uFF0C\\u589E\\u52A0\\u5916\\u90E8\\u98CE\\u9669\\u3002\"}),`\n`,(0,l.jsx)(e.li,{children:\"\\u5B9E\\u73B0\\u590D\\u6742\\u5EA6\\u8F83\\u9AD8\\u3002\"}),`\n`]}),`\n`,(0,l.jsx)(e.h2,{id:\"\\u72B6\\u6001\\u7BA1\\u7406\\u8FDB\\u9636\\u524D\\u7AEF\\u4E0E\\u540E\\u7AEF\\u534F\\u4F5C\",children:(0,l.jsx)(e.a,{href:\"#\\u72B6\\u6001\\u7BA1\\u7406\\u8FDB\\u9636\\u524D\\u7AEF\\u4E0E\\u540E\\u7AEF\\u534F\\u4F5C\",children:\"\\u72B6\\u6001\\u7BA1\\u7406\\u8FDB\\u9636\\uFF1A\\u524D\\u7AEF\\u4E0E\\u540E\\u7AEF\\u534F\\u4F5C\"})}),`\n`,(0,l.jsx)(e.h3,{id:\"\\u524D\\u7AEF\\u72B6\\u6001\\u7BA1\\u7406\",children:(0,l.jsx)(e.a,{href:\"#\\u524D\\u7AEF\\u72B6\\u6001\\u7BA1\\u7406\",children:\"\\u524D\\u7AEF\\u72B6\\u6001\\u7BA1\\u7406\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u5728\\u524D\\u540E\\u7AEF\\u5206\\u79BB\\u7684\\u67B6\\u6784\\u4E2D\\uFF0C\\u524D\\u7AEF\\u901A\\u5E38\\u4F7F\\u7528\",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"Redux\"})})})}),\"\\u3001\",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"Vuex\"})})})}),\"\\u6216\",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"React Context\"})})})}),\"\\u7BA1\\u7406\\u72B6\\u6001\\u3002\\u4EE5JWT\\u4E3A\\u4F8B\\uFF0C\\u524D\\u7AEF\\u4EE3\\u7801\\u53EF\\u80FD\\u5982\\u4E0B\\uFF1A\"]}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// React + Context \\u793A\\u4F8B\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" React, { createContext, useContext, useState } \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" 'react'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" AuthContext\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" createContext\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" const\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" AuthProvider\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" ({ \"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"children\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" }) \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" [\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"token\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"setToken\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" useState\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(localStorage.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"getItem\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'token'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"||\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" null\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" login\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"newToken\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"    setToken\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(newToken);\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    localStorage.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"setItem\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'token'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", newToken);\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  };\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" logout\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"    setToken\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"null\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    localStorage.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"removeItem\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'token'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  };\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    <\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"AuthContext.Provider\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" value\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"{{ token, login, logout }}>\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"      {children}\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    </\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"AuthContext.Provider\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  );\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"};\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" const\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" useAuth\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" useContext\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(AuthContext);\"})]})]})})}),`\n`,(0,l.jsx)(e.h3,{id:\"\\u540E\\u7AEF\\u72B6\\u6001\\u7BA1\\u7406\",children:(0,l.jsx)(e.a,{href:\"#\\u540E\\u7AEF\\u72B6\\u6001\\u7BA1\\u7406\",children:\"\\u540E\\u7AEF\\u72B6\\u6001\\u7BA1\\u7406\"})}),`\n`,(0,l.jsx)(e.p,{children:\"\\u540E\\u7AEF\\u53EF\\u901A\\u8FC7Redis\\u5B58\\u50A8Token\\u9ED1\\u540D\\u5355\\uFF0C\\u89E3\\u51B3JWT\\u65E0\\u6CD5\\u4E3B\\u52A8\\u5931\\u6548\\u7684\\u95EE\\u9898\\uFF1A\"}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" redis\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" require\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'redis'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" client\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" redis.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"createClient\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" blacklistToken\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" async\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"token\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  await\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" client.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"set\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(token, \"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'blacklisted'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'EX'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"3600\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"); \"}),(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// 1\\u5C0F\\u65F6\\u8FC7\\u671F\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"};\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" isTokenBlacklisted\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" async\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"token\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" client.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"get\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(token) \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"===\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" 'blacklisted'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"};\"})})]})})}),`\n`,(0,l.jsx)(e.h2,{id:\"\\u603B\\u7ED3\\u4E0E\\u9009\\u62E9\\u5EFA\\u8BAE\",children:(0,l.jsx)(e.a,{href:\"#\\u603B\\u7ED3\\u4E0E\\u9009\\u62E9\\u5EFA\\u8BAE\",children:\"\\u603B\\u7ED3\\u4E0E\\u9009\\u62E9\\u5EFA\\u8BAE\"})}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"\\u5C0F\\u578B\\u5E94\\u7528\"}),\"\\uFF1ACookie + Session\\u7B80\\u5355\\u6613\\u7528\\u3002\"]}),`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"\\u524D\\u540E\\u7AEF\\u5206\\u79BB/\\u5206\\u5E03\\u5F0F\\u7CFB\\u7EDF\"}),\"\\uFF1AJWT\\u66F4\\u7075\\u6D3B\\u3002\"]}),`\n`,(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:\"\\u7B2C\\u4E09\\u65B9\\u767B\\u5F55\"}),\"\\uFF1AOAuth\\u662F\\u6700\\u4F73\\u9009\\u62E9\\u3002\"]}),`\n`]}),`\n`,(0,l.jsx)(e.p,{children:\"\\u8EAB\\u4EFD\\u8BA4\\u8BC1\\u4E0E\\u72B6\\u6001\\u7BA1\\u7406\\u6CA1\\u6709\\u201C\\u94F6\\u5F39\\u201D\\uFF0C\\u9700\\u6839\\u636E\\u4E1A\\u52A1\\u9700\\u6C42\\u6743\\u8861\\u5B89\\u5168\\u6027\\u3001\\u53EF\\u6269\\u5C55\\u6027\\u548C\\u5F00\\u53D1\\u6210\\u672C\\u3002\\u5E0C\\u671B\\u672C\\u6587\\u7684\\u6E90\\u7801\\u89E3\\u6790\\u80FD\\u4E3A\\u4F60\\u63D0\\u4F9B\\u5B9E\\u8DF5\\u53C2\\u8003\\uFF01\"}),`\n`,(0,l.jsx)(e.hr,{})]})}function h(n={}){let{wrapper:e}=n.components||{};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(t,{...n})}):t(n)}return C(x);})();\n;return Component;"
  },
  "_id": "前端技术/前端安全/聊聊Web身份认证与状态管理.mdx",
  "_raw": {
    "sourceFilePath": "前端技术/前端安全/聊聊Web身份认证与状态管理.mdx",
    "sourceFileName": "聊聊Web身份认证与状态管理.mdx",
    "sourceFileDir": "前端技术/前端安全",
    "contentType": "mdx",
    "flattenedPath": "前端技术/前端安全/聊聊Web身份认证与状态管理"
  },
  "type": "Post",
  "url": "/blog/前端技术/前端安全/聊聊Web身份认证与状态管理"
}