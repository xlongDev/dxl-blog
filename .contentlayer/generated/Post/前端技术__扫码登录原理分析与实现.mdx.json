{
  "title": "æ‰«ç ç™»å½•åŸç†åˆ†æä¸å®ç°",
  "date": "2023-12-17T00:00:00.000Z",
  "description": "æ·±å…¥æ¢è®¨æ‰«ç ç™»å½•çš„åŸç†ã€å®ç°ç»†èŠ‚åŠå…¶åœ¨ç°ä»£ Web å¼€å‘ä¸­çš„åº”ç”¨ï¼Œç‰¹åˆ«é€‚åˆå‰ç«¯å¼€å‘è€…é˜…è¯»ã€‚",
  "keywords": "æ‰«ç ç™»å½•, äºŒç»´ç , èº«ä»½éªŒè¯, å‰ç«¯å¼€å‘, ç§»åŠ¨ç«¯, å®‰å…¨æ€§, ç”¨æˆ·ä½“éªŒ, WebSocket, token",
  "author": "æ™“é¾™",
  "image": "/images/hero/qrcode-login.jpg",
  "tags": [
    "å‰ç«¯å¼€å‘",
    "èº«ä»½éªŒè¯",
    "ç§»åŠ¨å¼€å‘",
    "å®‰å…¨æ€§"
  ],
  "views": 0,
  "likes": 0,
  "category": "å‰ç«¯æŠ€æœ¯",
  "body": {
    "raw": "\nå—¨ï¼Œå„ä½å‰ç«¯å°ä¼™ä¼´ï¼ä»Šå¤©å’±ä»¬è¦èŠä¸€ä¸ªæ—¢é…·ç‚«åˆå®ç”¨çš„è¯é¢˜â€”â€”**æ‰«ç ç™»å½•**ã€‚ä½ æœ‰æ²¡æœ‰æƒ³è¿‡ï¼Œå½“ä½ åœ¨ PC ç«¯æ‰“å¼€ä¸€ä¸ªç™»å½•é¡µé¢ï¼Œæå‡ºæ‰‹æœºâ€œæ‰«ä¸€æ‰«â€ï¼Œç„¶åâ€œå—–â€çš„ä¸€å£°å°±ç™»å½•æˆåŠŸï¼Œè¿™èƒŒååˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿåˆ«æ€¥ï¼Œè¿™ç¯‡åšå®¢å°†å¸¦ä½ ä»é›¶åˆ°ä¸€ï¼Œå½»åº•æ‹†è§£æ‰«ç ç™»å½•çš„åŸç†å’Œå®ç°ç»†èŠ‚ã€‚ä¸ä»…æœ‰ç¡¬æ ¸çš„æŠ€æœ¯åˆ†æï¼Œè¿˜æœ‰æ¥åœ°æ°”çš„ä»£ç ç¤ºä¾‹å’Œæœ€ä½³å®è·µï¼Œä¿è¯è®©ä½ è¯»å®Œæ—¢æ¶¨çŸ¥è¯†åˆèƒ½åŠ¨æ‰‹å®è·µã€‚å‡†å¤‡å¥½äº†å—ï¼Ÿè®©æˆ‘ä»¬ä¸€èµ·è·³è¿›è¿™ä¸ªäºŒç»´ç çš„å¥‡å¦™ä¸–ç•Œå§ï¼ğŸš€\n\n---\n\n## å¼•è¨€ï¼šæ‰«ç ç™»å½•æ˜¯ä¸ªå•¥ï¼Ÿ\n\næƒ³è±¡ä¸€ä¸‹ï¼Œä½ åœ¨å’–å•¡é¦†ç”¨ç¬”è®°æœ¬æ‰“å¼€ä¸€ä¸ªç½‘ç«™ï¼Œç™»å½•æ—¶ä¸éœ€è¦æ•²ä¸€å †å¯†ç ï¼Œåªéœ€æå‡ºæ‰‹æœºæ‰«ä¸ªäºŒç»´ç ï¼Œä¸‹ä¸€ç§’å°±è¿›å…¥äº†ç³»ç»Ÿã€‚è¿™å°±æ˜¯æ‰«ç ç™»å½•çš„é­…åŠ›ï¼å®ƒæ˜¯ä¸€ç§åŸºäºäºŒç»´ç çš„èº«ä»½éªŒè¯æ–¹å¼ï¼Œå¹¿æ³›åº”ç”¨äºå¾®ä¿¡ã€æ”¯ä»˜å®ã€é’‰é’‰ç­‰åœºæ™¯ã€‚ç›¸æ¯”ä¼ ç»Ÿçš„ç”¨æˆ·åå¯†ç ç™»å½•ï¼Œæ‰«ç ç™»å½•ä¸ä»…çœå»äº†è®°å¿†å¯†ç çš„éº»çƒ¦ï¼Œè¿˜èƒ½å€ŸåŠ©ç§»åŠ¨ç«¯çš„å®‰å…¨æ€§æå‡æ•´ä½“ä½“éªŒã€‚\n\nä½œä¸ºå‰ç«¯å¼€å‘è€…ï¼Œä½ å¯èƒ½å·²ç»å¯¹è¡¨å•ç™»å½•é©¾è½»å°±ç†Ÿï¼Œä½†æ‰«ç ç™»å½•çš„è·¨è®¾å¤‡ç‰¹æ€§å¯èƒ½ä¼šè®©ä½ æœ‰ç‚¹æ‘¸ä¸ç€å¤´è„‘ã€‚åˆ«æ‹…å¿ƒï¼Œæˆ‘ä¼šç”¨æœ€ç›´ç™½çš„æ–¹å¼å¸¦ä½ ææ‡‚å®ƒçš„åŸç†ï¼Œå†é…ä¸Šä»£ç å’Œç±»æ¯”ï¼Œè®©ä½ ä¸ä»…â€œçŸ¥å…¶ç„¶â€ï¼Œè¿˜èƒ½â€œçŸ¥å…¶æ‰€ä»¥ç„¶â€ã€‚å‡†å¤‡å¥½ä½ çš„æ‰‹æœºå’Œé”®ç›˜ï¼Œå’±ä»¬å¼€å§‹å§ï¼ğŸ“±ğŸ’»\n\n---\n\n## æ‰«ç ç™»å½•çš„åŸºæœ¬åŸç†ï¼šä¸€åœºè·¨è®¾å¤‡çš„æ¥åŠ›èµ›\n\næ‰«ç ç™»å½•çš„æ ¸å¿ƒæ˜¯ç”¨äºŒç»´ç æ‰“é€š PC ç«¯å’Œç§»åŠ¨ç«¯ï¼Œå®ç°èº«ä»½éªŒè¯ã€‚æ•´ä¸ªè¿‡ç¨‹å°±åƒä¸€åœºæ¥åŠ›èµ›ï¼ŒPC ç«¯èµ·è·‘ï¼Œç§»åŠ¨ç«¯æ¥æ£’ï¼ŒæœåŠ¡å™¨åšè£åˆ¤ï¼Œæœ€åå®£å¸ƒèƒœåˆ©ã€‚ä»¥ä¸‹æ˜¯å®ƒçš„åŸºæœ¬æµç¨‹ï¼š\n\n1. **PC ç«¯å‘èµ·è¯·æ±‚**ï¼šä½ åœ¨ PC ç«¯æ‰“å¼€ç™»å½•é¡µé¢ï¼ŒæœåŠ¡å™¨ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„ tokenï¼ˆå¯ä»¥ç†è§£ä¸ºä¸€å¼ ä¸´æ—¶é€šè¡Œè¯ï¼‰ï¼Œç„¶åæŠŠè¿™ä¸ª token ç¼–ç æˆäºŒç»´ç æ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚\n2. **ç§»åŠ¨ç«¯æ‰«æäºŒç»´ç **ï¼šä½ ç”¨æ‰‹æœºä¸Šçš„åº”ç”¨æ‰«ä¸€ä¸‹äºŒç»´ç ï¼Œåº”ç”¨è§£æå‡ºé‡Œé¢çš„ tokenã€‚\n3. **ç§»åŠ¨ç«¯å‘é€è®¤è¯**ï¼šæ‰‹æœºæŠŠ token å’Œä½ çš„èº«ä»½ä¿¡æ¯ï¼ˆæ¯”å¦‚ç”¨æˆ· IDï¼‰æ‰“åŒ…å‘ç»™æœåŠ¡å™¨ï¼Œè¯´ï¼šâ€œå˜¿ï¼Œæˆ‘æ˜¯åˆæ³•ç”¨æˆ·ï¼Œå¿«è®©æˆ‘é€šè¿‡å§ï¼â€\n4. **æœåŠ¡å™¨éªŒè¯èº«ä»½**ï¼šæœåŠ¡å™¨æ”¶åˆ°åï¼Œæ£€æŸ¥ token æ˜¯å¦æœ‰æ•ˆï¼Œå†ç¡®è®¤ä½ çš„èº«ä»½æ²¡é—®é¢˜ã€‚\n5. **PC ç«¯ç™»å½•æˆåŠŸ**ï¼šæœåŠ¡å™¨ç‚¹å¤´åŒæ„ï¼ŒæŠŠç™»å½•çŠ¶æ€åŒæ­¥åˆ° PC ç«¯ï¼Œä½ å°±é¡ºåˆ©è¿›å…¥ç³»ç»Ÿäº†ã€‚\n\nç®€å•æ¥è¯´ï¼Œæ‰«ç ç™»å½•å°±åƒæ˜¯ PC ç«¯å¼€äº†ä¸€æ‰‡é—¨ï¼Œç§»åŠ¨ç«¯æ˜¯é’¥åŒ™ï¼Œé€šè¿‡äºŒç»´ç è¿™ä¸ªâ€œé—¨ç‰Œå·â€ï¼Œé’¥åŒ™æ‰¾åˆ°é—¨å¹¶æ‰“å¼€å®ƒã€‚ğŸ”‘ğŸšª è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œtoken æ˜¯æ ¸å¿ƒæ¡¥æ¢ï¼Œè¿æ¥äº†ä¸¤ç«¯ï¼Œç¡®ä¿å®‰å…¨åˆé«˜æ•ˆã€‚\n\n---\n\n## æŠ€æœ¯ç»†èŠ‚åˆ†æï¼šæ‹†å¼€äºŒç»´ç çš„â€œé»‘ç›’å­â€\n\nåŸç†å¬èµ·æ¥ç®€å•ï¼Œä½†å®ç°èµ·æ¥å¯ä¸å«ç³Šã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æŠŠæ¯ä¸ªæ­¥éª¤æ‹†å¼€ï¼Œæ·±å…¥çœ‹çœ‹é‡Œé¢çš„æŠ€æœ¯ç»†èŠ‚ã€‚\n\n### 1. äºŒç»´ç çš„ç”Ÿæˆï¼šä» token åˆ°â€œé»‘ç™½æ ¼å­â€\n\nåœ¨ PC ç«¯ï¼ŒæœåŠ¡å™¨é¦–å…ˆç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„ tokenã€‚è¿™ä¸ª token å¯ä»¥æ˜¯ä¸€ä¸ª UUIDï¼ˆé€šç”¨å”¯ä¸€æ ‡è¯†ç¬¦ï¼‰ï¼Œæ¯”å¦‚ `550e8400-e29b-41d4-a716-446655440000`ï¼Œç¡®ä¿å®ƒå…¨çƒç‹¬ä¸€æ— äºŒã€‚ç”Ÿæˆåï¼Œtoken è¢«ç¼–ç æˆäºŒç»´ç ï¼Œæ˜¾ç¤ºåœ¨é¡µé¢ä¸Šã€‚\n\nå‰ç«¯å¯ä»¥ç”¨ `qrcode.js` è¿™æ ·çš„åº“æ¥ç”ŸæˆäºŒç»´ç ï¼Œä»£ç ç®€å•åˆ°é£èµ·ï¼š\n\n```javascript\nimport QRCode from 'qrcode';\n\nconst generateQRCode = async () => {\n  const token = crypto.randomUUID(); // ç”Ÿæˆå”¯ä¸€ token\n  const qrCodeUrl = await QRCode.toDataURL(token); // è½¬æˆäºŒç»´ç å›¾ç‰‡\n  document.getElementById('qrcode').src = qrCodeUrl; // æ˜¾ç¤ºåœ¨é¡µé¢\n  return token; // ä¿å­˜ tokenï¼Œåé¢ç”¨å¾—ä¸Š\n};\n```\n\nğŸ’¡ **å°è´´å£«**ï¼šç”¨ `crypto.randomUUID()` ç”Ÿæˆ tokenï¼Œæ—¢ç®€å•åˆå®‰å…¨ï¼Œæ¯”è‡ªå·±æ‹¼éšæœºå­—ç¬¦ä¸²é è°±å¤šäº†ã€‚\n\nç”Ÿæˆçš„äºŒç»´ç æœ¬è´¨æ˜¯ä¸€ä¸ª URL æˆ–å­—ç¬¦ä¸²ï¼Œé‡Œé¢è—ç€ tokenï¼Œç­‰ç€ç§»åŠ¨ç«¯æ¥â€œè§£é”â€ã€‚\n\n### 2. ç§»åŠ¨ç«¯æ‰«æï¼šä»æ‘„åƒå¤´åˆ° token\n\nç§»åŠ¨ç«¯åº”ç”¨çš„æ‰«ç åŠŸèƒ½é çš„æ˜¯æ‘„åƒå¤´å’Œè§£æåº“ã€‚ä»¥ React Native ä¸ºä¾‹ï¼Œå¯ä»¥ç”¨ `react-native-qrcode-scanner` å¿«é€Ÿå®ç°ï¼š\n\n```jsx\nimport React from 'react';\nimport QRCodeScanner from 'react-native-qrcode-scanner';\n\nconst Scanner = () => {\n  const onSuccess = (e) => {\n    const token = e.data; // è§£æå‡º token\n    console.log('æ‰«æåˆ° token:', token);\n    // ä¸‹ä¸€æ­¥ï¼šå‘é€ç»™æœåŠ¡å™¨\n  };\n\n  return (\n    <QRCodeScanner\n      onRead={onSuccess}\n      topContent={<Text>æ‰«ä¸€æ‰«ï¼Œç™»å½• PC ç«¯</Text>}\n    />\n  );\n};\n```\n\næ‰«ææˆåŠŸåï¼Œåº”ç”¨æ‹¿åˆ° tokenï¼Œå°±åƒæ‹¿åˆ°äº†ä¸€å¼ â€œå…¥åœºåˆ¸â€ï¼Œæ¥ä¸‹æ¥è¦äº¤ç»™æœåŠ¡å™¨â€œéªŒç¥¨â€ã€‚\n\nğŸ’¡ **å°è´´å£«**ï¼šåˆ«å¿˜äº†åŠ ä¸ªæŒ¯åŠ¨æˆ–æç¤ºéŸ³ï¼Œå‘Šè¯‰ç”¨æˆ·æ‰«ææˆåŠŸï¼Œæå‡ä½“éªŒæ„Ÿã€‚\n\n### 3. ç§»åŠ¨ç«¯è¯·æ±‚ï¼šå¸¦ç€ token å»æ•²é—¨\n\næ‹¿åˆ° token åï¼Œç§»åŠ¨ç«¯è¦æŠŠ token å’Œç”¨æˆ·èº«ä»½ï¼ˆæ¯”å¦‚ `userId`ï¼‰å‘ç»™æœåŠ¡å™¨ã€‚è¿™ä¸ªè¯·æ±‚é€šå¸¸æ˜¯ HTTP POSTï¼Œå¸¦ä¸Š JSON æ•°æ®ï¼š\n\n```javascript\nconst loginWithQRCode = async (token, userId) => {\n  const response = await fetch('/api/login', {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify({ token, userId }),\n  });\n  const data = await response.json();\n  if (data.success) {\n    alert('ç™»å½•æˆåŠŸï¼Œå¿«å» PC ç«¯çœ‹çœ‹å§ï¼');\n  }\n};\n```\n\nè¿™é‡Œï¼Œ`userId` æ˜¯ç§»åŠ¨ç«¯åº”ç”¨çš„å·²ç™»å½•ç”¨æˆ·æ ‡è¯†ï¼Œtoken åˆ™æ˜¯ PC ç«¯ä¸´æ—¶ä¼šè¯çš„â€œé—¨ç‰Œå·â€ã€‚\n\nğŸ’¡ **å°è´´å£«**ï¼šå¯ä»¥åœ¨è¯·æ±‚ä¸­åŠ ä¸ªè®¾å¤‡æŒ‡çº¹ï¼ˆæ¯”å¦‚è®¾å¤‡å‹å·ï¼‰ï¼Œè®©æœåŠ¡å™¨å¤šä¸€å±‚æ ¡éªŒï¼Œé˜²ä½â€œå†’åé¡¶æ›¿â€ã€‚\n\n### 4. æœåŠ¡å™¨éªŒè¯ï¼šè£åˆ¤çš„ä¸¥æ ¼å®¡æŸ¥\n\næœåŠ¡å™¨æ¥åˆ°è¯·æ±‚åï¼Œå¼€å§‹â€œéªŒç¥¨â€æµç¨‹ï¼š\n- **æ£€æŸ¥ token**ï¼štoken æ˜¯å¦æœ‰æ•ˆï¼Ÿæœ‰æ²¡æœ‰è¿‡æœŸï¼Ÿæ˜¯ä¸æ˜¯è‡ªå·±å‘çš„ï¼Ÿ\n- **éªŒè¯ç”¨æˆ·**ï¼š`userId` æ˜¯å¦åˆæ³•ï¼Ÿæ˜¯ä¸æ˜¯æ³¨å†Œç”¨æˆ·ï¼Ÿ\n- **å…³è”ä¼šè¯**ï¼šç¡®è®¤æ— è¯¯åï¼Œç”Ÿæˆæ–°çš„ä¼šè¯ IDï¼Œç»‘å®šåˆ° PC ç«¯ã€‚\n\nç”¨ Node.js å’Œ Express å®ç°ä¸€ä¸ªç®€ç‰ˆ APIï¼š\n\n```javascript\nconst express = require('express');\nconst app = express();\napp.use(express.json());\n\nconst sessions = {}; // ä¸´æ—¶å­˜å‚¨ token å’Œä¼šè¯\n\napp.get('/api/generate-token', (req, res) => {\n  const token = crypto.randomUUID();\n  const sessionId = `session_${Date.now()}`;\n  sessions[token] = { sessionId, expires: Date.now() + 5 * 60 * 1000 }; // 5 åˆ†é’Ÿæœ‰æ•ˆ\n  res.json({ token });\n});\n\napp.post('/api/login', (req, res) => {\n  const { token, userId } = req.body;\n  const session = sessions[token];\n  if (session && session.expires > Date.now()) {\n    if (isValidUser(userId)) { // å‡è®¾æœ‰ä¸ªå‡½æ•°éªŒè¯ç”¨æˆ·\n      const newSessionId = `session_${Date.now()}`;\n      associateSessionWithUser(newSessionId, userId); // ç»‘å®šç”¨æˆ·å’Œä¼šè¯\n      notifyPC(session.sessionId, newSessionId); // é€šçŸ¥ PC\n      delete sessions[token]; // token ä¸€æ¬¡ç”¨å®Œå°±ä¸¢\n      res.json({ success: true });\n    } else {\n      res.json({ success: false, message: 'ç”¨æˆ·ä¸åˆæ³•' });\n    }\n  } else {\n    res.json({ success: false, message: 'token å·²è¿‡æœŸæˆ–æ— æ•ˆ' });\n  }\n});\n\napp.listen(3000, () => console.log('æœåŠ¡å™¨å¯åŠ¨å•¦ï¼'));\n```\n\nğŸ’¡ **å°è´´å£«**ï¼štoken ç”¨å®Œå°±åˆ ï¼Œè®¾ç½®æˆä¸€æ¬¡æ€§é—¨ç¥¨ï¼Œé˜²æ­¢åˆ«äººæ¡åˆ°é‡å¤ä½¿ç”¨ã€‚\n\n### 5. é€šçŸ¥ PC ç«¯ï¼šç™»å½•æˆåŠŸçš„â€œç»¿ç¯â€\n\næœåŠ¡å™¨éªŒè¯é€šè¿‡åï¼Œè¦å‘Šè¯‰ PC ç«¯â€œä½ å¯ä»¥è¿›æ¥äº†â€ã€‚å¯ä»¥ç”¨ WebSocket å®ç°å®æ—¶é€šçŸ¥ï¼š\n\n```javascript\nconst socket = new WebSocket('ws://example.com/ws');\n\nsocket.onmessage = (event) => {\n  const data = JSON.parse(event.data);\n  if (data.type === 'login_success') {\n    document.cookie = `session_id=${data.sessionId}; HttpOnly; Secure`;\n    window.location.href = '/dashboard'; // è·³è½¬åˆ°ä¸»é¡µ\n  }\n};\n```\n\næˆ–è€…ç”¨è½®è¯¢ä»£æ›¿ WebSocketï¼š\n\n```javascript\nconst checkLoginStatus = async (token) => {\n  const interval = setInterval(async () => {\n    const res = await fetch(`/api/check-login?token=${token}`);\n    const data = await res.json();\n    if (data.success) {\n      document.cookie = `session_id=${data.sessionId}`;\n      window.location.href = '/dashboard';\n      clearInterval(interval);\n    }\n  }, 1000); // æ¯ç§’æŸ¥ä¸€æ¬¡\n};\n```\n\nğŸ’¡ **å°è´´å£«**ï¼šWebSocket æ¯”è½®è¯¢æ›´ä¼˜é›…ï¼Œä½†å¦‚æœé¡¹ç›®ç®€å•ï¼Œè½®è¯¢ä¹Ÿèƒ½å‡‘åˆç”¨ã€‚\n\n---\n\n## ä»£ç ç¤ºä¾‹ï¼šä»é›¶æ­å»ºä¸€ä¸ªæ‰«ç ç™»å½•\n\nç†è®ºè®²å®Œï¼Œå’±ä»¬æ¥ç‚¹çœŸå®¶ä¼™ï¼ä¸‹é¢æ˜¯ä¸€ä¸ªç®€åŒ–çš„å®ç°ï¼Œæ¶µç›– PC ç«¯ã€ç§»åŠ¨ç«¯å’ŒæœåŠ¡å™¨ç«¯ã€‚\n\n### PC ç«¯ï¼šæ˜¾ç¤ºäºŒç»´ç  + ç›‘å¬ç™»å½•\n\n```javascript\nimport QRCode from 'qrcode';\n\nconst LoginPage = () => {\n  const [qrCodeUrl, setQrCodeUrl] = useState('');\n\n  useEffect(() => {\n    fetch('/api/generate-token')\n      .then(res => res.json())\n      .then(async ({ token }) => {\n        const url = await QRCode.toDataURL(token);\n        setQrCodeUrl(url);\n        checkLoginStatus(token); // å¼€å§‹è½®è¯¢\n      });\n  }, []);\n\n  const checkLoginStatus = (token) => {\n    const interval = setInterval(async () => {\n      const res = await fetch(`/api/check-login?token=${token}`);\n      const data = await res.json();\n      if (data.success) {\n        document.cookie = `session_id=${data.sessionId}`;\n        window.location.href = '/dashboard';\n        clearInterval(interval);\n      }\n    }, 1000);\n  };\n\n  return <img src={qrCodeUrl} alt=\"æ‰«æç™»å½•\" />;\n};\n```\n\n### ç§»åŠ¨ç«¯ï¼šæ‰«æå¹¶ç™»å½•\n\n```jsx\nimport QRCodeScanner from 'react-native-qrcode-scanner';\n\nconst Scanner = () => {\n  const userId = 'user001'; // å‡è®¾å·²ç™»å½•ç”¨æˆ·\n\n  const onSuccess = async (e) => {\n    const token = e.data;\n    const res = await fetch('/api/login', {\n      method: 'POST',\n      body: JSON.stringify({ token, userId }),\n    });\n    const data = await res.json();\n    if (data.success) {\n      alert('ç™»å½•æˆåŠŸï¼Œå¿«å» PC ç«¯çˆ½ä¸€æŠŠï¼');\n    }\n  };\n\n  return (\n    <QRCodeScanner\n      onRead={onSuccess}\n      topContent={<Text>æ‰«ç ç™»å½• PC ç«¯</Text>}\n    />\n  );\n};\n```\n\n### æœåŠ¡å™¨ç«¯ï¼šæ ¸å¿ƒé€»è¾‘\n\n```javascript\nconst express = require('express');\nconst app = express();\napp.use(express.json());\n\nconst sessions = {};\nconst users = { user001: true }; // æ¨¡æ‹Ÿç”¨æˆ·æ•°æ®åº“\n\napp.get('/api/generate-token', (req, res) => {\n  const token = crypto.randomUUID();\n  const sessionId = `session_${Date.now()}`;\n  sessions[token] = { sessionId, expires: Date.now() + 5 * 60 * 1000 };\n  res.json({ token });\n});\n\napp.post('/api/login', (req, res) => {\n  const { token, userId } = req.body;\n  const session = sessions[token];\n  if (session && session.expires > Date.now()) {\n    if (users[userId]) {\n      const newSessionId = `session_${Date.now()}`;\n      sessions[newSessionId] = { userId }; // ä¿å­˜æ–°ä¼šè¯\n      sessions[token].newSessionId = newSessionId; // æ ‡è®°ç™»å½•æˆåŠŸ\n      delete sessions[token].expires; // æ¸…ç†è¿‡æœŸæ—¶é—´\n      res.json({ success: true });\n    }\n  } else {\n    res.json({ success: false });\n  }\n});\n\napp.get('/api/check-login', (req, res) => {\n  const { token } = req.query;\n  const session = sessions[token];\n  if (session && session.newSessionId) {\n    res.json({ success: true, sessionId: session.newSessionId });\n    delete sessions[token]; // æ¸…ç†ä¸´æ—¶æ•°æ®\n  } else {\n    res.json({ success: false });\n  }\n});\n\napp.listen(3000);\n```\n\nè¿è¡Œè¿™æ®µä»£ç ï¼Œä½ å°±èƒ½ä½“éªŒä¸€ä¸ªç®€æ˜“ç‰ˆçš„æ‰«ç ç™»å½•äº†ï¼æ˜¯ä¸æ˜¯æœ‰ç‚¹æˆå°±æ„Ÿï¼ŸğŸ˜\n\n---\n\n## å®‰å…¨æ€§å’Œç”¨æˆ·ä½“éªŒä¼˜åŒ–ï¼šè®©æ‰«ç ç™»å½•æ›´é è°±\n\n### å®‰å…¨æ€§ï¼šåˆ«è®©â€œåäººâ€é’»ç©ºå­\n\n- **HTTPS**ï¼šå…¨ç¨‹åŠ å¯†ï¼Œé˜²æ­¢ token è¢«å·å¬ã€‚\n- **çŸ­å‘½ token**ï¼š5 åˆ†é’Ÿè¿‡æœŸï¼Œè¿‡æœŸå°±ä½œåºŸã€‚\n- **ä¸€æ¬¡æ€§ token**ï¼šç”¨å®Œå³åˆ ï¼Œæœç»é‡æ”¾æ”»å‡»ã€‚\n- **è®¾å¤‡æ ¡éªŒ**ï¼šç§»åŠ¨ç«¯åŠ ä¸ªè®¾å¤‡æ ‡è¯†ï¼ŒæœåŠ¡å™¨å¤šé—®ä¸€å¥â€œä½ æ˜¯è°çš„æ‰‹æœºï¼Ÿâ€ã€‚\n\nğŸ’¡ **å°è´´å£«**ï¼šå¯ä»¥ç”¨ JWT åš tokenï¼Œå¸¦ä¸Šç­¾åï¼ŒæœåŠ¡å™¨éªŒç­¾åå†ä¿¡ä»»ã€‚\n\n### ç”¨æˆ·ä½“éªŒï¼šåˆ«è®©ç”¨æˆ·ç­‰çƒ¦äº†\n\n- **å®æ—¶é€šçŸ¥**ï¼šWebSocket æ¨é€ç™»å½•çŠ¶æ€ï¼Œç§’çº§å“åº”ã€‚\n- **è½®è¯¢å¤‡èƒ**ï¼šæ²¡æ¡ä»¶ç”¨ WebSocketï¼Œè½®è¯¢ä¹Ÿè¡Œï¼Œä½†åˆ«å¤ªé¢‘ç¹ï¼Œ1-2 ç§’ä¸€æ¬¡å°±å¤Ÿã€‚\n- **æ‰«ç å¼•å¯¼**ï¼šé¡µé¢ä¸ŠåŠ ä¸ªâ€œè¯·ç”¨ XX åº”ç”¨æ‰«æâ€çš„æç¤ºï¼Œåˆ«è®©ç”¨æˆ·ä¸€è„¸æ‡µã€‚\n\nğŸ’¡ **å°è´´å£«**ï¼šPC ç«¯åŠ ä¸ªäºŒç»´ç åˆ·æ–°æŒ‰é’®ï¼Œä¸‡ä¸€è¿‡æœŸï¼Œç”¨æˆ·è‡ªå·±ç‚¹ä¸€ä¸‹å°±è¡Œã€‚\n\n---\n\n## æœ€ä½³å®è·µï¼šå¼€å‘æ‰«ç ç™»å½•çš„â€œè‘µèŠ±å®å…¸â€\n\n1. **token ç”Ÿæˆè¦éšæœº**ï¼šç”¨ `crypto.randomUUID()` æˆ–ç±»ä¼¼ç®—æ³•ï¼Œåˆ«ç”¨ `Math.random()`ï¼Œä¸ç„¶å®¹æ˜“è¢«çŒœã€‚\n   - ğŸ’¡ **å°è´´å£«**ï¼šåŠ ä¸ªæ—¶é—´æˆ³æ··æ·†ï¼Œä¼ªè£…å¾—æ›´å¤æ‚ã€‚\n2. **token å­˜å†…å­˜**ï¼šç”¨ Redis æˆ–å†…å­˜å¯¹è±¡å­˜ tokenï¼Œåˆ«å†™æ•°æ®åº“ï¼Œé€Ÿåº¦å¿«åˆå®‰å…¨ã€‚\n   - ğŸ’¡ **å°è´´å£«**ï¼šRedis è¿˜èƒ½è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œçœå¾—è‡ªå·±ç®—ã€‚\n3. **é”™è¯¯è¦å‹å¥½**ï¼štoken è¿‡æœŸã€ç½‘ç»œæ–­å¼€ï¼Œéƒ½ç»™ç”¨æˆ·ä¸ªæ¸…æ™°æç¤ºï¼Œåˆ«è®©ä»–ä»¬ççŒœã€‚\n   - ğŸ’¡ **å°è´´å£«**ï¼šåŠ ä¸ªâ€œé‡æ–°æ‰«ç â€æŒ‰é’®ï¼Œæ•‘æ€¥ç”¨ã€‚\n4. **è·¨åŸŸè¦æå®š**ï¼šPC å’Œç§»åŠ¨ç«¯åŸŸåä¸åŒï¼ŸCORS é…ç½®å¥½ï¼Œåˆ«å¡åœ¨åŠè·¯ã€‚\n   - ğŸ’¡ **å°è´´å£«**ï¼šç”¨ä»£ç†è°ƒè¯•ï¼Œçœå¾—æœ¬åœ°è·¨åŸŸå¤´ç–¼ã€‚\n5. **cookie è¦å®‰å…¨**ï¼šPC ç«¯å­˜ session æ—¶ï¼Œè®¾ `HttpOnly` å’Œ `Secure`ï¼Œé˜² XSS å’Œå—…æ¢ã€‚\n   - ğŸ’¡ **å°è´´å£«**ï¼šåŠ ä¸ª `SameSite=Strict`ï¼Œå†åŠ ä¸€é‡ä¿é™©ã€‚\n\n---\n\n## æ€»ç»“ï¼šæ‰«ç ç™»å½•çš„â€œç”œâ€ä¸â€œå’¸â€\n\næ‰«ç ç™»å½•å°±åƒä¸€æ¯åŠ äº†ç›çš„å’–å•¡ï¼Œç”œå¤´å’Œå’¸å‘³éƒ½å¾—å°å°ï¼š\n\n**ç”œå¤´ï¼ˆä¼˜ç‚¹ï¼‰**ï¼š\n- **è¶…æ–¹ä¾¿**ï¼šæ‰«ä¸€ä¸‹å°±è¡Œï¼Œè°è¿˜æƒ³è¾“å¯†ç ï¼Ÿ\n- **å®‰å…¨æ€§é«˜**ï¼šæ‰‹æœºè®¤è¯åŠ æŒï¼Œæ¯”çº¯å¯†ç ç¡¬æ ¸ã€‚\n- **è·¨è®¾å¤‡çˆ½**ï¼šPC å’Œç§»åŠ¨ç«¯æ— ç¼åˆ‡æ¢ï¼Œæœªæ¥æ„Ÿæ»¡æ»¡ã€‚\n\n**å’¸å‘³ï¼ˆç¼ºç‚¹ï¼‰**ï¼š\n- **ä¾èµ–æ‰‹æœº**ï¼šæ²¡ç”µæ²¡ç½‘å°±æ­‡èœã€‚\n- **å¼€å‘éº»çƒ¦**ï¼šå‰åç«¯å¾—è”æ‰‹ï¼Œå•å¹²å¯ä¸è¡Œã€‚\n- **å°ä¼—åœºæ™¯å°´å°¬**ï¼šæ²¡è£… App çš„ç”¨æˆ·åªèƒ½å¹²çªçœ¼ã€‚\n\næ€»çš„æ¥è¯´ï¼Œæ‰«ç ç™»å½•æ˜¯ç§»åŠ¨äº’è”ç½‘æ—¶ä»£çš„â€œæ–°å® å„¿â€ï¼Œå°¤å…¶é€‚åˆæœ‰ç§»åŠ¨ç«¯ç”Ÿæ€çš„åº”ç”¨ã€‚å¸Œæœ›è¿™ç¯‡åšå®¢èƒ½å¸®ä½ åœ¨ä¸‹ä¸€ä¸ªé¡¹ç›®é‡Œç©è½¬æ‰«ç ç™»å½•ï¼Œè®©ç”¨æˆ·æƒŠå‘¼ï¼šâ€œå“‡ï¼Œè¿™ä¹Ÿå¤ªæ–¹ä¾¿äº†å§ï¼â€ğŸ‰\n\nå†™åˆ°è¿™å„¿ï¼Œæ‰‹éƒ½é…¸äº†ï¼Œä½†èƒ½æŠŠæ‰«ç ç™»å½•è®²é€ï¼Œæˆ‘è§‰å¾—å€¼äº†ï¼ä½ è§‰å¾—å’‹æ ·ï¼Ÿæœ‰ä»€ä¹ˆæƒ³èŠçš„ï¼Œè¯„è®ºåŒºè§ï¼ğŸ‘‡\n\n---",
    "code": "var Component=(()=>{var p=Object.create;var c=Object.defineProperty;var E=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var F=Object.getPrototypeOf,B=Object.prototype.hasOwnProperty;var g=(e,l)=>()=>(l||e((l={exports:{}}).exports,l),l.exports),u=(e,l)=>{for(var r in l)c(e,r,{get:l[r],enumerable:!0})},a=(e,l,r,o)=>{if(l&&typeof l==\"object\"||typeof l==\"function\")for(let s of y(l))!B.call(e,s)&&s!==r&&c(e,s,{get:()=>l[s],enumerable:!(o=E(l,s))||o.enumerable});return e};var k=(e,l,r)=>(r=e!=null?p(F(e)):{},a(l||!e||!e.__esModule?c(r,\"default\",{value:e,enumerable:!0}):r,e)),C=e=>a(c({},\"__esModule\",{value:!0}),e);var i=g((I,d)=>{d.exports=_jsx_runtime});var m={};u(m,{default:()=>h,frontmatter:()=>f});var n=k(i()),f={type:\"Post\",title:\"\\u626B\\u7801\\u767B\\u5F55\\u539F\\u7406\\u5206\\u6790\\u4E0E\\u5B9E\\u73B0\",date:\"2023-12-17\",description:\"\\u6DF1\\u5165\\u63A2\\u8BA8\\u626B\\u7801\\u767B\\u5F55\\u7684\\u539F\\u7406\\u3001\\u5B9E\\u73B0\\u7EC6\\u8282\\u53CA\\u5176\\u5728\\u73B0\\u4EE3 Web \\u5F00\\u53D1\\u4E2D\\u7684\\u5E94\\u7528\\uFF0C\\u7279\\u522B\\u9002\\u5408\\u524D\\u7AEF\\u5F00\\u53D1\\u8005\\u9605\\u8BFB\\u3002\",keywords:\"\\u626B\\u7801\\u767B\\u5F55, \\u4E8C\\u7EF4\\u7801, \\u8EAB\\u4EFD\\u9A8C\\u8BC1, \\u524D\\u7AEF\\u5F00\\u53D1, \\u79FB\\u52A8\\u7AEF, \\u5B89\\u5168\\u6027, \\u7528\\u6237\\u4F53\\u9A8C, WebSocket, token\",author:\"\\u6653\\u9F99\",image:\"/images/hero/qrcode-login.jpg\",tags:[\"\\u524D\\u7AEF\\u5F00\\u53D1\",\"\\u8EAB\\u4EFD\\u9A8C\\u8BC1\",\"\\u79FB\\u52A8\\u5F00\\u53D1\",\"\\u5B89\\u5168\\u6027\"],category:\"\\u524D\\u7AEF\\u6280\\u672F\"};function t(e){let l={a:\"a\",code:\"code\",figure:\"figure\",h2:\"h2\",h3:\"h3\",hr:\"hr\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.p,{children:[\"\\u55E8\\uFF0C\\u5404\\u4F4D\\u524D\\u7AEF\\u5C0F\\u4F19\\u4F34\\uFF01\\u4ECA\\u5929\\u54B1\\u4EEC\\u8981\\u804A\\u4E00\\u4E2A\\u65E2\\u9177\\u70AB\\u53C8\\u5B9E\\u7528\\u7684\\u8BDD\\u9898\\u2014\\u2014\",(0,n.jsx)(l.strong,{children:\"\\u626B\\u7801\\u767B\\u5F55\"}),\"\\u3002\\u4F60\\u6709\\u6CA1\\u6709\\u60F3\\u8FC7\\uFF0C\\u5F53\\u4F60\\u5728 PC \\u7AEF\\u6253\\u5F00\\u4E00\\u4E2A\\u767B\\u5F55\\u9875\\u9762\\uFF0C\\u638F\\u51FA\\u624B\\u673A\\u201C\\u626B\\u4E00\\u626B\\u201D\\uFF0C\\u7136\\u540E\\u201C\\u55D6\\u201D\\u7684\\u4E00\\u58F0\\u5C31\\u767B\\u5F55\\u6210\\u529F\\uFF0C\\u8FD9\\u80CC\\u540E\\u5230\\u5E95\\u53D1\\u751F\\u4E86\\u4EC0\\u4E48\\uFF1F\\u522B\\u6025\\uFF0C\\u8FD9\\u7BC7\\u535A\\u5BA2\\u5C06\\u5E26\\u4F60\\u4ECE\\u96F6\\u5230\\u4E00\\uFF0C\\u5F7B\\u5E95\\u62C6\\u89E3\\u626B\\u7801\\u767B\\u5F55\\u7684\\u539F\\u7406\\u548C\\u5B9E\\u73B0\\u7EC6\\u8282\\u3002\\u4E0D\\u4EC5\\u6709\\u786C\\u6838\\u7684\\u6280\\u672F\\u5206\\u6790\\uFF0C\\u8FD8\\u6709\\u63A5\\u5730\\u6C14\\u7684\\u4EE3\\u7801\\u793A\\u4F8B\\u548C\\u6700\\u4F73\\u5B9E\\u8DF5\\uFF0C\\u4FDD\\u8BC1\\u8BA9\\u4F60\\u8BFB\\u5B8C\\u65E2\\u6DA8\\u77E5\\u8BC6\\u53C8\\u80FD\\u52A8\\u624B\\u5B9E\\u8DF5\\u3002\\u51C6\\u5907\\u597D\\u4E86\\u5417\\uFF1F\\u8BA9\\u6211\\u4EEC\\u4E00\\u8D77\\u8DF3\\u8FDB\\u8FD9\\u4E2A\\u4E8C\\u7EF4\\u7801\\u7684\\u5947\\u5999\\u4E16\\u754C\\u5427\\uFF01\\u{1F680}\"]}),`\n`,(0,n.jsx)(l.hr,{}),`\n`,(0,n.jsx)(l.h2,{id:\"\\u5F15\\u8A00\\u626B\\u7801\\u767B\\u5F55\\u662F\\u4E2A\\u5565\",children:(0,n.jsx)(l.a,{href:\"#\\u5F15\\u8A00\\u626B\\u7801\\u767B\\u5F55\\u662F\\u4E2A\\u5565\",children:\"\\u5F15\\u8A00\\uFF1A\\u626B\\u7801\\u767B\\u5F55\\u662F\\u4E2A\\u5565\\uFF1F\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u60F3\\u8C61\\u4E00\\u4E0B\\uFF0C\\u4F60\\u5728\\u5496\\u5561\\u9986\\u7528\\u7B14\\u8BB0\\u672C\\u6253\\u5F00\\u4E00\\u4E2A\\u7F51\\u7AD9\\uFF0C\\u767B\\u5F55\\u65F6\\u4E0D\\u9700\\u8981\\u6572\\u4E00\\u5806\\u5BC6\\u7801\\uFF0C\\u53EA\\u9700\\u638F\\u51FA\\u624B\\u673A\\u626B\\u4E2A\\u4E8C\\u7EF4\\u7801\\uFF0C\\u4E0B\\u4E00\\u79D2\\u5C31\\u8FDB\\u5165\\u4E86\\u7CFB\\u7EDF\\u3002\\u8FD9\\u5C31\\u662F\\u626B\\u7801\\u767B\\u5F55\\u7684\\u9B45\\u529B\\uFF01\\u5B83\\u662F\\u4E00\\u79CD\\u57FA\\u4E8E\\u4E8C\\u7EF4\\u7801\\u7684\\u8EAB\\u4EFD\\u9A8C\\u8BC1\\u65B9\\u5F0F\\uFF0C\\u5E7F\\u6CDB\\u5E94\\u7528\\u4E8E\\u5FAE\\u4FE1\\u3001\\u652F\\u4ED8\\u5B9D\\u3001\\u9489\\u9489\\u7B49\\u573A\\u666F\\u3002\\u76F8\\u6BD4\\u4F20\\u7EDF\\u7684\\u7528\\u6237\\u540D\\u5BC6\\u7801\\u767B\\u5F55\\uFF0C\\u626B\\u7801\\u767B\\u5F55\\u4E0D\\u4EC5\\u7701\\u53BB\\u4E86\\u8BB0\\u5FC6\\u5BC6\\u7801\\u7684\\u9EBB\\u70E6\\uFF0C\\u8FD8\\u80FD\\u501F\\u52A9\\u79FB\\u52A8\\u7AEF\\u7684\\u5B89\\u5168\\u6027\\u63D0\\u5347\\u6574\\u4F53\\u4F53\\u9A8C\\u3002\"}),`\n`,(0,n.jsx)(l.p,{children:\"\\u4F5C\\u4E3A\\u524D\\u7AEF\\u5F00\\u53D1\\u8005\\uFF0C\\u4F60\\u53EF\\u80FD\\u5DF2\\u7ECF\\u5BF9\\u8868\\u5355\\u767B\\u5F55\\u9A7E\\u8F7B\\u5C31\\u719F\\uFF0C\\u4F46\\u626B\\u7801\\u767B\\u5F55\\u7684\\u8DE8\\u8BBE\\u5907\\u7279\\u6027\\u53EF\\u80FD\\u4F1A\\u8BA9\\u4F60\\u6709\\u70B9\\u6478\\u4E0D\\u7740\\u5934\\u8111\\u3002\\u522B\\u62C5\\u5FC3\\uFF0C\\u6211\\u4F1A\\u7528\\u6700\\u76F4\\u767D\\u7684\\u65B9\\u5F0F\\u5E26\\u4F60\\u641E\\u61C2\\u5B83\\u7684\\u539F\\u7406\\uFF0C\\u518D\\u914D\\u4E0A\\u4EE3\\u7801\\u548C\\u7C7B\\u6BD4\\uFF0C\\u8BA9\\u4F60\\u4E0D\\u4EC5\\u201C\\u77E5\\u5176\\u7136\\u201D\\uFF0C\\u8FD8\\u80FD\\u201C\\u77E5\\u5176\\u6240\\u4EE5\\u7136\\u201D\\u3002\\u51C6\\u5907\\u597D\\u4F60\\u7684\\u624B\\u673A\\u548C\\u952E\\u76D8\\uFF0C\\u54B1\\u4EEC\\u5F00\\u59CB\\u5427\\uFF01\\u{1F4F1}\\u{1F4BB}\"}),`\n`,(0,n.jsx)(l.hr,{}),`\n`,(0,n.jsx)(l.h2,{id:\"\\u626B\\u7801\\u767B\\u5F55\\u7684\\u57FA\\u672C\\u539F\\u7406\\u4E00\\u573A\\u8DE8\\u8BBE\\u5907\\u7684\\u63A5\\u529B\\u8D5B\",children:(0,n.jsx)(l.a,{href:\"#\\u626B\\u7801\\u767B\\u5F55\\u7684\\u57FA\\u672C\\u539F\\u7406\\u4E00\\u573A\\u8DE8\\u8BBE\\u5907\\u7684\\u63A5\\u529B\\u8D5B\",children:\"\\u626B\\u7801\\u767B\\u5F55\\u7684\\u57FA\\u672C\\u539F\\u7406\\uFF1A\\u4E00\\u573A\\u8DE8\\u8BBE\\u5907\\u7684\\u63A5\\u529B\\u8D5B\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u626B\\u7801\\u767B\\u5F55\\u7684\\u6838\\u5FC3\\u662F\\u7528\\u4E8C\\u7EF4\\u7801\\u6253\\u901A PC \\u7AEF\\u548C\\u79FB\\u52A8\\u7AEF\\uFF0C\\u5B9E\\u73B0\\u8EAB\\u4EFD\\u9A8C\\u8BC1\\u3002\\u6574\\u4E2A\\u8FC7\\u7A0B\\u5C31\\u50CF\\u4E00\\u573A\\u63A5\\u529B\\u8D5B\\uFF0CPC \\u7AEF\\u8D77\\u8DD1\\uFF0C\\u79FB\\u52A8\\u7AEF\\u63A5\\u68D2\\uFF0C\\u670D\\u52A1\\u5668\\u505A\\u88C1\\u5224\\uFF0C\\u6700\\u540E\\u5BA3\\u5E03\\u80DC\\u5229\\u3002\\u4EE5\\u4E0B\\u662F\\u5B83\\u7684\\u57FA\\u672C\\u6D41\\u7A0B\\uFF1A\"}),`\n`,(0,n.jsxs)(l.ol,{children:[`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"PC \\u7AEF\\u53D1\\u8D77\\u8BF7\\u6C42\"}),\"\\uFF1A\\u4F60\\u5728 PC \\u7AEF\\u6253\\u5F00\\u767B\\u5F55\\u9875\\u9762\\uFF0C\\u670D\\u52A1\\u5668\\u751F\\u6210\\u4E00\\u4E2A\\u552F\\u4E00\\u7684 token\\uFF08\\u53EF\\u4EE5\\u7406\\u89E3\\u4E3A\\u4E00\\u5F20\\u4E34\\u65F6\\u901A\\u884C\\u8BC1\\uFF09\\uFF0C\\u7136\\u540E\\u628A\\u8FD9\\u4E2A token \\u7F16\\u7801\\u6210\\u4E8C\\u7EF4\\u7801\\u663E\\u793A\\u5728\\u5C4F\\u5E55\\u4E0A\\u3002\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u79FB\\u52A8\\u7AEF\\u626B\\u63CF\\u4E8C\\u7EF4\\u7801\"}),\"\\uFF1A\\u4F60\\u7528\\u624B\\u673A\\u4E0A\\u7684\\u5E94\\u7528\\u626B\\u4E00\\u4E0B\\u4E8C\\u7EF4\\u7801\\uFF0C\\u5E94\\u7528\\u89E3\\u6790\\u51FA\\u91CC\\u9762\\u7684 token\\u3002\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u79FB\\u52A8\\u7AEF\\u53D1\\u9001\\u8BA4\\u8BC1\"}),\"\\uFF1A\\u624B\\u673A\\u628A token \\u548C\\u4F60\\u7684\\u8EAB\\u4EFD\\u4FE1\\u606F\\uFF08\\u6BD4\\u5982\\u7528\\u6237 ID\\uFF09\\u6253\\u5305\\u53D1\\u7ED9\\u670D\\u52A1\\u5668\\uFF0C\\u8BF4\\uFF1A\\u201C\\u563F\\uFF0C\\u6211\\u662F\\u5408\\u6CD5\\u7528\\u6237\\uFF0C\\u5FEB\\u8BA9\\u6211\\u901A\\u8FC7\\u5427\\uFF01\\u201D\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u670D\\u52A1\\u5668\\u9A8C\\u8BC1\\u8EAB\\u4EFD\"}),\"\\uFF1A\\u670D\\u52A1\\u5668\\u6536\\u5230\\u540E\\uFF0C\\u68C0\\u67E5 token \\u662F\\u5426\\u6709\\u6548\\uFF0C\\u518D\\u786E\\u8BA4\\u4F60\\u7684\\u8EAB\\u4EFD\\u6CA1\\u95EE\\u9898\\u3002\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"PC \\u7AEF\\u767B\\u5F55\\u6210\\u529F\"}),\"\\uFF1A\\u670D\\u52A1\\u5668\\u70B9\\u5934\\u540C\\u610F\\uFF0C\\u628A\\u767B\\u5F55\\u72B6\\u6001\\u540C\\u6B65\\u5230 PC \\u7AEF\\uFF0C\\u4F60\\u5C31\\u987A\\u5229\\u8FDB\\u5165\\u7CFB\\u7EDF\\u4E86\\u3002\"]}),`\n`]}),`\n`,(0,n.jsx)(l.p,{children:\"\\u7B80\\u5355\\u6765\\u8BF4\\uFF0C\\u626B\\u7801\\u767B\\u5F55\\u5C31\\u50CF\\u662F PC \\u7AEF\\u5F00\\u4E86\\u4E00\\u6247\\u95E8\\uFF0C\\u79FB\\u52A8\\u7AEF\\u662F\\u94A5\\u5319\\uFF0C\\u901A\\u8FC7\\u4E8C\\u7EF4\\u7801\\u8FD9\\u4E2A\\u201C\\u95E8\\u724C\\u53F7\\u201D\\uFF0C\\u94A5\\u5319\\u627E\\u5230\\u95E8\\u5E76\\u6253\\u5F00\\u5B83\\u3002\\u{1F511}\\u{1F6AA} \\u8FD9\\u4E2A\\u8FC7\\u7A0B\\u4E2D\\uFF0Ctoken \\u662F\\u6838\\u5FC3\\u6865\\u6881\\uFF0C\\u8FDE\\u63A5\\u4E86\\u4E24\\u7AEF\\uFF0C\\u786E\\u4FDD\\u5B89\\u5168\\u53C8\\u9AD8\\u6548\\u3002\"}),`\n`,(0,n.jsx)(l.hr,{}),`\n`,(0,n.jsx)(l.h2,{id:\"\\u6280\\u672F\\u7EC6\\u8282\\u5206\\u6790\\u62C6\\u5F00\\u4E8C\\u7EF4\\u7801\\u7684\\u9ED1\\u76D2\\u5B50\",children:(0,n.jsx)(l.a,{href:\"#\\u6280\\u672F\\u7EC6\\u8282\\u5206\\u6790\\u62C6\\u5F00\\u4E8C\\u7EF4\\u7801\\u7684\\u9ED1\\u76D2\\u5B50\",children:\"\\u6280\\u672F\\u7EC6\\u8282\\u5206\\u6790\\uFF1A\\u62C6\\u5F00\\u4E8C\\u7EF4\\u7801\\u7684\\u201C\\u9ED1\\u76D2\\u5B50\\u201D\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u539F\\u7406\\u542C\\u8D77\\u6765\\u7B80\\u5355\\uFF0C\\u4F46\\u5B9E\\u73B0\\u8D77\\u6765\\u53EF\\u4E0D\\u542B\\u7CCA\\u3002\\u63A5\\u4E0B\\u6765\\uFF0C\\u6211\\u4EEC\\u628A\\u6BCF\\u4E2A\\u6B65\\u9AA4\\u62C6\\u5F00\\uFF0C\\u6DF1\\u5165\\u770B\\u770B\\u91CC\\u9762\\u7684\\u6280\\u672F\\u7EC6\\u8282\\u3002\"}),`\n`,(0,n.jsx)(l.h3,{id:\"1-\\u4E8C\\u7EF4\\u7801\\u7684\\u751F\\u6210\\u4ECE-token-\\u5230\\u9ED1\\u767D\\u683C\\u5B50\",children:(0,n.jsx)(l.a,{href:\"#1-\\u4E8C\\u7EF4\\u7801\\u7684\\u751F\\u6210\\u4ECE-token-\\u5230\\u9ED1\\u767D\\u683C\\u5B50\",children:\"1. \\u4E8C\\u7EF4\\u7801\\u7684\\u751F\\u6210\\uFF1A\\u4ECE token \\u5230\\u201C\\u9ED1\\u767D\\u683C\\u5B50\\u201D\"})}),`\n`,(0,n.jsxs)(l.p,{children:[\"\\u5728 PC \\u7AEF\\uFF0C\\u670D\\u52A1\\u5668\\u9996\\u5148\\u751F\\u6210\\u4E00\\u4E2A\\u552F\\u4E00\\u7684 token\\u3002\\u8FD9\\u4E2A token \\u53EF\\u4EE5\\u662F\\u4E00\\u4E2A UUID\\uFF08\\u901A\\u7528\\u552F\\u4E00\\u6807\\u8BC6\\u7B26\\uFF09\\uFF0C\\u6BD4\\u5982 \",(0,n.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{children:\"550e8400-e29b-41d4-a716-446655440000\"})})})}),\"\\uFF0C\\u786E\\u4FDD\\u5B83\\u5168\\u7403\\u72EC\\u4E00\\u65E0\\u4E8C\\u3002\\u751F\\u6210\\u540E\\uFF0Ctoken \\u88AB\\u7F16\\u7801\\u6210\\u4E8C\\u7EF4\\u7801\\uFF0C\\u663E\\u793A\\u5728\\u9875\\u9762\\u4E0A\\u3002\"]}),`\n`,(0,n.jsxs)(l.p,{children:[\"\\u524D\\u7AEF\\u53EF\\u4EE5\\u7528 \",(0,n.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{children:\"qrcode.js\"})})})}),\" \\u8FD9\\u6837\\u7684\\u5E93\\u6765\\u751F\\u6210\\u4E8C\\u7EF4\\u7801\\uFF0C\\u4EE3\\u7801\\u7B80\\u5355\\u5230\\u98DE\\u8D77\\uFF1A\"]}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" QRCode \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\" 'qrcode'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" generateQRCode\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" async\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" token\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" crypto.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"randomUUID\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(); \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u751F\\u6210\\u552F\\u4E00 token\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" qrCodeUrl\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" QRCode.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"toDataURL\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(token); \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u8F6C\\u6210\\u4E8C\\u7EF4\\u7801\\u56FE\\u7247\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  document.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"getElementById\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'qrcode'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\").src \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" qrCodeUrl; \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u663E\\u793A\\u5728\\u9875\\u9762\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" token; \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u4FDD\\u5B58 token\\uFF0C\\u540E\\u9762\\u7528\\u5F97\\u4E0A\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"};\"})})]})})}),`\n`,(0,n.jsxs)(l.p,{children:[\"\\u{1F4A1} \",(0,n.jsx)(l.strong,{children:\"\\u5C0F\\u8D34\\u58EB\"}),\"\\uFF1A\\u7528 \",(0,n.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{children:\"crypto.randomUUID()\"})})})}),\" \\u751F\\u6210 token\\uFF0C\\u65E2\\u7B80\\u5355\\u53C8\\u5B89\\u5168\\uFF0C\\u6BD4\\u81EA\\u5DF1\\u62FC\\u968F\\u673A\\u5B57\\u7B26\\u4E32\\u9760\\u8C31\\u591A\\u4E86\\u3002\"]}),`\n`,(0,n.jsx)(l.p,{children:\"\\u751F\\u6210\\u7684\\u4E8C\\u7EF4\\u7801\\u672C\\u8D28\\u662F\\u4E00\\u4E2A URL \\u6216\\u5B57\\u7B26\\u4E32\\uFF0C\\u91CC\\u9762\\u85CF\\u7740 token\\uFF0C\\u7B49\\u7740\\u79FB\\u52A8\\u7AEF\\u6765\\u201C\\u89E3\\u9501\\u201D\\u3002\"}),`\n`,(0,n.jsx)(l.h3,{id:\"2-\\u79FB\\u52A8\\u7AEF\\u626B\\u63CF\\u4ECE\\u6444\\u50CF\\u5934\\u5230-token\",children:(0,n.jsx)(l.a,{href:\"#2-\\u79FB\\u52A8\\u7AEF\\u626B\\u63CF\\u4ECE\\u6444\\u50CF\\u5934\\u5230-token\",children:\"2. \\u79FB\\u52A8\\u7AEF\\u626B\\u63CF\\uFF1A\\u4ECE\\u6444\\u50CF\\u5934\\u5230 token\"})}),`\n`,(0,n.jsxs)(l.p,{children:[\"\\u79FB\\u52A8\\u7AEF\\u5E94\\u7528\\u7684\\u626B\\u7801\\u529F\\u80FD\\u9760\\u7684\\u662F\\u6444\\u50CF\\u5934\\u548C\\u89E3\\u6790\\u5E93\\u3002\\u4EE5 React Native \\u4E3A\\u4F8B\\uFF0C\\u53EF\\u4EE5\\u7528 \",(0,n.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{children:\"react-native-qrcode-scanner\"})})})}),\" \\u5FEB\\u901F\\u5B9E\\u73B0\\uFF1A\"]}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"jsx\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(l.code,{\"data-language\":\"jsx\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" React \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\" 'react'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" QRCodeScanner \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\" 'react-native-qrcode-scanner'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Scanner\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" onSuccess\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"e\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" token\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" e.data; \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u89E3\\u6790\\u51FA token\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    console.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'\\u626B\\u63CF\\u5230 token:'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", token);\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"    // \\u4E0B\\u4E00\\u6B65\\uFF1A\\u53D1\\u9001\\u7ED9\\u670D\\u52A1\\u5668\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  };\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    <\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"QRCodeScanner\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"      onRead\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"{onSuccess}\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"      topContent\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"{<\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"Text\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\\u626B\\u4E00\\u626B\\uFF0C\\u767B\\u5F55 PC \\u7AEF</\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"Text\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">}\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    />\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  );\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"};\"})})]})})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u626B\\u63CF\\u6210\\u529F\\u540E\\uFF0C\\u5E94\\u7528\\u62FF\\u5230 token\\uFF0C\\u5C31\\u50CF\\u62FF\\u5230\\u4E86\\u4E00\\u5F20\\u201C\\u5165\\u573A\\u5238\\u201D\\uFF0C\\u63A5\\u4E0B\\u6765\\u8981\\u4EA4\\u7ED9\\u670D\\u52A1\\u5668\\u201C\\u9A8C\\u7968\\u201D\\u3002\"}),`\n`,(0,n.jsxs)(l.p,{children:[\"\\u{1F4A1} \",(0,n.jsx)(l.strong,{children:\"\\u5C0F\\u8D34\\u58EB\"}),\"\\uFF1A\\u522B\\u5FD8\\u4E86\\u52A0\\u4E2A\\u632F\\u52A8\\u6216\\u63D0\\u793A\\u97F3\\uFF0C\\u544A\\u8BC9\\u7528\\u6237\\u626B\\u63CF\\u6210\\u529F\\uFF0C\\u63D0\\u5347\\u4F53\\u9A8C\\u611F\\u3002\"]}),`\n`,(0,n.jsx)(l.h3,{id:\"3-\\u79FB\\u52A8\\u7AEF\\u8BF7\\u6C42\\u5E26\\u7740-token-\\u53BB\\u6572\\u95E8\",children:(0,n.jsx)(l.a,{href:\"#3-\\u79FB\\u52A8\\u7AEF\\u8BF7\\u6C42\\u5E26\\u7740-token-\\u53BB\\u6572\\u95E8\",children:\"3. \\u79FB\\u52A8\\u7AEF\\u8BF7\\u6C42\\uFF1A\\u5E26\\u7740 token \\u53BB\\u6572\\u95E8\"})}),`\n`,(0,n.jsxs)(l.p,{children:[\"\\u62FF\\u5230 token \\u540E\\uFF0C\\u79FB\\u52A8\\u7AEF\\u8981\\u628A token \\u548C\\u7528\\u6237\\u8EAB\\u4EFD\\uFF08\\u6BD4\\u5982 \",(0,n.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{children:\"userId\"})})})}),\"\\uFF09\\u53D1\\u7ED9\\u670D\\u52A1\\u5668\\u3002\\u8FD9\\u4E2A\\u8BF7\\u6C42\\u901A\\u5E38\\u662F HTTP POST\\uFF0C\\u5E26\\u4E0A JSON \\u6570\\u636E\\uFF1A\"]}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" loginWithQRCode\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" async\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"token\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"userId\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" response\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" fetch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'/api/login'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    method: \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'POST'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    headers: { \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'Content-Type'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'application/json'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" },\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    body: \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"JSON\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"stringify\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({ token, userId }),\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  });\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" data\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" response.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"json\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  if\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (data.success) {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"    alert\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'\\u767B\\u5F55\\u6210\\u529F\\uFF0C\\u5FEB\\u53BB PC \\u7AEF\\u770B\\u770B\\u5427\\uFF01'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"};\"})})]})})}),`\n`,(0,n.jsxs)(l.p,{children:[\"\\u8FD9\\u91CC\\uFF0C\",(0,n.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{children:\"userId\"})})})}),\" \\u662F\\u79FB\\u52A8\\u7AEF\\u5E94\\u7528\\u7684\\u5DF2\\u767B\\u5F55\\u7528\\u6237\\u6807\\u8BC6\\uFF0Ctoken \\u5219\\u662F PC \\u7AEF\\u4E34\\u65F6\\u4F1A\\u8BDD\\u7684\\u201C\\u95E8\\u724C\\u53F7\\u201D\\u3002\"]}),`\n`,(0,n.jsxs)(l.p,{children:[\"\\u{1F4A1} \",(0,n.jsx)(l.strong,{children:\"\\u5C0F\\u8D34\\u58EB\"}),\"\\uFF1A\\u53EF\\u4EE5\\u5728\\u8BF7\\u6C42\\u4E2D\\u52A0\\u4E2A\\u8BBE\\u5907\\u6307\\u7EB9\\uFF08\\u6BD4\\u5982\\u8BBE\\u5907\\u578B\\u53F7\\uFF09\\uFF0C\\u8BA9\\u670D\\u52A1\\u5668\\u591A\\u4E00\\u5C42\\u6821\\u9A8C\\uFF0C\\u9632\\u4F4F\\u201C\\u5192\\u540D\\u9876\\u66FF\\u201D\\u3002\"]}),`\n`,(0,n.jsx)(l.h3,{id:\"4-\\u670D\\u52A1\\u5668\\u9A8C\\u8BC1\\u88C1\\u5224\\u7684\\u4E25\\u683C\\u5BA1\\u67E5\",children:(0,n.jsx)(l.a,{href:\"#4-\\u670D\\u52A1\\u5668\\u9A8C\\u8BC1\\u88C1\\u5224\\u7684\\u4E25\\u683C\\u5BA1\\u67E5\",children:\"4. \\u670D\\u52A1\\u5668\\u9A8C\\u8BC1\\uFF1A\\u88C1\\u5224\\u7684\\u4E25\\u683C\\u5BA1\\u67E5\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u670D\\u52A1\\u5668\\u63A5\\u5230\\u8BF7\\u6C42\\u540E\\uFF0C\\u5F00\\u59CB\\u201C\\u9A8C\\u7968\\u201D\\u6D41\\u7A0B\\uFF1A\"}),`\n`,(0,n.jsxs)(l.ul,{children:[`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u68C0\\u67E5 token\"}),\"\\uFF1Atoken \\u662F\\u5426\\u6709\\u6548\\uFF1F\\u6709\\u6CA1\\u6709\\u8FC7\\u671F\\uFF1F\\u662F\\u4E0D\\u662F\\u81EA\\u5DF1\\u53D1\\u7684\\uFF1F\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u9A8C\\u8BC1\\u7528\\u6237\"}),\"\\uFF1A\",(0,n.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{children:\"userId\"})})})}),\" \\u662F\\u5426\\u5408\\u6CD5\\uFF1F\\u662F\\u4E0D\\u662F\\u6CE8\\u518C\\u7528\\u6237\\uFF1F\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u5173\\u8054\\u4F1A\\u8BDD\"}),\"\\uFF1A\\u786E\\u8BA4\\u65E0\\u8BEF\\u540E\\uFF0C\\u751F\\u6210\\u65B0\\u7684\\u4F1A\\u8BDD ID\\uFF0C\\u7ED1\\u5B9A\\u5230 PC \\u7AEF\\u3002\"]}),`\n`]}),`\n`,(0,n.jsx)(l.p,{children:\"\\u7528 Node.js \\u548C Express \\u5B9E\\u73B0\\u4E00\\u4E2A\\u7B80\\u7248 API\\uFF1A\"}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" express\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" require\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'express'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" app\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" express\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"app.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"use\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(express.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"json\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"());\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" sessions\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {}; \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u4E34\\u65F6\\u5B58\\u50A8 token \\u548C\\u4F1A\\u8BDD\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"app.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"get\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'/api/generate-token'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", (\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"req\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"res\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" token\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" crypto.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"randomUUID\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" sessionId\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\" `session_${\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"Date\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"now\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"()\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"}`\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  sessions[token] \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" { sessionId, expires: Date.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"now\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"() \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"+\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 5\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" *\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 60\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" *\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 1000\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" }; \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// 5 \\u5206\\u949F\\u6709\\u6548\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  res.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"json\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({ token });\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"});\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"app.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"post\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'/api/login'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", (\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"req\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"res\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" { \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"token\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"userId\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" req.body;\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" session\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" sessions[token];\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  if\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (session \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"&&\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" session.expires \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\">\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" Date.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"now\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"()) {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    if\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"isValidUser\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(userId)) { \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u5047\\u8BBE\\u6709\\u4E2A\\u51FD\\u6570\\u9A8C\\u8BC1\\u7528\\u6237\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" newSessionId\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\" `session_${\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"Date\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"now\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"()\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"}`\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"      associateSessionWithUser\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(newSessionId, userId); \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u7ED1\\u5B9A\\u7528\\u6237\\u548C\\u4F1A\\u8BDD\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"      notifyPC\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(session.sessionId, newSessionId); \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u901A\\u77E5 PC\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      delete\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" sessions[token]; \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// token \\u4E00\\u6B21\\u7528\\u5B8C\\u5C31\\u4E22\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      res.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"json\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({ success: \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"true\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" });\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"else\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      res.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"json\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({ success: \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"false\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", message: \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'\\u7528\\u6237\\u4E0D\\u5408\\u6CD5'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" });\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"else\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    res.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"json\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({ success: \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"false\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", message: \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'token \\u5DF2\\u8FC7\\u671F\\u6216\\u65E0\\u6548'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" });\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"});\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"app.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"listen\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"3000\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" console.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'\\u670D\\u52A1\\u5668\\u542F\\u52A8\\u5566\\uFF01'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"));\"})]})]})})}),`\n`,(0,n.jsxs)(l.p,{children:[\"\\u{1F4A1} \",(0,n.jsx)(l.strong,{children:\"\\u5C0F\\u8D34\\u58EB\"}),\"\\uFF1Atoken \\u7528\\u5B8C\\u5C31\\u5220\\uFF0C\\u8BBE\\u7F6E\\u6210\\u4E00\\u6B21\\u6027\\u95E8\\u7968\\uFF0C\\u9632\\u6B62\\u522B\\u4EBA\\u6361\\u5230\\u91CD\\u590D\\u4F7F\\u7528\\u3002\"]}),`\n`,(0,n.jsx)(l.h3,{id:\"5-\\u901A\\u77E5-pc-\\u7AEF\\u767B\\u5F55\\u6210\\u529F\\u7684\\u7EFF\\u706F\",children:(0,n.jsx)(l.a,{href:\"#5-\\u901A\\u77E5-pc-\\u7AEF\\u767B\\u5F55\\u6210\\u529F\\u7684\\u7EFF\\u706F\",children:\"5. \\u901A\\u77E5 PC \\u7AEF\\uFF1A\\u767B\\u5F55\\u6210\\u529F\\u7684\\u201C\\u7EFF\\u706F\\u201D\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u670D\\u52A1\\u5668\\u9A8C\\u8BC1\\u901A\\u8FC7\\u540E\\uFF0C\\u8981\\u544A\\u8BC9 PC \\u7AEF\\u201C\\u4F60\\u53EF\\u4EE5\\u8FDB\\u6765\\u4E86\\u201D\\u3002\\u53EF\\u4EE5\\u7528 WebSocket \\u5B9E\\u73B0\\u5B9E\\u65F6\\u901A\\u77E5\\uFF1A\"}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" socket\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" WebSocket\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'ws://example.com/ws'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"socket.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"onmessage\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"event\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" data\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" JSON\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"parse\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(event.data);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  if\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (data.type \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"===\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\" 'login_success'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    document.cookie \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\" `session_id=${\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"data\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"sessionId\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"}; HttpOnly; Secure`\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    window.location.href \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\" '/dashboard'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"; \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u8DF3\\u8F6C\\u5230\\u4E3B\\u9875\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"};\"})})]})})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u6216\\u8005\\u7528\\u8F6E\\u8BE2\\u4EE3\\u66FF WebSocket\\uFF1A\"}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" checkLoginStatus\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" async\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"token\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" interval\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" setInterval\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"async\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" res\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" fetch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"`/api/check-login?token=${\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"token\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"}`\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" data\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" res.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"json\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    if\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (data.success) {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      document.cookie \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\" `session_id=${\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"data\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"sessionId\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"}`\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      window.location.href \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\" '/dashboard'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"      clearInterval\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(interval);\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }, \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"1000\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"); \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u6BCF\\u79D2\\u67E5\\u4E00\\u6B21\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"};\"})})]})})}),`\n`,(0,n.jsxs)(l.p,{children:[\"\\u{1F4A1} \",(0,n.jsx)(l.strong,{children:\"\\u5C0F\\u8D34\\u58EB\"}),\"\\uFF1AWebSocket \\u6BD4\\u8F6E\\u8BE2\\u66F4\\u4F18\\u96C5\\uFF0C\\u4F46\\u5982\\u679C\\u9879\\u76EE\\u7B80\\u5355\\uFF0C\\u8F6E\\u8BE2\\u4E5F\\u80FD\\u51D1\\u5408\\u7528\\u3002\"]}),`\n`,(0,n.jsx)(l.hr,{}),`\n`,(0,n.jsx)(l.h2,{id:\"\\u4EE3\\u7801\\u793A\\u4F8B\\u4ECE\\u96F6\\u642D\\u5EFA\\u4E00\\u4E2A\\u626B\\u7801\\u767B\\u5F55\",children:(0,n.jsx)(l.a,{href:\"#\\u4EE3\\u7801\\u793A\\u4F8B\\u4ECE\\u96F6\\u642D\\u5EFA\\u4E00\\u4E2A\\u626B\\u7801\\u767B\\u5F55\",children:\"\\u4EE3\\u7801\\u793A\\u4F8B\\uFF1A\\u4ECE\\u96F6\\u642D\\u5EFA\\u4E00\\u4E2A\\u626B\\u7801\\u767B\\u5F55\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u7406\\u8BBA\\u8BB2\\u5B8C\\uFF0C\\u54B1\\u4EEC\\u6765\\u70B9\\u771F\\u5BB6\\u4F19\\uFF01\\u4E0B\\u9762\\u662F\\u4E00\\u4E2A\\u7B80\\u5316\\u7684\\u5B9E\\u73B0\\uFF0C\\u6DB5\\u76D6 PC \\u7AEF\\u3001\\u79FB\\u52A8\\u7AEF\\u548C\\u670D\\u52A1\\u5668\\u7AEF\\u3002\"}),`\n`,(0,n.jsx)(l.h3,{id:\"pc-\\u7AEF\\u663E\\u793A\\u4E8C\\u7EF4\\u7801--\\u76D1\\u542C\\u767B\\u5F55\",children:(0,n.jsx)(l.a,{href:\"#pc-\\u7AEF\\u663E\\u793A\\u4E8C\\u7EF4\\u7801--\\u76D1\\u542C\\u767B\\u5F55\",children:\"PC \\u7AEF\\uFF1A\\u663E\\u793A\\u4E8C\\u7EF4\\u7801 + \\u76D1\\u542C\\u767B\\u5F55\"})}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" QRCode \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\" 'qrcode'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" LoginPage\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" [\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"qrCodeUrl\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"setQrCodeUrl\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" useState\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"''\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  useEffect\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(() \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"    fetch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'/api/generate-token'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\")\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      .\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"res\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" res.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"json\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"())\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      .\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"then\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"async\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" ({ \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"token\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" }) \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"        const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" url\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" QRCode.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"toDataURL\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(token);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"        setQrCodeUrl\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(url);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"        checkLoginStatus\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(token); \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u5F00\\u59CB\\u8F6E\\u8BE2\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      });\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }, []);\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" checkLoginStatus\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"token\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" interval\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" setInterval\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"async\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" res\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" fetch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"`/api/check-login?token=${\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"token\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"}`\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" data\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" res.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"json\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      if\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (data.success) {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"        document.cookie \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\" `session_id=${\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"data\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"sessionId\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"}`\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"        window.location.href \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\" '/dashboard'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"        clearInterval\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(interval);\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      }\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    }, \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"1000\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  };\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" <\"}),(0,n.jsx)(l.span,{style:{color:\"#85E89D\"},children:\"img\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" src\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"{qrCodeUrl} \"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"alt\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"\\u626B\\u63CF\\u767B\\u5F55\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" />;\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"};\"})})]})})}),`\n`,(0,n.jsx)(l.h3,{id:\"\\u79FB\\u52A8\\u7AEF\\u626B\\u63CF\\u5E76\\u767B\\u5F55\",children:(0,n.jsx)(l.a,{href:\"#\\u79FB\\u52A8\\u7AEF\\u626B\\u63CF\\u5E76\\u767B\\u5F55\",children:\"\\u79FB\\u52A8\\u7AEF\\uFF1A\\u626B\\u63CF\\u5E76\\u767B\\u5F55\"})}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"jsx\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(l.code,{\"data-language\":\"jsx\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" QRCodeScanner \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\" 'react-native-qrcode-scanner'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Scanner\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" userId\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\" 'user001'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"; \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u5047\\u8BBE\\u5DF2\\u767B\\u5F55\\u7528\\u6237\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" onSuccess\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" async\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"e\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" token\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" e.data;\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" res\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" fetch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'/api/login'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      method: \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'POST'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      body: \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"JSON\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"stringify\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({ token, userId }),\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    });\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" data\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" res.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"json\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    if\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (data.success) {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"      alert\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'\\u767B\\u5F55\\u6210\\u529F\\uFF0C\\u5FEB\\u53BB PC \\u7AEF\\u723D\\u4E00\\u628A\\uFF01'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  };\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    <\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"QRCodeScanner\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"      onRead\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"{onSuccess}\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"      topContent\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"{<\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"Text\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\\u626B\\u7801\\u767B\\u5F55 PC \\u7AEF</\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"Text\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">}\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    />\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  );\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"};\"})})]})})}),`\n`,(0,n.jsx)(l.h3,{id:\"\\u670D\\u52A1\\u5668\\u7AEF\\u6838\\u5FC3\\u903B\\u8F91\",children:(0,n.jsx)(l.a,{href:\"#\\u670D\\u52A1\\u5668\\u7AEF\\u6838\\u5FC3\\u903B\\u8F91\",children:\"\\u670D\\u52A1\\u5668\\u7AEF\\uFF1A\\u6838\\u5FC3\\u903B\\u8F91\"})}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" express\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" require\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'express'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" app\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" express\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"app.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"use\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(express.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"json\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"());\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" sessions\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {};\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" users\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" { user001: \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"true\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" }; \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u6A21\\u62DF\\u7528\\u6237\\u6570\\u636E\\u5E93\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"app.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"get\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'/api/generate-token'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", (\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"req\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"res\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" token\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" crypto.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"randomUUID\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" sessionId\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\" `session_${\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"Date\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"now\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"()\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"}`\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  sessions[token] \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" { sessionId, expires: Date.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"now\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"() \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"+\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 5\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" *\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 60\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" *\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 1000\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" };\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  res.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"json\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({ token });\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"});\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"app.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"post\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'/api/login'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", (\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"req\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"res\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" { \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"token\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"userId\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" req.body;\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" session\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" sessions[token];\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  if\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (session \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"&&\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" session.expires \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\">\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" Date.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"now\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"()) {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    if\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (users[userId]) {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" newSessionId\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\" `session_${\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"Date\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"now\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"()\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"}`\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      sessions[newSessionId] \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" { userId }; \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u4FDD\\u5B58\\u65B0\\u4F1A\\u8BDD\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      sessions[token].newSessionId \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" newSessionId; \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u6807\\u8BB0\\u767B\\u5F55\\u6210\\u529F\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      delete\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" sessions[token].expires; \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u6E05\\u7406\\u8FC7\\u671F\\u65F6\\u95F4\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      res.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"json\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({ success: \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"true\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" });\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"else\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    res.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"json\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({ success: \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"false\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" });\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"});\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"app.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"get\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'/api/check-login'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", (\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"req\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"res\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" { \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"token\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" req.query;\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" session\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" sessions[token];\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  if\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (session \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"&&\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" session.newSessionId) {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    res.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"json\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({ success: \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"true\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", sessionId: session.newSessionId });\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    delete\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" sessions[token]; \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u6E05\\u7406\\u4E34\\u65F6\\u6570\\u636E\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"else\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    res.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"json\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({ success: \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"false\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" });\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"});\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"app.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"listen\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"3000\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]})]})})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u8FD0\\u884C\\u8FD9\\u6BB5\\u4EE3\\u7801\\uFF0C\\u4F60\\u5C31\\u80FD\\u4F53\\u9A8C\\u4E00\\u4E2A\\u7B80\\u6613\\u7248\\u7684\\u626B\\u7801\\u767B\\u5F55\\u4E86\\uFF01\\u662F\\u4E0D\\u662F\\u6709\\u70B9\\u6210\\u5C31\\u611F\\uFF1F\\u{1F60E}\"}),`\n`,(0,n.jsx)(l.hr,{}),`\n`,(0,n.jsx)(l.h2,{id:\"\\u5B89\\u5168\\u6027\\u548C\\u7528\\u6237\\u4F53\\u9A8C\\u4F18\\u5316\\u8BA9\\u626B\\u7801\\u767B\\u5F55\\u66F4\\u9760\\u8C31\",children:(0,n.jsx)(l.a,{href:\"#\\u5B89\\u5168\\u6027\\u548C\\u7528\\u6237\\u4F53\\u9A8C\\u4F18\\u5316\\u8BA9\\u626B\\u7801\\u767B\\u5F55\\u66F4\\u9760\\u8C31\",children:\"\\u5B89\\u5168\\u6027\\u548C\\u7528\\u6237\\u4F53\\u9A8C\\u4F18\\u5316\\uFF1A\\u8BA9\\u626B\\u7801\\u767B\\u5F55\\u66F4\\u9760\\u8C31\"})}),`\n`,(0,n.jsx)(l.h3,{id:\"\\u5B89\\u5168\\u6027\\u522B\\u8BA9\\u574F\\u4EBA\\u94BB\\u7A7A\\u5B50\",children:(0,n.jsx)(l.a,{href:\"#\\u5B89\\u5168\\u6027\\u522B\\u8BA9\\u574F\\u4EBA\\u94BB\\u7A7A\\u5B50\",children:\"\\u5B89\\u5168\\u6027\\uFF1A\\u522B\\u8BA9\\u201C\\u574F\\u4EBA\\u201D\\u94BB\\u7A7A\\u5B50\"})}),`\n`,(0,n.jsxs)(l.ul,{children:[`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"HTTPS\"}),\"\\uFF1A\\u5168\\u7A0B\\u52A0\\u5BC6\\uFF0C\\u9632\\u6B62 token \\u88AB\\u5077\\u542C\\u3002\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u77ED\\u547D token\"}),\"\\uFF1A5 \\u5206\\u949F\\u8FC7\\u671F\\uFF0C\\u8FC7\\u671F\\u5C31\\u4F5C\\u5E9F\\u3002\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u4E00\\u6B21\\u6027 token\"}),\"\\uFF1A\\u7528\\u5B8C\\u5373\\u5220\\uFF0C\\u675C\\u7EDD\\u91CD\\u653E\\u653B\\u51FB\\u3002\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u8BBE\\u5907\\u6821\\u9A8C\"}),\"\\uFF1A\\u79FB\\u52A8\\u7AEF\\u52A0\\u4E2A\\u8BBE\\u5907\\u6807\\u8BC6\\uFF0C\\u670D\\u52A1\\u5668\\u591A\\u95EE\\u4E00\\u53E5\\u201C\\u4F60\\u662F\\u8C01\\u7684\\u624B\\u673A\\uFF1F\\u201D\\u3002\"]}),`\n`]}),`\n`,(0,n.jsxs)(l.p,{children:[\"\\u{1F4A1} \",(0,n.jsx)(l.strong,{children:\"\\u5C0F\\u8D34\\u58EB\"}),\"\\uFF1A\\u53EF\\u4EE5\\u7528 JWT \\u505A token\\uFF0C\\u5E26\\u4E0A\\u7B7E\\u540D\\uFF0C\\u670D\\u52A1\\u5668\\u9A8C\\u7B7E\\u540E\\u518D\\u4FE1\\u4EFB\\u3002\"]}),`\n`,(0,n.jsx)(l.h3,{id:\"\\u7528\\u6237\\u4F53\\u9A8C\\u522B\\u8BA9\\u7528\\u6237\\u7B49\\u70E6\\u4E86\",children:(0,n.jsx)(l.a,{href:\"#\\u7528\\u6237\\u4F53\\u9A8C\\u522B\\u8BA9\\u7528\\u6237\\u7B49\\u70E6\\u4E86\",children:\"\\u7528\\u6237\\u4F53\\u9A8C\\uFF1A\\u522B\\u8BA9\\u7528\\u6237\\u7B49\\u70E6\\u4E86\"})}),`\n`,(0,n.jsxs)(l.ul,{children:[`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u5B9E\\u65F6\\u901A\\u77E5\"}),\"\\uFF1AWebSocket \\u63A8\\u9001\\u767B\\u5F55\\u72B6\\u6001\\uFF0C\\u79D2\\u7EA7\\u54CD\\u5E94\\u3002\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u8F6E\\u8BE2\\u5907\\u80CE\"}),\"\\uFF1A\\u6CA1\\u6761\\u4EF6\\u7528 WebSocket\\uFF0C\\u8F6E\\u8BE2\\u4E5F\\u884C\\uFF0C\\u4F46\\u522B\\u592A\\u9891\\u7E41\\uFF0C1-2 \\u79D2\\u4E00\\u6B21\\u5C31\\u591F\\u3002\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u626B\\u7801\\u5F15\\u5BFC\"}),\"\\uFF1A\\u9875\\u9762\\u4E0A\\u52A0\\u4E2A\\u201C\\u8BF7\\u7528 XX \\u5E94\\u7528\\u626B\\u63CF\\u201D\\u7684\\u63D0\\u793A\\uFF0C\\u522B\\u8BA9\\u7528\\u6237\\u4E00\\u8138\\u61F5\\u3002\"]}),`\n`]}),`\n`,(0,n.jsxs)(l.p,{children:[\"\\u{1F4A1} \",(0,n.jsx)(l.strong,{children:\"\\u5C0F\\u8D34\\u58EB\"}),\"\\uFF1APC \\u7AEF\\u52A0\\u4E2A\\u4E8C\\u7EF4\\u7801\\u5237\\u65B0\\u6309\\u94AE\\uFF0C\\u4E07\\u4E00\\u8FC7\\u671F\\uFF0C\\u7528\\u6237\\u81EA\\u5DF1\\u70B9\\u4E00\\u4E0B\\u5C31\\u884C\\u3002\"]}),`\n`,(0,n.jsx)(l.hr,{}),`\n`,(0,n.jsx)(l.h2,{id:\"\\u6700\\u4F73\\u5B9E\\u8DF5\\u5F00\\u53D1\\u626B\\u7801\\u767B\\u5F55\\u7684\\u8475\\u82B1\\u5B9D\\u5178\",children:(0,n.jsx)(l.a,{href:\"#\\u6700\\u4F73\\u5B9E\\u8DF5\\u5F00\\u53D1\\u626B\\u7801\\u767B\\u5F55\\u7684\\u8475\\u82B1\\u5B9D\\u5178\",children:\"\\u6700\\u4F73\\u5B9E\\u8DF5\\uFF1A\\u5F00\\u53D1\\u626B\\u7801\\u767B\\u5F55\\u7684\\u201C\\u8475\\u82B1\\u5B9D\\u5178\\u201D\"})}),`\n`,(0,n.jsxs)(l.ol,{children:[`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"token \\u751F\\u6210\\u8981\\u968F\\u673A\"}),\"\\uFF1A\\u7528 \",(0,n.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{children:\"crypto.randomUUID()\"})})})}),\" \\u6216\\u7C7B\\u4F3C\\u7B97\\u6CD5\\uFF0C\\u522B\\u7528 \",(0,n.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{children:\"Math.random()\"})})})}),\"\\uFF0C\\u4E0D\\u7136\\u5BB9\\u6613\\u88AB\\u731C\\u3002\",`\n`,(0,n.jsxs)(l.ul,{children:[`\n`,(0,n.jsxs)(l.li,{children:[\"\\u{1F4A1} \",(0,n.jsx)(l.strong,{children:\"\\u5C0F\\u8D34\\u58EB\"}),\"\\uFF1A\\u52A0\\u4E2A\\u65F6\\u95F4\\u6233\\u6DF7\\u6DC6\\uFF0C\\u4F2A\\u88C5\\u5F97\\u66F4\\u590D\\u6742\\u3002\"]}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"token \\u5B58\\u5185\\u5B58\"}),\"\\uFF1A\\u7528 Redis \\u6216\\u5185\\u5B58\\u5BF9\\u8C61\\u5B58 token\\uFF0C\\u522B\\u5199\\u6570\\u636E\\u5E93\\uFF0C\\u901F\\u5EA6\\u5FEB\\u53C8\\u5B89\\u5168\\u3002\",`\n`,(0,n.jsxs)(l.ul,{children:[`\n`,(0,n.jsxs)(l.li,{children:[\"\\u{1F4A1} \",(0,n.jsx)(l.strong,{children:\"\\u5C0F\\u8D34\\u58EB\"}),\"\\uFF1ARedis \\u8FD8\\u80FD\\u8BBE\\u7F6E\\u8FC7\\u671F\\u65F6\\u95F4\\uFF0C\\u7701\\u5F97\\u81EA\\u5DF1\\u7B97\\u3002\"]}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u9519\\u8BEF\\u8981\\u53CB\\u597D\"}),\"\\uFF1Atoken \\u8FC7\\u671F\\u3001\\u7F51\\u7EDC\\u65AD\\u5F00\\uFF0C\\u90FD\\u7ED9\\u7528\\u6237\\u4E2A\\u6E05\\u6670\\u63D0\\u793A\\uFF0C\\u522B\\u8BA9\\u4ED6\\u4EEC\\u778E\\u731C\\u3002\",`\n`,(0,n.jsxs)(l.ul,{children:[`\n`,(0,n.jsxs)(l.li,{children:[\"\\u{1F4A1} \",(0,n.jsx)(l.strong,{children:\"\\u5C0F\\u8D34\\u58EB\"}),\"\\uFF1A\\u52A0\\u4E2A\\u201C\\u91CD\\u65B0\\u626B\\u7801\\u201D\\u6309\\u94AE\\uFF0C\\u6551\\u6025\\u7528\\u3002\"]}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u8DE8\\u57DF\\u8981\\u641E\\u5B9A\"}),\"\\uFF1APC \\u548C\\u79FB\\u52A8\\u7AEF\\u57DF\\u540D\\u4E0D\\u540C\\uFF1FCORS \\u914D\\u7F6E\\u597D\\uFF0C\\u522B\\u5361\\u5728\\u534A\\u8DEF\\u3002\",`\n`,(0,n.jsxs)(l.ul,{children:[`\n`,(0,n.jsxs)(l.li,{children:[\"\\u{1F4A1} \",(0,n.jsx)(l.strong,{children:\"\\u5C0F\\u8D34\\u58EB\"}),\"\\uFF1A\\u7528\\u4EE3\\u7406\\u8C03\\u8BD5\\uFF0C\\u7701\\u5F97\\u672C\\u5730\\u8DE8\\u57DF\\u5934\\u75BC\\u3002\"]}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"cookie \\u8981\\u5B89\\u5168\"}),\"\\uFF1APC \\u7AEF\\u5B58 session \\u65F6\\uFF0C\\u8BBE \",(0,n.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{children:\"HttpOnly\"})})})}),\" \\u548C \",(0,n.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{children:\"Secure\"})})})}),\"\\uFF0C\\u9632 XSS \\u548C\\u55C5\\u63A2\\u3002\",`\n`,(0,n.jsxs)(l.ul,{children:[`\n`,(0,n.jsxs)(l.li,{children:[\"\\u{1F4A1} \",(0,n.jsx)(l.strong,{children:\"\\u5C0F\\u8D34\\u58EB\"}),\"\\uFF1A\\u52A0\\u4E2A \",(0,n.jsx)(l.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{children:\"SameSite=Strict\"})})})}),\"\\uFF0C\\u518D\\u52A0\\u4E00\\u91CD\\u4FDD\\u9669\\u3002\"]}),`\n`]}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(l.hr,{}),`\n`,(0,n.jsx)(l.h2,{id:\"\\u603B\\u7ED3\\u626B\\u7801\\u767B\\u5F55\\u7684\\u751C\\u4E0E\\u54B8\",children:(0,n.jsx)(l.a,{href:\"#\\u603B\\u7ED3\\u626B\\u7801\\u767B\\u5F55\\u7684\\u751C\\u4E0E\\u54B8\",children:\"\\u603B\\u7ED3\\uFF1A\\u626B\\u7801\\u767B\\u5F55\\u7684\\u201C\\u751C\\u201D\\u4E0E\\u201C\\u54B8\\u201D\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u626B\\u7801\\u767B\\u5F55\\u5C31\\u50CF\\u4E00\\u676F\\u52A0\\u4E86\\u76D0\\u7684\\u5496\\u5561\\uFF0C\\u751C\\u5934\\u548C\\u54B8\\u5473\\u90FD\\u5F97\\u5C1D\\u5C1D\\uFF1A\"}),`\n`,(0,n.jsxs)(l.p,{children:[(0,n.jsx)(l.strong,{children:\"\\u751C\\u5934\\uFF08\\u4F18\\u70B9\\uFF09\"}),\"\\uFF1A\"]}),`\n`,(0,n.jsxs)(l.ul,{children:[`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u8D85\\u65B9\\u4FBF\"}),\"\\uFF1A\\u626B\\u4E00\\u4E0B\\u5C31\\u884C\\uFF0C\\u8C01\\u8FD8\\u60F3\\u8F93\\u5BC6\\u7801\\uFF1F\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u5B89\\u5168\\u6027\\u9AD8\"}),\"\\uFF1A\\u624B\\u673A\\u8BA4\\u8BC1\\u52A0\\u6301\\uFF0C\\u6BD4\\u7EAF\\u5BC6\\u7801\\u786C\\u6838\\u3002\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u8DE8\\u8BBE\\u5907\\u723D\"}),\"\\uFF1APC \\u548C\\u79FB\\u52A8\\u7AEF\\u65E0\\u7F1D\\u5207\\u6362\\uFF0C\\u672A\\u6765\\u611F\\u6EE1\\u6EE1\\u3002\"]}),`\n`]}),`\n`,(0,n.jsxs)(l.p,{children:[(0,n.jsx)(l.strong,{children:\"\\u54B8\\u5473\\uFF08\\u7F3A\\u70B9\\uFF09\"}),\"\\uFF1A\"]}),`\n`,(0,n.jsxs)(l.ul,{children:[`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u4F9D\\u8D56\\u624B\\u673A\"}),\"\\uFF1A\\u6CA1\\u7535\\u6CA1\\u7F51\\u5C31\\u6B47\\u83DC\\u3002\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u5F00\\u53D1\\u9EBB\\u70E6\"}),\"\\uFF1A\\u524D\\u540E\\u7AEF\\u5F97\\u8054\\u624B\\uFF0C\\u5355\\u5E72\\u53EF\\u4E0D\\u884C\\u3002\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u5C0F\\u4F17\\u573A\\u666F\\u5C34\\u5C2C\"}),\"\\uFF1A\\u6CA1\\u88C5 App \\u7684\\u7528\\u6237\\u53EA\\u80FD\\u5E72\\u77AA\\u773C\\u3002\"]}),`\n`]}),`\n`,(0,n.jsx)(l.p,{children:\"\\u603B\\u7684\\u6765\\u8BF4\\uFF0C\\u626B\\u7801\\u767B\\u5F55\\u662F\\u79FB\\u52A8\\u4E92\\u8054\\u7F51\\u65F6\\u4EE3\\u7684\\u201C\\u65B0\\u5BA0\\u513F\\u201D\\uFF0C\\u5C24\\u5176\\u9002\\u5408\\u6709\\u79FB\\u52A8\\u7AEF\\u751F\\u6001\\u7684\\u5E94\\u7528\\u3002\\u5E0C\\u671B\\u8FD9\\u7BC7\\u535A\\u5BA2\\u80FD\\u5E2E\\u4F60\\u5728\\u4E0B\\u4E00\\u4E2A\\u9879\\u76EE\\u91CC\\u73A9\\u8F6C\\u626B\\u7801\\u767B\\u5F55\\uFF0C\\u8BA9\\u7528\\u6237\\u60CA\\u547C\\uFF1A\\u201C\\u54C7\\uFF0C\\u8FD9\\u4E5F\\u592A\\u65B9\\u4FBF\\u4E86\\u5427\\uFF01\\u201D\\u{1F389}\"}),`\n`,(0,n.jsx)(l.p,{children:\"\\u5199\\u5230\\u8FD9\\u513F\\uFF0C\\u624B\\u90FD\\u9178\\u4E86\\uFF0C\\u4F46\\u80FD\\u628A\\u626B\\u7801\\u767B\\u5F55\\u8BB2\\u900F\\uFF0C\\u6211\\u89C9\\u5F97\\u503C\\u4E86\\uFF01\\u4F60\\u89C9\\u5F97\\u548B\\u6837\\uFF1F\\u6709\\u4EC0\\u4E48\\u60F3\\u804A\\u7684\\uFF0C\\u8BC4\\u8BBA\\u533A\\u89C1\\uFF01\\u{1F447}\"}),`\n`,(0,n.jsx)(l.hr,{})]})}function h(e={}){let{wrapper:l}=e.components||{};return l?(0,n.jsx)(l,{...e,children:(0,n.jsx)(t,{...e})}):t(e)}return C(m);})();\n;return Component;"
  },
  "_id": "å‰ç«¯æŠ€æœ¯/æ‰«ç ç™»å½•åŸç†åˆ†æä¸å®ç°.mdx",
  "_raw": {
    "sourceFilePath": "å‰ç«¯æŠ€æœ¯/æ‰«ç ç™»å½•åŸç†åˆ†æä¸å®ç°.mdx",
    "sourceFileName": "æ‰«ç ç™»å½•åŸç†åˆ†æä¸å®ç°.mdx",
    "sourceFileDir": "å‰ç«¯æŠ€æœ¯",
    "contentType": "mdx",
    "flattenedPath": "å‰ç«¯æŠ€æœ¯/æ‰«ç ç™»å½•åŸç†åˆ†æä¸å®ç°"
  },
  "type": "Post",
  "url": "/blog/å‰ç«¯æŠ€æœ¯/æ‰«ç ç™»å½•åŸç†åˆ†æä¸å®ç°"
}