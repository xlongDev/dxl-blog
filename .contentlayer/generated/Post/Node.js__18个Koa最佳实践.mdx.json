{
  "title": "18ä¸ª Koa.js æœ€ä½³å®žè·µï¼šä»Žå…¥é—¨åˆ°è£…Xçš„è¿›é˜¶æŒ‡å—",
  "date": "2024-10-02T00:00:00.000Z",
  "description": "æ·±å…¥å‰–æž Koa.js çš„ 18 ä¸ªæœ€ä½³å®žè·µï¼Œå¸¦ä½ ä»ŽåŸºç¡€ç”¨æ³•åˆ°é«˜çº§æŠ€å·§ï¼Œç»“åˆåŽŸç†ã€å®žä¾‹å’Œå¹½é»˜æ„Ÿï¼Œæ‰“é€ ä¼˜é›…ä¸”é«˜æ•ˆçš„åŽç«¯æœåŠ¡ã€‚",
  "keywords": "Koa.js, Node.js, ä¸­é—´ä»¶, å¼‚æ­¥ç¼–ç¨‹, é”™è¯¯å¤„ç†, RESTful API, æ€§èƒ½ä¼˜åŒ–, å‰ç«¯å¼€å‘",
  "author": "æ™“é¾™",
  "image": "/images/hero/koa-best-practices.jpg",
  "tags": [
    "Koa.js",
    "Node.js",
    "åŽç«¯å¼€å‘",
    "JavaScript"
  ],
  "views": 0,
  "likes": 0,
  "category": "Node.js",
  "body": {
    "raw": "\nKoa.jsï¼Œè¿™ä¸ªè½»é‡åˆä¼˜é›…çš„ Node.js æ¡†æž¶ï¼Œå°±åƒä¸€è¾†æ²¡æœ‰å¤šä½™è£…é¥°çš„è·‘è½¦ï¼šåŠ¨åŠ›å¼ºåŠ²ï¼Œä½†ä½ å¾—è‡ªå·±å­¦ä¼šè¸©æ²¹é—¨å’Œæ¢æŒ¡ã€‚è‡ªä»Žè¢« TJ Holowaychukï¼ˆExpress çš„ç¼”é€ è€…ï¼‰æŽ¨å‡ºåŽï¼ŒKoa å‡­å€Ÿå…¶ç®€æ´çš„ä¸­é—´ä»¶æœºåˆ¶å’Œå¯¹ `async/await` çš„åŽŸç”Ÿæ”¯æŒï¼Œæˆäº†è®¸å¤šå‰ç«¯å¼€å‘è€…çš„åŽç«¯â€œæ–°æ¬¢â€ã€‚ä¸è¿‡ï¼Œæƒ³è¦å¼€å¥½è¿™è¾†è·‘è½¦ï¼Œå…‰é ç›´è§‰å¯ä¸è¡Œâ€”â€”ä½ éœ€è¦ä¸€äº›â€œé©¾é©¶æŠ€å·§â€ã€‚\n\nè¿™ç¯‡æ–‡ç« å°†å¸¦ä½ èµ°è¿› Koa.js çš„ä¸–ç•Œï¼Œåˆ†äº« 18 ä¸ªæœ€ä½³å®žè·µã€‚æ— è®ºæ˜¯æ–°æ‰‹è¿˜æ˜¯è€å¸æœºï¼Œè¿™äº›å»ºè®®éƒ½èƒ½å¸®ä½ å†™å‡ºæ›´å¥å£®ã€æ›´é«˜æ•ˆçš„åŽç«¯ä»£ç ã€‚ä»Žä¸­é—´ä»¶çš„è®¾è®¡åˆ°é”™è¯¯å¤„ç†ï¼Œå†åˆ°æ€§èƒ½ä¼˜åŒ–ï¼Œæˆ‘ä¼šæ·±å…¥åŽŸç†ï¼Œé…ä¸Šå®žä¾‹ï¼Œç”šè‡³å¶å°”æŠ–ä¸ªæœºçµï¼ˆåˆ«å«Œæˆ‘å†·å¹½é»˜ï¼‰ã€‚å‡†å¤‡å¥½äº†å—ï¼Ÿç³»å¥½å®‰å…¨å¸¦ï¼Œå’±ä»¬å‡ºå‘ï¼ðŸš—ðŸ’¨\n\n## 1. å–„ç”¨ä¸­é—´ä»¶æ´‹è‘±æ¨¡åž‹ï¼Œåˆ«è®©å®ƒå˜æˆâ€œæ´‹è‘±ç‚¸å¼¹â€ ðŸ’£\n\nKoa çš„æ ¸å¿ƒæ˜¯ä¸­é—´ä»¶æœºåˆ¶ï¼ŒåŸºäºŽâ€œæ´‹è‘±æ¨¡åž‹â€ï¼šæ¯ä¸ªä¸­é—´ä»¶æŒ‰é¡ºåºæ‰§è¡Œï¼Œ`next()` æŽ§åˆ¶å‘ä¸‹ä¼ é€’ï¼Œæ‰§è¡Œå®Œå†å›žæº¯ã€‚å¬èµ·æ¥å¾ˆç¾Žï¼Œä½†ç”¨ä¸å¥½å°±å®¹æ˜“ç‚¸ã€‚\n\n```javascript\nconst Koa = require('koa');\nconst app = new Koa();\n\napp.use(async (ctx, next) => {\n  console.log('è¿›å…¥ä¸­é—´ä»¶ 1');\n  await next();\n  console.log('ç¦»å¼€ä¸­é—´ä»¶ 1');\n});\n\napp.use(async (ctx, next) => {\n  console.log('è¿›å…¥ä¸­é—´ä»¶ 2');\n  await next();\n  console.log('ç¦»å¼€ä¸­é—´ä»¶ 2');\n});\n\napp.listen(3000);\n```\n\n**è¾“å‡º**ï¼š  \n```\nè¿›å…¥ä¸­é—´ä»¶ 1  \nè¿›å…¥ä¸­é—´ä»¶ 2  \nç¦»å¼€ä¸­é—´ä»¶ 2  \nç¦»å¼€ä¸­é—´ä»¶ 1\n```\n\n**æœ€ä½³å®žè·µ**ï¼š  \n- ä¿æŒä¸­é—´ä»¶èŒè´£å•ä¸€ï¼Œåˆ«åœ¨ä¸€ä¸ªä¸­é—´ä»¶é‡Œå¹²å¤ªå¤šäº‹ï¼Œä¸ç„¶è°ƒè¯•èµ·æ¥åƒå‰¥æ´‹è‘±â€”â€”æ³ªæµæ»¡é¢ã€‚  \n- ç¡®ä¿ `next()` è¢«æ­£ç¡®è°ƒç”¨ï¼Œå¦åˆ™è¯·æ±‚ä¼šå¡ä½ï¼Œåƒå µè½¦çš„é«˜é€Ÿå…¬è·¯ã€‚\n\n**Tips**: å¦‚æžœä½ å¿˜äº† `await next()`ï¼Œè¯·æ±‚ä¼šç›´æŽ¥è·³è¿‡åŽç»­ä¸­é—´ä»¶ï¼Œåƒæ˜¯ç‚¹äº†å¤–å–å´å¿˜äº†ä»˜é’±â€”â€”æœåŠ¡å‘˜ç›´æŽ¥è·‘è·¯äº†ã€‚\n\n---\n\n## 2. ç”¨ `async/await` ä¼˜é›…å¤„ç†å¼‚æ­¥ï¼Œåˆ«å†å›žè°ƒåœ°ç‹±é‡Œçˆ¬è¡Œ ðŸ•¸ï¸\n\nKoa 2.x å¼€å§‹æŠ›å¼ƒäº† `generator`ï¼Œå…¨é¢æ‹¥æŠ± `async/await`ï¼Œè¿™è®©å¼‚æ­¥ä»£ç å˜å¾—åƒå†™åŒæ­¥ä»£ç ä¸€æ ·ç›´è§‚ã€‚\n\n```javascript\nconst fetchData = () => Promise.resolve('Hello Koa');\n\napp.use(async (ctx) => {\n  const data = await fetchData();\n  ctx.body = data;\n});\n```\n\n**æœ€ä½³å®žè·µ**ï¼š  \n- å°½é‡ç”¨ `async/await` å¤„ç†å¼‚æ­¥æ“ä½œï¼Œé¿å… Promise é“¾è¿‡é•¿ã€‚  \n- å¯¹äºŽå¹¶å‘ä»»åŠ¡ï¼Œå¯ä»¥ç»“åˆ `Promise.all`ã€‚\n\n```javascript\napp.use(async (ctx) => {\n  const [user, post] = await Promise.all([fetchUser(), fetchPost()]);\n  ctx.body = { user, post };\n});\n```\n\n**Tips**: å›žè°ƒåœ°ç‹±å°±åƒä¿„ç½—æ–¯å¥—å¨ƒï¼Œæ‰“å¼€ä¸€å±‚è¿˜æœ‰ä¸€å±‚ï¼›ç”¨ `async/await` å°±åƒç›´æŽ¥æ‹¿åˆ°æœ€é‡Œé¢çš„å¨ƒå¨ƒâ€”â€”çœå¿ƒï¼\n\n---\n\n## 3. è§„èŒƒåŒ–é”™è¯¯å¤„ç†ï¼Œåˆ«è®©ç”¨æˆ·çœ‹åˆ°â€œ500 Internal Server Errorâ€ ðŸ˜±\n\nKoa ä¸ä¼šè‡ªåŠ¨å¸®ä½ æ•èŽ·é”™è¯¯ï¼Œæ‰€ä»¥ä½ å¾—è‡ªå·±åŠ¨æ‰‹ã€‚\n\n```javascript\napp.use(async (ctx, next) => {\n  try {\n    await next();\n  } catch (err) {\n    ctx.status = err.status || 500;\n    ctx.body = { message: err.message || 'æœåŠ¡å™¨å¼€å°å·®äº†ï¼Œè¯·ç¨åŽå†è¯•' };\n    ctx.app.emit('error', err, ctx); // è§¦å‘å…¨å±€é”™è¯¯äº‹ä»¶\n  }\n});\n\napp.on('error', (err, ctx) => {\n  console.error('å…¨å±€é”™è¯¯:', err);\n});\n```\n\n**æœ€ä½³å®žè·µ**ï¼š  \n- åœ¨æœ€å¤–å±‚åŠ ä¸€ä¸ªé”™è¯¯å¤„ç†ä¸­é—´ä»¶ï¼Œç»Ÿä¸€æ•èŽ·ä¸‹æ¸¸é”™è¯¯ã€‚  \n- è¿”å›žå‹å¥½çš„é”™è¯¯ä¿¡æ¯ï¼Œåˆ«ç›´æŽ¥æŠŠå †æ ˆæŠ›ç»™ç”¨æˆ·â€”â€”ç”¨æˆ·ä¸æ˜¯æ¥å¸®ä½  debug çš„ã€‚\n\n**Tips**: å¥½çš„é”™è¯¯å¤„ç†å°±åƒç»™ç”¨æˆ·é€’ä¸Šä¸€æ¯çƒ­èŒ¶ï¼Œè€Œä¸æ˜¯æ³¼ä¸€ç›†å†·æ°´ã€‚\n\n---\n\n## 4. ç»“æž„åŒ–ä½ çš„è·¯ç”±ï¼Œåˆ«è®©ä»£ç å˜æˆâ€œæ„å¤§åˆ©é¢â€ ðŸ\n\nKoa æœ¬èº«ä¸å¸¦è·¯ç”±åŠŸèƒ½ï¼Œä½†å¯ä»¥ç”¨ `koa-router`ã€‚\n\n```javascript\nconst Router = require('koa-router');\nconst router = new Router();\n\nrouter.get('/users', async (ctx) => {\n  ctx.body = [{ id: 1, name: 'æ™“é¾™' }];\n});\n\napp.use(router.routes()).use(router.allowedMethods());\n```\n\n**æœ€ä½³å®žè·µ**ï¼š  \n- æŠŠè·¯ç”±æŒ‰åŠŸèƒ½æ¨¡å—æ‹†åˆ†ï¼Œæ¯”å¦‚ `users.js`ã€`posts.js`ï¼Œç„¶åŽåœ¨ä¸»æ–‡ä»¶ä¸­å¼•å…¥ã€‚  \n- ä½¿ç”¨ RESTful é£Žæ ¼ï¼Œä¿æŒ URL å¯è¯»æ€§ã€‚\n\n```javascript\n// routes/users.js\nconst Router = require('koa-router');\nconst router = new Router({ prefix: '/users' });\n\nrouter.get('/', async (ctx) => {\n  ctx.body = 'ç”¨æˆ·åˆ—è¡¨';\n});\n\nmodule.exports = router;\n```\n\n**Tips**: è·¯ç”±æ··ä¹±å°±åƒåŽ¨æˆ¿é‡Œç‚’èœä¸æ”¶æ‹¾ï¼Œæœ€åŽè¿žé”…éƒ½æ‰¾ä¸åˆ°äº†ã€‚\n\n---\n\n## 5. å‚æ•°æ ¡éªŒï¼šåˆ«ç›¸ä¿¡ç”¨æˆ·çš„è¾“å…¥ï¼Œä»–ä»¬å¯èƒ½æ˜¯â€œé”®ç›˜ä¾ â€ âŒ¨ï¸\n\nç”¨ `koa-joi-router` æˆ– `joi` æ¥æ ¡éªŒå‚æ•°ã€‚\n\n```javascript\nconst Joi = require('joi');\nconst router = require('koa-joi-router')();\n\nconst schema = Joi.object({\n  username: Joi.string().min(3).required(),\n});\n\nrouter.route({\n  method: 'post',\n  path: '/register',\n  validate: { body: schema },\n  handler: async (ctx) => {\n    ctx.body = 'æ³¨å†ŒæˆåŠŸ';\n  },\n});\n```\n\n**æœ€ä½³å®žè·µ**ï¼š  \n- åœ¨è¿›å…¥ä¸šåŠ¡é€»è¾‘å‰æ ¡éªŒå‚æ•°ï¼Œé¿å…è„æ•°æ®æµå…¥ã€‚  \n- è¿”å›žæ¸…æ™°çš„æ ¡éªŒé”™è¯¯ä¿¡æ¯ã€‚\n\n**Tips**: ç”¨æˆ·è¾“å…¥å°±åƒå¿«é€’åŒ…è£¹ï¼Œä¸æ£€æŸ¥å°±æ‹†å¼€ï¼Œé‡Œé¢å¯èƒ½æ˜¯â€œæƒŠå–œâ€ä¹Ÿå¯èƒ½æ˜¯â€œæƒŠå“â€ã€‚\n\n---\n\n## 6. æ—¥å¿—è®°å½•ï¼šç•™ä¸‹â€œçŠ¯ç½ªçŽ°åœºâ€çš„è¯æ® ðŸ“œ\n\nç”¨ `koa-logger` æˆ–è‡ªå®šä¹‰æ—¥å¿—ä¸­é—´ä»¶ã€‚\n\n```javascript\nconst logger = require('koa-logger');\napp.use(logger());\n```\n\n**è‡ªå®šä¹‰æ—¥å¿—**ï¼š\n```javascript\napp.use(async (ctx, next) => {\n  const start = Date.now();\n  await next();\n  const ms = Date.now() - start;\n  console.log(`${ctx.method} ${ctx.url} - ${ms}ms`);\n});\n```\n\n**æœ€ä½³å®žè·µ**ï¼š  \n- è®°å½•è¯·æ±‚æ—¶é—´ã€çŠ¶æ€ç å’Œå…³é”®æ“ä½œï¼Œä¾¿äºŽæŽ’æŸ¥é—®é¢˜ã€‚  \n- åœ¨ç”Ÿäº§çŽ¯å¢ƒç”¨æ–‡ä»¶æˆ–æœåŠ¡ï¼ˆå¦‚ Winstonï¼‰å­˜å‚¨æ—¥å¿—ã€‚\n\n**Tips**: æ²¡æœ‰æ—¥å¿—çš„æœåŠ¡å™¨å°±åƒæ²¡è£…ç›‘æŽ§çš„å®¶ï¼Œä¸¢äº†ä¸œè¥¿éƒ½ä¸çŸ¥é“è°å¹²çš„ã€‚\n\n---\n\n## 7. çŽ¯å¢ƒå˜é‡ç®¡ç†ï¼šè®©é…ç½®æ›´çµæ´»ï¼Œåˆ«ç¡¬ç¼–ç  ðŸ”§\n\nç”¨ `dotenv` åŠ è½½ `.env` æ–‡ä»¶ã€‚\n\n```javascript\nrequire('dotenv').config();\n\napp.listen(process.env.PORT || 3000);\n```\n\n**.env**:\n```\nPORT=4000\nDB_HOST=localhost\n```\n\n**æœ€ä½³å®žè·µ**ï¼š  \n- æŠŠæ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚æ•°æ®åº“å¯†ç ï¼‰æ”¾è¿›çŽ¯å¢ƒå˜é‡ã€‚  \n- ä¸ºä¸åŒçŽ¯å¢ƒï¼ˆå¼€å‘ã€ç”Ÿäº§ï¼‰å‡†å¤‡ä¸åŒçš„ `.env` æ–‡ä»¶ã€‚\n\n**Tips**: ç¡¬ç¼–ç å°±åƒæŠŠå®¶é—¨é’¥åŒ™åˆ»åœ¨é—¨ä¸Šï¼Œå®‰å…¨æ„Ÿçž¬é—´å½’é›¶ã€‚\n\n---\n\n## 8. åˆç†è®¾ç½®å“åº”å¤´ï¼Œåˆ«è®©æµè§ˆå™¨â€œçŒœæ‹³â€ ðŸŽ²\n\n```javascript\napp.use(async (ctx, next) => {\n  ctx.set('Content-Type', 'application/json');\n  ctx.set('Cache-Control', 'no-cache');\n  await next();\n});\n```\n\n**æœ€ä½³å®žè·µ**ï¼š  \n- æ ¹æ®è¿”å›žå†…å®¹è®¾ç½®æ­£ç¡®çš„ `Content-Type`ã€‚  \n- ç”¨ `ETag` æˆ– `Cache-Control` æŽ§åˆ¶ç¼“å­˜ã€‚\n\n**Tips**: å“åº”å¤´æ··ä¹±å°±åƒå¯„å¿«é€’ä¸å†™åœ°å€ï¼Œé€ä¸åˆ°è¿˜æ€ªå¿«é€’å‘˜ã€‚\n\n---\n\n## 9. é™æµå’Œé˜²åˆ·ï¼šåˆ«è®©çˆ¬è™«æŠŠä½ æœåŠ¡å™¨æ¦¨å¹² ðŸ•·ï¸\n\nç”¨ `koa-ratelimit`ã€‚\n\n```javascript\nconst ratelimit = require('koa-ratelimit');\napp.use(ratelimit({\n  driver: 'memory',\n  db: new Map(),\n  duration: 60000, // 1åˆ†é’Ÿ\n  max: 100, // æœ€å¤§è¯·æ±‚æ•°\n}));\n```\n\n**æœ€ä½³å®žè·µ**ï¼š  \n- å¯¹é«˜é¢‘æŽ¥å£åŠ é™æµï¼Œä¿æŠ¤æœåŠ¡å™¨èµ„æºã€‚  \n- é…åˆ IP é»‘åå•ï¼Œæ‹¦æˆªæ¶æ„è¯·æ±‚ã€‚\n\n**Tips**: ä¸é™æµå°±åƒè‡ªåŠ©é¤åŽ…ä¸è®¾ä¸Šé™ï¼Œæœ€åŽåŽ¨å¸ˆç´¯æ­»ä½ ä¹Ÿåƒä¸åˆ°ã€‚\n\n---\n\n## 10. ä½¿ç”¨ä¸Šä¸‹æ–‡ï¼ˆctxï¼‰é«˜æ•ˆä¼ é€’æ•°æ®ï¼Œåˆ«å…¨å±€å˜é‡ä¹±é£ž ðŸŒ\n\n```javascript\napp.use(async (ctx, next) => {\n  ctx.state.user = { id: 1, name: 'æ™“é¾™' };\n  await next();\n});\n\napp.use(async (ctx) => {\n  ctx.body = `æ¬¢è¿Ž, ${ctx.state.user.name}`;\n});\n```\n\n**æœ€ä½³å®žè·µ**ï¼š  \n- ç”¨ `ctx.state` åœ¨ä¸­é—´ä»¶é—´ä¼ é€’æ•°æ®ï¼Œé¿å…æ±¡æŸ“å…¨å±€ä½œç”¨åŸŸã€‚  \n- ä¿æŒæ•°æ®åªåœ¨å½“å‰è¯·æ±‚ç”Ÿå‘½å‘¨æœŸå†…æœ‰æ•ˆã€‚\n\n**Tips**: å…¨å±€å˜é‡å°±åƒå…¬å…±åŽ•æ‰€ï¼Œè°éƒ½èƒ½ç”¨ï¼Œä½†æ²¡äººçˆ±æ”¶æ‹¾ã€‚\n\n---\n\n## 11. æ•°æ®åº“æ“ä½œï¼šç”¨ ORMï¼Œåˆ«æ‰‹å†™ SQL ç´¯æˆç‹— ðŸ¶\n\nç”¨ `knex` æˆ– `sequelize`ã€‚\n\n```javascript\nconst knex = require('knex')({\n  client: 'mysql',\n  connection: process.env.DB_HOST,\n});\n\napp.use(async (ctx) => {\n  const users = await knex('users').select('*');\n  ctx.body = users;\n});\n```\n\n**æœ€ä½³å®žè·µ**ï¼š  \n- ç”¨ ORM æé«˜å¼€å‘æ•ˆçŽ‡ï¼Œé˜²æ­¢ SQL æ³¨å…¥ã€‚  \n- é…ç½®è¿žæŽ¥æ± ï¼Œé¿å…æ•°æ®åº“æŒ‚æŽ‰ã€‚\n\n**Tips**: æ‰‹å†™ SQL å°±åƒè‡ªå·±ç›–æˆ¿å­ï¼Œèƒ½ä½ä½†è´¹åŠ²ï¼Œä¸å¦‚è¯·ä¸ªè£…ä¿®é˜Ÿã€‚\n\n---\n\n## 12. å•å…ƒæµ‹è¯•ï¼šåˆ«ä¸Šçº¿åŽæ‰å‘çŽ°â€œæƒŠå–œâ€ ðŸŽ\n\nç”¨ `mocha` å’Œ `supertest`ã€‚\n\n```javascript\nconst request = require('supertest');\nconst app = require('./app');\n\ndescribe('GET /users', () => {\n  it('åº”è¯¥è¿”å›žç”¨æˆ·åˆ—è¡¨', async () => {\n    const res = await request(app.callback()).get('/users');\n    assert.equal(res.status, 200);\n    assert(Array.isArray(res.body));\n  });\n});\n```\n\n**æœ€ä½³å®žè·µ**ï¼š  \n- è¦†ç›–ä¸»è¦æŽ¥å£å’Œä¸­é—´ä»¶é€»è¾‘ã€‚  \n- åœ¨ CI/CD ä¸­è·‘æµ‹è¯•ã€‚\n\n**Tips**: ä¸å†™æµ‹è¯•å°±åƒä¸ç³»å®‰å…¨å¸¦ï¼Œç¿»è½¦äº†æ‰çŸ¥é“ç–¼ã€‚\n\n---\n\n## 13. ä¼˜é›…å…³é—­æœåŠ¡å™¨ï¼Œåˆ«è®©è¯·æ±‚â€œè£¸å¥”â€ ðŸƒâ€â™‚ï¸\n\n```javascript\nconst server = app.listen(3000);\n\nprocess.on('SIGTERM', () => {\n  server.close(() => {\n    console.log('æœåŠ¡å™¨ä¼˜é›…å…³é—­');\n    process.exit(0);\n  });\n});\n```\n\n**æœ€ä½³å®žè·µ**ï¼š  \n- å¤„ç†å®Œå½“å‰è¯·æ±‚å†å…³é—­æœåŠ¡å™¨ã€‚  \n- æ¸…ç†æ•°æ®åº“è¿žæŽ¥ç­‰èµ„æºã€‚\n\n**Tips**: ä¸ä¼˜é›…å…³é—­å°±åƒé¥­åƒä¸€åŠè·‘è·¯ï¼ŒæœåŠ¡å‘˜è¿˜å¾—å¸®ä½ æ”¶æ‹¾ã€‚\n\n---\n\n## 14. æ€§èƒ½ä¼˜åŒ–ï¼šåˆ«è®©ç”¨æˆ·ç­‰å¾—èŠ±å„¿éƒ½è°¢äº† ðŸŒ¸\n\nç”¨ `koa-static` æä¾›é™æ€èµ„æºã€‚\n\n```javascript\nconst serve = require('koa-static');\napp.use(serve('./public'));\n```\n\n**æœ€ä½³å®žè·µ**ï¼š  \n- åŽ‹ç¼©å“åº”ï¼ˆç”¨ `koa-compress`ï¼‰ã€‚  \n- ç”¨ CDN åŠ é€Ÿé™æ€èµ„æºã€‚\n\n**Tips**: æ…¢å¦‚èœ—ç‰›çš„æœåŠ¡å™¨å°±åƒç­‰äººå›žå¾®ä¿¡ï¼Œå¿ƒæ€¥ç«ç‡Žã€‚\n\n---\n\n## 15. å®‰å…¨é˜²æŠ¤ï¼šåˆ«è®©é»‘å®¢â€œè–…ç¾Šæ¯›â€ ðŸ‘\n\nç”¨ `koa-helmet` åŠ å›ºå®‰å…¨ã€‚\n\n```javascript\nconst helmet = require('koa-helmet');\napp.use(helmet());\n```\n\n**æœ€ä½³å®žè·µ**ï¼š  \n- è®¾ç½® CSPï¼ˆå†…å®¹å®‰å…¨ç­–ç•¥ï¼‰ã€‚  \n- é˜²æ­¢ XSS å’Œ CSRF æ”»å‡»ã€‚\n\n**Tips**: ä¸åŠ é˜²æŠ¤å°±åƒé—¨ä¸é”ï¼Œé»‘å®¢è¿›æ¥éšä¾¿æŒ‘ã€‚\n\n---\n\n## 16. ç›‘æŽ§å’Œå‘Šè­¦ï¼šåˆ«ç­‰ç”¨æˆ·æŠ•è¯‰æ‰çŸ¥é“ç‚¸äº† ðŸ’¥\n\nç”¨ `pm2` æˆ–è‡ªå®šä¹‰ç›‘æŽ§ã€‚\n\n```javascript\napp.use(async (ctx, next) => {\n  const start = Date.now();\n  await next();\n  const ms = Date.now() - start;\n  if (ms > 1000) console.warn('è¯·æ±‚è¶…1ç§’ï¼');\n});\n```\n\n**æœ€ä½³å®žè·µ**ï¼š  \n- ç›‘æŽ§å“åº”æ—¶é—´å’Œé”™è¯¯çŽ‡ã€‚  \n- è®¾ç½®å‘Šè­¦é€šçŸ¥ã€‚\n\n**Tips**: ä¸ç›‘æŽ§å°±åƒå¼€è½¦ä¸çœ‹ä»ªè¡¨ç›˜ï¼Œçˆ†èƒŽäº†éƒ½ä¸çŸ¥é“ã€‚\n\n---\n\n## 17. æ–‡æ¡£åŒ– APIï¼šåˆ«è®©å‰ç«¯è‡ªå·±çŒœå‚æ•° ðŸŽ­\n\nç”¨ `swagger` æˆ–æ‰‹å†™æ–‡æ¡£ã€‚\n\n```javascript\nrouter.get('/users', async (ctx) => {\n  ctx.body = { docs: 'GET /users è¿”å›žç”¨æˆ·åˆ—è¡¨' };\n});\n```\n\n**æœ€ä½³å®žè·µ**ï¼š  \n- ç”¨å·¥å…·ç”Ÿæˆ API æ–‡æ¡£ã€‚  \n- ä¿æŒæ–‡æ¡£å’Œä»£ç åŒæ­¥ã€‚\n\n**Tips**: æ²¡æ–‡æ¡£çš„ API å°±åƒæ²¡è¯´æ˜Žä¹¦çš„çŽ©å…·ï¼ŒçŽ©ä¸æ˜Žç™½è¿˜å¾—éª‚äººã€‚\n\n---\n\n## 18. æŒç»­å­¦ä¹ ç¤¾åŒºç”Ÿæ€ï¼Œåˆ«å½“â€œäº•åº•ä¹‹è›™â€ ðŸ¸\n\nKoa ç¤¾åŒºæœ‰å¾ˆå¤šä¼˜ç§€æ’ä»¶ï¼Œæ¯”å¦‚ `koa-bodyparser`ã€`koa-session`ã€‚\n\n**æœ€ä½³å®žè·µ**ï¼š  \n- å®šæœŸå…³æ³¨ GitHub å’Œ npmï¼Œè¯•ç”¨æ–°å·¥å…·ã€‚  \n- å‚ä¸Žç¤¾åŒºè®¨è®ºï¼Œåˆ†äº«ç»éªŒã€‚\n\n**Tips**: ä¸å­¦ä¹ å°±åƒç”¨è¯ºåŸºäºšæ‰“çŽ‹è€…è£è€€ï¼Œèƒ½çŽ©ä½†æ€»è¢«è™ã€‚\n\n---",
    "code": "var Component=(()=>{var p=Object.create;var c=Object.defineProperty;var E=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var F=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var u=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),B=(n,e)=>{for(var r in e)c(n,r,{get:e[r],enumerable:!0})},d=(n,e,r,s)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let a of y(e))!g.call(n,a)&&a!==r&&c(n,a,{get:()=>e[a],enumerable:!(s=E(e,a))||s.enumerable});return n};var x=(n,e,r)=>(r=n!=null?p(F(n)):{},d(e||!n||!n.__esModule?c(r,\"default\",{value:n,enumerable:!0}):r,n)),m=n=>d(c({},\"__esModule\",{value:!0}),n);var t=u((C,i)=>{i.exports=_jsx_runtime});var f={};B(f,{default:()=>h,frontmatter:()=>b});var l=x(t()),b={type:\"Post\",title:\"18\\u4E2A Koa.js \\u6700\\u4F73\\u5B9E\\u8DF5\\uFF1A\\u4ECE\\u5165\\u95E8\\u5230\\u88C5X\\u7684\\u8FDB\\u9636\\u6307\\u5357\",date:\"2024-10-02\",description:\"\\u6DF1\\u5165\\u5256\\u6790 Koa.js \\u7684 18 \\u4E2A\\u6700\\u4F73\\u5B9E\\u8DF5\\uFF0C\\u5E26\\u4F60\\u4ECE\\u57FA\\u7840\\u7528\\u6CD5\\u5230\\u9AD8\\u7EA7\\u6280\\u5DE7\\uFF0C\\u7ED3\\u5408\\u539F\\u7406\\u3001\\u5B9E\\u4F8B\\u548C\\u5E7D\\u9ED8\\u611F\\uFF0C\\u6253\\u9020\\u4F18\\u96C5\\u4E14\\u9AD8\\u6548\\u7684\\u540E\\u7AEF\\u670D\\u52A1\\u3002\",keywords:\"Koa.js, Node.js, \\u4E2D\\u95F4\\u4EF6, \\u5F02\\u6B65\\u7F16\\u7A0B, \\u9519\\u8BEF\\u5904\\u7406, RESTful API, \\u6027\\u80FD\\u4F18\\u5316, \\u524D\\u7AEF\\u5F00\\u53D1\",author:\"\\u6653\\u9F99\",image:\"/images/hero/koa-best-practices.jpg\",tags:[\"Koa.js\",\"Node.js\",\"\\u540E\\u7AEF\\u5F00\\u53D1\",\"JavaScript\"],category:\"Node.js\"};function o(n){let e={a:\"a\",code:\"code\",figure:\"figure\",h2:\"h2\",hr:\"hr\",li:\"li\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(e.p,{children:[\"Koa.js\\uFF0C\\u8FD9\\u4E2A\\u8F7B\\u91CF\\u53C8\\u4F18\\u96C5\\u7684 Node.js \\u6846\\u67B6\\uFF0C\\u5C31\\u50CF\\u4E00\\u8F86\\u6CA1\\u6709\\u591A\\u4F59\\u88C5\\u9970\\u7684\\u8DD1\\u8F66\\uFF1A\\u52A8\\u529B\\u5F3A\\u52B2\\uFF0C\\u4F46\\u4F60\\u5F97\\u81EA\\u5DF1\\u5B66\\u4F1A\\u8E29\\u6CB9\\u95E8\\u548C\\u6362\\u6321\\u3002\\u81EA\\u4ECE\\u88AB TJ Holowaychuk\\uFF08Express \\u7684\\u7F14\\u9020\\u8005\\uFF09\\u63A8\\u51FA\\u540E\\uFF0CKoa \\u51ED\\u501F\\u5176\\u7B80\\u6D01\\u7684\\u4E2D\\u95F4\\u4EF6\\u673A\\u5236\\u548C\\u5BF9 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"async/await\"})})})}),\" \\u7684\\u539F\\u751F\\u652F\\u6301\\uFF0C\\u6210\\u4E86\\u8BB8\\u591A\\u524D\\u7AEF\\u5F00\\u53D1\\u8005\\u7684\\u540E\\u7AEF\\u201C\\u65B0\\u6B22\\u201D\\u3002\\u4E0D\\u8FC7\\uFF0C\\u60F3\\u8981\\u5F00\\u597D\\u8FD9\\u8F86\\u8DD1\\u8F66\\uFF0C\\u5149\\u9760\\u76F4\\u89C9\\u53EF\\u4E0D\\u884C\\u2014\\u2014\\u4F60\\u9700\\u8981\\u4E00\\u4E9B\\u201C\\u9A7E\\u9A76\\u6280\\u5DE7\\u201D\\u3002\"]}),`\n`,(0,l.jsx)(e.p,{children:\"\\u8FD9\\u7BC7\\u6587\\u7AE0\\u5C06\\u5E26\\u4F60\\u8D70\\u8FDB Koa.js \\u7684\\u4E16\\u754C\\uFF0C\\u5206\\u4EAB 18 \\u4E2A\\u6700\\u4F73\\u5B9E\\u8DF5\\u3002\\u65E0\\u8BBA\\u662F\\u65B0\\u624B\\u8FD8\\u662F\\u8001\\u53F8\\u673A\\uFF0C\\u8FD9\\u4E9B\\u5EFA\\u8BAE\\u90FD\\u80FD\\u5E2E\\u4F60\\u5199\\u51FA\\u66F4\\u5065\\u58EE\\u3001\\u66F4\\u9AD8\\u6548\\u7684\\u540E\\u7AEF\\u4EE3\\u7801\\u3002\\u4ECE\\u4E2D\\u95F4\\u4EF6\\u7684\\u8BBE\\u8BA1\\u5230\\u9519\\u8BEF\\u5904\\u7406\\uFF0C\\u518D\\u5230\\u6027\\u80FD\\u4F18\\u5316\\uFF0C\\u6211\\u4F1A\\u6DF1\\u5165\\u539F\\u7406\\uFF0C\\u914D\\u4E0A\\u5B9E\\u4F8B\\uFF0C\\u751A\\u81F3\\u5076\\u5C14\\u6296\\u4E2A\\u673A\\u7075\\uFF08\\u522B\\u5ACC\\u6211\\u51B7\\u5E7D\\u9ED8\\uFF09\\u3002\\u51C6\\u5907\\u597D\\u4E86\\u5417\\uFF1F\\u7CFB\\u597D\\u5B89\\u5168\\u5E26\\uFF0C\\u54B1\\u4EEC\\u51FA\\u53D1\\uFF01\\u{1F697}\\u{1F4A8}\"}),`\n`,(0,l.jsx)(e.h2,{id:\"1-\\u5584\\u7528\\u4E2D\\u95F4\\u4EF6\\u6D0B\\u8471\\u6A21\\u578B\\u522B\\u8BA9\\u5B83\\u53D8\\u6210\\u6D0B\\u8471\\u70B8\\u5F39-\",children:(0,l.jsx)(e.a,{href:\"#1-\\u5584\\u7528\\u4E2D\\u95F4\\u4EF6\\u6D0B\\u8471\\u6A21\\u578B\\u522B\\u8BA9\\u5B83\\u53D8\\u6210\\u6D0B\\u8471\\u70B8\\u5F39-\",children:\"1. \\u5584\\u7528\\u4E2D\\u95F4\\u4EF6\\u6D0B\\u8471\\u6A21\\u578B\\uFF0C\\u522B\\u8BA9\\u5B83\\u53D8\\u6210\\u201C\\u6D0B\\u8471\\u70B8\\u5F39\\u201D \\u{1F4A3}\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"Koa \\u7684\\u6838\\u5FC3\\u662F\\u4E2D\\u95F4\\u4EF6\\u673A\\u5236\\uFF0C\\u57FA\\u4E8E\\u201C\\u6D0B\\u8471\\u6A21\\u578B\\u201D\\uFF1A\\u6BCF\\u4E2A\\u4E2D\\u95F4\\u4EF6\\u6309\\u987A\\u5E8F\\u6267\\u884C\\uFF0C\",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"next()\"})})})}),\" \\u63A7\\u5236\\u5411\\u4E0B\\u4F20\\u9012\\uFF0C\\u6267\\u884C\\u5B8C\\u518D\\u56DE\\u6EAF\\u3002\\u542C\\u8D77\\u6765\\u5F88\\u7F8E\\uFF0C\\u4F46\\u7528\\u4E0D\\u597D\\u5C31\\u5BB9\\u6613\\u70B8\\u3002\"]}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" Koa\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" require\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'koa'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" app\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" Koa\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"app.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"use\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"async\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"ctx\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"next\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  console.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u8FDB\\u5165\\u4E2D\\u95F4\\u4EF6 1'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  await\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" next\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  console.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u79BB\\u5F00\\u4E2D\\u95F4\\u4EF6 1'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"app.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"use\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"async\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"ctx\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"next\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  console.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u8FDB\\u5165\\u4E2D\\u95F4\\u4EF6 2'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  await\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" next\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  console.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u79BB\\u5F00\\u4E2D\\u95F4\\u4EF6 2'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"app.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"listen\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"3000\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"\\u8F93\\u51FA\"}),\"\\uFF1A\"]}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"\\u8FDB\\u5165\\u4E2D\\u95F4\\u4EF6 1  \"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"\\u8FDB\\u5165\\u4E2D\\u95F4\\u4EF6 2  \"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"\\u79BB\\u5F00\\u4E2D\\u95F4\\u4EF6 2  \"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"\\u79BB\\u5F00\\u4E2D\\u95F4\\u4EF6 1\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"\\u6700\\u4F73\\u5B9E\\u8DF5\"}),\"\\uFF1A\"]}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsx)(e.li,{children:\"\\u4FDD\\u6301\\u4E2D\\u95F4\\u4EF6\\u804C\\u8D23\\u5355\\u4E00\\uFF0C\\u522B\\u5728\\u4E00\\u4E2A\\u4E2D\\u95F4\\u4EF6\\u91CC\\u5E72\\u592A\\u591A\\u4E8B\\uFF0C\\u4E0D\\u7136\\u8C03\\u8BD5\\u8D77\\u6765\\u50CF\\u5265\\u6D0B\\u8471\\u2014\\u2014\\u6CEA\\u6D41\\u6EE1\\u9762\\u3002\"}),`\n`,(0,l.jsxs)(e.li,{children:[\"\\u786E\\u4FDD \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"next()\"})})})}),\" \\u88AB\\u6B63\\u786E\\u8C03\\u7528\\uFF0C\\u5426\\u5219\\u8BF7\\u6C42\\u4F1A\\u5361\\u4F4F\\uFF0C\\u50CF\\u5835\\u8F66\\u7684\\u9AD8\\u901F\\u516C\\u8DEF\\u3002\"]}),`\n`]}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"Tips\"}),\": \\u5982\\u679C\\u4F60\\u5FD8\\u4E86 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"await next()\"})})})}),\"\\uFF0C\\u8BF7\\u6C42\\u4F1A\\u76F4\\u63A5\\u8DF3\\u8FC7\\u540E\\u7EED\\u4E2D\\u95F4\\u4EF6\\uFF0C\\u50CF\\u662F\\u70B9\\u4E86\\u5916\\u5356\\u5374\\u5FD8\\u4E86\\u4ED8\\u94B1\\u2014\\u2014\\u670D\\u52A1\\u5458\\u76F4\\u63A5\\u8DD1\\u8DEF\\u4E86\\u3002\"]}),`\n`,(0,l.jsx)(e.hr,{}),`\n`,(0,l.jsx)(e.h2,{id:\"2-\\u7528-asyncawait-\\u4F18\\u96C5\\u5904\\u7406\\u5F02\\u6B65\\u522B\\u518D\\u56DE\\u8C03\\u5730\\u72F1\\u91CC\\u722C\\u884C-\\uFE0F\",children:(0,l.jsxs)(e.a,{href:\"#2-\\u7528-asyncawait-\\u4F18\\u96C5\\u5904\\u7406\\u5F02\\u6B65\\u522B\\u518D\\u56DE\\u8C03\\u5730\\u72F1\\u91CC\\u722C\\u884C-\\uFE0F\",children:[\"2. \\u7528 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"async/await\"})})})}),\" \\u4F18\\u96C5\\u5904\\u7406\\u5F02\\u6B65\\uFF0C\\u522B\\u518D\\u56DE\\u8C03\\u5730\\u72F1\\u91CC\\u722C\\u884C \\u{1F578}\\uFE0F\"]})}),`\n`,(0,l.jsxs)(e.p,{children:[\"Koa 2.x \\u5F00\\u59CB\\u629B\\u5F03\\u4E86 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"generator\"})})})}),\"\\uFF0C\\u5168\\u9762\\u62E5\\u62B1 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"async/await\"})})})}),\"\\uFF0C\\u8FD9\\u8BA9\\u5F02\\u6B65\\u4EE3\\u7801\\u53D8\\u5F97\\u50CF\\u5199\\u540C\\u6B65\\u4EE3\\u7801\\u4E00\\u6837\\u76F4\\u89C2\\u3002\"]}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" fetchData\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" Promise\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"resolve\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'Hello Koa'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"app.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"use\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"async\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"ctx\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" data\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" fetchData\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  ctx.body \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" data;\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"\\u6700\\u4F73\\u5B9E\\u8DF5\"}),\"\\uFF1A\"]}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsxs)(e.li,{children:[\"\\u5C3D\\u91CF\\u7528 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"async/await\"})})})}),\" \\u5904\\u7406\\u5F02\\u6B65\\u64CD\\u4F5C\\uFF0C\\u907F\\u514D Promise \\u94FE\\u8FC7\\u957F\\u3002\"]}),`\n`,(0,l.jsxs)(e.li,{children:[\"\\u5BF9\\u4E8E\\u5E76\\u53D1\\u4EFB\\u52A1\\uFF0C\\u53EF\\u4EE5\\u7ED3\\u5408 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"Promise.all\"})})})}),\"\\u3002\"]}),`\n`]}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"app.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"use\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"async\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"ctx\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" [\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"user\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"post\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" Promise\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"all\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"([\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"fetchUser\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(), \"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"fetchPost\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"()]);\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  ctx.body \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" { user, post };\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"Tips\"}),\": \\u56DE\\u8C03\\u5730\\u72F1\\u5C31\\u50CF\\u4FC4\\u7F57\\u65AF\\u5957\\u5A03\\uFF0C\\u6253\\u5F00\\u4E00\\u5C42\\u8FD8\\u6709\\u4E00\\u5C42\\uFF1B\\u7528 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"async/await\"})})})}),\" \\u5C31\\u50CF\\u76F4\\u63A5\\u62FF\\u5230\\u6700\\u91CC\\u9762\\u7684\\u5A03\\u5A03\\u2014\\u2014\\u7701\\u5FC3\\uFF01\"]}),`\n`,(0,l.jsx)(e.hr,{}),`\n`,(0,l.jsx)(e.h2,{id:\"3-\\u89C4\\u8303\\u5316\\u9519\\u8BEF\\u5904\\u7406\\u522B\\u8BA9\\u7528\\u6237\\u770B\\u5230500-internal-server-error-\",children:(0,l.jsx)(e.a,{href:\"#3-\\u89C4\\u8303\\u5316\\u9519\\u8BEF\\u5904\\u7406\\u522B\\u8BA9\\u7528\\u6237\\u770B\\u5230500-internal-server-error-\",children:\"3. \\u89C4\\u8303\\u5316\\u9519\\u8BEF\\u5904\\u7406\\uFF0C\\u522B\\u8BA9\\u7528\\u6237\\u770B\\u5230\\u201C500 Internal Server Error\\u201D \\u{1F631}\"})}),`\n`,(0,l.jsx)(e.p,{children:\"Koa \\u4E0D\\u4F1A\\u81EA\\u52A8\\u5E2E\\u4F60\\u6355\\u83B7\\u9519\\u8BEF\\uFF0C\\u6240\\u4EE5\\u4F60\\u5F97\\u81EA\\u5DF1\\u52A8\\u624B\\u3002\"}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"app.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"use\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"async\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"ctx\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"next\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  try\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    await\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" next\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  } \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"catch\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (err) {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    ctx.status \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" err.status \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"||\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 500\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    ctx.body \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" { message: err.message \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"||\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" '\\u670D\\u52A1\\u5668\\u5F00\\u5C0F\\u5DEE\\u4E86\\uFF0C\\u8BF7\\u7A0D\\u540E\\u518D\\u8BD5'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" };\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    ctx.app.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"emit\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'error'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", err, ctx); \"}),(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u89E6\\u53D1\\u5168\\u5C40\\u9519\\u8BEF\\u4E8B\\u4EF6\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"app.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"on\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'error'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"err\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"ctx\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  console.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"error\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u5168\\u5C40\\u9519\\u8BEF:'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", err);\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"\\u6700\\u4F73\\u5B9E\\u8DF5\"}),\"\\uFF1A\"]}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsx)(e.li,{children:\"\\u5728\\u6700\\u5916\\u5C42\\u52A0\\u4E00\\u4E2A\\u9519\\u8BEF\\u5904\\u7406\\u4E2D\\u95F4\\u4EF6\\uFF0C\\u7EDF\\u4E00\\u6355\\u83B7\\u4E0B\\u6E38\\u9519\\u8BEF\\u3002\"}),`\n`,(0,l.jsx)(e.li,{children:\"\\u8FD4\\u56DE\\u53CB\\u597D\\u7684\\u9519\\u8BEF\\u4FE1\\u606F\\uFF0C\\u522B\\u76F4\\u63A5\\u628A\\u5806\\u6808\\u629B\\u7ED9\\u7528\\u6237\\u2014\\u2014\\u7528\\u6237\\u4E0D\\u662F\\u6765\\u5E2E\\u4F60 debug \\u7684\\u3002\"}),`\n`]}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"Tips\"}),\": \\u597D\\u7684\\u9519\\u8BEF\\u5904\\u7406\\u5C31\\u50CF\\u7ED9\\u7528\\u6237\\u9012\\u4E0A\\u4E00\\u676F\\u70ED\\u8336\\uFF0C\\u800C\\u4E0D\\u662F\\u6CFC\\u4E00\\u76C6\\u51B7\\u6C34\\u3002\"]}),`\n`,(0,l.jsx)(e.hr,{}),`\n`,(0,l.jsx)(e.h2,{id:\"4-\\u7ED3\\u6784\\u5316\\u4F60\\u7684\\u8DEF\\u7531\\u522B\\u8BA9\\u4EE3\\u7801\\u53D8\\u6210\\u610F\\u5927\\u5229\\u9762-\",children:(0,l.jsx)(e.a,{href:\"#4-\\u7ED3\\u6784\\u5316\\u4F60\\u7684\\u8DEF\\u7531\\u522B\\u8BA9\\u4EE3\\u7801\\u53D8\\u6210\\u610F\\u5927\\u5229\\u9762-\",children:\"4. \\u7ED3\\u6784\\u5316\\u4F60\\u7684\\u8DEF\\u7531\\uFF0C\\u522B\\u8BA9\\u4EE3\\u7801\\u53D8\\u6210\\u201C\\u610F\\u5927\\u5229\\u9762\\u201D \\u{1F35D}\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"Koa \\u672C\\u8EAB\\u4E0D\\u5E26\\u8DEF\\u7531\\u529F\\u80FD\\uFF0C\\u4F46\\u53EF\\u4EE5\\u7528 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"koa-router\"})})})}),\"\\u3002\"]}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" Router\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" require\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'koa-router'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" router\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" Router\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"router.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"get\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'/users'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"async\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"ctx\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  ctx.body \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" [{ id: \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", name: \"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u6653\\u9F99'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" }];\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"app.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"use\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(router.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"routes\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"()).\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"use\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(router.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"allowedMethods\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"());\"})]})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"\\u6700\\u4F73\\u5B9E\\u8DF5\"}),\"\\uFF1A\"]}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsxs)(e.li,{children:[\"\\u628A\\u8DEF\\u7531\\u6309\\u529F\\u80FD\\u6A21\\u5757\\u62C6\\u5206\\uFF0C\\u6BD4\\u5982 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"users.js\"})})})}),\"\\u3001\",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"posts.js\"})})})}),\"\\uFF0C\\u7136\\u540E\\u5728\\u4E3B\\u6587\\u4EF6\\u4E2D\\u5F15\\u5165\\u3002\"]}),`\n`,(0,l.jsx)(e.li,{children:\"\\u4F7F\\u7528 RESTful \\u98CE\\u683C\\uFF0C\\u4FDD\\u6301 URL \\u53EF\\u8BFB\\u6027\\u3002\"}),`\n`]}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// routes/users.js\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" Router\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" require\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'koa-router'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" router\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" Router\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"({ prefix: \"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'/users'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" });\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"router.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"get\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'/'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"async\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"ctx\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  ctx.body \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" '\\u7528\\u6237\\u5217\\u8868'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"module\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"exports\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" router;\"})]})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"Tips\"}),\": \\u8DEF\\u7531\\u6DF7\\u4E71\\u5C31\\u50CF\\u53A8\\u623F\\u91CC\\u7092\\u83DC\\u4E0D\\u6536\\u62FE\\uFF0C\\u6700\\u540E\\u8FDE\\u9505\\u90FD\\u627E\\u4E0D\\u5230\\u4E86\\u3002\"]}),`\n`,(0,l.jsx)(e.hr,{}),`\n`,(0,l.jsx)(e.h2,{id:\"5-\\u53C2\\u6570\\u6821\\u9A8C\\u522B\\u76F8\\u4FE1\\u7528\\u6237\\u7684\\u8F93\\u5165\\u4ED6\\u4EEC\\u53EF\\u80FD\\u662F\\u952E\\u76D8\\u4FA0-\\uFE0F\",children:(0,l.jsx)(e.a,{href:\"#5-\\u53C2\\u6570\\u6821\\u9A8C\\u522B\\u76F8\\u4FE1\\u7528\\u6237\\u7684\\u8F93\\u5165\\u4ED6\\u4EEC\\u53EF\\u80FD\\u662F\\u952E\\u76D8\\u4FA0-\\uFE0F\",children:\"5. \\u53C2\\u6570\\u6821\\u9A8C\\uFF1A\\u522B\\u76F8\\u4FE1\\u7528\\u6237\\u7684\\u8F93\\u5165\\uFF0C\\u4ED6\\u4EEC\\u53EF\\u80FD\\u662F\\u201C\\u952E\\u76D8\\u4FA0\\u201D \\u2328\\uFE0F\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u7528 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"koa-joi-router\"})})})}),\" \\u6216 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"joi\"})})})}),\" \\u6765\\u6821\\u9A8C\\u53C2\\u6570\\u3002\"]}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" Joi\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" require\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'joi'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" router\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" require\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'koa-joi-router'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\")();\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" schema\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" Joi.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"object\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  username: Joi.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"string\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"().\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"min\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"3\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\").\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"required\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(),\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"router.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"route\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  method: \"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'post'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  path: \"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'/register'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  validate: { body: schema },\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"  handler\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"async\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"ctx\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    ctx.body \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" '\\u6CE8\\u518C\\u6210\\u529F'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  },\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"\\u6700\\u4F73\\u5B9E\\u8DF5\"}),\"\\uFF1A\"]}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsx)(e.li,{children:\"\\u5728\\u8FDB\\u5165\\u4E1A\\u52A1\\u903B\\u8F91\\u524D\\u6821\\u9A8C\\u53C2\\u6570\\uFF0C\\u907F\\u514D\\u810F\\u6570\\u636E\\u6D41\\u5165\\u3002\"}),`\n`,(0,l.jsx)(e.li,{children:\"\\u8FD4\\u56DE\\u6E05\\u6670\\u7684\\u6821\\u9A8C\\u9519\\u8BEF\\u4FE1\\u606F\\u3002\"}),`\n`]}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"Tips\"}),\": \\u7528\\u6237\\u8F93\\u5165\\u5C31\\u50CF\\u5FEB\\u9012\\u5305\\u88F9\\uFF0C\\u4E0D\\u68C0\\u67E5\\u5C31\\u62C6\\u5F00\\uFF0C\\u91CC\\u9762\\u53EF\\u80FD\\u662F\\u201C\\u60CA\\u559C\\u201D\\u4E5F\\u53EF\\u80FD\\u662F\\u201C\\u60CA\\u5413\\u201D\\u3002\"]}),`\n`,(0,l.jsx)(e.hr,{}),`\n`,(0,l.jsx)(e.h2,{id:\"6-\\u65E5\\u5FD7\\u8BB0\\u5F55\\u7559\\u4E0B\\u72AF\\u7F6A\\u73B0\\u573A\\u7684\\u8BC1\\u636E-\",children:(0,l.jsx)(e.a,{href:\"#6-\\u65E5\\u5FD7\\u8BB0\\u5F55\\u7559\\u4E0B\\u72AF\\u7F6A\\u73B0\\u573A\\u7684\\u8BC1\\u636E-\",children:\"6. \\u65E5\\u5FD7\\u8BB0\\u5F55\\uFF1A\\u7559\\u4E0B\\u201C\\u72AF\\u7F6A\\u73B0\\u573A\\u201D\\u7684\\u8BC1\\u636E \\u{1F4DC}\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u7528 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"koa-logger\"})})})}),\" \\u6216\\u81EA\\u5B9A\\u4E49\\u65E5\\u5FD7\\u4E2D\\u95F4\\u4EF6\\u3002\"]}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" logger\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" require\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'koa-logger'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"app.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"use\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"logger\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"());\"})]})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"\\u81EA\\u5B9A\\u4E49\\u65E5\\u5FD7\"}),\"\\uFF1A\"]}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"app.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"use\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"async\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"ctx\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"next\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" start\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" Date.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"now\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  await\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" next\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" ms\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" Date.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"now\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"() \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" start;\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  console.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"`${\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"ctx\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"method\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"} ${\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"ctx\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"url\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"} - ${\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"ms\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"}ms`\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"\\u6700\\u4F73\\u5B9E\\u8DF5\"}),\"\\uFF1A\"]}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsx)(e.li,{children:\"\\u8BB0\\u5F55\\u8BF7\\u6C42\\u65F6\\u95F4\\u3001\\u72B6\\u6001\\u7801\\u548C\\u5173\\u952E\\u64CD\\u4F5C\\uFF0C\\u4FBF\\u4E8E\\u6392\\u67E5\\u95EE\\u9898\\u3002\"}),`\n`,(0,l.jsx)(e.li,{children:\"\\u5728\\u751F\\u4EA7\\u73AF\\u5883\\u7528\\u6587\\u4EF6\\u6216\\u670D\\u52A1\\uFF08\\u5982 Winston\\uFF09\\u5B58\\u50A8\\u65E5\\u5FD7\\u3002\"}),`\n`]}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"Tips\"}),\": \\u6CA1\\u6709\\u65E5\\u5FD7\\u7684\\u670D\\u52A1\\u5668\\u5C31\\u50CF\\u6CA1\\u88C5\\u76D1\\u63A7\\u7684\\u5BB6\\uFF0C\\u4E22\\u4E86\\u4E1C\\u897F\\u90FD\\u4E0D\\u77E5\\u9053\\u8C01\\u5E72\\u7684\\u3002\"]}),`\n`,(0,l.jsx)(e.hr,{}),`\n`,(0,l.jsx)(e.h2,{id:\"7-\\u73AF\\u5883\\u53D8\\u91CF\\u7BA1\\u7406\\u8BA9\\u914D\\u7F6E\\u66F4\\u7075\\u6D3B\\u522B\\u786C\\u7F16\\u7801-\",children:(0,l.jsx)(e.a,{href:\"#7-\\u73AF\\u5883\\u53D8\\u91CF\\u7BA1\\u7406\\u8BA9\\u914D\\u7F6E\\u66F4\\u7075\\u6D3B\\u522B\\u786C\\u7F16\\u7801-\",children:\"7. \\u73AF\\u5883\\u53D8\\u91CF\\u7BA1\\u7406\\uFF1A\\u8BA9\\u914D\\u7F6E\\u66F4\\u7075\\u6D3B\\uFF0C\\u522B\\u786C\\u7F16\\u7801 \\u{1F527}\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u7528 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"dotenv\"})})})}),\" \\u52A0\\u8F7D \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\".env\"})})})}),\" \\u6587\\u4EF6\\u3002\"]}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"require\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'dotenv'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\").\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"config\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"app.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"listen\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(process.env.\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"PORT\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" ||\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 3000\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\".env\"}),\":\"]}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"PORT=4000\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"DB_HOST=localhost\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"\\u6700\\u4F73\\u5B9E\\u8DF5\"}),\"\\uFF1A\"]}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsx)(e.li,{children:\"\\u628A\\u654F\\u611F\\u4FE1\\u606F\\uFF08\\u5982\\u6570\\u636E\\u5E93\\u5BC6\\u7801\\uFF09\\u653E\\u8FDB\\u73AF\\u5883\\u53D8\\u91CF\\u3002\"}),`\n`,(0,l.jsxs)(e.li,{children:[\"\\u4E3A\\u4E0D\\u540C\\u73AF\\u5883\\uFF08\\u5F00\\u53D1\\u3001\\u751F\\u4EA7\\uFF09\\u51C6\\u5907\\u4E0D\\u540C\\u7684 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\".env\"})})})}),\" \\u6587\\u4EF6\\u3002\"]}),`\n`]}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"Tips\"}),\": \\u786C\\u7F16\\u7801\\u5C31\\u50CF\\u628A\\u5BB6\\u95E8\\u94A5\\u5319\\u523B\\u5728\\u95E8\\u4E0A\\uFF0C\\u5B89\\u5168\\u611F\\u77AC\\u95F4\\u5F52\\u96F6\\u3002\"]}),`\n`,(0,l.jsx)(e.hr,{}),`\n`,(0,l.jsx)(e.h2,{id:\"8-\\u5408\\u7406\\u8BBE\\u7F6E\\u54CD\\u5E94\\u5934\\u522B\\u8BA9\\u6D4F\\u89C8\\u5668\\u731C\\u62F3-\",children:(0,l.jsx)(e.a,{href:\"#8-\\u5408\\u7406\\u8BBE\\u7F6E\\u54CD\\u5E94\\u5934\\u522B\\u8BA9\\u6D4F\\u89C8\\u5668\\u731C\\u62F3-\",children:\"8. \\u5408\\u7406\\u8BBE\\u7F6E\\u54CD\\u5E94\\u5934\\uFF0C\\u522B\\u8BA9\\u6D4F\\u89C8\\u5668\\u201C\\u731C\\u62F3\\u201D \\u{1F3B2}\"})}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"app.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"use\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"async\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"ctx\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"next\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  ctx.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"set\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'Content-Type'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'application/json'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  ctx.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"set\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'Cache-Control'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'no-cache'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  await\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" next\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"\\u6700\\u4F73\\u5B9E\\u8DF5\"}),\"\\uFF1A\"]}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsxs)(e.li,{children:[\"\\u6839\\u636E\\u8FD4\\u56DE\\u5185\\u5BB9\\u8BBE\\u7F6E\\u6B63\\u786E\\u7684 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"Content-Type\"})})})}),\"\\u3002\"]}),`\n`,(0,l.jsxs)(e.li,{children:[\"\\u7528 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"ETag\"})})})}),\" \\u6216 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"Cache-Control\"})})})}),\" \\u63A7\\u5236\\u7F13\\u5B58\\u3002\"]}),`\n`]}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"Tips\"}),\": \\u54CD\\u5E94\\u5934\\u6DF7\\u4E71\\u5C31\\u50CF\\u5BC4\\u5FEB\\u9012\\u4E0D\\u5199\\u5730\\u5740\\uFF0C\\u9001\\u4E0D\\u5230\\u8FD8\\u602A\\u5FEB\\u9012\\u5458\\u3002\"]}),`\n`,(0,l.jsx)(e.hr,{}),`\n`,(0,l.jsx)(e.h2,{id:\"9-\\u9650\\u6D41\\u548C\\u9632\\u5237\\u522B\\u8BA9\\u722C\\u866B\\u628A\\u4F60\\u670D\\u52A1\\u5668\\u69A8\\u5E72-\\uFE0F\",children:(0,l.jsx)(e.a,{href:\"#9-\\u9650\\u6D41\\u548C\\u9632\\u5237\\u522B\\u8BA9\\u722C\\u866B\\u628A\\u4F60\\u670D\\u52A1\\u5668\\u69A8\\u5E72-\\uFE0F\",children:\"9. \\u9650\\u6D41\\u548C\\u9632\\u5237\\uFF1A\\u522B\\u8BA9\\u722C\\u866B\\u628A\\u4F60\\u670D\\u52A1\\u5668\\u69A8\\u5E72 \\u{1F577}\\uFE0F\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u7528 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"koa-ratelimit\"})})})}),\"\\u3002\"]}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" ratelimit\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" require\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'koa-ratelimit'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"app.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"use\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"ratelimit\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  driver: \"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'memory'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  db: \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"new\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" Map\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(),\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  duration: \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"60000\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// 1\\u5206\\u949F\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  max: \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"100\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#6A737D\"},children:\"// \\u6700\\u5927\\u8BF7\\u6C42\\u6570\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"}));\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"\\u6700\\u4F73\\u5B9E\\u8DF5\"}),\"\\uFF1A\"]}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsx)(e.li,{children:\"\\u5BF9\\u9AD8\\u9891\\u63A5\\u53E3\\u52A0\\u9650\\u6D41\\uFF0C\\u4FDD\\u62A4\\u670D\\u52A1\\u5668\\u8D44\\u6E90\\u3002\"}),`\n`,(0,l.jsx)(e.li,{children:\"\\u914D\\u5408 IP \\u9ED1\\u540D\\u5355\\uFF0C\\u62E6\\u622A\\u6076\\u610F\\u8BF7\\u6C42\\u3002\"}),`\n`]}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"Tips\"}),\": \\u4E0D\\u9650\\u6D41\\u5C31\\u50CF\\u81EA\\u52A9\\u9910\\u5385\\u4E0D\\u8BBE\\u4E0A\\u9650\\uFF0C\\u6700\\u540E\\u53A8\\u5E08\\u7D2F\\u6B7B\\u4F60\\u4E5F\\u5403\\u4E0D\\u5230\\u3002\"]}),`\n`,(0,l.jsx)(e.hr,{}),`\n`,(0,l.jsx)(e.h2,{id:\"10-\\u4F7F\\u7528\\u4E0A\\u4E0B\\u6587ctx\\u9AD8\\u6548\\u4F20\\u9012\\u6570\\u636E\\u522B\\u5168\\u5C40\\u53D8\\u91CF\\u4E71\\u98DE-\",children:(0,l.jsx)(e.a,{href:\"#10-\\u4F7F\\u7528\\u4E0A\\u4E0B\\u6587ctx\\u9AD8\\u6548\\u4F20\\u9012\\u6570\\u636E\\u522B\\u5168\\u5C40\\u53D8\\u91CF\\u4E71\\u98DE-\",children:\"10. \\u4F7F\\u7528\\u4E0A\\u4E0B\\u6587\\uFF08ctx\\uFF09\\u9AD8\\u6548\\u4F20\\u9012\\u6570\\u636E\\uFF0C\\u522B\\u5168\\u5C40\\u53D8\\u91CF\\u4E71\\u98DE \\u{1F30D}\"})}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"app.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"use\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"async\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"ctx\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"next\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  ctx.state.user \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" { id: \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"1\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", name: \"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u6653\\u9F99'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" };\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  await\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" next\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"app.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"use\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"async\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"ctx\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  ctx.body \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\" `\\u6B22\\u8FCE, ${\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"ctx\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"state\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"user\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"name\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"}`\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"\\u6700\\u4F73\\u5B9E\\u8DF5\"}),\"\\uFF1A\"]}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsxs)(e.li,{children:[\"\\u7528 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"ctx.state\"})})})}),\" \\u5728\\u4E2D\\u95F4\\u4EF6\\u95F4\\u4F20\\u9012\\u6570\\u636E\\uFF0C\\u907F\\u514D\\u6C61\\u67D3\\u5168\\u5C40\\u4F5C\\u7528\\u57DF\\u3002\"]}),`\n`,(0,l.jsx)(e.li,{children:\"\\u4FDD\\u6301\\u6570\\u636E\\u53EA\\u5728\\u5F53\\u524D\\u8BF7\\u6C42\\u751F\\u547D\\u5468\\u671F\\u5185\\u6709\\u6548\\u3002\"}),`\n`]}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"Tips\"}),\": \\u5168\\u5C40\\u53D8\\u91CF\\u5C31\\u50CF\\u516C\\u5171\\u5395\\u6240\\uFF0C\\u8C01\\u90FD\\u80FD\\u7528\\uFF0C\\u4F46\\u6CA1\\u4EBA\\u7231\\u6536\\u62FE\\u3002\"]}),`\n`,(0,l.jsx)(e.hr,{}),`\n`,(0,l.jsx)(e.h2,{id:\"11-\\u6570\\u636E\\u5E93\\u64CD\\u4F5C\\u7528-orm\\u522B\\u624B\\u5199-sql-\\u7D2F\\u6210\\u72D7-\",children:(0,l.jsx)(e.a,{href:\"#11-\\u6570\\u636E\\u5E93\\u64CD\\u4F5C\\u7528-orm\\u522B\\u624B\\u5199-sql-\\u7D2F\\u6210\\u72D7-\",children:\"11. \\u6570\\u636E\\u5E93\\u64CD\\u4F5C\\uFF1A\\u7528 ORM\\uFF0C\\u522B\\u624B\\u5199 SQL \\u7D2F\\u6210\\u72D7 \\u{1F436}\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u7528 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"knex\"})})})}),\" \\u6216 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"sequelize\"})})})}),\"\\u3002\"]}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" knex\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" require\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'knex'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\")({\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  client: \"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'mysql'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  connection: process.env.\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"DB_HOST\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"app.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"use\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"async\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"ctx\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" users\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" knex\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'users'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\").\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"select\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'*'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  ctx.body \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" users;\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"\\u6700\\u4F73\\u5B9E\\u8DF5\"}),\"\\uFF1A\"]}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsx)(e.li,{children:\"\\u7528 ORM \\u63D0\\u9AD8\\u5F00\\u53D1\\u6548\\u7387\\uFF0C\\u9632\\u6B62 SQL \\u6CE8\\u5165\\u3002\"}),`\n`,(0,l.jsx)(e.li,{children:\"\\u914D\\u7F6E\\u8FDE\\u63A5\\u6C60\\uFF0C\\u907F\\u514D\\u6570\\u636E\\u5E93\\u6302\\u6389\\u3002\"}),`\n`]}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"Tips\"}),\": \\u624B\\u5199 SQL \\u5C31\\u50CF\\u81EA\\u5DF1\\u76D6\\u623F\\u5B50\\uFF0C\\u80FD\\u4F4F\\u4F46\\u8D39\\u52B2\\uFF0C\\u4E0D\\u5982\\u8BF7\\u4E2A\\u88C5\\u4FEE\\u961F\\u3002\"]}),`\n`,(0,l.jsx)(e.hr,{}),`\n`,(0,l.jsx)(e.h2,{id:\"12-\\u5355\\u5143\\u6D4B\\u8BD5\\u522B\\u4E0A\\u7EBF\\u540E\\u624D\\u53D1\\u73B0\\u60CA\\u559C-\",children:(0,l.jsx)(e.a,{href:\"#12-\\u5355\\u5143\\u6D4B\\u8BD5\\u522B\\u4E0A\\u7EBF\\u540E\\u624D\\u53D1\\u73B0\\u60CA\\u559C-\",children:\"12. \\u5355\\u5143\\u6D4B\\u8BD5\\uFF1A\\u522B\\u4E0A\\u7EBF\\u540E\\u624D\\u53D1\\u73B0\\u201C\\u60CA\\u559C\\u201D \\u{1F381}\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u7528 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"mocha\"})})})}),\" \\u548C \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"supertest\"})})})}),\"\\u3002\"]}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" request\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" require\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'supertest'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" app\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" require\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'./app'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"describe\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'GET /users'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", () \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"  it\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u5E94\\u8BE5\\u8FD4\\u56DE\\u7528\\u6237\\u5217\\u8868'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"async\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" res\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" request\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(app.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"callback\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"()).\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"get\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'/users'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    assert.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"equal\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(res.status, \"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"200\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"    assert\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(Array.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"isArray\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(res.body));\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  });\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"\\u6700\\u4F73\\u5B9E\\u8DF5\"}),\"\\uFF1A\"]}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsx)(e.li,{children:\"\\u8986\\u76D6\\u4E3B\\u8981\\u63A5\\u53E3\\u548C\\u4E2D\\u95F4\\u4EF6\\u903B\\u8F91\\u3002\"}),`\n`,(0,l.jsx)(e.li,{children:\"\\u5728 CI/CD \\u4E2D\\u8DD1\\u6D4B\\u8BD5\\u3002\"}),`\n`]}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"Tips\"}),\": \\u4E0D\\u5199\\u6D4B\\u8BD5\\u5C31\\u50CF\\u4E0D\\u7CFB\\u5B89\\u5168\\u5E26\\uFF0C\\u7FFB\\u8F66\\u4E86\\u624D\\u77E5\\u9053\\u75BC\\u3002\"]}),`\n`,(0,l.jsx)(e.hr,{}),`\n`,(0,l.jsx)(e.h2,{id:\"13-\\u4F18\\u96C5\\u5173\\u95ED\\u670D\\u52A1\\u5668\\u522B\\u8BA9\\u8BF7\\u6C42\\u88F8\\u5954-\\uFE0F\",children:(0,l.jsx)(e.a,{href:\"#13-\\u4F18\\u96C5\\u5173\\u95ED\\u670D\\u52A1\\u5668\\u522B\\u8BA9\\u8BF7\\u6C42\\u88F8\\u5954-\\uFE0F\",children:\"13. \\u4F18\\u96C5\\u5173\\u95ED\\u670D\\u52A1\\u5668\\uFF0C\\u522B\\u8BA9\\u8BF7\\u6C42\\u201C\\u88F8\\u5954\\u201D \\u{1F3C3}\\u200D\\u2642\\uFE0F\"})}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" server\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" app.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"listen\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"3000\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"process.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"on\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'SIGTERM'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", () \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  server.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"close\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(() \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    console.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u670D\\u52A1\\u5668\\u4F18\\u96C5\\u5173\\u95ED'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"    process.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"exit\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  });\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"\\u6700\\u4F73\\u5B9E\\u8DF5\"}),\"\\uFF1A\"]}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsx)(e.li,{children:\"\\u5904\\u7406\\u5B8C\\u5F53\\u524D\\u8BF7\\u6C42\\u518D\\u5173\\u95ED\\u670D\\u52A1\\u5668\\u3002\"}),`\n`,(0,l.jsx)(e.li,{children:\"\\u6E05\\u7406\\u6570\\u636E\\u5E93\\u8FDE\\u63A5\\u7B49\\u8D44\\u6E90\\u3002\"}),`\n`]}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"Tips\"}),\": \\u4E0D\\u4F18\\u96C5\\u5173\\u95ED\\u5C31\\u50CF\\u996D\\u5403\\u4E00\\u534A\\u8DD1\\u8DEF\\uFF0C\\u670D\\u52A1\\u5458\\u8FD8\\u5F97\\u5E2E\\u4F60\\u6536\\u62FE\\u3002\"]}),`\n`,(0,l.jsx)(e.hr,{}),`\n`,(0,l.jsx)(e.h2,{id:\"14-\\u6027\\u80FD\\u4F18\\u5316\\u522B\\u8BA9\\u7528\\u6237\\u7B49\\u5F97\\u82B1\\u513F\\u90FD\\u8C22\\u4E86-\",children:(0,l.jsx)(e.a,{href:\"#14-\\u6027\\u80FD\\u4F18\\u5316\\u522B\\u8BA9\\u7528\\u6237\\u7B49\\u5F97\\u82B1\\u513F\\u90FD\\u8C22\\u4E86-\",children:\"14. \\u6027\\u80FD\\u4F18\\u5316\\uFF1A\\u522B\\u8BA9\\u7528\\u6237\\u7B49\\u5F97\\u82B1\\u513F\\u90FD\\u8C22\\u4E86 \\u{1F338}\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u7528 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"koa-static\"})})})}),\" \\u63D0\\u4F9B\\u9759\\u6001\\u8D44\\u6E90\\u3002\"]}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" serve\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" require\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'koa-static'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"app.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"use\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"serve\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'./public'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"));\"})]})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"\\u6700\\u4F73\\u5B9E\\u8DF5\"}),\"\\uFF1A\"]}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsxs)(e.li,{children:[\"\\u538B\\u7F29\\u54CD\\u5E94\\uFF08\\u7528 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"koa-compress\"})})})}),\"\\uFF09\\u3002\"]}),`\n`,(0,l.jsx)(e.li,{children:\"\\u7528 CDN \\u52A0\\u901F\\u9759\\u6001\\u8D44\\u6E90\\u3002\"}),`\n`]}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"Tips\"}),\": \\u6162\\u5982\\u8717\\u725B\\u7684\\u670D\\u52A1\\u5668\\u5C31\\u50CF\\u7B49\\u4EBA\\u56DE\\u5FAE\\u4FE1\\uFF0C\\u5FC3\\u6025\\u706B\\u71CE\\u3002\"]}),`\n`,(0,l.jsx)(e.hr,{}),`\n`,(0,l.jsx)(e.h2,{id:\"15-\\u5B89\\u5168\\u9632\\u62A4\\u522B\\u8BA9\\u9ED1\\u5BA2\\u8585\\u7F8A\\u6BDB-\",children:(0,l.jsx)(e.a,{href:\"#15-\\u5B89\\u5168\\u9632\\u62A4\\u522B\\u8BA9\\u9ED1\\u5BA2\\u8585\\u7F8A\\u6BDB-\",children:\"15. \\u5B89\\u5168\\u9632\\u62A4\\uFF1A\\u522B\\u8BA9\\u9ED1\\u5BA2\\u201C\\u8585\\u7F8A\\u6BDB\\u201D \\u{1F411}\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u7528 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"koa-helmet\"})})})}),\" \\u52A0\\u56FA\\u5B89\\u5168\\u3002\"]}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" helmet\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" require\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'koa-helmet'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"app.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"use\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"helmet\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"());\"})]})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"\\u6700\\u4F73\\u5B9E\\u8DF5\"}),\"\\uFF1A\"]}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsx)(e.li,{children:\"\\u8BBE\\u7F6E CSP\\uFF08\\u5185\\u5BB9\\u5B89\\u5168\\u7B56\\u7565\\uFF09\\u3002\"}),`\n`,(0,l.jsx)(e.li,{children:\"\\u9632\\u6B62 XSS \\u548C CSRF \\u653B\\u51FB\\u3002\"}),`\n`]}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"Tips\"}),\": \\u4E0D\\u52A0\\u9632\\u62A4\\u5C31\\u50CF\\u95E8\\u4E0D\\u9501\\uFF0C\\u9ED1\\u5BA2\\u8FDB\\u6765\\u968F\\u4FBF\\u6311\\u3002\"]}),`\n`,(0,l.jsx)(e.hr,{}),`\n`,(0,l.jsx)(e.h2,{id:\"16-\\u76D1\\u63A7\\u548C\\u544A\\u8B66\\u522B\\u7B49\\u7528\\u6237\\u6295\\u8BC9\\u624D\\u77E5\\u9053\\u70B8\\u4E86-\",children:(0,l.jsx)(e.a,{href:\"#16-\\u76D1\\u63A7\\u548C\\u544A\\u8B66\\u522B\\u7B49\\u7528\\u6237\\u6295\\u8BC9\\u624D\\u77E5\\u9053\\u70B8\\u4E86-\",children:\"16. \\u76D1\\u63A7\\u548C\\u544A\\u8B66\\uFF1A\\u522B\\u7B49\\u7528\\u6237\\u6295\\u8BC9\\u624D\\u77E5\\u9053\\u70B8\\u4E86 \\u{1F4A5}\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u7528 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"pm2\"})})})}),\" \\u6216\\u81EA\\u5B9A\\u4E49\\u76D1\\u63A7\\u3002\"]}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"app.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"use\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"async\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"ctx\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"next\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" start\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" Date.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"now\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  await\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\" next\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" ms\"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" Date.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"now\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"() \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"-\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" start;\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"  if\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (ms \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\">\"}),(0,l.jsx)(e.span,{style:{color:\"#79B8FF\"},children:\" 1000\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") console.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"warn\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'\\u8BF7\\u6C42\\u8D851\\u79D2\\uFF01'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"\\u6700\\u4F73\\u5B9E\\u8DF5\"}),\"\\uFF1A\"]}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsx)(e.li,{children:\"\\u76D1\\u63A7\\u54CD\\u5E94\\u65F6\\u95F4\\u548C\\u9519\\u8BEF\\u7387\\u3002\"}),`\n`,(0,l.jsx)(e.li,{children:\"\\u8BBE\\u7F6E\\u544A\\u8B66\\u901A\\u77E5\\u3002\"}),`\n`]}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"Tips\"}),\": \\u4E0D\\u76D1\\u63A7\\u5C31\\u50CF\\u5F00\\u8F66\\u4E0D\\u770B\\u4EEA\\u8868\\u76D8\\uFF0C\\u7206\\u80CE\\u4E86\\u90FD\\u4E0D\\u77E5\\u9053\\u3002\"]}),`\n`,(0,l.jsx)(e.hr,{}),`\n`,(0,l.jsx)(e.h2,{id:\"17-\\u6587\\u6863\\u5316-api\\u522B\\u8BA9\\u524D\\u7AEF\\u81EA\\u5DF1\\u731C\\u53C2\\u6570-\",children:(0,l.jsx)(e.a,{href:\"#17-\\u6587\\u6863\\u5316-api\\u522B\\u8BA9\\u524D\\u7AEF\\u81EA\\u5DF1\\u731C\\u53C2\\u6570-\",children:\"17. \\u6587\\u6863\\u5316 API\\uFF1A\\u522B\\u8BA9\\u524D\\u7AEF\\u81EA\\u5DF1\\u731C\\u53C2\\u6570 \\u{1F3AD}\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"\\u7528 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"swagger\"})})})}),\" \\u6216\\u624B\\u5199\\u6587\\u6863\\u3002\"]}),`\n`,(0,l.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"router.\"}),(0,l.jsx)(e.span,{style:{color:\"#B392F0\"},children:\"get\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'/users'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"async\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFAB70\"},children:\"ctx\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"  ctx.body \"}),(0,l.jsx)(e.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" { docs: \"}),(0,l.jsx)(e.span,{style:{color:\"#9ECBFF\"},children:\"'GET /users \\u8FD4\\u56DE\\u7528\\u6237\\u5217\\u8868'\"}),(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\" };\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"\\u6700\\u4F73\\u5B9E\\u8DF5\"}),\"\\uFF1A\"]}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsx)(e.li,{children:\"\\u7528\\u5DE5\\u5177\\u751F\\u6210 API \\u6587\\u6863\\u3002\"}),`\n`,(0,l.jsx)(e.li,{children:\"\\u4FDD\\u6301\\u6587\\u6863\\u548C\\u4EE3\\u7801\\u540C\\u6B65\\u3002\"}),`\n`]}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"Tips\"}),\": \\u6CA1\\u6587\\u6863\\u7684 API \\u5C31\\u50CF\\u6CA1\\u8BF4\\u660E\\u4E66\\u7684\\u73A9\\u5177\\uFF0C\\u73A9\\u4E0D\\u660E\\u767D\\u8FD8\\u5F97\\u9A82\\u4EBA\\u3002\"]}),`\n`,(0,l.jsx)(e.hr,{}),`\n`,(0,l.jsx)(e.h2,{id:\"18-\\u6301\\u7EED\\u5B66\\u4E60\\u793E\\u533A\\u751F\\u6001\\u522B\\u5F53\\u4E95\\u5E95\\u4E4B\\u86D9-\",children:(0,l.jsx)(e.a,{href:\"#18-\\u6301\\u7EED\\u5B66\\u4E60\\u793E\\u533A\\u751F\\u6001\\u522B\\u5F53\\u4E95\\u5E95\\u4E4B\\u86D9-\",children:\"18. \\u6301\\u7EED\\u5B66\\u4E60\\u793E\\u533A\\u751F\\u6001\\uFF0C\\u522B\\u5F53\\u201C\\u4E95\\u5E95\\u4E4B\\u86D9\\u201D \\u{1F438}\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"Koa \\u793E\\u533A\\u6709\\u5F88\\u591A\\u4F18\\u79C0\\u63D2\\u4EF6\\uFF0C\\u6BD4\\u5982 \",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"koa-bodyparser\"})})})}),\"\\u3001\",(0,l.jsx)(e.span,{\"data-rehype-pretty-code-figure\":\"\",children:(0,l.jsx)(e.code,{\"data-language\":\"text\",\"data-theme\":\"github-dark\",children:(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{children:\"koa-session\"})})})}),\"\\u3002\"]}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"\\u6700\\u4F73\\u5B9E\\u8DF5\"}),\"\\uFF1A\"]}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsx)(e.li,{children:\"\\u5B9A\\u671F\\u5173\\u6CE8 GitHub \\u548C npm\\uFF0C\\u8BD5\\u7528\\u65B0\\u5DE5\\u5177\\u3002\"}),`\n`,(0,l.jsx)(e.li,{children:\"\\u53C2\\u4E0E\\u793E\\u533A\\u8BA8\\u8BBA\\uFF0C\\u5206\\u4EAB\\u7ECF\\u9A8C\\u3002\"}),`\n`]}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"Tips\"}),\": \\u4E0D\\u5B66\\u4E60\\u5C31\\u50CF\\u7528\\u8BFA\\u57FA\\u4E9A\\u6253\\u738B\\u8005\\u8363\\u8000\\uFF0C\\u80FD\\u73A9\\u4F46\\u603B\\u88AB\\u8650\\u3002\"]}),`\n`,(0,l.jsx)(e.hr,{})]})}function h(n={}){let{wrapper:e}=n.components||{};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(o,{...n})}):o(n)}return m(f);})();\n;return Component;"
  },
  "_id": "Node.js/18ä¸ªKoaæœ€ä½³å®žè·µ.mdx",
  "_raw": {
    "sourceFilePath": "Node.js/18ä¸ªKoaæœ€ä½³å®žè·µ.mdx",
    "sourceFileName": "18ä¸ªKoaæœ€ä½³å®žè·µ.mdx",
    "sourceFileDir": "Node.js",
    "contentType": "mdx",
    "flattenedPath": "Node.js/18ä¸ªKoaæœ€ä½³å®žè·µ"
  },
  "type": "Post",
  "url": "/blog/Node.js/18ä¸ªKoaæœ€ä½³å®žè·µ"
}