{
  "title": "SSR (æœåŠ¡ç«¯æ¸²æŸ“) è¯¦è§£ï¼šæ¦‚å¿µã€ä¼˜åŠ¿ä¸å®è·µ",
  "date": "2022-12-02T00:00:00.000Z",
  "description": "æœ¬æ–‡å…¨é¢ä»‹ç»äº†æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰çš„æ¦‚å¿µã€ä¼˜åŠ¿ã€å®ç°æ–¹æ³•åŠæœ€ä½³å®è·µï¼Œå¸¦ä½ æ·±å…¥äº†è§£ SSR åœ¨ç°ä»£ Web å¼€å‘ä¸­çš„åº”ç”¨ä¸æŒ‘æˆ˜ã€‚",
  "keywords": "SSR, æœåŠ¡ç«¯æ¸²æŸ“, React, Vue, Next.js, Nuxt.js, æ€§èƒ½ä¼˜åŒ–, å‰ç«¯å¼€å‘",
  "author": "æ™“é¾™",
  "image": "/images/hero/ssr-introduction.jpg",
  "tags": [
    "SSR",
    "å‰ç«¯å¼€å‘",
    "React",
    "Vue",
    "æ€§èƒ½ä¼˜åŒ–"
  ],
  "views": 0,
  "likes": 0,
  "category": "å‰ç«¯æŠ€æœ¯",
  "body": {
    "raw": "\nåœ¨æˆ‘å¤šå¹´çš„å‰ç«¯å¼€å‘ç”Ÿæ¶¯ä¸­ï¼ŒæœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰ä¸€ç›´æ˜¯ä¸€ä¸ªæ—¢è®©äººå…´å¥‹åˆå……æ»¡æŒ‘æˆ˜çš„æŠ€æœ¯ã€‚å®ƒä¸ä»…èƒ½æ˜¾è‘—æå‡åº”ç”¨æ€§èƒ½ï¼Œè¿˜èƒ½è§£å†³ SEO çš„ç—›ç‚¹ã€‚æœ¬æ–‡å°†ç»“åˆæˆ‘çš„å®æˆ˜ç»éªŒï¼Œæ·±å…¥æ¢è®¨ SSR çš„åº”ç”¨åœºæ™¯ã€å®ç°æ–¹æ¡ˆå’Œä¼˜åŒ–æŠ€å·§ã€‚\n\n## ä¸ºä»€ä¹ˆéœ€è¦ SSRï¼Ÿ\n\nè¿˜è®°å¾—æˆ‘ç¬¬ä¸€æ¬¡æ¥æ‰‹ä¸€ä¸ªç”µå•†é¡¹ç›®æ—¶ï¼Œé¢ä¸´ç€ä¸¥é‡çš„æ€§èƒ½é—®é¢˜ï¼šé¦–å±åŠ è½½éœ€è¦ 3s+ï¼Œæœç´¢å¼•æ“æ— æ³•æŠ“å–å•†å“ä¿¡æ¯ï¼Œç”¨æˆ·ä½“éªŒå’Œè½¬åŒ–ç‡éƒ½ä¸ç†æƒ³ã€‚é€šè¿‡å¼•å…¥ SSRï¼Œæˆ‘ä»¬å®ç°äº†ä»¥ä¸‹æ”¹è¿›ï¼š\n\n- é¦–å±åŠ è½½æ—¶é—´é™è‡³ 800ms\n- æœç´¢å¼•æ“æ”¶å½•é‡æå‡ 300%\n- ç§»åŠ¨ç«¯è½¬åŒ–ç‡æå‡ 25%\n\nè¿™è®©æˆ‘æ·±åˆ»ç†è§£äº† SSR çš„ä»·å€¼ã€‚æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¢è®¨å¦‚ä½•å®ç°è¿™äº›æ”¹è¿›ã€‚\n\n## SSR vs CSRï¼šå®æˆ˜å¯¹æ¯”\n\n| ç‰¹æ€§       | æœåŠ¡ç«¯æ¸²æŸ“ (SSR) | å®¢æˆ·ç«¯æ¸²æŸ“ (CSR) |\n| ---------- | ---------------- | ---------------- |\n| é¦–å±æ—¶é—´   | 0.8s - 1.5s      | 2s - 4s          |\n| æœåŠ¡å™¨å‹åŠ› | è¾ƒé«˜             | è¾ƒä½             |\n| SEO æ•ˆæœ   | ä¼˜ç§€             | è¾ƒå·®             |\n| å¼€å‘å¤æ‚åº¦ | ä¸­ç­‰             | ä½               |\n| ç»´æŠ¤æˆæœ¬   | è¾ƒé«˜             | è¾ƒä½             |\n\n> ğŸ’¡ æ•°æ®æ¥æºï¼šæŸç”µå•†å¹³å°åœ¨åŒ 11 æœŸé—´çš„æ€§èƒ½ç›‘æ§æ•°æ®\n\n## SSR å®æˆ˜æœ€ä½³å®è·µ\n\n### 1. Next.js æœåŠ¡ç«¯æ¸²æŸ“å®è·µ\n\nåœ¨ä¸€ä¸ªå¤§å‹ä¼ä¸šå®˜ç½‘é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ Next.js å®ç°äº†é«˜æ€§èƒ½çš„ SSR æ–¹æ¡ˆï¼š\n\n```javascript\n// pages/products/[category].js\nimport { useEffect, useState } from \"react\";\nimport { getProductList, getCategories } from \"@/api/products\";\n\nexport default function ProductList({ initialData, category }) {\n  const [products, setProducts] = useState(initialData);\n  const [loading, setLoading] = useState(false);\n\n  // å®¢æˆ·ç«¯æ•°æ®æ›´æ–°\n  useEffect(() => {\n    const updateProducts = async () => {\n      setLoading(true);\n      try {\n        const freshData = await getProductList(category);\n        setProducts(freshData);\n      } catch (error) {\n        console.error(\"Failed to fetch products:\", error);\n      }\n      setLoading(false);\n    };\n\n    // å®šæœŸæ›´æ–°å•†å“æ•°æ®\n    const timer = setInterval(updateProducts, 30000);\n    return () => clearInterval(timer);\n  }, [category]);\n\n  return (\n    <div className=\"product-list\">\n      <h1>{category} äº§å“åˆ—è¡¨</h1>\n      {loading && <LoadingSpinner />}\n      <div className=\"grid grid-cols-3 gap-4\">\n        {products.map((product) => (\n          <ProductCard key={product.id} {...product} />\n        ))}\n      </div>\n    </div>\n  );\n}\n\n// SSR æ•°æ®é¢„å–\nexport async function getServerSideProps({ params, req, res }) {\n  // å®ç°ç¼“å­˜ç­–ç•¥\n  res.setHeader(\n    \"Cache-Control\",\n    \"public, s-maxage=10, stale-while-revalidate=59\"\n  );\n\n  try {\n    const initialData = await getProductList(params.category);\n    return {\n      props: {\n        initialData,\n        category: params.category,\n      },\n    };\n  } catch (error) {\n    console.error(\"SSR data fetching failed:\", error);\n    return {\n      notFound: true,\n    };\n  }\n}\n```\n\n### 2. Nuxt.js æ€§èƒ½ä¼˜åŒ–å®è·µ\n\nåœ¨å¦ä¸€ä¸ªæ–°é—»èµ„è®¯ç½‘ç«™é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ Nuxt.js å®ç°äº†é«˜æ•ˆçš„ SSRï¼š\n\n```javascript\n// pages/news/_id.vue\n<template>\n  <div class=\"news-detail\">\n    <article v-if=\"news\">\n      <h1>{{ news.title }}</h1>\n      <div class=\"metadata\">\n        <span>{{ formatDate(news.publishDate) }}</span>\n        <span>{{ news.author }}</span>\n      </div>\n      <div v-html=\"news.content\" class=\"content\"></div>\n      <RelatedNews :tags=\"news.tags\" />\n    </article>\n    <ErrorPage v-else />\n  </div>\n</template>\n\n<script>\nimport { defineComponent } from 'vue';\nimport { useAsyncData, useFetch } from '@nuxtjs/composition-api';\n\nexport default defineComponent({\n  name: 'NewsDetail',\n\n  async asyncData({ params, $axios, error }) {\n    try {\n      // ä½¿ç”¨ Redis ç¼“å­˜çƒ­é—¨æ–°é—»\n      const cacheKey = `news:${params.id}`;\n      const cached = await $axios.$get(`/api/cache/${cacheKey}`);\n\n      if (cached) {\n        return { news: cached };\n      }\n\n      const news = await $axios.$get(`/api/news/${params.id}`);\n\n      // ç¼“å­˜çƒ­é—¨æ–°é—»\n      if (news.viewCount > 1000) {\n        await $axios.$post(`/api/cache/${cacheKey}`, news);\n      }\n\n      return { news };\n    } catch (err) {\n      error({ statusCode: 404, message: 'æ–°é—»ä¸å­˜åœ¨' });\n    }\n  },\n\n  head() {\n    return {\n      title: this.news?.title,\n      meta: [\n        {\n          hid: 'description',\n          name: 'description',\n          content: this.news?.summary\n        }\n      ]\n    };\n  }\n});\n</script>\n```\n\n## SSR æ€§èƒ½ä¼˜åŒ–å®æˆ˜\n\n### 1. æœåŠ¡ç«¯æ€§èƒ½ä¼˜åŒ–\n\nåœ¨ä¸€ä¸ªé«˜å¹¶å‘æ–°é—»ç½‘ç«™ä¸­ï¼Œæˆ‘ä»¬é‡‡ç”¨ä»¥ä¸‹ç­–ç•¥ä¼˜åŒ– SSR æ€§èƒ½ï¼š\n\n```javascript\n// server/cache.js\nimport Redis from \"ioredis\";\nimport LRU from \"lru-cache\";\n\n// å¤šçº§ç¼“å­˜ç­–ç•¥\nconst redis = new Redis();\nconst pageCache = new LRU({\n  max: 100, // æœ€å¤šç¼“å­˜100ä¸ªé¡µé¢\n  maxAge: 1000 * 60 * 5, // 5åˆ†é’Ÿè¿‡æœŸ\n});\n\nexport async function cacheMiddleware(req, res, next) {\n  const key = `page:${req.url}`;\n\n  // 1. æ£€æŸ¥å†…å­˜ç¼“å­˜\n  const cached = pageCache.get(key);\n  if (cached) {\n    return res.send(cached);\n  }\n\n  // 2. æ£€æŸ¥Redisç¼“å­˜\n  const redisCache = await redis.get(key);\n  if (redisCache) {\n    pageCache.set(key, redisCache);\n    return res.send(redisCache);\n  }\n\n  // 3. æ¸²æŸ“é¡µé¢å¹¶ç¼“å­˜\n  res.originalSend = res.send;\n  res.send = function (html) {\n    pageCache.set(key, html);\n    redis.set(key, html, \"EX\", 300); // 5åˆ†é’Ÿè¿‡æœŸ\n    res.originalSend(html);\n  };\n\n  next();\n}\n```\n\n### 2. å®¢æˆ·ç«¯æ€§èƒ½ä¼˜åŒ–\n\n```javascript\n// utils/hydration.js\nexport function progressiveHydration(component) {\n  if (typeof window === \"undefined\") return;\n\n  // 1. å»¶è¿Ÿéå…³é”®ç»„ä»¶çš„hydration\n  if (component.priority === \"low\") {\n    return new Promise((resolve) => {\n      requestIdleCallback(() => {\n        resolve(component);\n      });\n    });\n  }\n\n  // 2. å¯è§†åŒºåŸŸä¼˜å…ˆhydration\n  const observer = new IntersectionObserver(\n    (entries) => {\n      entries.forEach((entry) => {\n        if (entry.isIntersecting) {\n          component.hydrate();\n          observer.disconnect();\n        }\n      });\n    },\n    { rootMargin: \"50px\" }\n  );\n\n  observer.observe(component.el);\n}\n```\n\n## è¸©å‘è®°å½•ä¸è§£å†³æ–¹æ¡ˆ\n\n### 1. å†…å­˜æ³„æ¼é—®é¢˜\n\nåœ¨ä¸€ä¸ªé•¿æœŸè¿è¡Œçš„ SSR åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å‘ç°æœåŠ¡å™¨å†…å­˜å ç”¨æŒç»­å¢é•¿ã€‚æ’æŸ¥åå‘ç°æ˜¯å…¨å±€çŠ¶æ€æœªåŠæ—¶æ¸…ç†å¯¼è‡´çš„ï¼š\n\n```javascript\n// store/cleanup.js\nexport function setupStoreCleanup(store) {\n  if (process.server) {\n    // æ¯ä¸ªè¯·æ±‚ç»“æŸåæ¸…ç†çŠ¶æ€\n    return () => {\n      store.dispatch(\"resetState\");\n      global.__INITIAL_STATE__ = undefined;\n    };\n  }\n}\n```\n\n### 2. æœåŠ¡ç«¯æ•°æ®é¢„å–è¶…æ—¶\n\nè§£å†³æ–¹æ¡ˆï¼šå®ç°è¯·æ±‚è¶…æ—¶æ§åˆ¶å’Œé™çº§ç­–ç•¥\n\n```javascript\n// utils/fetch.js\nexport async function fetchWithTimeout(url, timeout = 3000) {\n  const controller = new AbortController();\n  const timeoutId = setTimeout(() => controller.abort(), timeout);\n\n  try {\n    const response = await fetch(url, {\n      signal: controller.signal,\n    });\n    clearTimeout(timeoutId);\n    return response;\n  } catch (error) {\n    if (error.name === \"AbortError\") {\n      // é™çº§ä¸ºå®¢æˆ·ç«¯æ¸²æŸ“\n      return {\n        props: {\n          fallback: true,\n          error: \"è¯·æ±‚è¶…æ—¶\",\n        },\n      };\n    }\n    throw error;\n  }\n}\n```\n\n## ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ä¼˜åŒ–\n\nåœ¨å®é™…éƒ¨ç½²ä¸­ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†ä»¥ä¸‹ç­–ç•¥æ¥ä¼˜åŒ– SSR åº”ç”¨çš„å¯ç”¨æ€§ï¼š\n\n1. **è´Ÿè½½å‡è¡¡**ï¼šä½¿ç”¨ Nginx å®ç°å¤šæœåŠ¡å™¨è´Ÿè½½å‡è¡¡\n2. **ç›‘æ§å‘Šè­¦**ï¼šæ¥å…¥ Prometheus + Grafana ç›‘æ§ç³»ç»Ÿ\n3. **æ—¥å¿—åˆ†æ**ï¼šä½¿ç”¨ ELK æ ˆè¿›è¡Œæ—¥å¿—æ”¶é›†å’Œåˆ†æ\n4. **å®¹å™¨åŒ–éƒ¨ç½²**ï¼šä½¿ç”¨ Docker + K8s å®ç°è‡ªåŠ¨æ‰©ç¼©å®¹\n\n## é€‚ç”¨åœºæ™¯åˆ†æ\n\n### æœ€é€‚åˆ SSR çš„åœºæ™¯\n\n- **å†…å®¹å¯†é›†å‹ç½‘ç«™**ï¼šæ–°é—»ã€åšå®¢ã€æ–‡æ¡£\n- **ç”µå•†å¹³å°**ï¼šå•†å“è¯¦æƒ…ã€æœç´¢ç»“æœé¡µ\n- **è¥é”€æ´»åŠ¨é¡µé¢**ï¼šç§’æ€ã€ä¿ƒé”€ä¸“é¢˜\n- **ä¼ä¸šå®˜ç½‘**ï¼šäº§å“ä»‹ç»ã€è§£å†³æ–¹æ¡ˆ\n\n### ä¸é€‚åˆ SSR çš„åœºæ™¯\n\n- **åå°ç®¡ç†ç³»ç»Ÿ**ï¼šäº¤äº’å¤æ‚ï¼Œå¯¹ SEO è¦æ±‚ä½\n- **åœ¨çº¿åä½œå·¥å…·**ï¼šå®æ—¶æ€§è¦æ±‚é«˜\n- **æ•°æ®å¯è§†åŒ–åº”ç”¨**ï¼šè®¡ç®—å¯†é›†ï¼Œæ¸²æŸ“å‹åŠ›å¤§\n\n## æ€»ç»“ä¸å±•æœ›\n\nç»è¿‡å¤šå¹´çš„å®è·µï¼Œæˆ‘è®¤ä¸º SSR ä¸æ˜¯é“¶å¼¹ï¼Œè€Œæ˜¯ä¸€ä¸ªéœ€è¦æ ¹æ®å…·ä½“åœºæ™¯æ¥æƒè¡¡çš„æŠ€æœ¯é€‰æ‹©ã€‚å®ƒèƒ½å¤Ÿå¾ˆå¥½åœ°è§£å†³é¦–å±æ€§èƒ½å’Œ SEO é—®é¢˜ï¼Œä½†ä¹Ÿå¸¦æ¥äº†æ›´é«˜çš„å¼€å‘å’Œè¿ç»´æˆæœ¬ã€‚\n\næœªæ¥ï¼Œéšç€ Edge SSRã€Islands Architecture ç­‰æ–°æŠ€æœ¯çš„å‘å±•ï¼ŒæœåŠ¡ç«¯æ¸²æŸ“çš„å®ç°æ–¹å¼ä¼šæ›´åŠ å¤šæ ·åŒ–ã€‚å»ºè®®å¼€å‘è€…åœ¨é€‰æ‹© SSR æ—¶ï¼Œè¦å……åˆ†è¯„ä¼°é¡¹ç›®éœ€æ±‚ï¼Œé€‰æ‹©åˆé€‚çš„æŠ€æœ¯æ–¹æ¡ˆï¼Œå¹¶åœ¨å®è·µä¸­ä¸æ–­ä¼˜åŒ–å’Œæ”¹è¿›ã€‚\n",
    "code": "var Component=(()=>{var p=Object.create;var s=Object.defineProperty;var E=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var F=Object.getPrototypeOf,B=Object.prototype.hasOwnProperty;var u=(e,l)=>()=>(l||e((l={exports:{}}).exports,l),l.exports),g=(e,l)=>{for(var r in l)s(e,r,{get:l[r],enumerable:!0})},o=(e,l,r,a)=>{if(l&&typeof l==\"object\"||typeof l==\"function\")for(let c of y(l))!B.call(e,c)&&c!==r&&s(e,c,{get:()=>l[c],enumerable:!(a=E(l,c))||a.enumerable});return e};var f=(e,l,r)=>(r=e!=null?p(F(e)):{},o(l||!e||!e.__esModule?s(r,\"default\",{value:e,enumerable:!0}):r,e)),m=e=>o(s({},\"__esModule\",{value:!0}),e);var d=u((A,i)=>{i.exports=_jsx_runtime});var C={};g(C,{default:()=>h,frontmatter:()=>S});var n=f(d()),S={type:\"Post\",title:\"SSR (\\u670D\\u52A1\\u7AEF\\u6E32\\u67D3) \\u8BE6\\u89E3\\uFF1A\\u6982\\u5FF5\\u3001\\u4F18\\u52BF\\u4E0E\\u5B9E\\u8DF5\",date:\"2022-12-02\",description:\"\\u672C\\u6587\\u5168\\u9762\\u4ECB\\u7ECD\\u4E86\\u670D\\u52A1\\u7AEF\\u6E32\\u67D3\\uFF08SSR\\uFF09\\u7684\\u6982\\u5FF5\\u3001\\u4F18\\u52BF\\u3001\\u5B9E\\u73B0\\u65B9\\u6CD5\\u53CA\\u6700\\u4F73\\u5B9E\\u8DF5\\uFF0C\\u5E26\\u4F60\\u6DF1\\u5165\\u4E86\\u89E3 SSR \\u5728\\u73B0\\u4EE3 Web \\u5F00\\u53D1\\u4E2D\\u7684\\u5E94\\u7528\\u4E0E\\u6311\\u6218\\u3002\",keywords:\"SSR, \\u670D\\u52A1\\u7AEF\\u6E32\\u67D3, React, Vue, Next.js, Nuxt.js, \\u6027\\u80FD\\u4F18\\u5316, \\u524D\\u7AEF\\u5F00\\u53D1\",author:\"\\u6653\\u9F99\",image:\"/images/hero/ssr-introduction.jpg\",tags:[\"SSR\",\"\\u524D\\u7AEF\\u5F00\\u53D1\",\"React\",\"Vue\",\"\\u6027\\u80FD\\u4F18\\u5316\"],category:\"\\u524D\\u7AEF\\u6280\\u672F\"};function t(e){let l={a:\"a\",blockquote:\"blockquote\",code:\"code\",figure:\"figure\",h2:\"h2\",h3:\"h3\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",table:\"table\",tbody:\"tbody\",td:\"td\",th:\"th\",thead:\"thead\",tr:\"tr\",ul:\"ul\",...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.p,{children:\"\\u5728\\u6211\\u591A\\u5E74\\u7684\\u524D\\u7AEF\\u5F00\\u53D1\\u751F\\u6DAF\\u4E2D\\uFF0C\\u670D\\u52A1\\u7AEF\\u6E32\\u67D3\\uFF08SSR\\uFF09\\u4E00\\u76F4\\u662F\\u4E00\\u4E2A\\u65E2\\u8BA9\\u4EBA\\u5174\\u594B\\u53C8\\u5145\\u6EE1\\u6311\\u6218\\u7684\\u6280\\u672F\\u3002\\u5B83\\u4E0D\\u4EC5\\u80FD\\u663E\\u8457\\u63D0\\u5347\\u5E94\\u7528\\u6027\\u80FD\\uFF0C\\u8FD8\\u80FD\\u89E3\\u51B3 SEO \\u7684\\u75DB\\u70B9\\u3002\\u672C\\u6587\\u5C06\\u7ED3\\u5408\\u6211\\u7684\\u5B9E\\u6218\\u7ECF\\u9A8C\\uFF0C\\u6DF1\\u5165\\u63A2\\u8BA8 SSR \\u7684\\u5E94\\u7528\\u573A\\u666F\\u3001\\u5B9E\\u73B0\\u65B9\\u6848\\u548C\\u4F18\\u5316\\u6280\\u5DE7\\u3002\"}),`\n`,(0,n.jsx)(l.h2,{id:\"\\u4E3A\\u4EC0\\u4E48\\u9700\\u8981-ssr\",children:(0,n.jsx)(l.a,{href:\"#\\u4E3A\\u4EC0\\u4E48\\u9700\\u8981-ssr\",children:\"\\u4E3A\\u4EC0\\u4E48\\u9700\\u8981 SSR\\uFF1F\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u8FD8\\u8BB0\\u5F97\\u6211\\u7B2C\\u4E00\\u6B21\\u63A5\\u624B\\u4E00\\u4E2A\\u7535\\u5546\\u9879\\u76EE\\u65F6\\uFF0C\\u9762\\u4E34\\u7740\\u4E25\\u91CD\\u7684\\u6027\\u80FD\\u95EE\\u9898\\uFF1A\\u9996\\u5C4F\\u52A0\\u8F7D\\u9700\\u8981 3s+\\uFF0C\\u641C\\u7D22\\u5F15\\u64CE\\u65E0\\u6CD5\\u6293\\u53D6\\u5546\\u54C1\\u4FE1\\u606F\\uFF0C\\u7528\\u6237\\u4F53\\u9A8C\\u548C\\u8F6C\\u5316\\u7387\\u90FD\\u4E0D\\u7406\\u60F3\\u3002\\u901A\\u8FC7\\u5F15\\u5165 SSR\\uFF0C\\u6211\\u4EEC\\u5B9E\\u73B0\\u4E86\\u4EE5\\u4E0B\\u6539\\u8FDB\\uFF1A\"}),`\n`,(0,n.jsxs)(l.ul,{children:[`\n`,(0,n.jsx)(l.li,{children:\"\\u9996\\u5C4F\\u52A0\\u8F7D\\u65F6\\u95F4\\u964D\\u81F3 800ms\"}),`\n`,(0,n.jsx)(l.li,{children:\"\\u641C\\u7D22\\u5F15\\u64CE\\u6536\\u5F55\\u91CF\\u63D0\\u5347 300%\"}),`\n`,(0,n.jsx)(l.li,{children:\"\\u79FB\\u52A8\\u7AEF\\u8F6C\\u5316\\u7387\\u63D0\\u5347 25%\"}),`\n`]}),`\n`,(0,n.jsx)(l.p,{children:\"\\u8FD9\\u8BA9\\u6211\\u6DF1\\u523B\\u7406\\u89E3\\u4E86 SSR \\u7684\\u4EF7\\u503C\\u3002\\u63A5\\u4E0B\\u6765\\uFF0C\\u8BA9\\u6211\\u4EEC\\u4E00\\u8D77\\u63A2\\u8BA8\\u5982\\u4F55\\u5B9E\\u73B0\\u8FD9\\u4E9B\\u6539\\u8FDB\\u3002\"}),`\n`,(0,n.jsx)(l.h2,{id:\"ssr-vs-csr\\u5B9E\\u6218\\u5BF9\\u6BD4\",children:(0,n.jsx)(l.a,{href:\"#ssr-vs-csr\\u5B9E\\u6218\\u5BF9\\u6BD4\",children:\"SSR vs CSR\\uFF1A\\u5B9E\\u6218\\u5BF9\\u6BD4\"})}),`\n`,(0,n.jsxs)(l.table,{children:[(0,n.jsx)(l.thead,{children:(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.th,{children:\"\\u7279\\u6027\"}),(0,n.jsx)(l.th,{children:\"\\u670D\\u52A1\\u7AEF\\u6E32\\u67D3 (SSR)\"}),(0,n.jsx)(l.th,{children:\"\\u5BA2\\u6237\\u7AEF\\u6E32\\u67D3 (CSR)\"})]})}),(0,n.jsxs)(l.tbody,{children:[(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.td,{children:\"\\u9996\\u5C4F\\u65F6\\u95F4\"}),(0,n.jsx)(l.td,{children:\"0.8s - 1.5s\"}),(0,n.jsx)(l.td,{children:\"2s - 4s\"})]}),(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.td,{children:\"\\u670D\\u52A1\\u5668\\u538B\\u529B\"}),(0,n.jsx)(l.td,{children:\"\\u8F83\\u9AD8\"}),(0,n.jsx)(l.td,{children:\"\\u8F83\\u4F4E\"})]}),(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.td,{children:\"SEO \\u6548\\u679C\"}),(0,n.jsx)(l.td,{children:\"\\u4F18\\u79C0\"}),(0,n.jsx)(l.td,{children:\"\\u8F83\\u5DEE\"})]}),(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.td,{children:\"\\u5F00\\u53D1\\u590D\\u6742\\u5EA6\"}),(0,n.jsx)(l.td,{children:\"\\u4E2D\\u7B49\"}),(0,n.jsx)(l.td,{children:\"\\u4F4E\"})]}),(0,n.jsxs)(l.tr,{children:[(0,n.jsx)(l.td,{children:\"\\u7EF4\\u62A4\\u6210\\u672C\"}),(0,n.jsx)(l.td,{children:\"\\u8F83\\u9AD8\"}),(0,n.jsx)(l.td,{children:\"\\u8F83\\u4F4E\"})]})]})]}),`\n`,(0,n.jsxs)(l.blockquote,{children:[`\n`,(0,n.jsx)(l.p,{children:\"\\u{1F4A1} \\u6570\\u636E\\u6765\\u6E90\\uFF1A\\u67D0\\u7535\\u5546\\u5E73\\u53F0\\u5728\\u53CC 11 \\u671F\\u95F4\\u7684\\u6027\\u80FD\\u76D1\\u63A7\\u6570\\u636E\"}),`\n`]}),`\n`,(0,n.jsx)(l.h2,{id:\"ssr-\\u5B9E\\u6218\\u6700\\u4F73\\u5B9E\\u8DF5\",children:(0,n.jsx)(l.a,{href:\"#ssr-\\u5B9E\\u6218\\u6700\\u4F73\\u5B9E\\u8DF5\",children:\"SSR \\u5B9E\\u6218\\u6700\\u4F73\\u5B9E\\u8DF5\"})}),`\n`,(0,n.jsx)(l.h3,{id:\"1-nextjs-\\u670D\\u52A1\\u7AEF\\u6E32\\u67D3\\u5B9E\\u8DF5\",children:(0,n.jsx)(l.a,{href:\"#1-nextjs-\\u670D\\u52A1\\u7AEF\\u6E32\\u67D3\\u5B9E\\u8DF5\",children:\"1. Next.js \\u670D\\u52A1\\u7AEF\\u6E32\\u67D3\\u5B9E\\u8DF5\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u5728\\u4E00\\u4E2A\\u5927\\u578B\\u4F01\\u4E1A\\u5B98\\u7F51\\u9879\\u76EE\\u4E2D\\uFF0C\\u6211\\u4EEC\\u4F7F\\u7528 Next.js \\u5B9E\\u73B0\\u4E86\\u9AD8\\u6027\\u80FD\\u7684 SSR \\u65B9\\u6848\\uFF1A\"}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// pages/products/[category].js\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" { useEffect, useState } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:' \"react\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" { getProductList, getCategories } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:' \"@/api/products\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"export\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" default\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" function\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" ProductList\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({ \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"initialData\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"category\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" }) {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" [\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"products\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"setProducts\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" useState\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(initialData);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" [\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"loading\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"setLoading\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"] \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" useState\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"false\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"  // \\u5BA2\\u6237\\u7AEF\\u6570\\u636E\\u66F4\\u65B0\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  useEffect\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(() \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" updateProducts\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" async\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"      setLoading\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"true\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      try\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"        const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" freshData\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" getProductList\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(category);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"        setProducts\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(freshData);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"catch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (error) {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"        console.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"error\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"Failed to fetch products:\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", error);\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      }\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"      setLoading\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"false\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    };\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"    // \\u5B9A\\u671F\\u66F4\\u65B0\\u5546\\u54C1\\u6570\\u636E\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" timer\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" setInterval\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(updateProducts, \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"30000\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    return\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" clearInterval\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(timer);\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }, [category]);\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  return\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    <\"}),(0,n.jsx)(l.span,{style:{color:\"#85E89D\"},children:\"div\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" className\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"product-list\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      <\"}),(0,n.jsx)(l.span,{style:{color:\"#85E89D\"},children:\"h1\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">{category} \\u4EA7\\u54C1\\u5217\\u8868</\"}),(0,n.jsx)(l.span,{style:{color:\"#85E89D\"},children:\"h1\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      {loading \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"&&\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" <\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"LoadingSpinner\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" />}\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      <\"}),(0,n.jsx)(l.span,{style:{color:\"#85E89D\"},children:\"div\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" className\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"grid grid-cols-3 gap-4\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"        {products.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"map\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"product\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"          <\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"ProductCard\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" key\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"{product.id} {\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"...\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"product} />\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"        ))}\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      </\"}),(0,n.jsx)(l.span,{style:{color:\"#85E89D\"},children:\"div\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    </\"}),(0,n.jsx)(l.span,{style:{color:\"#85E89D\"},children:\"div\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  );\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// SSR \\u6570\\u636E\\u9884\\u53D6\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"export\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" async\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" function\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" getServerSideProps\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({ \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"params\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"req\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"res\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" }) {\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"  // \\u5B9E\\u73B0\\u7F13\\u5B58\\u7B56\\u7565\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  res.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"setHeader\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'    \"Cache-Control\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'    \"public, s-maxage=10, stale-while-revalidate=59\"'})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  );\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  try\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" initialData\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" getProductList\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(params.category);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    return\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      props: {\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"        initialData,\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"        category: params.category,\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      },\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    };\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"catch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (error) {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    console.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"error\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"SSR data fetching failed:\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", error);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    return\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      notFound: \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"true\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    };\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsx)(l.h3,{id:\"2-nuxtjs-\\u6027\\u80FD\\u4F18\\u5316\\u5B9E\\u8DF5\",children:(0,n.jsx)(l.a,{href:\"#2-nuxtjs-\\u6027\\u80FD\\u4F18\\u5316\\u5B9E\\u8DF5\",children:\"2. Nuxt.js \\u6027\\u80FD\\u4F18\\u5316\\u5B9E\\u8DF5\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u5728\\u53E6\\u4E00\\u4E2A\\u65B0\\u95FB\\u8D44\\u8BAF\\u7F51\\u7AD9\\u9879\\u76EE\\u4E2D\\uFF0C\\u6211\\u4EEC\\u4F7F\\u7528 Nuxt.js \\u5B9E\\u73B0\\u4E86\\u9AD8\\u6548\\u7684 SSR\\uFF1A\"}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// pages/news/_id.vue\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),(0,n.jsx)(l.span,{style:{color:\"#85E89D\"},children:\"template\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  <\"}),(0,n.jsx)(l.span,{style:{color:\"#85E89D\"},children:\"div\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" class\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"news-detail\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    <\"}),(0,n.jsx)(l.span,{style:{color:\"#85E89D\"},children:\"article\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" v-if\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"news\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      <\"}),(0,n.jsx)(l.span,{style:{color:\"#85E89D\"},children:\"h1\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">{{ news.title }}</\"}),(0,n.jsx)(l.span,{style:{color:\"#85E89D\"},children:\"h1\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      <\"}),(0,n.jsx)(l.span,{style:{color:\"#85E89D\"},children:\"div\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" class\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"metadata\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"        <\"}),(0,n.jsx)(l.span,{style:{color:\"#85E89D\"},children:\"span\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">{{ \"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"formatDate\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(news.publishDate) }}</\"}),(0,n.jsx)(l.span,{style:{color:\"#85E89D\"},children:\"span\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"        <\"}),(0,n.jsx)(l.span,{style:{color:\"#85E89D\"},children:\"span\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">{{ news.author }}</\"}),(0,n.jsx)(l.span,{style:{color:\"#85E89D\"},children:\"span\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      </\"}),(0,n.jsx)(l.span,{style:{color:\"#85E89D\"},children:\"div\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      <\"}),(0,n.jsx)(l.span,{style:{color:\"#85E89D\"},children:\"div\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" v-html\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"news.content\"'}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" class\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"content\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"></\"}),(0,n.jsx)(l.span,{style:{color:\"#85E89D\"},children:\"div\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      <\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"RelatedNews\"}),(0,n.jsx)(l.span,{style:{color:\"#FDAEB7\",fontStyle:\"italic\"},children:' :tags=\"news.tags\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" />\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    </\"}),(0,n.jsx)(l.span,{style:{color:\"#85E89D\"},children:\"article\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    <\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"ErrorPage\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" v-else\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" />\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  </\"}),(0,n.jsx)(l.span,{style:{color:\"#85E89D\"},children:\"div\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"</\"}),(0,n.jsx)(l.span,{style:{color:\"#85E89D\"},children:\"template\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"<\"}),(0,n.jsx)(l.span,{style:{color:\"#85E89D\"},children:\"script\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"import { defineComponent } from 'vue';\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"import { useAsyncData, useFetch } from '@nuxtjs/composition-api';\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"export default defineComponent({\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  name: \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'NewsDetail'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  async \"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"asyncData\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({ params, $axios, error }) {\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    try {\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"      // \\u4F7F\\u7528 Redis \\u7F13\\u5B58\\u70ED\\u95E8\\u65B0\\u95FB\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" cacheKey\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\" `news:${\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"params\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"id\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"}`\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" cached\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" $axios.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"$get\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"`/api/cache/${\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"cacheKey\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"}`\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      if\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (cached) {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"        return\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" { news: cached };\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" news\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" $axios.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"$get\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"`/api/news/${\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"params\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"id\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"}`\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"      // \\u7F13\\u5B58\\u70ED\\u95E8\\u65B0\\u95FB\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      if\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (news.viewCount \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\">\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 1000\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"        await\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" $axios.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"$post\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"`/api/cache/${\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"cacheKey\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"}`\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", news);\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      return\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" { news };\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    } catch (err) {\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"      error\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({ \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"statusCode\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"404\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"message\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\": \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'\\u65B0\\u95FB\\u4E0D\\u5B58\\u5728'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" });\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  },\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  head() {\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    return {\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      title: \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".news?.title,\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      meta: [\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"        {\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"          hid: \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'description'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"          name: \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"'description'\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"          content: \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"this\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".news?.summary\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"        }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      ]\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    };\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"});\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"</\"}),(0,n.jsx)(l.span,{style:{color:\"#85E89D\"},children:\"script\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\">\"})]})]})})}),`\n`,(0,n.jsx)(l.h2,{id:\"ssr-\\u6027\\u80FD\\u4F18\\u5316\\u5B9E\\u6218\",children:(0,n.jsx)(l.a,{href:\"#ssr-\\u6027\\u80FD\\u4F18\\u5316\\u5B9E\\u6218\",children:\"SSR \\u6027\\u80FD\\u4F18\\u5316\\u5B9E\\u6218\"})}),`\n`,(0,n.jsx)(l.h3,{id:\"1-\\u670D\\u52A1\\u7AEF\\u6027\\u80FD\\u4F18\\u5316\",children:(0,n.jsx)(l.a,{href:\"#1-\\u670D\\u52A1\\u7AEF\\u6027\\u80FD\\u4F18\\u5316\",children:\"1. \\u670D\\u52A1\\u7AEF\\u6027\\u80FD\\u4F18\\u5316\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u5728\\u4E00\\u4E2A\\u9AD8\\u5E76\\u53D1\\u65B0\\u95FB\\u7F51\\u7AD9\\u4E2D\\uFF0C\\u6211\\u4EEC\\u91C7\\u7528\\u4EE5\\u4E0B\\u7B56\\u7565\\u4F18\\u5316 SSR \\u6027\\u80FD\\uFF1A\"}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// server/cache.js\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" Redis \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:' \"ioredis\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" LRU \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:' \"lru-cache\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u591A\\u7EA7\\u7F13\\u5B58\\u7B56\\u7565\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" redis\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" Redis\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" pageCache\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" LRU\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  max: \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"100\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \\u6700\\u591A\\u7F13\\u5B58100\\u4E2A\\u9875\\u9762\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  maxAge: \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"1000\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" *\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 60\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" *\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 5\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// 5\\u5206\\u949F\\u8FC7\\u671F\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"});\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"export\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" async\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" function\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" cacheMiddleware\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"req\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"res\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"next\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" key\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\" `page:${\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"req\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"url\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:\"}`\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"  // 1. \\u68C0\\u67E5\\u5185\\u5B58\\u7F13\\u5B58\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" cached\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" pageCache.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"get\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(key);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  if\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (cached) {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    return\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" res.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"send\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(cached);\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"  // 2. \\u68C0\\u67E5Redis\\u7F13\\u5B58\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" redisCache\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" redis.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"get\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(key);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  if\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (redisCache) {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    pageCache.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"set\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(key, redisCache);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    return\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" res.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"send\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(redisCache);\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"  // 3. \\u6E32\\u67D3\\u9875\\u9762\\u5E76\\u7F13\\u5B58\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  res.originalSend \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" res.send;\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  res.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"send\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" function\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"html\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    pageCache.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"set\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(key, html);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    redis.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"set\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(key, html, \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"EX\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"300\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"); \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// 5\\u5206\\u949F\\u8FC7\\u671F\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    res.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"originalSend\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(html);\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  };\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"  next\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsx)(l.h3,{id:\"2-\\u5BA2\\u6237\\u7AEF\\u6027\\u80FD\\u4F18\\u5316\",children:(0,n.jsx)(l.a,{href:\"#2-\\u5BA2\\u6237\\u7AEF\\u6027\\u80FD\\u4F18\\u5316\",children:\"2. \\u5BA2\\u6237\\u7AEF\\u6027\\u80FD\\u4F18\\u5316\"})}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// utils/hydration.js\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"export\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" function\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" progressiveHydration\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"component\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  if\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"typeof\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" window \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"===\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:' \"undefined\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"return\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"  // 1. \\u5EF6\\u8FDF\\u975E\\u5173\\u952E\\u7EC4\\u4EF6\\u7684hydration\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  if\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (component.priority \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"===\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:' \"low\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    return\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" Promise\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"resolve\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"      requestIdleCallback\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(() \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"        resolve\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(component);\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      });\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    });\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"  // 2. \\u53EF\\u89C6\\u533A\\u57DF\\u4F18\\u5148hydration\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" observer\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" IntersectionObserver\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    (\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"entries\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      entries.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"forEach\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"entry\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"        if\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (entry.isIntersecting) {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"          component.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"hydrate\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"          observer.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"disconnect\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"        }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      });\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    },\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    { rootMargin: \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"50px\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" }\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  );\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  observer.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"observe\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(component.el);\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsx)(l.h2,{id:\"\\u8E29\\u5751\\u8BB0\\u5F55\\u4E0E\\u89E3\\u51B3\\u65B9\\u6848\",children:(0,n.jsx)(l.a,{href:\"#\\u8E29\\u5751\\u8BB0\\u5F55\\u4E0E\\u89E3\\u51B3\\u65B9\\u6848\",children:\"\\u8E29\\u5751\\u8BB0\\u5F55\\u4E0E\\u89E3\\u51B3\\u65B9\\u6848\"})}),`\n`,(0,n.jsx)(l.h3,{id:\"1-\\u5185\\u5B58\\u6CC4\\u6F0F\\u95EE\\u9898\",children:(0,n.jsx)(l.a,{href:\"#1-\\u5185\\u5B58\\u6CC4\\u6F0F\\u95EE\\u9898\",children:\"1. \\u5185\\u5B58\\u6CC4\\u6F0F\\u95EE\\u9898\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u5728\\u4E00\\u4E2A\\u957F\\u671F\\u8FD0\\u884C\\u7684 SSR \\u5E94\\u7528\\u4E2D\\uFF0C\\u6211\\u4EEC\\u53D1\\u73B0\\u670D\\u52A1\\u5668\\u5185\\u5B58\\u5360\\u7528\\u6301\\u7EED\\u589E\\u957F\\u3002\\u6392\\u67E5\\u540E\\u53D1\\u73B0\\u662F\\u5168\\u5C40\\u72B6\\u6001\\u672A\\u53CA\\u65F6\\u6E05\\u7406\\u5BFC\\u81F4\\u7684\\uFF1A\"}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// store/cleanup.js\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"export\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" function\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" setupStoreCleanup\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"store\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  if\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (process.server) {\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"    // \\u6BCF\\u4E2A\\u8BF7\\u6C42\\u7ED3\\u675F\\u540E\\u6E05\\u7406\\u72B6\\u6001\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    return\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" () \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      store.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"dispatch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"resetState\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      global.__INITIAL_STATE__ \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" undefined\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    };\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsx)(l.h3,{id:\"2-\\u670D\\u52A1\\u7AEF\\u6570\\u636E\\u9884\\u53D6\\u8D85\\u65F6\",children:(0,n.jsx)(l.a,{href:\"#2-\\u670D\\u52A1\\u7AEF\\u6570\\u636E\\u9884\\u53D6\\u8D85\\u65F6\",children:\"2. \\u670D\\u52A1\\u7AEF\\u6570\\u636E\\u9884\\u53D6\\u8D85\\u65F6\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u89E3\\u51B3\\u65B9\\u6848\\uFF1A\\u5B9E\\u73B0\\u8BF7\\u6C42\\u8D85\\u65F6\\u63A7\\u5236\\u548C\\u964D\\u7EA7\\u7B56\\u7565\"}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",children:(0,n.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"github-dark\",style:{display:\"grid\"},children:[(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// utils/fetch.js\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"export\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" async\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" function\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" fetchWithTimeout\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"url\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"timeout\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" 3000\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" controller\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" new\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" AbortController\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" timeoutId\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" setTimeout\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(() \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" controller.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"abort\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(), timeout);\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"  try\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    const\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\" response\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\" await\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\" fetch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(url, {\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      signal: controller.signal,\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    });\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"    clearTimeout\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(timeoutId);\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    return\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" response;\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"catch\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (error) {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    if\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (error.name \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"===\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:' \"AbortError\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"      // \\u964D\\u7EA7\\u4E3A\\u5BA2\\u6237\\u7AEF\\u6E32\\u67D3\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"      return\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"        props: {\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"          fallback: \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"true\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"          error: \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"\\u8BF7\\u6C42\\u8D85\\u65F6\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"        },\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      };\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    }\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"    throw\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" error;\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsx)(l.h2,{id:\"\\u751F\\u4EA7\\u73AF\\u5883\\u90E8\\u7F72\\u4F18\\u5316\",children:(0,n.jsx)(l.a,{href:\"#\\u751F\\u4EA7\\u73AF\\u5883\\u90E8\\u7F72\\u4F18\\u5316\",children:\"\\u751F\\u4EA7\\u73AF\\u5883\\u90E8\\u7F72\\u4F18\\u5316\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u5728\\u5B9E\\u9645\\u90E8\\u7F72\\u4E2D\\uFF0C\\u6211\\u4EEC\\u91C7\\u7528\\u4E86\\u4EE5\\u4E0B\\u7B56\\u7565\\u6765\\u4F18\\u5316 SSR \\u5E94\\u7528\\u7684\\u53EF\\u7528\\u6027\\uFF1A\"}),`\n`,(0,n.jsxs)(l.ol,{children:[`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u8D1F\\u8F7D\\u5747\\u8861\"}),\"\\uFF1A\\u4F7F\\u7528 Nginx \\u5B9E\\u73B0\\u591A\\u670D\\u52A1\\u5668\\u8D1F\\u8F7D\\u5747\\u8861\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u76D1\\u63A7\\u544A\\u8B66\"}),\"\\uFF1A\\u63A5\\u5165 Prometheus + Grafana \\u76D1\\u63A7\\u7CFB\\u7EDF\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u65E5\\u5FD7\\u5206\\u6790\"}),\"\\uFF1A\\u4F7F\\u7528 ELK \\u6808\\u8FDB\\u884C\\u65E5\\u5FD7\\u6536\\u96C6\\u548C\\u5206\\u6790\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u5BB9\\u5668\\u5316\\u90E8\\u7F72\"}),\"\\uFF1A\\u4F7F\\u7528 Docker + K8s \\u5B9E\\u73B0\\u81EA\\u52A8\\u6269\\u7F29\\u5BB9\"]}),`\n`]}),`\n`,(0,n.jsx)(l.h2,{id:\"\\u9002\\u7528\\u573A\\u666F\\u5206\\u6790\",children:(0,n.jsx)(l.a,{href:\"#\\u9002\\u7528\\u573A\\u666F\\u5206\\u6790\",children:\"\\u9002\\u7528\\u573A\\u666F\\u5206\\u6790\"})}),`\n`,(0,n.jsx)(l.h3,{id:\"\\u6700\\u9002\\u5408-ssr-\\u7684\\u573A\\u666F\",children:(0,n.jsx)(l.a,{href:\"#\\u6700\\u9002\\u5408-ssr-\\u7684\\u573A\\u666F\",children:\"\\u6700\\u9002\\u5408 SSR \\u7684\\u573A\\u666F\"})}),`\n`,(0,n.jsxs)(l.ul,{children:[`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u5185\\u5BB9\\u5BC6\\u96C6\\u578B\\u7F51\\u7AD9\"}),\"\\uFF1A\\u65B0\\u95FB\\u3001\\u535A\\u5BA2\\u3001\\u6587\\u6863\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u7535\\u5546\\u5E73\\u53F0\"}),\"\\uFF1A\\u5546\\u54C1\\u8BE6\\u60C5\\u3001\\u641C\\u7D22\\u7ED3\\u679C\\u9875\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u8425\\u9500\\u6D3B\\u52A8\\u9875\\u9762\"}),\"\\uFF1A\\u79D2\\u6740\\u3001\\u4FC3\\u9500\\u4E13\\u9898\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u4F01\\u4E1A\\u5B98\\u7F51\"}),\"\\uFF1A\\u4EA7\\u54C1\\u4ECB\\u7ECD\\u3001\\u89E3\\u51B3\\u65B9\\u6848\"]}),`\n`]}),`\n`,(0,n.jsx)(l.h3,{id:\"\\u4E0D\\u9002\\u5408-ssr-\\u7684\\u573A\\u666F\",children:(0,n.jsx)(l.a,{href:\"#\\u4E0D\\u9002\\u5408-ssr-\\u7684\\u573A\\u666F\",children:\"\\u4E0D\\u9002\\u5408 SSR \\u7684\\u573A\\u666F\"})}),`\n`,(0,n.jsxs)(l.ul,{children:[`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u540E\\u53F0\\u7BA1\\u7406\\u7CFB\\u7EDF\"}),\"\\uFF1A\\u4EA4\\u4E92\\u590D\\u6742\\uFF0C\\u5BF9 SEO \\u8981\\u6C42\\u4F4E\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u5728\\u7EBF\\u534F\\u4F5C\\u5DE5\\u5177\"}),\"\\uFF1A\\u5B9E\\u65F6\\u6027\\u8981\\u6C42\\u9AD8\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"\\u6570\\u636E\\u53EF\\u89C6\\u5316\\u5E94\\u7528\"}),\"\\uFF1A\\u8BA1\\u7B97\\u5BC6\\u96C6\\uFF0C\\u6E32\\u67D3\\u538B\\u529B\\u5927\"]}),`\n`]}),`\n`,(0,n.jsx)(l.h2,{id:\"\\u603B\\u7ED3\\u4E0E\\u5C55\\u671B\",children:(0,n.jsx)(l.a,{href:\"#\\u603B\\u7ED3\\u4E0E\\u5C55\\u671B\",children:\"\\u603B\\u7ED3\\u4E0E\\u5C55\\u671B\"})}),`\n`,(0,n.jsx)(l.p,{children:\"\\u7ECF\\u8FC7\\u591A\\u5E74\\u7684\\u5B9E\\u8DF5\\uFF0C\\u6211\\u8BA4\\u4E3A SSR \\u4E0D\\u662F\\u94F6\\u5F39\\uFF0C\\u800C\\u662F\\u4E00\\u4E2A\\u9700\\u8981\\u6839\\u636E\\u5177\\u4F53\\u573A\\u666F\\u6765\\u6743\\u8861\\u7684\\u6280\\u672F\\u9009\\u62E9\\u3002\\u5B83\\u80FD\\u591F\\u5F88\\u597D\\u5730\\u89E3\\u51B3\\u9996\\u5C4F\\u6027\\u80FD\\u548C SEO \\u95EE\\u9898\\uFF0C\\u4F46\\u4E5F\\u5E26\\u6765\\u4E86\\u66F4\\u9AD8\\u7684\\u5F00\\u53D1\\u548C\\u8FD0\\u7EF4\\u6210\\u672C\\u3002\"}),`\n`,(0,n.jsx)(l.p,{children:\"\\u672A\\u6765\\uFF0C\\u968F\\u7740 Edge SSR\\u3001Islands Architecture \\u7B49\\u65B0\\u6280\\u672F\\u7684\\u53D1\\u5C55\\uFF0C\\u670D\\u52A1\\u7AEF\\u6E32\\u67D3\\u7684\\u5B9E\\u73B0\\u65B9\\u5F0F\\u4F1A\\u66F4\\u52A0\\u591A\\u6837\\u5316\\u3002\\u5EFA\\u8BAE\\u5F00\\u53D1\\u8005\\u5728\\u9009\\u62E9 SSR \\u65F6\\uFF0C\\u8981\\u5145\\u5206\\u8BC4\\u4F30\\u9879\\u76EE\\u9700\\u6C42\\uFF0C\\u9009\\u62E9\\u5408\\u9002\\u7684\\u6280\\u672F\\u65B9\\u6848\\uFF0C\\u5E76\\u5728\\u5B9E\\u8DF5\\u4E2D\\u4E0D\\u65AD\\u4F18\\u5316\\u548C\\u6539\\u8FDB\\u3002\"})]})}function h(e={}){let{wrapper:l}=e.components||{};return l?(0,n.jsx)(l,{...e,children:(0,n.jsx)(t,{...e})}):t(e)}return m(C);})();\n;return Component;"
  },
  "_id": "å‰ç«¯æŠ€æœ¯/SSR.mdx",
  "_raw": {
    "sourceFilePath": "å‰ç«¯æŠ€æœ¯/SSR.mdx",
    "sourceFileName": "SSR.mdx",
    "sourceFileDir": "å‰ç«¯æŠ€æœ¯",
    "contentType": "mdx",
    "flattenedPath": "å‰ç«¯æŠ€æœ¯/SSR"
  },
  "type": "Post",
  "url": "/blog/å‰ç«¯æŠ€æœ¯/SSR"
}